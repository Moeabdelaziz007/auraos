import{c as E,j as e,C as p,A as xe,a as g,u as ue,b as he,B as h,d as V,r as d,e as pe,f as ge,g as fe,R as P,h as f,i as j,k as w,l as F}from"./index-BV_oXJj9.js";import{u as $,S as je,H as ve}from"./header-KFQOFhpR.js";import{C as ye}from"./chat-widget-ndMGEDV2.js";import{P as Ne}from"./post-card-BaRYOimh.js";import{u as we}from"./useMutation-CQub-guN.js";import{B as y}from"./badge-T7TlEvDT.js";import{T as U,a as W,b as _,c as T}from"./tabs-BDCq7Etf.js";import{P as H}from"./progress-_gqAd8Jp.js";import{U as X,T as K,a as Q,L as ee,C as Y}from"./users-9xNWfldY.js";import{B as se}from"./brain-D52PNJFB.js";import{S as be}from"./settings-BcdVvmo5.js";import{H as te}from"./heart-CxqPDtuG.js";import{C as ke}from"./chart-column-DB33X4WE.js";import{C as Ae}from"./circle-alert-CT_U7kpT.js";import{C as Ce,Z as _e}from"./zap-B_46P5Vx.js";import{I as Te}from"./input-BlCgWzo0.js";import{S as Se}from"./search-Bz5QlO_7.js";import{S as J}from"./star-DBuoHJiK.js";import"./avatar-CL8PSgrs.js";import"./index-Cw2EPXxj.js";import"./index-BdQq_4o_.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=E("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=E("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=E("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pe=E("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=E("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ze=E("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=E("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=E("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ie=E("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Z=({value:c,max:t=100,className:i=""})=>{const n=Math.max(0,Math.min(100,c/t*100));return e.jsx("div",{className:`progress-bar ${i}`,role:"progressbar","aria-valuemin":0,"aria-valuemax":t,"aria-valuenow":c,children:e.jsx("div",{className:"fill",style:{width:`${n}%`}})})};function $e(){const{data:c,isLoading:t,isError:i,error:n}=$({queryKey:["/api/users/user-1/stats"],queryFn:async()=>{const a=await fetch("/api/users/user-1/stats",{headers:{"Cache-Control":"max-age=300"}});if(!a.ok)throw new Error("Failed to fetch stats");return a.json()},staleTime:3e5,cacheTime:6e5});if(t)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((a,s)=>e.jsx(p,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})},s))});if(i)return e.jsxs(xe,{variant:"destructive",className:"mt-4",children:[e.jsxs("p",{children:["Error: ",n instanceof Error?n.message:"An error occurred"]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"mt-2 px-4 py-2 bg-neon-green text-white rounded hover:bg-green-600 transition",children:"Retry"})]});const r=[{title:"Total Posts",value:c.totalPosts,change:c.totalPostsChange},{title:"Active Agents",value:c.activeAgents,change:c.activeAgentsChange},{title:"Engagement Rate",value:`${c.engagementRate}%`,change:null,visualization:e.jsx(Z,{value:c.engagementRate,max:100})},{title:"Automations Run",value:c.automationsRun,change:null,visualization:e.jsx(Z,{value:c.automationsRun,max:1e3})}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",role:"region","aria-label":"Statistics Overview",children:r.map((a,s)=>e.jsx(p,{className:"p-6 hover:shadow-lg transition-shadow",role:"article","aria-labelledby":`stat-title-${s}`,children:e.jsxs(g,{children:[e.jsx("h3",{id:`stat-title-${s}`,className:"text-lg font-semibold text-neon-green",children:a.title}),e.jsx("p",{className:"text-2xl font-bold text-medium-gray",children:a.value}),a.change&&e.jsx("p",{className:"text-sm text-muted",children:a.change}),a.visualization&&e.jsx("div",{className:"mt-4",children:a.visualization})]})},s))})}function Le({template:c,showActions:t=!1}){const{toast:i}=ue(),n=he(),r=we({mutationFn:async()=>(await V("POST",`/api/agent-templates/${c.id}/use`),V("POST","/api/user-agents",{userId:"user-1",templateId:c.id,name:c.name,config:c.config,isActive:!0})),onSuccess:()=>{n.invalidateQueries({queryKey:["/api/user-agents"]}),n.invalidateQueries({queryKey:["/api/agent-templates"]}),i({title:"Agent created!",description:`${c.name} has been added to your agents.`})},onError:()=>{i({title:"Error",description:"Failed to create agent. Please try again.",variant:"destructive"})}}),a=s=>{const o={Content:"from-blue-500 to-purple-500",Engagement:"from-green-500 to-teal-500",Analytics:"from-orange-500 to-red-500",default:"from-gray-500 to-gray-600"};return o[s]||o.default};return e.jsx(p,{className:"transition-all duration-200 hover:shadow-md cursor-pointer","data-testid":`agent-template-${c.id}`,children:e.jsx(g,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-8 h-8 bg-gradient-to-r ${a(c.category)} rounded-lg flex items-center justify-center flex-shrink-0`,children:e.jsx("i",{className:`${c.icon} text-white text-sm`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-foreground","data-testid":`text-name-${c.id}`,children:c.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3","data-testid":`text-description-${c.id}`,children:c.description}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[c.isPopular&&e.jsx(y,{variant:"default",className:"bg-primary/10 text-primary","data-testid":`badge-popular-${c.id}`,children:"Popular"}),e.jsx(y,{variant:"outline","data-testid":`badge-category-${c.id}`,children:c.category}),e.jsxs("span",{className:"text-xs text-muted-foreground","data-testid":`text-usage-${c.id}`,children:["Used ",c.usageCount.toLocaleString()," times"]})]}),t&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(h,{size:"sm",onClick:()=>r.mutate(),disabled:r.isPending,"data-testid":`button-use-${c.id}`,children:[e.jsx("i",{className:`fas ${r.isPending?"fa-spinner fa-spin":"fa-plus"} mr-1`}),r.isPending?"Creating...":"Use Template"]}),e.jsxs(h,{size:"sm",variant:"outline","data-testid":`button-preview-${c.id}`,children:[e.jsx("i",{className:"fas fa-eye mr-1"}),"Preview"]})]})]})]})})})}function De({userId:c}){const[t,i]=d.useState("monthly"),[n,r]=d.useState("overview"),{analytics:a,loading:s,refresh:o}=pe(t),{sessions:l,loading:x}=ge(),{history:m,loading:v}=fe({limit:100}),N=()=>{const b={analytics:a,sessions:l,history:m,exportedAt:new Date().toISOString()},C=new Blob([JSON.stringify(b,null,2)],{type:"application/json"}),S=URL.createObjectURL(C),A=document.createElement("a");A.href=S,A.download=`user-analytics-${t}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(S)};return s||x||v?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading analytics..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"User Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Comprehensive insights into user behavior and engagement"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:t,onChange:b=>i(b.target.value),className:"px-3 py-2 border rounded-md","aria-label":"Select analytics period",children:[e.jsx("option",{value:"daily",children:"Daily"}),e.jsx("option",{value:"weekly",children:"Weekly"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"yearly",children:"Yearly"})]}),e.jsxs(h,{onClick:o,variant:"outline",size:"sm",children:[e.jsx(P,{className:"h-4 w-4 mr-2"}),"Refresh"]}),e.jsxs(h,{onClick:N,variant:"outline",size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),e.jsxs(U,{value:n,onValueChange:r,children:[e.jsxs(W,{className:"grid w-full grid-cols-4",children:[e.jsx(_,{value:"overview",children:"Overview"}),e.jsx(_,{value:"behavior",children:"Behavior"}),e.jsx(_,{value:"sessions",children:"Sessions"}),e.jsx(_,{value:"history",children:"History"})]}),e.jsx(T,{value:"overview",className:"space-y-6",children:e.jsx(Re,{analytics:a,sessions:l,history:m})}),e.jsx(T,{value:"behavior",className:"space-y-6",children:e.jsx(qe,{analytics:a,history:m})}),e.jsx(T,{value:"sessions",className:"space-y-6",children:e.jsx(Be,{sessions:l})}),e.jsx(T,{value:"history",className:"space-y-6",children:e.jsx(Oe,{history:m})})]})]})}function Re({analytics:c,sessions:t,history:i}){const n=i.length,r=t.length,a=c?.stats?.averageSessionDuration||0,s=c?.stats?.errorRate||0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Total Actions"}),e.jsx(Ee,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:n.toLocaleString()}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",r," sessions"]})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Sessions"}),e.jsx(X,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average ",Math.round(a/1e3/60)," minutes"]})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Error Rate"}),e.jsx(Ie,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.toFixed(1),"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[i.filter(o=>!o.success).length," errors"]})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Retention"}),e.jsx(K,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(g,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[c?.stats?.retentionRate?.toFixed(1)||0,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"User retention rate"})]})]}),e.jsxs(p,{className:"col-span-1 md:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Most Used Features"}),e.jsx(w,{children:"Top features by usage count"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:c?.stats?.mostUsedFeatures?.slice(0,5).map((o,l)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium capitalize",children:o.feature}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[o.count," (",o.percentage.toFixed(1),"%)"]})]}),e.jsx(H,{value:o.percentage,className:"h-2"})]},o.feature))})})]}),e.jsxs(p,{className:"col-span-1 md:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Top Pages"}),e.jsx(w,{children:"Most visited pages"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:c?.stats?.topPages?.slice(0,5).map((o,l)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(y,{variant:"outline",children:l+1}),e.jsx("span",{className:"text-sm",children:o.page})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[o.visits," visits"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(o.averageTime/1e3),"s avg"]})]})]},o.page))})})]})]})}function qe({analytics:c,history:t}){const i=t.reduce((a,s)=>(a[s.action.type]=(a[s.action.type]||0)+1,a),{}),n=t.reduce((a,s)=>(a[s.action.category]=(a[s.action.category]||0)+1,a),{}),r=t.reduce((a,s)=>{const o=new Date(s.timestamp).getHours();return a[o]=(a[o]||0)+1,a},{});return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Action Types"}),e.jsx(w,{children:"Distribution of different action types"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(i).sort(([,a],[,s])=>s-a).slice(0,10).map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),e.jsx("span",{className:"text-sm capitalize",children:a.replace("_"," ")})]}),e.jsx(y,{variant:"secondary",children:s})]},a))})})]}),e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Action Categories"}),e.jsx(w,{children:"Distribution by category"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-3",children:Object.entries(n).sort(([,a],[,s])=>s-a).map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-secondary"}),e.jsx("span",{className:"text-sm capitalize",children:a})]}),e.jsx(y,{variant:"outline",children:s})]},a))})})]}),e.jsxs(p,{className:"col-span-1 lg:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Hourly Activity"}),e.jsx(w,{children:"User activity throughout the day"})]}),e.jsx(g,{children:e.jsx("div",{className:"grid grid-cols-12 gap-2",children:Array.from({length:24},(a,s)=>{const o=r[s]||0,l=Math.max(...Object.values(r)),x=l>0?o/l*100:0;return e.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[e.jsx("div",{className:"w-full bg-primary rounded-sm transition-all duration-300",style:{height:`${Math.max(x,5)}px`}}),e.jsx("span",{className:"text-xs text-muted-foreground",children:s.toString().padStart(2,"0")}),o>0&&e.jsx("span",{className:"text-xs font-medium",children:o})]},s)})})})]})]})}function Be({sessions:c}){const[t,i]=d.useState(null);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs(p,{className:"lg:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Sessions"}),e.jsx(w,{children:"Recent user sessions"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:c.slice(0,10).map(n=>e.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${t?.id===n.id?"bg-accent":"hover:bg-muted"}`,onClick:()=>i(n),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium",children:[new Date(n.startTime).toLocaleDateString()," ",new Date(n.startTime).toLocaleTimeString()]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[n.actions," actions ‚Ä¢ ",n.deviceInfo.platform]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(y,{variant:n.isActive?"default":"secondary",children:n.isActive?"Active":"Ended"}),n.duration&&e.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[Math.round(n.duration/1e3/60),"m"]})]})]})},n.id))})})]}),e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Session Details"}),e.jsx(w,{children:t?"Selected session information":"Select a session to view details"})]}),e.jsx(g,{children:t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Start Time"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(t.startTime).toLocaleString()})]}),t.endTime&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"End Time"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(t.endTime).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Duration"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.duration?`${Math.round(t.duration/1e3/60)} minutes`:"Ongoing"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Actions"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.actions})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Device"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.deviceInfo.platform})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Language"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.deviceInfo.language})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:"Screen Resolution"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:t.deviceInfo.screenResolution})]})]}):e.jsxs("div",{className:"text-center text-muted-foreground",children:[e.jsx(Me,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"Click on a session to view details"})]})})]})]})}function Oe({history:c}){const[t,i]=d.useState("all"),[n,r]=d.useState(""),a=c.filter(s=>{const o=t==="all"||s.action.category===t,l=s.action.description.toLowerCase().includes(n.toLowerCase());return o&&l});return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Category:"}),e.jsxs("select",{value:t,onChange:s=>i(s.target.value),className:"px-3 py-1 border rounded-md text-sm","aria-label":"Filter action categories",children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"authentication",children:"Authentication"}),e.jsx("option",{value:"content",children:"Content"}),e.jsx("option",{value:"social",children:"Social"}),e.jsx("option",{value:"workflow",children:"Workflow"}),e.jsx("option",{value:"ai",children:"AI"}),e.jsx("option",{value:"navigation",children:"Navigation"}),e.jsx("option",{value:"system",children:"System"})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Search:"}),e.jsx("input",{type:"text",value:n,onChange:s=>r(s.target.value),placeholder:"Search actions...",className:"px-3 py-1 border rounded-md text-sm"})]})]}),e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Action History"}),e.jsxs(w,{children:[a.length," of ",c.length," actions"]})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:a.slice(0,50).map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${s.success?"bg-green-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.action.description}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.action.type," ‚Ä¢ ",s.action.category,s.action.target&&` ‚Ä¢ ${s.action.target}`]}),s.errorMessage&&e.jsxs("div",{className:"text-sm text-red-600 mt-1",children:["Error: ",s.errorMessage]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:new Date(s.timestamp).toLocaleDateString()}),e.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(s.timestamp).toLocaleTimeString()}),s.duration&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.duration,"ms"]})]})]},s.id))})})]})]})}class R{static MIN_CONFIDENCE_THRESHOLD=.7;static LEARNING_WINDOW_DAYS=30;static async analyzeUserBehavior(t){try{const i=[],n=this.extractBehaviorPatterns(t,i),r=this.inferPreferences(t,i,n),a=this.identifyInterests(t,i),s=this.analyzePersonalityTraits(t,i);return{userId:t,preferences:r,behaviorPatterns:n,interests:a,personalityTraits:s,lastAnalyzed:new Date,mlModel:"v1.0",version:1}}catch(i){throw console.error("Error analyzing user behavior:",i),i}}static async generateRecommendations(t,i,n=10){try{const r=await this.getUserProfile(t),a=[];switch(i){case"content":a.push(...await this.recommendContent(t,r));break;case"feature":a.push(...await this.recommendFeatures(t,r));break;case"workflow":a.push(...await this.recommendWorkflows(t,r));break;case"agent":a.push(...await this.recommendAgents(t,r));break}return a.sort((s,o)=>o.score-s.score).slice(0,n)}catch(r){return console.error("Error generating recommendations:",r),[]}}static async learnFromFeedback(t,i,n,r){try{const a=await this.getUserProfile(t);await this.updatePreferencesFromFeedback(a,i,n,r),await this.retrainModel(t,a),await this.generateInsights(t,a)}catch(a){console.error("Error learning from feedback:",a)}}static async generateInsights(t,i){try{const n=i||await this.getUserProfile(t),r=[];return r.push(...await this.analyzeUsagePatterns(t,n)),r.push(...await this.detectPreferenceChanges(t,n)),r.push(...await this.identifyNewInterests(t,n)),r.push(...await this.detectBehaviorAnomalies(t,n)),r.filter(a=>a.confidence>.6)}catch(n){return console.error("Error generating insights:",n),[]}}static extractBehaviorPatterns(t,i){const n=[],r=this.extractTimePatterns(t,i);n.push(...r);const a=this.extractSequencePatterns(t,i);n.push(...a);const s=this.extractFrequencyPatterns(t,i);return n.push(...s),n}static extractTimePatterns(t,i){const n=[],r={};return i.forEach(a=>{const s=new Date(a.timestamp).getHours(),l=`${a.action.type}_hour_${s}`;r[l]||(r[l]=[]),r[l].push(s)}),Object.entries(r).forEach(([a,s])=>{if(s.length>=5){const[o,,l]=a.split("_"),x=parseInt(l);n.push({id:`time_${t}_${a}`,userId:t,pattern:`User typically performs ${o} at ${x}:00`,frequency:s.length,confidence:Math.min(s.length/20,1),timeOfDay:this.getTimeOfDay(x),lastSeen:new Date})}}),n}static extractSequencePatterns(t,i){const n=[],r={};for(let a=0;a<i.length-1;a++){const s=i[a].action.type,o=i[a+1].action.type,l=`${s}->${o}`;r[l]=(r[l]||0)+1}return Object.entries(r).forEach(([a,s])=>{s>=3&&n.push({id:`sequence_${t}_${a}`,userId:t,pattern:`User often follows ${a.split("->")[0]} with ${a.split("->")[1]}`,frequency:s,confidence:Math.min(s/10,1),lastSeen:new Date})}),n}static extractFrequencyPatterns(t,i){const n=[],r={};return i.forEach(a=>{const s=a.action.type;r[s]=(r[s]||0)+1}),Object.entries(r).forEach(([a,s])=>{s>=10&&n.push({id:`frequency_${t}_${a}`,userId:t,pattern:`User frequently performs ${a} (${s} times)`,frequency:s,confidence:Math.min(s/50,1),lastSeen:new Date})}),n}static inferPreferences(t,i,n){const r=[];n.forEach(s=>{s.confidence>this.MIN_CONFIDENCE_THRESHOLD&&r.push({id:`pref_${t}_${s.id}`,userId:t,category:"behavior",preference:s.pattern,confidence:s.confidence,lastUpdated:new Date,source:"behavioral",metadata:{patternId:s.id,frequency:s.frequency}})});const a={};return i.forEach(s=>{const o=s.action.category;a[o]=(a[o]||0)+1}),Object.entries(a).forEach(([s,o])=>{o>=5&&r.push({id:`pref_${t}_category_${s}`,userId:t,category:"interest",preference:`User is interested in ${s}`,confidence:Math.min(o/20,1),lastUpdated:new Date,source:"behavioral",metadata:{category:s,count:o}})}),r}static identifyInterests(t,i){const n=[],r={};return i.forEach(a=>{a.action.details?.tags&&a.action.details.tags.forEach(s=>{r[s]=(r[s]||0)+1}),a.action.targetType&&(r[a.action.targetType]=(r[a.action.targetType]||0)+1)}),Object.entries(r).forEach(([a,s])=>{s>=3&&n.push({id:`interest_${t}_${a}`,userId:t,topic:a,score:Math.min(s/10,1),category:"behavioral",sources:["user_actions"],lastUpdated:new Date})}),n}static analyzePersonalityTraits(t,i){const n=[],r=i.filter(l=>l.action.category==="social").length,a=i.filter(l=>l.action.category==="ai").length,s=i.filter(l=>l.action.category==="workflow").length,o=i.length;return r/o>.3&&n.push({trait:"Social",score:r/o,confidence:.8,evidence:[`${r} social interactions`]}),a/o>.4&&n.push({trait:"Tech-Savvy",score:a/o,confidence:.9,evidence:[`${a} AI interactions`]}),s/o>.2&&n.push({trait:"Efficiency-Focused",score:s/o,confidence:.7,evidence:[`${s} workflow interactions`]}),n}static async recommendContent(t,i){const n=[];return i.interests.forEach(r=>{r.score>.5&&n.push({id:`content_${t}_${r.topic}`,userId:t,type:"content",itemId:`content_${r.topic}`,title:`Content about ${r.topic}`,description:`Based on your interest in ${r.topic}`,score:r.score,reason:`You've shown interest in ${r.topic}`,category:r.category,createdAt:new Date})}),n}static async recommendFeatures(t,i){const n=[];return i.personalityTraits.forEach(r=>{r.trait==="Tech-Savvy"&&r.score>.5&&n.push({id:`feature_${t}_advanced_ai`,userId:t,type:"feature",itemId:"advanced_ai_tools",title:"Advanced AI Tools",description:"Advanced AI features for power users",score:r.score,reason:"You frequently use AI features",category:"ai",createdAt:new Date})}),n}static async recommendWorkflows(t,i){const n=[];return i.behaviorPatterns.forEach(r=>{r.frequency>5&&n.push({id:`workflow_${t}_${r.id}`,userId:t,type:"workflow",itemId:`workflow_${r.id}`,title:`Automated ${r.pattern}`,description:`Automate your frequent ${r.pattern}`,score:r.confidence,reason:`You frequently ${r.pattern}`,category:"automation",createdAt:new Date})}),n}static async recommendAgents(t,i){const n=[];return i.interests.forEach(r=>{r.score>.6&&n.push({id:`agent_${t}_${r.topic}`,userId:t,type:"agent",itemId:`agent_${r.topic}`,title:`${r.topic} Assistant`,description:`AI agent specialized in ${r.topic}`,score:r.score,reason:`You're interested in ${r.topic}`,category:r.category,createdAt:new Date})}),n}static async getUserProfile(t){return{userId:t,preferences:[],behaviorPatterns:[],interests:[],personalityTraits:[],lastAnalyzed:new Date,mlModel:"v1.0",version:1}}static async updatePreferencesFromFeedback(t,i,n,r){t.preferences.filter(s=>s.metadata?.itemId===i).forEach(s=>{n==="positive"?s.confidence=Math.min(s.confidence+.1,1):n==="negative"&&(s.confidence=Math.max(s.confidence-.1,0)),s.lastUpdated=new Date})}static async retrainModel(t,i){console.log(`Retraining ML model for user ${t}`)}static async analyzeUsagePatterns(t,i){const n=[];return i.behaviorPatterns.length>0&&n.push({type:"usage_pattern",title:"Usage Pattern Detected",description:`We've identified ${i.behaviorPatterns.length} behavior patterns in your usage`,confidence:.8,actionable:!0,recommendations:["Create automated workflows","Set up notifications"],metadata:{patternCount:i.behaviorPatterns.length}}),n}static async detectPreferenceChanges(t,i){return[]}static async identifyNewInterests(t,i){const n=[];return i.interests.forEach(r=>{r.score>.7&&n.push({type:"new_interest",title:"New Interest Detected",description:`You've shown strong interest in ${r.topic}`,confidence:r.score,actionable:!0,recommendations:[`Explore more ${r.topic} content`],metadata:{topic:r.topic,score:r.score}})}),n}static async detectBehaviorAnomalies(t,i){return[]}static getTimeOfDay(t){return t>=5&&t<12?"morning":t>=12&&t<17?"afternoon":t>=17&&t<21?"evening":"night"}}function ie(){const{user:c}=F(),[t,i]=d.useState(null),[n,r]=d.useState(!1),[a,s]=d.useState(null),o=d.useCallback(async()=>{if(c)try{r(!0),s(null);const x=await R.analyzeUserBehavior(c.uid);i(x)}catch(x){s(x.message)}finally{r(!1)}},[c]),l=d.useCallback(async(x,m,v)=>{if(c)try{await R.learnFromFeedback(c.uid,x,m,v),await o()}catch(N){s(N.message)}},[c,o]);return d.useEffect(()=>{c&&!t&&o()},[c,t,o]),{profile:t,loading:n,error:a,analyzeBehavior:o,learnFromFeedback:l,refresh:o}}function Ue(c){const{user:t}=F(),[i,n]=d.useState([]),[r,a]=d.useState(!1),[s,o]=d.useState(null),l=d.useCallback(async(x="content",m=10)=>{if(t)try{a(!0),o(null);const v=await R.generateRecommendations(t.uid,x,m);n(v)}catch(v){o(v.message)}finally{a(!1)}},[t]);return d.useEffect(()=>{t&&c&&l(c)},[t,c,l]),{recommendations:i,loading:r,error:s,loadRecommendations:l,refresh:()=>c&&l(c)}}function We(){const{user:c}=F(),[t,i]=d.useState([]),[n,r]=d.useState(!1),[a,s]=d.useState(null),o=d.useCallback(async()=>{if(c)try{r(!0),s(null);const l=await R.generateInsights(c.uid);i(l)}catch(l){s(l.message)}finally{r(!1)}},[c]);return d.useEffect(()=>{c&&o()},[c,o]),{insights:t,loading:n,error:a,loadInsights:o,refresh:o}}function He(){const{profile:c}=ie(),[t,i]=d.useState({});d.useEffect(()=>{if(!c)return;const a={};c.personalityTraits.forEach(s=>{s.trait==="Tech-Savvy"&&s.score>.7?(a.showAdvancedFeatures=!0,a.defaultView="detailed",a.animationLevel="minimal"):s.trait==="Social"&&s.score>.6?(a.showSocialFeatures=!0,a.defaultView="social",a.animationLevel="standard"):s.trait==="Efficiency-Focused"&&s.score>.6&&(a.showQuickActions=!0,a.defaultView="compact",a.animationLevel="minimal")}),c.interests.forEach(s=>{s.score>.7&&(a.prioritizedFeatures=[...a.prioritizedFeatures||[],s.topic])}),c.behaviorPatterns.forEach(s=>{s.pattern.includes("frequently")&&s.confidence>.8&&(a.frequentActions=[...a.frequentActions||[],s.pattern])}),i(a)},[c]);const n=d.useCallback(()=>({sidebar:{showAdvancedFeatures:t.showAdvancedFeatures||!1,prioritizedItems:t.prioritizedFeatures||[]},dashboard:{defaultView:t.defaultView||"standard",showQuickActions:t.showQuickActions||!1,showSocialFeatures:t.showSocialFeatures||!1},animations:{level:t.animationLevel||"standard"}}),[t]),r=d.useCallback(()=>{if(!c)return{};const a={};return c.behaviorPatterns.some(o=>o.timeOfDay==="night"&&o.confidence>.7)&&(a.autoDarkMode=!0,a.preferredTheme="dark"),a},[c]);return{uiPreferences:t,getLayoutConfig:n,getThemeConfig:r,isAdaptive:Object.keys(t).length>0}}function Ke({userId:c}){const[t,i]=d.useState("overview"),[n,r]=d.useState("content"),{profile:a,loading:s,analyzeBehavior:o}=ie(),{recommendations:l,loading:x}=Ue(n),{insights:m,loading:v}=We(),{uiPreferences:N,getLayoutConfig:b,isAdaptive:C}=He(),S=async(A,z)=>{console.log(`Feedback for ${A}: ${z}`)};return s?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Analyzing your behavior..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(se,{className:"h-6 w-6 text-purple-500"}),"AI Personalization"]}),e.jsx("p",{className:"text-muted-foreground",children:"Your personalized AI experience"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{onClick:o,variant:"outline",size:"sm",disabled:s,children:[e.jsx(P,{className:`h-4 w-4 mr-2 ${s?"animate-spin":""}`}),"Refresh Analysis"]}),e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(be,{className:"h-4 w-4 mr-2"}),"Settings"]})]})]}),e.jsxs(U,{value:t,onValueChange:i,children:[e.jsxs(W,{className:"grid w-full grid-cols-4",children:[e.jsx(_,{value:"overview",children:"Overview"}),e.jsx(_,{value:"recommendations",children:"Recommendations"}),e.jsx(_,{value:"insights",children:"Insights"}),e.jsx(_,{value:"preferences",children:"Preferences"})]}),e.jsx(T,{value:"overview",className:"space-y-6",children:e.jsx(Qe,{profile:a,insights:m,isAdaptive:C})}),e.jsx(T,{value:"recommendations",className:"space-y-6",children:e.jsx(Ge,{recommendations:l,loading:x,selectedType:n,onTypeChange:r,onFeedback:S})}),e.jsx(T,{value:"insights",className:"space-y-6",children:e.jsx(Ve,{insights:m,loading:v})}),e.jsx(T,{value:"preferences",className:"space-y-6",children:e.jsx(Ye,{profile:a,uiPreferences:N,layoutConfig:b()})})]})]})}function Qe({profile:c,insights:t,isAdaptive:i}){const n=c?.preferences?.length||0,r=t?.length||0,a=c?.behaviorPatterns?.length||0,s=c?.interests?.length||0;return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"AI Profile"}),e.jsx(se,{className:"h-4 w-4 text-purple-500"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:i?"Active":"Learning"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[n," preferences learned"]})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Behavior Patterns"}),e.jsx(K,{className:"h-4 w-4 text-blue-500"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:a}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Patterns identified"})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"Interests"}),e.jsx(Q,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:s}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Topics of interest"})]})]}),e.jsxs(p,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(j,{className:"text-sm font-medium",children:"AI Insights"}),e.jsx(ee,{className:"h-4 w-4 text-yellow-500"})]}),e.jsxs(g,{children:[e.jsx("div",{className:"text-2xl font-bold",children:r}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Personalized insights"})]})]}),e.jsxs(p,{className:"col-span-1 md:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Personality Traits"}),e.jsx(w,{children:"AI-detected personality characteristics"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:c?.personalityTraits?.slice(0,4).map((o,l)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:o.trait}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(o.score*100).toFixed(0),"%"]})]}),e.jsx(H,{value:o.score*100,className:"h-2"})]},o.trait))})})]}),e.jsxs(p,{className:"col-span-1 md:col-span-2",children:[e.jsxs(f,{children:[e.jsx(j,{children:"Recent Insights"}),e.jsx(w,{children:"Latest AI-generated insights"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:t?.slice(0,3).map((o,l)=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full mt-2 ${o.type==="usage_pattern"?"bg-blue-500":o.type==="new_interest"?"bg-green-500":o.type==="preference_change"?"bg-yellow-500":"bg-gray-500"}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:o.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:o.description}),o.actionable&&e.jsx(y,{variant:"outline",className:"mt-1 text-xs",children:"Actionable"})]})]},o.type))})})]})]})}function Ge({recommendations:c,loading:t,selectedType:i,onTypeChange:n,onFeedback:r}){const a=[{id:"content",name:"Content",icon:"üìÑ"},{id:"feature",name:"Features",icon:"‚ö°"},{id:"workflow",name:"Workflows",icon:"üîÑ"},{id:"agent",name:"AI Agents",icon:"ü§ñ"}];return t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading recommendations..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Recommendation Type:"}),a.map(s=>e.jsxs(h,{variant:i===s.id?"default":"outline",size:"sm",onClick:()=>n(s.id),className:"flex items-center gap-2",children:[e.jsx("span",{children:s.icon}),s.name]},s.id))]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map((s,o)=>e.jsxs(p,{className:"relative",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx(j,{className:"text-lg",children:s.title}),e.jsx(w,{children:s.description})]}),e.jsxs(y,{variant:"secondary",children:[(s.score*100).toFixed(0),"% match"]})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Why recommended:"})," ",s.reason]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{variant:"outline",className:"text-xs",children:s.category}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>r(s.itemId,"positive"),children:e.jsx(te,{className:"h-4 w-4"})}),e.jsx(h,{size:"sm",variant:"ghost",onClick:()=>r(s.itemId,"negative"),children:e.jsx(O,{className:"h-4 w-4"})})]})]}),e.jsxs(h,{className:"w-full",size:"sm",children:["Explore ",i]})]})})]},s.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Q,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No recommendations yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep using the platform to get personalized recommendations"})]})]})}function Ve({insights:c,loading:t}){return t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Analyzing insights..."})]}):e.jsxs("div",{className:"space-y-6",children:[c.map((i,n)=>e.jsxs(p,{className:"relative",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${i.type==="usage_pattern"?"bg-blue-100 text-blue-600":i.type==="new_interest"?"bg-green-100 text-green-600":i.type==="preference_change"?"bg-yellow-100 text-yellow-600":"bg-gray-100 text-gray-600"}`,children:i.type==="usage_pattern"?e.jsx(ke,{className:"h-4 w-4"}):i.type==="new_interest"?e.jsx(Q,{className:"h-4 w-4"}):i.type==="preference_change"?e.jsx(K,{className:"h-4 w-4"}):e.jsx(Ae,{className:"h-4 w-4"})}),e.jsxs("div",{children:[e.jsx(j,{className:"text-lg",children:i.title}),e.jsx(w,{children:i.description})]})]}),e.jsx(y,{variant:i.actionable?"default":"secondary",children:i.actionable?"Actionable":"Informational"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Confidence:"}),e.jsx(H,{value:i.confidence*100,className:"flex-1 h-2"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[(i.confidence*100).toFixed(0),"%"]})]}),i.recommendations&&i.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium mb-2 block",children:"Recommendations:"}),e.jsx("ul",{className:"space-y-1",children:i.recommendations.map((r,a)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-center space-x-2",children:[e.jsx(Ce,{className:"h-3 w-3 text-green-500"}),e.jsx("span",{children:r})]},a))})]}),i.actionable&&e.jsx(h,{size:"sm",className:"w-full",children:"Take Action"})]})})]},i.type)),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ee,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No insights yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Continue using the platform to generate personalized insights"})]})]})}function Ye({profile:c,uiPreferences:t,layoutConfig:i}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"AI-Detected Preferences"}),e.jsx(w,{children:"Preferences learned from your behavior"})]}),e.jsx(g,{children:e.jsx("div",{className:"space-y-4",children:c?.preferences?.slice(0,6).map((n,r)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${n.source==="behavioral"?"bg-blue-500":n.source==="explicit"?"bg-green-500":"bg-yellow-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:n.preference}),e.jsxs("div",{className:"text-xs text-muted-foreground capitalize",children:[n.source," ‚Ä¢ ",n.category]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[(n.confidence*100).toFixed(0),"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Confidence"})]})]},n.id))})})]}),e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"UI Adaptations"}),e.jsx(w,{children:"Interface customizations based on your behavior"})]}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Layout Preferences"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Advanced Features"}),e.jsx(y,{variant:i.sidebar.showAdvancedFeatures?"default":"secondary",children:i.sidebar.showAdvancedFeatures?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Quick Actions"}),e.jsx(y,{variant:i.dashboard.showQuickActions?"default":"secondary",children:i.dashboard.showQuickActions?"Enabled":"Disabled"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm",children:"Social Features"}),e.jsx(y,{variant:i.dashboard.showSocialFeatures?"default":"secondary",children:i.dashboard.showSocialFeatures?"Enabled":"Disabled"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Behavior Patterns"}),e.jsx("div",{className:"space-y-2",children:c?.behaviorPatterns?.slice(0,3).map((n,r)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:n.pattern}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Frequency: ",n.frequency," ‚Ä¢ Confidence: ",(n.confidence*100).toFixed(0),"%"]})]},n.id))})]})]})})]}),e.jsxs(p,{children:[e.jsxs(f,{children:[e.jsx(j,{children:"Detected Interests"}),e.jsx(w,{children:"Topics and categories you're interested in"})]}),e.jsx(g,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:c?.interests?.map((n,r)=>e.jsxs(y,{variant:"outline",className:"flex items-center space-x-1",children:[e.jsx("span",{children:n.topic}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(n.score*100).toFixed(0),"%)"]})]},n.id))})})]})]})}class D{static MARKETPLACE_TEMPLATES=[{id:"social_auto_post",name:"Smart Social Media Auto-Poster",description:"Automatically posts content to multiple social platforms with AI optimization",category:"social_media",tags:["social","automation","ai","content"],difficulty:"intermediate",estimatedTime:15,popularity:95,rating:4.8,downloads:1250,author:{id:"template_author_1",name:"AI Automation Pro",avatar:"/avatars/ai-pro.png"},steps:[{id:"trigger_schedule",name:"Schedule Trigger",type:"trigger",description:"Triggers at specified times",config:{schedule:"daily",time:"09:00"},position:{x:100,y:100},connections:["condition_content_check"],icon:"‚è∞",color:"#3B82F6"},{id:"condition_content_check",name:"Content Quality Check",type:"condition",description:"Checks if content meets quality standards",config:{qualityThreshold:.8},position:{x:300,y:100},connections:["action_ai_optimize","action_skip"],icon:"üîç",color:"#F59E0B"},{id:"action_ai_optimize",name:"AI Content Optimization",type:"ai",description:"Optimizes content for each platform",config:{model:"gpt-4",platforms:["twitter","linkedin","facebook"]},position:{x:500,y:50},connections:["action_post_social"],icon:"ü§ñ",color:"#8B5CF6"},{id:"action_post_social",name:"Post to Social Media",type:"action",description:"Posts optimized content to social platforms",config:{platforms:["twitter","linkedin","facebook"]},position:{x:700,y:100},connections:[],icon:"üì±",color:"#10B981"},{id:"action_skip",name:"Skip Posting",type:"action",description:"Skips posting if content quality is low",config:{reason:"Low quality content"},position:{x:500,y:150},connections:[],icon:"‚è≠Ô∏è",color:"#6B7280"}],triggers:[{id:"schedule_trigger",name:"Daily Schedule",type:"schedule",config:{cron:"0 9 * * *",timezone:"UTC"},description:"Triggers daily at 9 AM",isActive:!0}],actions:[{id:"social_post_action",name:"Social Media Post",type:"post",config:{platforms:["twitter","linkedin","facebook"]},description:"Posts content to social media platforms",retryCount:3,timeout:3e4}],conditions:[{id:"quality_check",name:"Content Quality Check",type:"if",config:{field:"quality_score",operator:">",value:.8},description:"Checks if content quality meets threshold",truePath:["action_ai_optimize"],falsePath:["action_skip"]}],variables:[{id:"content_quality_threshold",name:"Quality Threshold",type:"number",value:.8,description:"Minimum quality score for posting",isGlobal:!0}],icon:"üì±",preview:"/previews/social-auto-post.png",documentation:"Complete guide for setting up social media automation",examples:[{id:"example_1",name:"Tech Blog Post",description:"Example for tech blog content",input:{content:"New AI breakthrough...",category:"tech"},expectedOutput:{posted:!0,platforms:["twitter","linkedin"]},tags:["tech","blog"]}],isPublic:!0,isFeatured:!0,createdAt:new Date("2024-01-15"),updatedAt:new Date("2024-01-20"),version:"1.2.0"},{id:"email_drip_campaign",name:"AI-Powered Email Drip Campaign",description:"Automated email sequences with personalization and AI optimization",category:"email_marketing",tags:["email","marketing","ai","personalization"],difficulty:"advanced",estimatedTime:30,popularity:87,rating:4.6,downloads:890,author:{id:"template_author_2",name:"Marketing Automation Expert",avatar:"/avatars/marketing-expert.png"},steps:[{id:"trigger_new_subscriber",name:"New Subscriber Trigger",type:"trigger",description:"Triggers when new subscriber joins",config:{event:"subscriber_added"},position:{x:100,y:100},connections:["action_welcome_email"],icon:"üë§",color:"#3B82F6"},{id:"action_welcome_email",name:"Send Welcome Email",type:"action",description:"Sends personalized welcome email",config:{template:"welcome",personalization:!0},position:{x:300,y:100},connections:["delay_24h"],icon:"üìß",color:"#10B981"},{id:"delay_24h",name:"24 Hour Delay",type:"delay",description:"Waits 24 hours before next email",config:{duration:864e5},position:{x:500,y:100},connections:["condition_engagement_check"],icon:"‚è≥",color:"#F59E0B"},{id:"condition_engagement_check",name:"Engagement Check",type:"condition",description:"Checks if user engaged with previous email",config:{engagementThreshold:.3},position:{x:700,y:100},connections:["action_follow_up","action_re_engagement"],icon:"üìä",color:"#8B5CF6"},{id:"action_follow_up",name:"Send Follow-up",type:"action",description:"Sends follow-up email for engaged users",config:{template:"follow_up",segment:"engaged"},position:{x:900,y:50},connections:[],icon:"üìß",color:"#10B981"},{id:"action_re_engagement",name:"Re-engagement Campaign",type:"action",description:"Sends re-engagement email for inactive users",config:{template:"re_engagement",segment:"inactive"},position:{x:900,y:150},connections:[],icon:"üîÑ",color:"#EF4444"}],triggers:[{id:"subscriber_trigger",name:"New Subscriber",type:"webhook",config:{endpoint:"/webhooks/subscriber",method:"POST"},description:"Triggers when new subscriber is added",isActive:!0}],actions:[{id:"email_send_action",name:"Send Email",type:"email",config:{provider:"sendgrid",personalization:!0},description:"Sends personalized email",retryCount:3,timeout:3e4}],conditions:[{id:"engagement_condition",name:"Engagement Check",type:"if",config:{field:"engagement_rate",operator:">",value:.3},description:"Checks user engagement level",truePath:["action_follow_up"],falsePath:["action_re_engagement"]}],variables:[{id:"engagement_threshold",name:"Engagement Threshold",type:"number",value:.3,description:"Minimum engagement rate for follow-up",isGlobal:!0}],icon:"üìß",preview:"/previews/email-drip.png",documentation:"Complete email marketing automation guide",examples:[{id:"example_1",name:"SaaS Onboarding",description:"Example for SaaS product onboarding",input:{userType:"premium",industry:"tech"},expectedOutput:{emailsSent:5,openRate:.45},tags:["saas","onboarding"]}],isPublic:!0,isFeatured:!0,createdAt:new Date("2024-01-10"),updatedAt:new Date("2024-01-18"),version:"2.1.0"},{id:"ai_content_generator",name:"AI Content Generator & Publisher",description:"Automatically generates and publishes content using AI",category:"content_creation",tags:["ai","content","automation","publishing"],difficulty:"beginner",estimatedTime:10,popularity:92,rating:4.7,downloads:2100,author:{id:"template_author_3",name:"Content AI Specialist",avatar:"/avatars/content-ai.png"},steps:[{id:"trigger_topic_input",name:"Topic Input Trigger",type:"trigger",description:"Triggers when topic is provided",config:{inputType:"manual"},position:{x:100,y:100},connections:["action_ai_research"],icon:"üí°",color:"#3B82F6"},{id:"action_ai_research",name:"AI Research",type:"ai",description:"Researches topic and generates outline",config:{model:"gpt-4",task:"research"},position:{x:300,y:100},connections:["action_ai_write"],icon:"üîç",color:"#8B5CF6"},{id:"action_ai_write",name:"AI Content Writing",type:"ai",description:"Writes content based on research",config:{model:"gpt-4",style:"professional"},position:{x:500,y:100},connections:["condition_quality_check"],icon:"‚úçÔ∏è",color:"#8B5CF6"},{id:"condition_quality_check",name:"Quality Check",type:"condition",description:"Checks content quality",config:{qualityThreshold:.85},position:{x:700,y:100},connections:["action_publish","action_revise"],icon:"‚úÖ",color:"#F59E0B"},{id:"action_publish",name:"Publish Content",type:"action",description:"Publishes content to platforms",config:{platforms:["blog","social"]},position:{x:900,y:50},connections:[],icon:"üöÄ",color:"#10B981"},{id:"action_revise",name:"Revise Content",type:"ai",description:"Revises content based on feedback",config:{model:"gpt-4",revisionType:"improvement"},position:{x:900,y:150},connections:["condition_quality_check"],icon:"üîÑ",color:"#EF4444"}],triggers:[{id:"manual_trigger",name:"Manual Trigger",type:"manual",config:{inputFields:["topic","style","length"]},description:"Manual trigger with topic input",isActive:!0}],actions:[{id:"publish_action",name:"Publish",type:"post",config:{platforms:["blog","social"],autoSchedule:!0},description:"Publishes content to multiple platforms",retryCount:2,timeout:6e4}],conditions:[{id:"quality_condition",name:"Quality Check",type:"if",config:{field:"quality_score",operator:">=",value:.85},description:"Checks content quality threshold",truePath:["action_publish"],falsePath:["action_revise"]}],variables:[{id:"content_style",name:"Content Style",type:"string",value:"professional",description:"Writing style for content",isGlobal:!0}],icon:"ü§ñ",preview:"/previews/ai-content.png",documentation:"AI content generation automation guide",examples:[{id:"example_1",name:"Blog Post",description:"Example for blog post generation",input:{topic:"AI trends",length:"1000 words"},expectedOutput:{content:"Generated blog post",quality:.9},tags:["blog","ai","trends"]}],isPublic:!0,isFeatured:!1,createdAt:new Date("2024-01-05"),updatedAt:new Date("2024-01-15"),version:"1.5.0"}];static CATEGORIES=[{id:"social_media",name:"Social Media",description:"Automate social media posting and engagement",icon:"üì±",templateCount:25,color:"#3B82F6"},{id:"email_marketing",name:"Email Marketing",description:"Email campaigns and automation",icon:"üìß",templateCount:18,color:"#10B981"},{id:"content_creation",name:"Content Creation",description:"AI-powered content generation and publishing",icon:"‚úçÔ∏è",templateCount:32,color:"#8B5CF6"},{id:"ai_automation",name:"AI Automation",description:"Advanced AI-powered workflows",icon:"ü§ñ",templateCount:45,color:"#F59E0B"},{id:"data_processing",name:"Data Processing",description:"Automate data collection and analysis",icon:"üìä",templateCount:15,color:"#EF4444"},{id:"notification",name:"Notifications",description:"Smart notification and alert systems",icon:"üîî",templateCount:12,color:"#06B6D4"},{id:"integration",name:"Integrations",description:"Connect and sync with external services",icon:"üîó",templateCount:28,color:"#84CC16"},{id:"analytics",name:"Analytics",description:"Automated reporting and insights",icon:"üìà",templateCount:20,color:"#F97316"},{id:"productivity",name:"Productivity",description:"Workflow optimization and task automation",icon:"‚ö°",templateCount:35,color:"#EC4899"}];static async getMarketplace(t){try{let i=[...this.MARKETPLACE_TEMPLATES];t&&(t.category&&(i=i.filter(s=>s.category===t.category)),t.difficulty&&(i=i.filter(s=>s.difficulty===t.difficulty)),t.tags&&t.tags.length>0&&(i=i.filter(s=>t.tags.some(o=>s.tags.includes(o)))),t.rating&&(i=i.filter(s=>s.rating>=t.rating)),t.isFeatured&&(i=i.filter(s=>s.isFeatured))),i.sort((s,o)=>o.popularity-s.popularity);const n=i.filter(s=>s.isFeatured).slice(0,6),r=i.slice(0,8),a=i.sort((s,o)=>o.createdAt.getTime()-s.createdAt.getTime()).slice(0,8);return{templates:i,categories:this.CATEGORIES,featured:n,trending:r,recent:a,searchResults:i,filters:t||{}}}catch(i){throw console.error("Error getting marketplace:",i),i}}static async searchTemplates(t,i){try{const n=await this.getMarketplace(i),r=t.toLowerCase();return n.templates.filter(a=>a.name.toLowerCase().includes(r)||a.description.toLowerCase().includes(r)||a.tags.some(s=>s.toLowerCase().includes(r))||a.author.name.toLowerCase().includes(r))}catch(n){return console.error("Error searching templates:",n),[]}}static async getTemplate(t){try{return this.MARKETPLACE_TEMPLATES.find(i=>i.id===t)||null}catch(i){return console.error("Error getting template:",i),null}}static async createWorkflowFromTemplate(t,i,n){try{if(!await this.getTemplate(t))throw new Error("Template not found");const a=`workflow_${i}_${Date.now()}`;return console.log(`Created workflow ${a} from template ${t}`),a}catch(r){throw console.error("Error creating workflow from template:",r),r}}static async executeWorkflow(t,i,n){try{const a={id:`exec_${t}_${Date.now()}`,workflowId:t,userId:i,status:"running",startedAt:new Date,steps:[],variables:n||{},logs:[]};return console.log(`Executing workflow ${t} for user ${i}`),a}catch(r){throw console.error("Error executing workflow:",r),r}}static async getExecutionStatus(t){try{return null}catch(i){return console.error("Error getting execution status:",i),null}}static async getUserWorkflows(t){try{return[]}catch(i){return console.error("Error getting user workflows:",i),[]}}static async publishTemplate(t,i){try{const n=`template_${i}_${Date.now()}`,r={...t,id:n,createdAt:new Date,updatedAt:new Date,version:"1.0.0",downloads:0};return console.log(`Published template ${n}`),n}catch(n){throw console.error("Error publishing template:",n),n}}static async getIntelligentRecommendations(t,i=5){try{const n=[],r=[];if(n.filter(x=>x.action?.category==="social").length>5){const x=this.MARKETPLACE_TEMPLATES.find(m=>m.id==="social_auto_post");x&&r.push(x)}if(n.filter(x=>x.action?.category==="ai").length>3){const x=this.MARKETPLACE_TEMPLATES.find(m=>m.id==="ai_content_generator");x&&r.push(x)}if(n.filter(x=>x.action?.type==="create"&&x.action?.targetType==="post").length>2){const x=this.MARKETPLACE_TEMPLATES.find(m=>m.id==="ai_content_generator");x&&!r.find(m=>m.id===x.id)&&r.push(x)}const l=this.MARKETPLACE_TEMPLATES.filter(x=>x.isFeatured).slice(0,i-r.length);return r.push(...l.filter(x=>!r.find(m=>m.id===x.id))),r.slice(0,i)}catch(n){return console.error("Error getting intelligent recommendations:",n),this.MARKETPLACE_TEMPLATES.slice(0,i)}}static async getWorkflowAnalytics(t){try{return{executions:45,successRate:.92,averageDuration:120,popularSteps:["trigger_schedule","action_ai_optimize"],errorRate:.08,userSatisfaction:4.6}}catch(i){return console.error("Error getting workflow analytics:",i),null}}}function Je(c){const{user:t}=F(),[i,n]=d.useState(null),[r,a]=d.useState(!1),[s,o]=d.useState(null),l=d.useCallback(async m=>{try{a(!0),o(null);const v=await D.getMarketplace(m);n(v)}catch(v){o(v.message)}finally{a(!1)}},[]);d.useEffect(()=>{l(c)},[l,c]);const x=d.useCallback(async(m,v)=>{try{a(!0),o(null);const N=await D.searchTemplates(m,v);n(b=>b?{...b,searchResults:N}:null)}catch(N){o(N.message)}finally{a(!1)}},[]);return{marketplace:i,loading:r,error:s,loadMarketplace:l,searchTemplates:x,refresh:()=>l(c)}}function Ze(c){const{user:t}=F(),[i,n]=d.useState(null),[r,a]=d.useState(!1),[s,o]=d.useState(null),l=d.useCallback(async m=>{try{a(!0),o(null);const v=await D.getTemplate(m);n(v)}catch(v){o(v.message)}finally{a(!1)}},[]);d.useEffect(()=>{},[c,l]);const x=d.useCallback(async(m,v)=>{if(!t)throw new Error("User not authenticated");try{return a(!0),o(null),await D.createWorkflowFromTemplate(m,t.uid,v)}catch(N){throw o(N.message),N}finally{a(!1)}},[t]);return{template:i,loading:r,error:s,loadTemplate:l,createWorkflow:x,refresh:()=>c}}function Xe(c=5){const{user:t}=F(),[i,n]=d.useState([]),[r,a]=d.useState(!1),[s,o]=d.useState(null),l=d.useCallback(async(x=c)=>{if(t)try{a(!0),o(null);const m=await D.getIntelligentRecommendations(t.uid,x);n(m)}catch(m){o(m.message)}finally{a(!1)}},[t,c]);return d.useEffect(()=>{t&&l()},[t,l]),{recommendations:i,loading:r,error:s,loadRecommendations:l,refresh:()=>l(c)}}function es({userId:c}){const[t,i]=d.useState("marketplace"),[n,r]=d.useState(""),[a,s]=d.useState({}),[o,l]=d.useState("grid"),[x,m]=d.useState("popularity"),{marketplace:v,loading:N,searchTemplates:b}=Je(a),{recommendations:C,loading:S}=Xe(6),A=async()=>{n.trim()&&await b(n,a)},z=q=>{s(B=>({...B,...q}))};return N?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Loading marketplace..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(_e,{className:"h-6 w-6 text-blue-500"}),"Workflow Marketplace"]}),e.jsx("p",{className:"text-muted-foreground",children:"Discover and deploy powerful automation workflows"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(ae,{className:"h-4 w-4 mr-2"}),"Create Workflow"]}),e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(X,{className:"h-4 w-4 mr-2"}),"My Workflows"]})]})]}),e.jsxs(U,{value:t,onValueChange:i,children:[e.jsxs(W,{className:"grid w-full grid-cols-3",children:[e.jsx(_,{value:"marketplace",children:"Marketplace"}),e.jsx(_,{value:"recommendations",children:"For You"}),e.jsx(_,{value:"trending",children:"Trending"})]}),e.jsx(T,{value:"marketplace",className:"space-y-6",children:e.jsx(ss,{marketplace:v,searchQuery:n,setSearchQuery:r,filters:a,onFilterChange:z,viewMode:o,setViewMode:l,sortBy:x,setSortBy:m,onSearch:A})}),e.jsx(T,{value:"recommendations",className:"space-y-6",children:e.jsx(ts,{recommendations:C,loading:S})}),e.jsx(T,{value:"trending",className:"space-y-6",children:e.jsx(as,{marketplace:v})})]})]})}function ss({marketplace:c,searchQuery:t,setSearchQuery:i,filters:n,onFilterChange:r,viewMode:a,setViewMode:s,sortBy:o,setSortBy:l,onSearch:x}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Se,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Te,{placeholder:"Search workflows...",value:t,onChange:m=>i(m.target.value),className:"pl-10",onKeyPress:m=>m.key==="Enter"&&x()})]}),e.jsx(h,{onClick:x,variant:"outline",children:"Search"}),e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(Pe,{className:"h-4 w-4 mr-2"}),"Filters"]})]}),e.jsxs("div",{className:"flex items-center space-x-2 overflow-x-auto pb-2",children:[e.jsx(h,{variant:n.category?"outline":"default",size:"sm",onClick:()=>r({category:void 0}),children:"All"}),c?.categories?.map(m=>e.jsxs(h,{variant:n.category===m.id?"default":"outline",size:"sm",onClick:()=>r({category:m.id}),className:"flex items-center gap-2",children:[e.jsx("span",{children:m.icon}),m.name]},m.id))]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:[c?.templates?.length||0," workflows"]})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("select",{value:o,onChange:m=>l(m.target.value),className:"px-3 py-1 border rounded-md text-sm","aria-label":"Sort workflows",children:[e.jsx("option",{value:"popularity",children:"Most Popular"}),e.jsx("option",{value:"rating",children:"Highest Rated"}),e.jsx("option",{value:"recent",children:"Most Recent"})]}),e.jsx(h,{variant:a==="grid"?"default":"outline",size:"sm",onClick:()=>s("grid"),children:e.jsx(Fe,{className:"h-4 w-4"})}),e.jsx(h,{variant:a==="list"?"default":"outline",size:"sm",onClick:()=>s("list"),children:e.jsx(ze,{className:"h-4 w-4"})})]})]}),e.jsx("div",{className:a==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4",children:(c?.searchResults||c?.templates||[]).map(m=>e.jsx(G,{template:m,viewMode:a},m.id))})]})}function G({template:c,viewMode:t}){const{createWorkflow:i}=Ze(),[n,r]=d.useState(!1),a=async()=>{try{r(!0),await i(c.id)}catch(s){console.error("Error installing workflow:",s)}finally{r(!1)}};return t==="list"?e.jsx(p,{className:"flex",children:e.jsx("div",{className:"flex-1 p-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx("h3",{className:"text-lg font-semibold",children:c.name}),c.isFeatured&&e.jsx(y,{variant:"default",className:"bg-gradient-to-r from-purple-500 to-pink-500",children:"Featured"})]}),e.jsx("p",{className:"text-muted-foreground mb-3",children:c.description}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{children:c.rating})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:c.downloads})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.estimatedTime,"m"]})]}),e.jsx(y,{variant:"outline",children:c.difficulty})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Preview"]}),e.jsxs(h,{onClick:a,disabled:n,size:"sm",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),n?"Installing...":"Install"]})]})]})})}):e.jsxs(p,{className:"group hover:shadow-lg transition-shadow",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-2",children:[e.jsx(j,{className:"text-lg",children:c.name}),c.isFeatured&&e.jsx(y,{variant:"default",className:"bg-gradient-to-r from-purple-500 to-pink-500",children:"Featured"})]}),e.jsx(w,{children:c.description})]}),e.jsx("div",{className:"text-2xl",children:c.icon})]})}),e.jsx(g,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex flex-wrap gap-1",children:c.tags.slice(0,3).map(s=>e.jsx(y,{variant:"outline",className:"text-xs",children:s},s))}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(J,{className:"h-4 w-4 text-yellow-500"}),e.jsx("span",{children:c.rating})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(L,{className:"h-4 w-4"}),e.jsx("span",{children:c.downloads})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(Y,{className:"h-4 w-4"}),e.jsxs("span",{children:[c.estimatedTime,"m"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(y,{variant:c.difficulty==="beginner"?"default":c.difficulty==="intermediate"?"secondary":"destructive",children:c.difficulty}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["by ",c.author.name]})]}),e.jsxs("div",{className:"flex items-center space-x-2 pt-2",children:[e.jsxs(h,{onClick:a,disabled:n,className:"flex-1",children:[e.jsx(L,{className:"h-4 w-4 mr-2"}),n?"Installing...":"Install"]}),e.jsx(h,{variant:"outline",size:"sm",children:e.jsx(O,{className:"h-4 w-4"})}),e.jsx(h,{variant:"outline",size:"sm",children:e.jsx(te,{className:"h-4 w-4"})})]})]})})]})}function ts({recommendations:c,loading:t}){return t?e.jsxs("div",{className:"flex items-center justify-center p-8",children:[e.jsx(P,{className:"h-6 w-6 animate-spin"}),e.jsx("span",{className:"ml-2",children:"Finding recommendations for you..."})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Recommended for You"}),e.jsx("p",{className:"text-muted-foreground",children:"Workflows tailored to your usage patterns and preferences"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c.map(i=>e.jsx(G,{template:i,viewMode:"grid"},i.id))}),c.length===0&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ae,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No recommendations yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Keep using the platform to get personalized workflow recommendations"})]})]})}function as({marketplace:c}){return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Trending Workflows"}),e.jsx("p",{className:"text-muted-foreground",children:"Most popular and trending automation workflows"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:c?.trending?.map(t=>e.jsx(G,{template:t,viewMode:"grid"},t.id))})]})}function Cs(){const[c,t]=d.useState(!1),[i,n]=d.useState(!1),[r,a]=d.useState(!1),[s,o]=d.useState(""),[l,x]=d.useState(""),[m,v]=d.useState(!1),[N,b]=d.useState(null),[C,S]=d.useState({}),A=d.useRef(null),{data:z,isLoading:q}=$({queryKey:["/api/posts"]}),{data:B,isLoading:ne}=$({queryKey:["/api/agent-templates"]}),{data:is,isLoading:re}=$({queryKey:["/api/user-agents"],queryFn:()=>fetch("/api/user-agents?userId=user-1").then(u=>u.json())}),{data:M,isLoading:ce,error:oe}=$({queryKey:["/api/mcp/tools"],queryFn:()=>fetch("/api/mcp/tools").then(u=>u.json())});async function le(u){if(u.preventDefault(),!!s.trim()){v(!0),x("");try{const I=await(await fetch("/api/ai/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s})})).json();x(I.text||"No response")}catch{x("Error: Could not reach AI model.")}finally{v(!1),o(""),A.current?.focus()}}}async function de(u){b(u),S(k=>({...k,[u]:{loading:!0,result:null,error:null}}));try{const I=await(await fetch(`/api/mcp/tools/${u}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:{}})})).json();S(me=>({...me,[u]:{loading:!1,result:I.result,error:null}}))}catch{S(I=>({...I,[u]:{loading:!1,result:null,error:"Execution failed"}}))}finally{b(null)}}return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-background carbon-texture",children:[e.jsx(je,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(ve,{title:"Dashboard",subtitle:"Manage your AI-powered social platform"}),e.jsx("main",{className:"flex-1 overflow-auto cyber-scrollbar",children:e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:c?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold neon-text",children:"User Analytics"}),e.jsx(h,{variant:"outline",onClick:()=>t(!1),className:"neon-glow-sm",children:"Back to Dashboard"})]}),e.jsx(De,{})]}):i?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold neon-text",children:"AI Personalization"}),e.jsx(h,{variant:"outline",onClick:()=>n(!1),className:"neon-glow-sm",children:"Back to Dashboard"})]}),e.jsx(Ke,{})]}):r?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h1",{className:"text-2xl font-bold neon-text",children:"Workflow Marketplace"}),e.jsx(h,{variant:"outline",onClick:()=>a(!1),className:"neon-glow-sm",children:"Back to Dashboard"})]}),e.jsx(es,{})]}):e.jsxs(e.Fragment,{children:[e.jsx($e,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold neon-text animate-neon-flicker",children:"Recent Posts"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{variant:"neon",size:"sm","data-testid":"filter-all",children:"All"}),e.jsx(h,{variant:"cyber",size:"sm","data-testid":"filter-ai-generated",children:"AI Generated"}),e.jsx(h,{variant:"outline",size:"sm","data-testid":"filter-manual",children:"Manual"})]})]}),q?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((u,k)=>e.jsx(p,{className:"p-6 animate-pulse",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),e.jsx("div",{className:"h-32 bg-muted rounded"})]})},k))}):e.jsx("div",{className:"space-y-6",children:z?.map(u=>e.jsx(Ne,{post:u},u.id))}),e.jsxs(p,{className:"relative overflow-hidden",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{className:"gradient-cyber-primary bg-clip-text text-transparent",children:"Visual Workflow Builder"}),e.jsx(h,{variant:"holographic",size:"sm","data-testid":"link-open-editor",children:"Open Editor"})]})}),e.jsx(g,{children:e.jsxs("div",{className:"relative bg-gradient-to-br from-muted/30 to-muted/10 rounded-xl p-6 min-h-[300px] overflow-hidden border border-primary/20",children:[e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"grid grid-cols-12 grid-rows-8 h-full w-full",children:Array.from({length:96}).map((u,k)=>e.jsx("div",{className:"border border-primary/20"},k))})}),e.jsxs("div",{className:"relative flex items-center justify-center space-x-8",children:[e.jsx("div",{className:"gradient-cyber-primary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-trigger",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-play-circle text-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold",children:"Trigger"}),e.jsx("div",{className:"text-xs opacity-80",children:"New Mention"})]})]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-0.5 w-16 bg-gradient-to-r from-primary to-accent"}),e.jsx("i",{className:"fas fa-chevron-right text-primary ml-2 animate-neon-pulse"})]}),e.jsx("div",{className:"gradient-cyber-secondary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-ai",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-robot text-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold",children:"AI Analysis"}),e.jsx("div",{className:"text-xs opacity-80",children:"Sentiment Check"})]})]})}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-0.5 w-16 bg-gradient-to-r from-accent to-primary"}),e.jsx("i",{className:"fas fa-chevron-right text-accent ml-2 animate-neon-pulse"})]}),e.jsx("div",{className:"gradient-cyber-tertiary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-action",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("i",{className:"fas fa-reply text-xl"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-bold",children:"Auto Reply"}),e.jsx("div",{className:"text-xs opacity-80",children:"Generate Response"})]})]})})]}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground","data-testid":"text-last-run",children:"Last run: 2 minutes ago"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-primary neon-text","data-testid":"text-successful-runs",children:"‚úì 12 successful runs today"}),e.jsx("span",{className:"text-muted-foreground","data-testid":"text-errors",children:"‚Ä¢ 0 errors"})]})]})})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(p,{className:"relative overflow-hidden",children:[e.jsx(f,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(j,{className:"gradient-cyber-primary bg-clip-text text-transparent",children:"AI Agent Templates"}),e.jsx(h,{variant:"neon",size:"sm","data-testid":"link-view-all-templates",children:"View All"})]})}),e.jsxs(g,{className:"space-y-3",children:[ne?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((u,k)=>e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},k))}):B?.slice(0,3).map(u=>e.jsx(Le,{template:u},u.id)),e.jsxs(h,{className:"w-full gradient-cyber-primary hover:gradient-cyber-secondary transition-all duration-300 neon-glow-md hover:neon-glow-lg","data-testid":"button-create-agent",children:[e.jsx("i",{className:"fas fa-plus mr-2"}),"Create Custom Agent"]})]})]}),e.jsxs(p,{className:"relative overflow-hidden",children:[e.jsx(f,{children:e.jsx(j,{className:"gradient-cyber-secondary bg-clip-text text-transparent",children:"Active Automations"})}),e.jsx(g,{className:"space-y-4",children:re?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((u,k)=>e.jsx("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg animate-pulse",children:e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})},k))}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl border border-primary/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-daily-scheduler",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-neon-pulse neon-glow-sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Daily Content Scheduler"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last run: 30 min ago"})]})]}),e.jsx(h,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:e.jsx("i",{className:"fas fa-ellipsis-v"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-accent/10 to-primary/10 rounded-xl border border-accent/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-engagement-tracker",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-accent rounded-full animate-neon-pulse neon-glow-sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Engagement Tracker"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Last run: 1 hour ago"})]})]}),e.jsx(h,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:e.jsx("i",{className:"fas fa-ellipsis-v"})})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-hashtag-optimizer",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-neon-pulse neon-glow-sm"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Hashtag Optimizer"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Paused"})]})]}),e.jsx(h,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:e.jsx("i",{className:"fas fa-ellipsis-v"})})]})]})})]}),e.jsxs(p,{className:"relative overflow-hidden",children:[e.jsx(f,{children:e.jsx(j,{className:"gradient-cyber-tertiary bg-clip-text text-transparent",children:"Quick Actions"})}),e.jsx(g,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs(h,{variant:"ghost",className:"p-4 bg-gradient-to-br from-primary/20 to-primary/10 text-primary hover:from-primary/30 hover:to-primary/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-schedule-post",children:[e.jsx("i",{className:"fas fa-calendar-plus text-xl mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Schedule Post"})]}),e.jsxs(h,{variant:"ghost",className:"p-4 bg-gradient-to-br from-purple-500/20 to-purple-500/10 text-purple-400 hover:from-purple-500/30 hover:to-purple-500/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-ai-personalization",onClick:()=>n(!0),children:[e.jsx("i",{className:"fas fa-brain text-xl mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Personalization"})]}),e.jsxs(h,{variant:"ghost",className:"p-4 bg-gradient-to-br from-blue-500/20 to-blue-500/10 text-blue-400 hover:from-blue-500/30 hover:to-blue-500/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-view-analytics",onClick:()=>t(!0),children:[e.jsx("i",{className:"fas fa-chart-bar text-xl mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Analytics"})]}),e.jsxs(h,{variant:"ghost",className:"p-4 bg-gradient-to-br from-orange-500/20 to-orange-500/10 text-orange-400 hover:from-orange-500/30 hover:to-orange-500/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-workflow-marketplace",onClick:()=>a(!0),children:[e.jsx("i",{className:"fas fa-cogs text-xl mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:"Workflows"})]})]})})]})]})]}),e.jsxs(p,{className:"mb-8",children:[e.jsx(f,{children:e.jsx(j,{children:"MCP Tools"})}),e.jsxs(g,{children:[ce&&e.jsx("div",{children:"Loading MCP tools..."}),oe&&e.jsx("div",{className:"text-red-500",children:"Failed to load MCP tools."}),M&&M.length===0&&e.jsx("div",{children:"No MCP tools available."}),M&&M.length>0&&e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:M.map(u=>e.jsxs(p,{className:"border border-primary/30",children:[e.jsxs(f,{children:[e.jsx(j,{children:u.name}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[u.category," | v",u.version]})]}),e.jsxs(g,{children:[e.jsx("div",{className:"mb-2",children:u.description}),e.jsx("div",{className:"mb-2",children:e.jsx(y,{variant:u.isActive?"default":"secondary",children:u.isActive?"Active":"Inactive"})}),e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:["Capabilities: ",u.capabilities?.join(", ")]}),e.jsxs("div",{children:["Total Calls: ",u.usage?.totalCalls??0]}),e.jsxs("div",{children:["Success Rate: ",u.usage?.successRate!=null?`${(u.usage.successRate*100).toFixed(1)}%`:"N/A"]}),e.jsxs("div",{children:["Avg. Execution: ",u.usage?.averageExecutionTime??"N/A"," ms"]}),e.jsxs("div",{children:["Last Used: ",u.usage?.lastUsed?new Date(u.usage.lastUsed).toLocaleString():"Never"]})]}),e.jsx("div",{className:"mt-2",children:e.jsx(h,{size:"sm",variant:"outline",onClick:()=>de(u.id),disabled:N===u.id,children:N===u.id?"Executing...":"Execute"})}),C[u.id]?.loading&&e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Running..."}),C[u.id]?.result&&e.jsxs("div",{className:"text-xs mt-2 bg-muted/30 p-2 rounded",children:["Result: ",JSON.stringify(C[u.id].result)]}),C[u.id]?.error&&e.jsx("div",{className:"text-xs text-red-500 mt-2",children:C[u.id].error})]})]},u.id))})]})]})]})})})]}),e.jsxs(p,{className:"fixed right-0 top-0 h-full w-80 z-40 shadow-xl border-l border-primary/20 bg-background flex flex-col",children:[e.jsx(f,{children:e.jsx(j,{children:"AI Assistant (Free Model)"})}),e.jsxs(g,{className:"flex-1 flex flex-col",children:[e.jsxs("form",{onSubmit:le,className:"flex mb-2",children:[e.jsx("input",{ref:A,className:"flex-1 border rounded-l px-2 py-1 text-sm",placeholder:"Ask the AI anything...",value:s,onChange:u=>o(u.target.value),disabled:m}),e.jsx(h,{type:"submit",size:"sm",className:"rounded-l-none",disabled:m||!s.trim(),children:"Send"})]}),e.jsx("div",{className:"flex-1 overflow-auto text-sm p-2 bg-muted/10 rounded",children:m?e.jsx("div",{children:"Thinking..."}):l&&e.jsx("div",{children:l})})]})]}),e.jsx(ye,{})]})}export{Cs as default};
