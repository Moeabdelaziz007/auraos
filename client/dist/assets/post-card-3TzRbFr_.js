import{r as x,b as u,j as e,C as h,a as f,B as s,d as g}from"./index-BdF0wB4m.js";import{u as j}from"./useMutation-dZ9J-NgO.js";import{B as N}from"./badge-2Nww2oRF.js";import{A as b,a as v,b as $}from"./avatar-BW0cCfpN.js";function A({post:t}){const[r,d]=x.useState(!1),o=u(),n=j({mutationFn:async()=>g("POST",`/api/posts/${t.id}/like`),onSuccess:()=>{o.invalidateQueries({queryKey:["/api/posts"]}),d(!0)}}),m=i=>{const l=new Date,c=new Date(i),a=Math.floor((l.getTime()-c.getTime())/(1e3*60*60));return a<1?"Just now":a<24?`${a}h ago`:`${Math.floor(a/24)}d ago`};return e.jsx(h,{className:"overflow-hidden transition-all duration-200 hover:shadow-md","data-testid":`post-card-${t.id}`,children:e.jsxs(f,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsxs(b,{className:"w-12 h-12",children:[e.jsx(v,{src:t.author.identityIcon||void 0,alt:t.author.identityName}),e.jsx($,{children:t.author.identityName.split(" ").map(i=>i[0]).join("")})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold text-foreground","data-testid":`text-author-${t.id}`,children:t.author.identityName}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",t.author.username]}),e.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full"}),e.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`text-timestamp-${t.id}`,children:m(t.createdAt||new Date)}),t.isAiGenerated&&e.jsxs(N,{variant:"secondary",className:"ml-auto bg-primary/10 text-primary","data-testid":`badge-ai-generated-${t.id}`,children:[e.jsx("i",{className:"fas fa-robot mr-1"}),"AI Enhanced"]})]}),e.jsx("p",{className:"text-foreground mb-4 whitespace-pre-wrap","data-testid":`text-content-${t.id}`,children:t.content}),t.imageUrl&&e.jsx("img",{src:t.imageUrl,alt:"Post content",className:"w-full h-48 object-cover rounded-lg mb-4","data-testid":`img-content-${t.id}`})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(s,{variant:"ghost",size:"sm",className:`flex items-center gap-2 transition-colors ${r?"text-red-500":"text-muted-foreground hover:text-red-500"}`,onClick:()=>n.mutate(),disabled:n.isPending,"data-testid":`button-like-${t.id}`,children:[e.jsx("i",{className:r?"fas fa-heart":"far fa-heart"}),e.jsx("span",{"data-testid":`text-likes-${t.id}`,children:r?t.likes+1:t.likes})]}),e.jsxs(s,{variant:"ghost",size:"sm",className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors","data-testid":`button-comment-${t.id}`,children:[e.jsx("i",{className:"fas fa-comment"}),e.jsx("span",{"data-testid":`text-comments-${t.id}`,children:t.comments})]}),e.jsxs(s,{variant:"ghost",size:"sm",className:"flex items-center gap-2 text-muted-foreground hover:text-green-500 transition-colors","data-testid":`button-share-${t.id}`,children:[e.jsx("i",{className:"fas fa-retweet"}),e.jsx("span",{"data-testid":`text-shares-${t.id}`,children:t.shares})]})]}),e.jsx(s,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground","data-testid":`button-bookmark-${t.id}`,children:e.jsx("i",{className:"far fa-bookmark"})})]})]})})}export{A as P};
