import{r as n,j as e,C as j,h as p,i as N,B as d,a as v}from"./index-x6ttPYJB.js";import{u as S,S as $,H as k}from"./header-DL3LS-5i.js";import{B as w}from"./badge-DW8Jq-G-.js";import{C as R}from"./chat-widget-DysOy8Ql.js";import"./avatar-DDb5HwhO.js";import"./useMutation-8-LeqHSO.js";import"./input-DGZY7dyY.js";import"./index-6cItzXPM.js";import"./index-BdQq_4o_.js";const z=[{id:"trigger-1",type:"trigger",title:"Trigger",subtitle:"New Mention",position:{x:100,y:150},color:"bg-green-500",icon:"fas fa-play-circle"},{id:"ai-1",type:"ai",title:"AI Analysis",subtitle:"Sentiment Check",position:{x:350,y:150},color:"bg-primary",icon:"fas fa-robot"},{id:"action-1",type:"action",title:"Auto Reply",subtitle:"Generate Response",position:{x:600,y:150},color:"bg-accent",icon:"fas fa-reply"}];function B(){const[a,c]=n.useState(z),[t,x]=n.useState(null),[o,b]=n.useState(null),[u,C]=n.useState({x:0,y:0}),A=n.useCallback((s,i)=>{if(!a.find(l=>l.id===i))return;const m=s.currentTarget.getBoundingClientRect(),f=s.clientX-m.left,g=s.clientY-m.top;b(i),C({x:f,y:g}),x(i)},[a]),M=n.useCallback(s=>{if(!o)return;const r=s.currentTarget.getBoundingClientRect(),m=s.clientX-r.left-u.x,f=s.clientY-r.top-u.y;c(g=>g.map(l=>l.id===o?{...l,position:{x:Math.max(0,Math.min(m,700)),y:Math.max(0,Math.min(f,350))}}:l))},[o,u]),y=n.useCallback(()=>{b(null)},[]),h=s=>{const i={id:`${s}-${Date.now()}`,type:s,title:s==="trigger"?"New Trigger":s==="ai"?"AI Process":"New Action",subtitle:"Configure me",position:{x:200,y:200},color:s==="trigger"?"bg-green-500":s==="ai"?"bg-primary":"bg-accent",icon:s==="trigger"?"fas fa-play":s==="ai"?"fas fa-brain":"fas fa-cog"};c(r=>[...r,i])};return e.jsxs(j,{className:"h-[600px]",children:[e.jsx(p,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(N,{children:"Workflow Builder"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(d,{size:"sm",variant:"outline","data-testid":"button-save-workflow",children:[e.jsx("i",{className:"fas fa-save mr-2"}),"Save"]}),e.jsxs(d,{size:"sm","data-testid":"button-run-workflow",children:[e.jsx("i",{className:"fas fa-play mr-2"}),"Run"]})]})]})}),e.jsx(v,{children:e.jsxs("div",{className:"flex gap-6 h-full",children:[e.jsxs("div",{className:"w-48 space-y-3",children:[e.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Components"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("trigger"),"data-testid":"button-add-trigger",children:[e.jsx("i",{className:"fas fa-play-circle text-green-500 mr-2"}),"Trigger"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("ai"),"data-testid":"button-add-ai",children:[e.jsx("i",{className:"fas fa-robot text-primary mr-2"}),"AI Process"]}),e.jsxs(d,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>h("action"),"data-testid":"button-add-action",children:[e.jsx("i",{className:"fas fa-cog text-accent mr-2"}),"Action"]})]}),t&&e.jsxs("div",{className:"mt-6 p-3 bg-muted/50 rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Node Properties"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure the selected node's settings here."})]})]}),e.jsxs("div",{className:"flex-1 relative",children:[e.jsxs("div",{className:"w-full h-full bg-muted/20 rounded-lg relative overflow-hidden cursor-crosshair border-2 border-dashed border-muted-foreground/20",onMouseMove:M,onMouseUp:y,onMouseLeave:y,"data-testid":"workflow-canvas",children:[e.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:a.map((s,i)=>{const r=a[i+1];return r?e.jsx("line",{x1:s.position.x+80,y1:s.position.y+25,x2:r.position.x,y2:r.position.y+25,stroke:"hsl(var(--muted-foreground))",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"},`line-${s.id}-${r.id}`):null})}),a.map(s=>e.jsx("div",{className:`absolute cursor-move select-none transition-all duration-200 hover:scale-105 ${t===s.id?"ring-2 ring-primary":""}`,style:{left:s.position.x,top:s.position.y,transform:o===s.id?"scale(1.05)":"scale(1)"},onMouseDown:i=>A(i,s.id),"data-testid":`workflow-node-${s.id}`,children:e.jsx("div",{className:`${s.color} text-white px-4 py-3 rounded-lg shadow-lg min-w-[160px]`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("i",{className:s.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.title}),e.jsx("div",{className:"text-xs opacity-80",children:s.subtitle})]})]})})},s.id)),e.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:`
                    radial-gradient(circle, hsl(var(--muted-foreground)) 1px, transparent 1px)
                  `,backgroundSize:"20px 20px"}})]}),e.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:e.jsxs("div",{className:"flex items-center justify-between text-sm bg-card/90 backdrop-blur-sm rounded-lg px-3 py-2 border",children:[e.jsxs("span",{className:"text-muted-foreground","data-testid":"text-node-count",children:[a.length," nodes"]}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs(w,{variant:"secondary","data-testid":"badge-status",children:[e.jsx("i",{className:"fas fa-circle text-green-500 mr-1"}),"Ready to run"]})})]})})]})]})})]})}function X(){const{data:a,isLoading:c}=S({queryKey:["/api/workflows"],queryFn:()=>fetch("/api/workflows?userId=user-1").then(t=>t.json())});return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[e.jsx($,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(k,{title:"Workflows",subtitle:"Create and manage your automation workflows"}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(B,{})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(N,{children:"Your Workflows"})}),e.jsx(v,{children:c?e.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((t,x)=>e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg animate-pulse",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},x))}):a!=null&&a.length?e.jsx("div",{className:"space-y-4",children:a.map(t=>e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors","data-testid":`workflow-${t.id}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("h4",{className:"font-medium text-foreground",children:t.name}),e.jsx(w,{variant:t.isActive?"default":"secondary","data-testid":`status-${t.id}`,children:t.isActive?"Active":"Inactive"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{"data-testid":`run-count-${t.id}`,children:[t.runCount," runs"]}),e.jsx("span",{"data-testid":`last-run-${t.id}`,children:t.lastRun?`Last: ${new Date(t.lastRun).toLocaleDateString()}`:"Never run"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsxs(d,{size:"sm",variant:"outline","data-testid":`button-edit-${t.id}`,children:[e.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),e.jsxs(d,{size:"sm",variant:"outline","data-testid":`button-toggle-${t.id}`,children:[e.jsx("i",{className:`fas ${t.isActive?"fa-pause":"fa-play"} mr-1`}),t.isActive?"Pause":"Start"]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("i",{className:"fas fa-project-diagram text-4xl text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No workflows created yet"})]})})]}),e.jsxs(j,{children:[e.jsx(p,{children:e.jsx(N,{children:"Quick Start Templates"})}),e.jsxs(v,{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-auto-responder",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-reply text-white text-sm"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Auto Responder"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Respond to mentions automatically"})]})]})}),e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-content-scheduler",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-calendar text-white text-sm"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Content Scheduler"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule posts at optimal times"})]})]})}),e.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-trend-analyzer",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:e.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-foreground",children:"Trend Analyzer"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and respond to trends"})]})]})})]})]})]})]})})})]}),e.jsx(R,{})]})}export{X as default};
