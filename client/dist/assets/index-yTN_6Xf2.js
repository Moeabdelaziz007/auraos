var b0=t=>{throw TypeError(t)};var Rm=(t,e,n)=>e.has(t)||b0("Cannot "+n);var O=(t,e,n)=>(Rm(t,e,"read from private field"),n?n.call(t):e.get(t)),ie=(t,e,n)=>e.has(t)?b0("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),G=(t,e,n,r)=>(Rm(t,e,"write to private field"),r?r.call(t,n):e.set(t,n),n),ge=(t,e,n)=>(Rm(t,e,"access private method"),n);var Ou=(t,e,n,r)=>({set _(s){G(t,e,s,n)},get _(){return O(t,e,r)}});function Bk(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function CT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var RT={exports:{}},Yh={},PT={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xc=Symbol.for("react.element"),Hk=Symbol.for("react.portal"),Wk=Symbol.for("react.fragment"),qk=Symbol.for("react.strict_mode"),Gk=Symbol.for("react.profiler"),Kk=Symbol.for("react.provider"),Qk=Symbol.for("react.context"),Yk=Symbol.for("react.forward_ref"),Xk=Symbol.for("react.suspense"),Jk=Symbol.for("react.memo"),Zk=Symbol.for("react.lazy"),S0=Symbol.iterator;function e2(t){return t===null||typeof t!="object"?null:(t=S0&&t[S0]||t["@@iterator"],typeof t=="function"?t:null)}var jT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},kT=Object.assign,DT={};function Ja(t,e,n){this.props=t,this.context=e,this.refs=DT,this.updater=n||jT}Ja.prototype.isReactComponent={};Ja.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ja.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function OT(){}OT.prototype=Ja.prototype;function zy(t,e,n){this.props=t,this.context=e,this.refs=DT,this.updater=n||jT}var By=zy.prototype=new OT;By.constructor=zy;kT(By,Ja.prototype);By.isPureReactComponent=!0;var I0=Array.isArray,MT=Object.prototype.hasOwnProperty,Hy={current:null},LT={key:!0,ref:!0,__self:!0,__source:!0};function VT(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)MT.call(e,r)&&!LT.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Xc,type:t,key:i,ref:o,props:s,_owner:Hy.current}}function t2(t,e){return{$$typeof:Xc,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Wy(t){return typeof t=="object"&&t!==null&&t.$$typeof===Xc}function n2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var N0=/\/+/g;function Pm(t,e){return typeof t=="object"&&t!==null&&t.key!=null?n2(""+t.key):e.toString(36)}function gd(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Xc:case Hk:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Pm(o,0):r,I0(s)?(n="",t!=null&&(n=t.replace(N0,"$&/")+"/"),gd(s,e,n,"",function(d){return d})):s!=null&&(Wy(s)&&(s=t2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(N0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",I0(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+Pm(i,l);o+=gd(i,e,n,c,s)}else if(c=e2(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+Pm(i,l++),o+=gd(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Mu(t,e,n){if(t==null)return t;var r=[],s=0;return gd(t,r,"","",function(i){return e.call(n,i,s++)}),r}function r2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Gt={current:null},yd={transition:null},s2={ReactCurrentDispatcher:Gt,ReactCurrentBatchConfig:yd,ReactCurrentOwner:Hy};function FT(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Mu,forEach:function(t,e,n){Mu(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Mu(t,function(){e++}),e},toArray:function(t){return Mu(t,function(e){return e})||[]},only:function(t){if(!Wy(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Ja;xe.Fragment=Wk;xe.Profiler=Gk;xe.PureComponent=zy;xe.StrictMode=qk;xe.Suspense=Xk;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s2;xe.act=FT;xe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=kT({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Hy.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)MT.call(e,c)&&!LT.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Xc,type:t.type,key:s,ref:i,props:r,_owner:o}};xe.createContext=function(t){return t={$$typeof:Qk,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Kk,_context:t},t.Consumer=t};xe.createElement=VT;xe.createFactory=function(t){var e=VT.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:Yk,render:t}};xe.isValidElement=Wy;xe.lazy=function(t){return{$$typeof:Zk,_payload:{_status:-1,_result:t},_init:r2}};xe.memo=function(t,e){return{$$typeof:Jk,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=yd.transition;yd.transition={};try{t()}finally{yd.transition=e}};xe.unstable_act=FT;xe.useCallback=function(t,e){return Gt.current.useCallback(t,e)};xe.useContext=function(t){return Gt.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return Gt.current.useDeferredValue(t)};xe.useEffect=function(t,e){return Gt.current.useEffect(t,e)};xe.useId=function(){return Gt.current.useId()};xe.useImperativeHandle=function(t,e,n){return Gt.current.useImperativeHandle(t,e,n)};xe.useInsertionEffect=function(t,e){return Gt.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return Gt.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return Gt.current.useMemo(t,e)};xe.useReducer=function(t,e,n){return Gt.current.useReducer(t,e,n)};xe.useRef=function(t){return Gt.current.useRef(t)};xe.useState=function(t){return Gt.current.useState(t)};xe.useSyncExternalStore=function(t,e,n){return Gt.current.useSyncExternalStore(t,e,n)};xe.useTransition=function(){return Gt.current.useTransition()};xe.version="18.3.1";PT.exports=xe;var p=PT.exports;const ct=CT(p),UT=Bk({__proto__:null,default:ct},[p]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2=p,o2=Symbol.for("react.element"),a2=Symbol.for("react.fragment"),l2=Object.prototype.hasOwnProperty,c2=i2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,u2={key:!0,ref:!0,__self:!0,__source:!0};function $T(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)l2.call(e,r)&&!u2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:o2,type:t,key:i,ref:o,props:s,_owner:c2.current}}Yh.Fragment=a2;Yh.jsx=$T;Yh.jsxs=$T;RT.exports=Yh;var a=RT.exports,zT={exports:{}},En={},BT={exports:{}},HT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(U,H){var J=U.length;U.push(H);e:for(;0<J;){var ue=J-1>>>1,Re=U[ue];if(0<s(Re,H))U[ue]=H,U[J]=Re,J=ue;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],J=U.pop();if(J!==H){U[0]=J;e:for(var ue=0,Re=U.length,wt=Re>>>1;ue<wt;){var qe=2*(ue+1)-1,Qt=U[qe],ft=qe+1,re=U[ft];if(0>s(Qt,J))ft<Re&&0>s(re,Qt)?(U[ue]=re,U[ft]=J,ue=ft):(U[ue]=Qt,U[qe]=J,ue=qe);else if(ft<Re&&0>s(re,J))U[ue]=re,U[ft]=J,ue=ft;else break e}}return H}function s(U,H){var J=U.sortIndex-H.sortIndex;return J!==0?J:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],h=1,f=null,m=3,y=!1,b=!1,v=!1,_=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(U){for(var H=n(d);H!==null;){if(H.callback===null)r(d);else if(H.startTime<=U)r(d),H.sortIndex=H.expirationTime,e(c,H);else break;H=n(d)}}function R(U){if(v=!1,S(U),!b)if(n(c)!==null)b=!0,X(D);else{var H=n(d);H!==null&&he(R,H.startTime-U)}}function D(U,H){b=!1,v&&(v=!1,E(I),I=-1),y=!0;var J=m;try{for(S(H),f=n(c);f!==null&&(!(f.expirationTime>H)||U&&!j());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,m=f.priorityLevel;var Re=ue(f.expirationTime<=H);H=t.unstable_now(),typeof Re=="function"?f.callback=Re:f===n(c)&&r(c),S(H)}else r(c);f=n(c)}if(f!==null)var wt=!0;else{var qe=n(d);qe!==null&&he(R,qe.startTime-H),wt=!1}return wt}finally{f=null,m=J,y=!1}}var M=!1,T=null,I=-1,N=5,C=-1;function j(){return!(t.unstable_now()-C<N)}function k(){if(T!==null){var U=t.unstable_now();C=U;var H=!0;try{H=T(!0,U)}finally{H?P():(M=!1,T=null)}}else M=!1}var P;if(typeof x=="function")P=function(){x(k)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,ae=B.port2;B.port1.onmessage=k,P=function(){ae.postMessage(null)}}else P=function(){_(k,0)};function X(U){T=U,M||(M=!0,P())}function he(U,H){I=_(function(){U(t.unstable_now())},H)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){b||y||(b=!0,X(D))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):N=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(U){switch(m){case 1:case 2:case 3:var H=3;break;default:H=m}var J=m;m=H;try{return U()}finally{m=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=m;m=U;try{return H()}finally{m=J}},t.unstable_scheduleCallback=function(U,H,J){var ue=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ue+J:ue):J=ue,U){case 1:var Re=-1;break;case 2:Re=250;break;case 5:Re=1073741823;break;case 4:Re=1e4;break;default:Re=5e3}return Re=J+Re,U={id:h++,callback:H,priorityLevel:U,startTime:J,expirationTime:Re,sortIndex:-1},J>ue?(U.sortIndex=J,e(d,U),n(c)===null&&U===n(d)&&(v?(E(I),I=-1):v=!0,he(R,J-ue))):(U.sortIndex=Re,e(c,U),b||y||(b=!0,X(D))),U},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(U){var H=m;return function(){var J=m;m=H;try{return U.apply(this,arguments)}finally{m=J}}}})(HT);BT.exports=HT;var d2=BT.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h2=p,_n=d2;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var WT=new Set,mc={};function xo(t,e){Ra(t,e),Ra(t+"Capture",e)}function Ra(t,e){for(mc[t]=e,t=0;t<e.length;t++)WT.add(e[t])}var Jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Vp=Object.prototype.hasOwnProperty,f2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A0={},C0={};function m2(t){return Vp.call(C0,t)?!0:Vp.call(A0,t)?!1:f2.test(t)?C0[t]=!0:(A0[t]=!0,!1)}function p2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function g2(t,e,n,r){if(e===null||typeof e>"u"||p2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Rt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Rt[t]=new Kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Rt[e]=new Kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Rt[t]=new Kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Rt[t]=new Kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Rt[t]=new Kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Rt[t]=new Kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Rt[t]=new Kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Rt[t]=new Kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var qy=/[\-:]([a-z])/g;function Gy(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qy,Gy);Rt[e]=new Kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qy,Gy);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qy,Gy);Rt[e]=new Kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!1,!1)});Rt.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Rt[t]=new Kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ky(t,e,n,r){var s=Rt.hasOwnProperty(e)?Rt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(g2(e,n,s,r)&&(n=null),r||s===null?m2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var cs=h2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Lu=Symbol.for("react.element"),$o=Symbol.for("react.portal"),zo=Symbol.for("react.fragment"),Qy=Symbol.for("react.strict_mode"),Fp=Symbol.for("react.profiler"),qT=Symbol.for("react.provider"),GT=Symbol.for("react.context"),Yy=Symbol.for("react.forward_ref"),Up=Symbol.for("react.suspense"),$p=Symbol.for("react.suspense_list"),Xy=Symbol.for("react.memo"),Ss=Symbol.for("react.lazy"),KT=Symbol.for("react.offscreen"),R0=Symbol.iterator;function Rl(t){return t===null||typeof t!="object"?null:(t=R0&&t[R0]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,jm;function $l(t){if(jm===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);jm=e&&e[1]||""}return`
`+jm+t}var km=!1;function Dm(t,e){if(!t||km)return"";km=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{km=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?$l(t):""}function y2(t){switch(t.tag){case 5:return $l(t.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return t=Dm(t.type,!1),t;case 11:return t=Dm(t.type.render,!1),t;case 1:return t=Dm(t.type,!0),t;default:return""}}function zp(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zo:return"Fragment";case $o:return"Portal";case Fp:return"Profiler";case Qy:return"StrictMode";case Up:return"Suspense";case $p:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case GT:return(t.displayName||"Context")+".Consumer";case qT:return(t._context.displayName||"Context")+".Provider";case Yy:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xy:return e=t.displayName||null,e!==null?e:zp(t.type)||"Memo";case Ss:e=t._payload,t=t._init;try{return zp(t(e))}catch{}}return null}function v2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zp(e);case 8:return e===Qy?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ii(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function QT(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function x2(t){var e=QT(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vu(t){t._valueTracker||(t._valueTracker=x2(t))}function YT(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=QT(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function qd(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Bp(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function P0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=ii(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function XT(t,e){e=e.checked,e!=null&&Ky(t,"checked",e,!1)}function Hp(t,e){XT(t,e);var n=ii(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Wp(t,e.type,n):e.hasOwnProperty("defaultValue")&&Wp(t,e.type,ii(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function j0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Wp(t,e,n){(e!=="number"||qd(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var zl=Array.isArray;function ta(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+ii(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function qp(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function k0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(zl(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ii(n)}}function JT(t,e){var n=ii(e.value),r=ii(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function D0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ZT(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gp(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ZT(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Fu,eb=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Fu=Fu||document.createElement("div"),Fu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Fu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function pc(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Jl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},w2=["Webkit","ms","Moz","O"];Object.keys(Jl).forEach(function(t){w2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Jl[e]=Jl[t]})});function tb(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Jl.hasOwnProperty(t)&&Jl[t]?(""+e).trim():e+"px"}function nb(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=tb(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var _2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Kp(t,e){if(e){if(_2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Qp(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Yp=null;function Jy(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Xp=null,na=null,ra=null;function O0(t){if(t=eu(t)){if(typeof Xp!="function")throw Error(z(280));var e=t.stateNode;e&&(e=tf(e),Xp(t.stateNode,t.type,e))}}function rb(t){na?ra?ra.push(t):ra=[t]:na=t}function sb(){if(na){var t=na,e=ra;if(ra=na=null,O0(t),e)for(t=0;t<e.length;t++)O0(e[t])}}function ib(t,e){return t(e)}function ob(){}var Om=!1;function ab(t,e,n){if(Om)return t(e,n);Om=!0;try{return ib(t,e,n)}finally{Om=!1,(na!==null||ra!==null)&&(ob(),sb())}}function gc(t,e){var n=t.stateNode;if(n===null)return null;var r=tf(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var Jp=!1;if(Jr)try{var Pl={};Object.defineProperty(Pl,"passive",{get:function(){Jp=!0}}),window.addEventListener("test",Pl,Pl),window.removeEventListener("test",Pl,Pl)}catch{Jp=!1}function E2(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var Zl=!1,Gd=null,Kd=!1,Zp=null,T2={onError:function(t){Zl=!0,Gd=t}};function b2(t,e,n,r,s,i,o,l,c){Zl=!1,Gd=null,E2.apply(T2,arguments)}function S2(t,e,n,r,s,i,o,l,c){if(b2.apply(this,arguments),Zl){if(Zl){var d=Gd;Zl=!1,Gd=null}else throw Error(z(198));Kd||(Kd=!0,Zp=d)}}function wo(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function lb(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function M0(t){if(wo(t)!==t)throw Error(z(188))}function I2(t){var e=t.alternate;if(!e){if(e=wo(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return M0(s),t;if(i===r)return M0(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function cb(t){return t=I2(t),t!==null?ub(t):null}function ub(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=ub(t);if(e!==null)return e;t=t.sibling}return null}var db=_n.unstable_scheduleCallback,L0=_n.unstable_cancelCallback,N2=_n.unstable_shouldYield,A2=_n.unstable_requestPaint,it=_n.unstable_now,C2=_n.unstable_getCurrentPriorityLevel,Zy=_n.unstable_ImmediatePriority,hb=_n.unstable_UserBlockingPriority,Qd=_n.unstable_NormalPriority,R2=_n.unstable_LowPriority,fb=_n.unstable_IdlePriority,Xh=null,vr=null;function P2(t){if(vr&&typeof vr.onCommitFiberRoot=="function")try{vr.onCommitFiberRoot(Xh,t,void 0,(t.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:D2,j2=Math.log,k2=Math.LN2;function D2(t){return t>>>=0,t===0?32:31-(j2(t)/k2|0)|0}var Uu=64,$u=4194304;function Bl(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Yd(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Bl(l):(i&=o,i!==0&&(r=Bl(i)))}else o=n&~s,o!==0?r=Bl(o):i!==0&&(r=Bl(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Yn(e),s=1<<n,r|=t[n],e&=~s;return r}function O2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M2(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Yn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=O2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function eg(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function mb(){var t=Uu;return Uu<<=1,!(Uu&4194240)&&(Uu=64),t}function Mm(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Jc(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Yn(e),t[e]=n}function L2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Yn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ev(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Yn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Me=0;function pb(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var gb,tv,yb,vb,xb,tg=!1,zu=[],Gs=null,Ks=null,Qs=null,yc=new Map,vc=new Map,Ns=[],V2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function V0(t,e){switch(t){case"focusin":case"focusout":Gs=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Qs=null;break;case"pointerover":case"pointerout":yc.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vc.delete(e.pointerId)}}function jl(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=eu(e),e!==null&&tv(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function F2(t,e,n,r,s){switch(e){case"focusin":return Gs=jl(Gs,t,e,n,r,s),!0;case"dragenter":return Ks=jl(Ks,t,e,n,r,s),!0;case"mouseover":return Qs=jl(Qs,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return yc.set(i,jl(yc.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,vc.set(i,jl(vc.get(i)||null,t,e,n,r,s)),!0}return!1}function wb(t){var e=Vi(t.target);if(e!==null){var n=wo(e);if(n!==null){if(e=n.tag,e===13){if(e=lb(n),e!==null){t.blockedOn=e,xb(t.priority,function(){yb(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function vd(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ng(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Yp=r,n.target.dispatchEvent(r),Yp=null}else return e=eu(n),e!==null&&tv(e),t.blockedOn=n,!1;e.shift()}return!0}function F0(t,e,n){vd(t)&&n.delete(e)}function U2(){tg=!1,Gs!==null&&vd(Gs)&&(Gs=null),Ks!==null&&vd(Ks)&&(Ks=null),Qs!==null&&vd(Qs)&&(Qs=null),yc.forEach(F0),vc.forEach(F0)}function kl(t,e){t.blockedOn===e&&(t.blockedOn=null,tg||(tg=!0,_n.unstable_scheduleCallback(_n.unstable_NormalPriority,U2)))}function xc(t){function e(s){return kl(s,t)}if(0<zu.length){kl(zu[0],t);for(var n=1;n<zu.length;n++){var r=zu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Gs!==null&&kl(Gs,t),Ks!==null&&kl(Ks,t),Qs!==null&&kl(Qs,t),yc.forEach(e),vc.forEach(e),n=0;n<Ns.length;n++)r=Ns[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ns.length&&(n=Ns[0],n.blockedOn===null);)wb(n),n.blockedOn===null&&Ns.shift()}var sa=cs.ReactCurrentBatchConfig,Xd=!0;function $2(t,e,n,r){var s=Me,i=sa.transition;sa.transition=null;try{Me=1,nv(t,e,n,r)}finally{Me=s,sa.transition=i}}function z2(t,e,n,r){var s=Me,i=sa.transition;sa.transition=null;try{Me=4,nv(t,e,n,r)}finally{Me=s,sa.transition=i}}function nv(t,e,n,r){if(Xd){var s=ng(t,e,n,r);if(s===null)qm(t,e,r,Jd,n),V0(t,r);else if(F2(s,t,e,n,r))r.stopPropagation();else if(V0(t,r),e&4&&-1<V2.indexOf(t)){for(;s!==null;){var i=eu(s);if(i!==null&&gb(i),i=ng(t,e,n,r),i===null&&qm(t,e,r,Jd,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else qm(t,e,r,null,n)}}var Jd=null;function ng(t,e,n,r){if(Jd=null,t=Jy(r),t=Vi(t),t!==null)if(e=wo(t),e===null)t=null;else if(n=e.tag,n===13){if(t=lb(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jd=t,null}function _b(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(C2()){case Zy:return 1;case hb:return 4;case Qd:case R2:return 16;case fb:return 536870912;default:return 16}default:return 16}}var zs=null,rv=null,xd=null;function Eb(){if(xd)return xd;var t,e=rv,n=e.length,r,s="value"in zs?zs.value:zs.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return xd=s.slice(t,1<r?1-r:void 0)}function wd(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Bu(){return!0}function U0(){return!1}function Tn(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Bu:U0,this.isPropagationStopped=U0,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Bu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Bu)},persist:function(){},isPersistent:Bu}),e}var Za={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sv=Tn(Za),Zc=Ye({},Za,{view:0,detail:0}),B2=Tn(Zc),Lm,Vm,Dl,Jh=Ye({},Zc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:iv,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Dl&&(Dl&&t.type==="mousemove"?(Lm=t.screenX-Dl.screenX,Vm=t.screenY-Dl.screenY):Vm=Lm=0,Dl=t),Lm)},movementY:function(t){return"movementY"in t?t.movementY:Vm}}),$0=Tn(Jh),H2=Ye({},Jh,{dataTransfer:0}),W2=Tn(H2),q2=Ye({},Zc,{relatedTarget:0}),Fm=Tn(q2),G2=Ye({},Za,{animationName:0,elapsedTime:0,pseudoElement:0}),K2=Tn(G2),Q2=Ye({},Za,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Y2=Tn(Q2),X2=Ye({},Za,{data:0}),z0=Tn(X2),J2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tD(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=eD[t])?!!e[t]:!1}function iv(){return tD}var nD=Ye({},Zc,{key:function(t){if(t.key){var e=J2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=wd(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Z2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:iv,charCode:function(t){return t.type==="keypress"?wd(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?wd(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),rD=Tn(nD),sD=Ye({},Jh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),B0=Tn(sD),iD=Ye({},Zc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:iv}),oD=Tn(iD),aD=Ye({},Za,{propertyName:0,elapsedTime:0,pseudoElement:0}),lD=Tn(aD),cD=Ye({},Jh,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),uD=Tn(cD),dD=[9,13,27,32],ov=Jr&&"CompositionEvent"in window,ec=null;Jr&&"documentMode"in document&&(ec=document.documentMode);var hD=Jr&&"TextEvent"in window&&!ec,Tb=Jr&&(!ov||ec&&8<ec&&11>=ec),H0=" ",W0=!1;function bb(t,e){switch(t){case"keyup":return dD.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sb(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Bo=!1;function fD(t,e){switch(t){case"compositionend":return Sb(e);case"keypress":return e.which!==32?null:(W0=!0,H0);case"textInput":return t=e.data,t===H0&&W0?null:t;default:return null}}function mD(t,e){if(Bo)return t==="compositionend"||!ov&&bb(t,e)?(t=Eb(),xd=rv=zs=null,Bo=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Tb&&e.locale!=="ko"?null:e.data;default:return null}}var pD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function q0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!pD[t.type]:e==="textarea"}function Ib(t,e,n,r){rb(r),e=Zd(e,"onChange"),0<e.length&&(n=new sv("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var tc=null,wc=null;function gD(t){Lb(t,0)}function Zh(t){var e=qo(t);if(YT(e))return t}function yD(t,e){if(t==="change")return e}var Nb=!1;if(Jr){var Um;if(Jr){var $m="oninput"in document;if(!$m){var G0=document.createElement("div");G0.setAttribute("oninput","return;"),$m=typeof G0.oninput=="function"}Um=$m}else Um=!1;Nb=Um&&(!document.documentMode||9<document.documentMode)}function K0(){tc&&(tc.detachEvent("onpropertychange",Ab),wc=tc=null)}function Ab(t){if(t.propertyName==="value"&&Zh(wc)){var e=[];Ib(e,wc,t,Jy(t)),ab(gD,e)}}function vD(t,e,n){t==="focusin"?(K0(),tc=e,wc=n,tc.attachEvent("onpropertychange",Ab)):t==="focusout"&&K0()}function xD(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zh(wc)}function wD(t,e){if(t==="click")return Zh(e)}function _D(t,e){if(t==="input"||t==="change")return Zh(e)}function ED(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var er=typeof Object.is=="function"?Object.is:ED;function _c(t,e){if(er(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Vp.call(e,s)||!er(t[s],e[s]))return!1}return!0}function Q0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Y0(t,e){var n=Q0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Q0(n)}}function Cb(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Cb(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Rb(){for(var t=window,e=qd();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=qd(t.document)}return e}function av(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TD(t){var e=Rb(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Cb(n.ownerDocument.documentElement,n)){if(r!==null&&av(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Y0(n,i);var o=Y0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bD=Jr&&"documentMode"in document&&11>=document.documentMode,Ho=null,rg=null,nc=null,sg=!1;function X0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;sg||Ho==null||Ho!==qd(r)||(r=Ho,"selectionStart"in r&&av(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),nc&&_c(nc,r)||(nc=r,r=Zd(rg,"onSelect"),0<r.length&&(e=new sv("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ho)))}function Hu(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wo={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},zm={},Pb={};Jr&&(Pb=document.createElement("div").style,"AnimationEvent"in window||(delete Wo.animationend.animation,delete Wo.animationiteration.animation,delete Wo.animationstart.animation),"TransitionEvent"in window||delete Wo.transitionend.transition);function ef(t){if(zm[t])return zm[t];if(!Wo[t])return t;var e=Wo[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Pb)return zm[t]=e[n];return t}var jb=ef("animationend"),kb=ef("animationiteration"),Db=ef("animationstart"),Ob=ef("transitionend"),Mb=new Map,J0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xi(t,e){Mb.set(t,e),xo(e,[t])}for(var Bm=0;Bm<J0.length;Bm++){var Hm=J0[Bm],SD=Hm.toLowerCase(),ID=Hm[0].toUpperCase()+Hm.slice(1);xi(SD,"on"+ID)}xi(jb,"onAnimationEnd");xi(kb,"onAnimationIteration");xi(Db,"onAnimationStart");xi("dblclick","onDoubleClick");xi("focusin","onFocus");xi("focusout","onBlur");xi(Ob,"onTransitionEnd");Ra("onMouseEnter",["mouseout","mouseover"]);Ra("onMouseLeave",["mouseout","mouseover"]);Ra("onPointerEnter",["pointerout","pointerover"]);Ra("onPointerLeave",["pointerout","pointerover"]);xo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));xo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));xo("onBeforeInput",["compositionend","keypress","textInput","paste"]);xo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));xo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Hl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ND=new Set("cancel close invalid load scroll toggle".split(" ").concat(Hl));function Z0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,S2(r,e,void 0,t),t.currentTarget=null}function Lb(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Z0(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Z0(s,l,d),i=c}}}if(Kd)throw t=Zp,Kd=!1,Zp=null,t}function He(t,e){var n=e[cg];n===void 0&&(n=e[cg]=new Set);var r=t+"__bubble";n.has(r)||(Vb(e,t,2,!1),n.add(r))}function Wm(t,e,n){var r=0;e&&(r|=4),Vb(n,t,r,e)}var Wu="_reactListening"+Math.random().toString(36).slice(2);function Ec(t){if(!t[Wu]){t[Wu]=!0,WT.forEach(function(n){n!=="selectionchange"&&(ND.has(n)||Wm(n,!1,t),Wm(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wu]||(e[Wu]=!0,Wm("selectionchange",!1,e))}}function Vb(t,e,n,r){switch(_b(e)){case 1:var s=$2;break;case 4:s=z2;break;default:s=nv}n=s.bind(null,e,n,t),s=void 0,!Jp||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function qm(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Vi(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}ab(function(){var d=i,h=Jy(n),f=[];e:{var m=Mb.get(t);if(m!==void 0){var y=sv,b=t;switch(t){case"keypress":if(wd(n)===0)break e;case"keydown":case"keyup":y=rD;break;case"focusin":b="focus",y=Fm;break;case"focusout":b="blur",y=Fm;break;case"beforeblur":case"afterblur":y=Fm;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=$0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=W2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=oD;break;case jb:case kb:case Db:y=K2;break;case Ob:y=lD;break;case"scroll":y=B2;break;case"wheel":y=uD;break;case"copy":case"cut":case"paste":y=Y2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=B0}var v=(e&4)!==0,_=!v&&t==="scroll",E=v?m!==null?m+"Capture":null:m;v=[];for(var x=d,S;x!==null;){S=x;var R=S.stateNode;if(S.tag===5&&R!==null&&(S=R,E!==null&&(R=gc(x,E),R!=null&&v.push(Tc(x,R,S)))),_)break;x=x.return}0<v.length&&(m=new y(m,b,null,n,h),f.push({event:m,listeners:v}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==Yp&&(b=n.relatedTarget||n.fromElement)&&(Vi(b)||b[Zr]))break e;if((y||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,y?(b=n.relatedTarget||n.toElement,y=d,b=b?Vi(b):null,b!==null&&(_=wo(b),b!==_||b.tag!==5&&b.tag!==6)&&(b=null)):(y=null,b=d),y!==b)){if(v=$0,R="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(v=B0,R="onPointerLeave",E="onPointerEnter",x="pointer"),_=y==null?m:qo(y),S=b==null?m:qo(b),m=new v(R,x+"leave",y,n,h),m.target=_,m.relatedTarget=S,R=null,Vi(h)===d&&(v=new v(E,x+"enter",b,n,h),v.target=S,v.relatedTarget=_,R=v),_=R,y&&b)t:{for(v=y,E=b,x=0,S=v;S;S=ko(S))x++;for(S=0,R=E;R;R=ko(R))S++;for(;0<x-S;)v=ko(v),x--;for(;0<S-x;)E=ko(E),S--;for(;x--;){if(v===E||E!==null&&v===E.alternate)break t;v=ko(v),E=ko(E)}v=null}else v=null;y!==null&&e_(f,m,y,v,!1),b!==null&&_!==null&&e_(f,_,b,v,!0)}}e:{if(m=d?qo(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var D=yD;else if(q0(m))if(Nb)D=_D;else{D=xD;var M=vD}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=wD);if(D&&(D=D(t,d))){Ib(f,D,n,h);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Wp(m,"number",m.value)}switch(M=d?qo(d):window,t){case"focusin":(q0(M)||M.contentEditable==="true")&&(Ho=M,rg=d,nc=null);break;case"focusout":nc=rg=Ho=null;break;case"mousedown":sg=!0;break;case"contextmenu":case"mouseup":case"dragend":sg=!1,X0(f,n,h);break;case"selectionchange":if(bD)break;case"keydown":case"keyup":X0(f,n,h)}var T;if(ov)e:{switch(t){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else Bo?bb(t,n)&&(I="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(I="onCompositionStart");I&&(Tb&&n.locale!=="ko"&&(Bo||I!=="onCompositionStart"?I==="onCompositionEnd"&&Bo&&(T=Eb()):(zs=h,rv="value"in zs?zs.value:zs.textContent,Bo=!0)),M=Zd(d,I),0<M.length&&(I=new z0(I,t,null,n,h),f.push({event:I,listeners:M}),T?I.data=T:(T=Sb(n),T!==null&&(I.data=T)))),(T=hD?fD(t,n):mD(t,n))&&(d=Zd(d,"onBeforeInput"),0<d.length&&(h=new z0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=T))}Lb(f,e)})}function Tc(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zd(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=gc(t,n),i!=null&&r.unshift(Tc(t,i,s)),i=gc(t,e),i!=null&&r.push(Tc(t,i,s))),t=t.return}return r}function ko(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function e_(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=gc(n,i),c!=null&&o.unshift(Tc(n,c,l))):s||(c=gc(n,i),c!=null&&o.push(Tc(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AD=/\r\n?/g,CD=/\u0000|\uFFFD/g;function t_(t){return(typeof t=="string"?t:""+t).replace(AD,`
`).replace(CD,"")}function qu(t,e,n){if(e=t_(e),t_(t)!==e&&n)throw Error(z(425))}function eh(){}var ig=null,og=null;function ag(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var lg=typeof setTimeout=="function"?setTimeout:void 0,RD=typeof clearTimeout=="function"?clearTimeout:void 0,n_=typeof Promise=="function"?Promise:void 0,PD=typeof queueMicrotask=="function"?queueMicrotask:typeof n_<"u"?function(t){return n_.resolve(null).then(t).catch(jD)}:lg;function jD(t){setTimeout(function(){throw t})}function Gm(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),xc(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);xc(e)}function Ys(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function r_(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var el=Math.random().toString(36).slice(2),gr="__reactFiber$"+el,bc="__reactProps$"+el,Zr="__reactContainer$"+el,cg="__reactEvents$"+el,kD="__reactListeners$"+el,DD="__reactHandles$"+el;function Vi(t){var e=t[gr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Zr]||n[gr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=r_(t);t!==null;){if(n=t[gr])return n;t=r_(t)}return e}t=n,n=t.parentNode}return null}function eu(t){return t=t[gr]||t[Zr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qo(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function tf(t){return t[bc]||null}var ug=[],Go=-1;function wi(t){return{current:t}}function We(t){0>Go||(t.current=ug[Go],ug[Go]=null,Go--)}function $e(t,e){Go++,ug[Go]=t.current,t.current=e}var oi={},Ft=wi(oi),sn=wi(!1),to=oi;function Pa(t,e){var n=t.type.contextTypes;if(!n)return oi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function on(t){return t=t.childContextTypes,t!=null}function th(){We(sn),We(Ft)}function s_(t,e,n){if(Ft.current!==oi)throw Error(z(168));$e(Ft,e),$e(sn,n)}function Fb(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,v2(t)||"Unknown",s));return Ye({},n,r)}function nh(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||oi,to=Ft.current,$e(Ft,t),$e(sn,sn.current),!0}function i_(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=Fb(t,e,to),r.__reactInternalMemoizedMergedChildContext=t,We(sn),We(Ft),$e(Ft,t)):We(sn),$e(sn,n)}var Fr=null,nf=!1,Km=!1;function Ub(t){Fr===null?Fr=[t]:Fr.push(t)}function OD(t){nf=!0,Ub(t)}function _i(){if(!Km&&Fr!==null){Km=!0;var t=0,e=Me;try{var n=Fr;for(Me=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Fr=null,nf=!1}catch(s){throw Fr!==null&&(Fr=Fr.slice(t+1)),db(Zy,_i),s}finally{Me=e,Km=!1}}return null}var Ko=[],Qo=0,rh=null,sh=0,An=[],Cn=0,no=null,Hr=1,Wr="";function Di(t,e){Ko[Qo++]=sh,Ko[Qo++]=rh,rh=t,sh=e}function $b(t,e,n){An[Cn++]=Hr,An[Cn++]=Wr,An[Cn++]=no,no=t;var r=Hr;t=Wr;var s=32-Yn(r)-1;r&=~(1<<s),n+=1;var i=32-Yn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hr=1<<32-Yn(e)+s|n<<s|r,Wr=i+t}else Hr=1<<i|n<<s|r,Wr=t}function lv(t){t.return!==null&&(Di(t,1),$b(t,1,0))}function cv(t){for(;t===rh;)rh=Ko[--Qo],Ko[Qo]=null,sh=Ko[--Qo],Ko[Qo]=null;for(;t===no;)no=An[--Cn],An[Cn]=null,Wr=An[--Cn],An[Cn]=null,Hr=An[--Cn],An[Cn]=null}var yn=null,pn=null,Ge=!1,qn=null;function zb(t,e){var n=Pn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function o_(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,yn=t,pn=Ys(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,yn=t,pn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=no!==null?{id:Hr,overflow:Wr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Pn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,yn=t,pn=null,!0):!1;default:return!1}}function dg(t){return(t.mode&1)!==0&&(t.flags&128)===0}function hg(t){if(Ge){var e=pn;if(e){var n=e;if(!o_(t,e)){if(dg(t))throw Error(z(418));e=Ys(n.nextSibling);var r=yn;e&&o_(t,e)?zb(r,n):(t.flags=t.flags&-4097|2,Ge=!1,yn=t)}}else{if(dg(t))throw Error(z(418));t.flags=t.flags&-4097|2,Ge=!1,yn=t}}}function a_(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;yn=t}function Gu(t){if(t!==yn)return!1;if(!Ge)return a_(t),Ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ag(t.type,t.memoizedProps)),e&&(e=pn)){if(dg(t))throw Bb(),Error(z(418));for(;e;)zb(t,e),e=Ys(e.nextSibling)}if(a_(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){pn=Ys(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}pn=null}}else pn=yn?Ys(t.stateNode.nextSibling):null;return!0}function Bb(){for(var t=pn;t;)t=Ys(t.nextSibling)}function ja(){pn=yn=null,Ge=!1}function uv(t){qn===null?qn=[t]:qn.push(t)}var MD=cs.ReactCurrentBatchConfig;function Ol(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Ku(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function l_(t){var e=t._init;return e(t._payload)}function Hb(t){function e(E,x){if(t){var S=E.deletions;S===null?(E.deletions=[x],E.flags|=16):S.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function s(E,x){return E=ei(E,x),E.index=0,E.sibling=null,E}function i(E,x,S){return E.index=S,t?(S=E.alternate,S!==null?(S=S.index,S<x?(E.flags|=2,x):S):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,x,S,R){return x===null||x.tag!==6?(x=tp(S,E.mode,R),x.return=E,x):(x=s(x,S),x.return=E,x)}function c(E,x,S,R){var D=S.type;return D===zo?h(E,x,S.props.children,R,S.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ss&&l_(D)===x.type)?(R=s(x,S.props),R.ref=Ol(E,x,S),R.return=E,R):(R=Nd(S.type,S.key,S.props,null,E.mode,R),R.ref=Ol(E,x,S),R.return=E,R)}function d(E,x,S,R){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=np(S,E.mode,R),x.return=E,x):(x=s(x,S.children||[]),x.return=E,x)}function h(E,x,S,R,D){return x===null||x.tag!==7?(x=Ji(S,E.mode,R,D),x.return=E,x):(x=s(x,S),x.return=E,x)}function f(E,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=tp(""+x,E.mode,S),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Lu:return S=Nd(x.type,x.key,x.props,null,E.mode,S),S.ref=Ol(E,null,x),S.return=E,S;case $o:return x=np(x,E.mode,S),x.return=E,x;case Ss:var R=x._init;return f(E,R(x._payload),S)}if(zl(x)||Rl(x))return x=Ji(x,E.mode,S,null),x.return=E,x;Ku(E,x)}return null}function m(E,x,S,R){var D=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return D!==null?null:l(E,x,""+S,R);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Lu:return S.key===D?c(E,x,S,R):null;case $o:return S.key===D?d(E,x,S,R):null;case Ss:return D=S._init,m(E,x,D(S._payload),R)}if(zl(S)||Rl(S))return D!==null?null:h(E,x,S,R,null);Ku(E,S)}return null}function y(E,x,S,R,D){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(S)||null,l(x,E,""+R,D);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Lu:return E=E.get(R.key===null?S:R.key)||null,c(x,E,R,D);case $o:return E=E.get(R.key===null?S:R.key)||null,d(x,E,R,D);case Ss:var M=R._init;return y(E,x,S,M(R._payload),D)}if(zl(R)||Rl(R))return E=E.get(S)||null,h(x,E,R,D,null);Ku(x,R)}return null}function b(E,x,S,R){for(var D=null,M=null,T=x,I=x=0,N=null;T!==null&&I<S.length;I++){T.index>I?(N=T,T=null):N=T.sibling;var C=m(E,T,S[I],R);if(C===null){T===null&&(T=N);break}t&&T&&C.alternate===null&&e(E,T),x=i(C,x,I),M===null?D=C:M.sibling=C,M=C,T=N}if(I===S.length)return n(E,T),Ge&&Di(E,I),D;if(T===null){for(;I<S.length;I++)T=f(E,S[I],R),T!==null&&(x=i(T,x,I),M===null?D=T:M.sibling=T,M=T);return Ge&&Di(E,I),D}for(T=r(E,T);I<S.length;I++)N=y(T,E,I,S[I],R),N!==null&&(t&&N.alternate!==null&&T.delete(N.key===null?I:N.key),x=i(N,x,I),M===null?D=N:M.sibling=N,M=N);return t&&T.forEach(function(j){return e(E,j)}),Ge&&Di(E,I),D}function v(E,x,S,R){var D=Rl(S);if(typeof D!="function")throw Error(z(150));if(S=D.call(S),S==null)throw Error(z(151));for(var M=D=null,T=x,I=x=0,N=null,C=S.next();T!==null&&!C.done;I++,C=S.next()){T.index>I?(N=T,T=null):N=T.sibling;var j=m(E,T,C.value,R);if(j===null){T===null&&(T=N);break}t&&T&&j.alternate===null&&e(E,T),x=i(j,x,I),M===null?D=j:M.sibling=j,M=j,T=N}if(C.done)return n(E,T),Ge&&Di(E,I),D;if(T===null){for(;!C.done;I++,C=S.next())C=f(E,C.value,R),C!==null&&(x=i(C,x,I),M===null?D=C:M.sibling=C,M=C);return Ge&&Di(E,I),D}for(T=r(E,T);!C.done;I++,C=S.next())C=y(T,E,I,C.value,R),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?I:C.key),x=i(C,x,I),M===null?D=C:M.sibling=C,M=C);return t&&T.forEach(function(k){return e(E,k)}),Ge&&Di(E,I),D}function _(E,x,S,R){if(typeof S=="object"&&S!==null&&S.type===zo&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Lu:e:{for(var D=S.key,M=x;M!==null;){if(M.key===D){if(D=S.type,D===zo){if(M.tag===7){n(E,M.sibling),x=s(M,S.props.children),x.return=E,E=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Ss&&l_(D)===M.type){n(E,M.sibling),x=s(M,S.props),x.ref=Ol(E,M,S),x.return=E,E=x;break e}n(E,M);break}else e(E,M);M=M.sibling}S.type===zo?(x=Ji(S.props.children,E.mode,R,S.key),x.return=E,E=x):(R=Nd(S.type,S.key,S.props,null,E.mode,R),R.ref=Ol(E,x,S),R.return=E,E=R)}return o(E);case $o:e:{for(M=S.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){n(E,x.sibling),x=s(x,S.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=np(S,E.mode,R),x.return=E,E=x}return o(E);case Ss:return M=S._init,_(E,x,M(S._payload),R)}if(zl(S))return b(E,x,S,R);if(Rl(S))return v(E,x,S,R);Ku(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(n(E,x.sibling),x=s(x,S),x.return=E,E=x):(n(E,x),x=tp(S,E.mode,R),x.return=E,E=x),o(E)):n(E,x)}return _}var ka=Hb(!0),Wb=Hb(!1),ih=wi(null),oh=null,Yo=null,dv=null;function hv(){dv=Yo=oh=null}function fv(t){var e=ih.current;We(ih),t._currentValue=e}function fg(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ia(t,e){oh=t,dv=Yo=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tn=!0),t.firstContext=null)}function Dn(t){var e=t._currentValue;if(dv!==t)if(t={context:t,memoizedValue:e,next:null},Yo===null){if(oh===null)throw Error(z(308));Yo=t,oh.dependencies={lanes:0,firstContext:t}}else Yo=Yo.next=t;return e}var Fi=null;function mv(t){Fi===null?Fi=[t]:Fi.push(t)}function qb(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,mv(e)):(n.next=s.next,s.next=n),e.interleaved=n,es(t,r)}function es(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Is=!1;function pv(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Gb(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Xs(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Ne&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,es(t,n)}return s=r.interleaved,s===null?(e.next=e,mv(r)):(e.next=s.next,s.next=e),r.interleaved=e,es(t,n)}function _d(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}function c_(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ah(t,e,n,r){var s=t.updateQueue;Is=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=d=c=null,l=i;do{var m=l.lane,y=l.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,v=l;switch(m=e,y=n,v.tag){case 1:if(b=v.payload,typeof b=="function"){f=b.call(y,f,m);break e}f=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=v.payload,m=typeof b=="function"?b.call(y,f,m):b,m==null)break e;f=Ye({},f,m);break e;case 2:Is=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else y={eventTime:y,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=y,c=f):h=h.next=y,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);so|=o,t.lanes=o,t.memoizedState=f}}function u_(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var tu={},xr=wi(tu),Sc=wi(tu),Ic=wi(tu);function Ui(t){if(t===tu)throw Error(z(174));return t}function gv(t,e){switch($e(Ic,e),$e(Sc,t),$e(xr,tu),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gp(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gp(e,t)}We(xr),$e(xr,e)}function Da(){We(xr),We(Sc),We(Ic)}function Kb(t){Ui(Ic.current);var e=Ui(xr.current),n=Gp(e,t.type);e!==n&&($e(Sc,t),$e(xr,n))}function yv(t){Sc.current===t&&(We(xr),We(Sc))}var Ke=wi(0);function lh(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Qm=[];function vv(){for(var t=0;t<Qm.length;t++)Qm[t]._workInProgressVersionPrimary=null;Qm.length=0}var Ed=cs.ReactCurrentDispatcher,Ym=cs.ReactCurrentBatchConfig,ro=0,Qe=null,gt=null,Tt=null,ch=!1,rc=!1,Nc=0,LD=0;function jt(){throw Error(z(321))}function xv(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!er(t[n],e[n]))return!1;return!0}function wv(t,e,n,r,s,i){if(ro=i,Qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ed.current=t===null||t.memoizedState===null?$D:zD,t=n(r,s),rc){i=0;do{if(rc=!1,Nc=0,25<=i)throw Error(z(301));i+=1,Tt=gt=null,e.updateQueue=null,Ed.current=BD,t=n(r,s)}while(rc)}if(Ed.current=uh,e=gt!==null&&gt.next!==null,ro=0,Tt=gt=Qe=null,ch=!1,e)throw Error(z(300));return t}function _v(){var t=Nc!==0;return Nc=0,t}function ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t,Tt}function On(){if(gt===null){var t=Qe.alternate;t=t!==null?t.memoizedState:null}else t=gt.next;var e=Tt===null?Qe.memoizedState:Tt.next;if(e!==null)Tt=e,gt=t;else{if(t===null)throw Error(z(310));gt=t,t={memoizedState:gt.memoizedState,baseState:gt.baseState,baseQueue:gt.baseQueue,queue:gt.queue,next:null},Tt===null?Qe.memoizedState=Tt=t:Tt=Tt.next=t}return Tt}function Ac(t,e){return typeof e=="function"?e(t):e}function Xm(t){var e=On(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=gt,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var h=d.lane;if((ro&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=f,o=r):c=c.next=f,Qe.lanes|=h,so|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,er(r,e.memoizedState)||(tn=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Qe.lanes|=i,so|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Jm(t){var e=On(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);er(i,e.memoizedState)||(tn=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Qb(){}function Yb(t,e){var n=Qe,r=On(),s=e(),i=!er(r.memoizedState,s);if(i&&(r.memoizedState=s,tn=!0),r=r.queue,Ev(Zb.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Tt!==null&&Tt.memoizedState.tag&1){if(n.flags|=2048,Cc(9,Jb.bind(null,n,r,s,e),void 0,null),bt===null)throw Error(z(349));ro&30||Xb(n,e,s)}return s}function Xb(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Jb(t,e,n,r){e.value=n,e.getSnapshot=r,eS(e)&&tS(t)}function Zb(t,e,n){return n(function(){eS(e)&&tS(t)})}function eS(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!er(t,n)}catch{return!0}}function tS(t){var e=es(t,1);e!==null&&Xn(e,t,1,-1)}function d_(t){var e=ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ac,lastRenderedState:t},e.queue=t,t=t.dispatch=UD.bind(null,Qe,t),[e.memoizedState,t]}function Cc(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Qe.updateQueue,e===null?(e={lastEffect:null,stores:null},Qe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function nS(){return On().memoizedState}function Td(t,e,n,r){var s=ur();Qe.flags|=t,s.memoizedState=Cc(1|e,n,void 0,r===void 0?null:r)}function rf(t,e,n,r){var s=On();r=r===void 0?null:r;var i=void 0;if(gt!==null){var o=gt.memoizedState;if(i=o.destroy,r!==null&&xv(r,o.deps)){s.memoizedState=Cc(e,n,i,r);return}}Qe.flags|=t,s.memoizedState=Cc(1|e,n,i,r)}function h_(t,e){return Td(8390656,8,t,e)}function Ev(t,e){return rf(2048,8,t,e)}function rS(t,e){return rf(4,2,t,e)}function sS(t,e){return rf(4,4,t,e)}function iS(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function oS(t,e,n){return n=n!=null?n.concat([t]):null,rf(4,4,iS.bind(null,e,t),n)}function Tv(){}function aS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xv(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function lS(t,e){var n=On();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&xv(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function cS(t,e,n){return ro&21?(er(n,e)||(n=mb(),Qe.lanes|=n,so|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tn=!0),t.memoizedState=n)}function VD(t,e){var n=Me;Me=n!==0&&4>n?n:4,t(!0);var r=Ym.transition;Ym.transition={};try{t(!1),e()}finally{Me=n,Ym.transition=r}}function uS(){return On().memoizedState}function FD(t,e,n){var r=Zs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},dS(t))hS(e,n);else if(n=qb(t,e,n,r),n!==null){var s=qt();Xn(n,t,r,s),fS(n,e,r)}}function UD(t,e,n){var r=Zs(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(dS(t))hS(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,er(l,o)){var c=e.interleaved;c===null?(s.next=s,mv(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=qb(t,e,s,r),n!==null&&(s=qt(),Xn(n,t,r,s),fS(n,e,r))}}function dS(t){var e=t.alternate;return t===Qe||e!==null&&e===Qe}function hS(t,e){rc=ch=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function fS(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ev(t,n)}}var uh={readContext:Dn,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},$D={readContext:Dn,useCallback:function(t,e){return ur().memoizedState=[t,e===void 0?null:e],t},useContext:Dn,useEffect:h_,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Td(4194308,4,iS.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Td(4194308,4,t,e)},useInsertionEffect:function(t,e){return Td(4,2,t,e)},useMemo:function(t,e){var n=ur();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ur();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FD.bind(null,Qe,t),[r.memoizedState,t]},useRef:function(t){var e=ur();return t={current:t},e.memoizedState=t},useState:d_,useDebugValue:Tv,useDeferredValue:function(t){return ur().memoizedState=t},useTransition:function(){var t=d_(!1),e=t[0];return t=VD.bind(null,t[1]),ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Qe,s=ur();if(Ge){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),bt===null)throw Error(z(349));ro&30||Xb(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,h_(Zb.bind(null,r,i,t),[t]),r.flags|=2048,Cc(9,Jb.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=ur(),e=bt.identifierPrefix;if(Ge){var n=Wr,r=Hr;n=(r&~(1<<32-Yn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Nc++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LD++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zD={readContext:Dn,useCallback:aS,useContext:Dn,useEffect:Ev,useImperativeHandle:oS,useInsertionEffect:rS,useLayoutEffect:sS,useMemo:lS,useReducer:Xm,useRef:nS,useState:function(){return Xm(Ac)},useDebugValue:Tv,useDeferredValue:function(t){var e=On();return cS(e,gt.memoizedState,t)},useTransition:function(){var t=Xm(Ac)[0],e=On().memoizedState;return[t,e]},useMutableSource:Qb,useSyncExternalStore:Yb,useId:uS,unstable_isNewReconciler:!1},BD={readContext:Dn,useCallback:aS,useContext:Dn,useEffect:Ev,useImperativeHandle:oS,useInsertionEffect:rS,useLayoutEffect:sS,useMemo:lS,useReducer:Jm,useRef:nS,useState:function(){return Jm(Ac)},useDebugValue:Tv,useDeferredValue:function(t){var e=On();return gt===null?e.memoizedState=t:cS(e,gt.memoizedState,t)},useTransition:function(){var t=Jm(Ac)[0],e=On().memoizedState;return[t,e]},useMutableSource:Qb,useSyncExternalStore:Yb,useId:uS,unstable_isNewReconciler:!1};function zn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function mg(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var sf={isMounted:function(t){return(t=t._reactInternals)?wo(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Zs(t),i=Kr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Xs(t,i,s),e!==null&&(Xn(e,t,s,r),_d(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=qt(),s=Zs(t),i=Kr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Xs(t,i,s),e!==null&&(Xn(e,t,s,r),_d(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=qt(),r=Zs(t),s=Kr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Xs(t,s,r),e!==null&&(Xn(e,t,r,n),_d(e,t,r))}};function f_(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!_c(n,r)||!_c(s,i):!0}function mS(t,e,n){var r=!1,s=oi,i=e.contextType;return typeof i=="object"&&i!==null?i=Dn(i):(s=on(e)?to:Ft.current,r=e.contextTypes,i=(r=r!=null)?Pa(t,s):oi),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sf,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function m_(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&sf.enqueueReplaceState(e,e.state,null)}function pg(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},pv(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Dn(i):(i=on(e)?to:Ft.current,s.context=Pa(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(mg(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&sf.enqueueReplaceState(s,s.state,null),ah(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Oa(t,e){try{var n="",r=e;do n+=y2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Zm(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function gg(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HD=typeof WeakMap=="function"?WeakMap:Map;function pS(t,e,n){n=Kr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){hh||(hh=!0,Ig=r),gg(t,e)},n}function gS(t,e,n){n=Kr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){gg(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){gg(t,e),typeof r!="function"&&(Js===null?Js=new Set([this]):Js.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function p_(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HD;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=sO.bind(null,t,e,n),e.then(t,t))}function g_(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function y_(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kr(-1,1),e.tag=2,Xs(n,e,1))),n.lanes|=1),t)}var WD=cs.ReactCurrentOwner,tn=!1;function Wt(t,e,n,r){e.child=t===null?Wb(e,null,n,r):ka(e,t.child,n,r)}function v_(t,e,n,r,s){n=n.render;var i=e.ref;return ia(e,s),r=wv(t,e,n,r,i,s),n=_v(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(Ge&&n&&lv(e),e.flags|=1,Wt(t,e,r,s),e.child)}function x_(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Pv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,yS(t,e,i,r,s)):(t=Nd(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:_c,n(o,r)&&t.ref===e.ref)return ts(t,e,s)}return e.flags|=1,t=ei(i,r),t.ref=e.ref,t.return=e,e.child=t}function yS(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(_c(i,r)&&t.ref===e.ref)if(tn=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(tn=!0);else return e.lanes=t.lanes,ts(t,e,s)}return yg(t,e,n,r,s)}function vS(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(Jo,fn),fn|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,$e(Jo,fn),fn|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,$e(Jo,fn),fn|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,$e(Jo,fn),fn|=r;return Wt(t,e,s,n),e.child}function xS(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function yg(t,e,n,r,s){var i=on(n)?to:Ft.current;return i=Pa(e,i),ia(e,s),n=wv(t,e,n,r,i,s),r=_v(),t!==null&&!tn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,ts(t,e,s)):(Ge&&r&&lv(e),e.flags|=1,Wt(t,e,n,s),e.child)}function w_(t,e,n,r,s){if(on(n)){var i=!0;nh(e)}else i=!1;if(ia(e,s),e.stateNode===null)bd(t,e),mS(e,n,r),pg(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Dn(d):(d=on(n)?to:Ft.current,d=Pa(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&m_(e,o,r,d),Is=!1;var m=e.memoizedState;o.state=m,ah(e,r,o,s),c=e.memoizedState,l!==r||m!==c||sn.current||Is?(typeof h=="function"&&(mg(e,n,h,r),c=e.memoizedState),(l=Is||f_(e,n,l,r,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Gb(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:zn(e.type,l),o.props=d,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Dn(c):(c=on(n)?to:Ft.current,c=Pa(e,c));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||m!==c)&&m_(e,o,r,c),Is=!1,m=e.memoizedState,o.state=m,ah(e,r,o,s);var b=e.memoizedState;l!==f||m!==b||sn.current||Is?(typeof y=="function"&&(mg(e,n,y,r),b=e.memoizedState),(d=Is||f_(e,n,d,r,m,b,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return vg(t,e,n,r,i,s)}function vg(t,e,n,r,s,i){xS(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&i_(e,n,!1),ts(t,e,i);r=e.stateNode,WD.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ka(e,t.child,null,i),e.child=ka(e,null,l,i)):Wt(t,e,l,i),e.memoizedState=r.state,s&&i_(e,n,!0),e.child}function wS(t){var e=t.stateNode;e.pendingContext?s_(t,e.pendingContext,e.pendingContext!==e.context):e.context&&s_(t,e.context,!1),gv(t,e.containerInfo)}function __(t,e,n,r,s){return ja(),uv(s),e.flags|=256,Wt(t,e,n,r),e.child}var xg={dehydrated:null,treeContext:null,retryLane:0};function wg(t){return{baseLanes:t,cachePool:null,transitions:null}}function _S(t,e,n){var r=e.pendingProps,s=Ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),$e(Ke,s&1),t===null)return hg(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=lf(o,r,0,null),t=Ji(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=wg(n),e.memoizedState=xg,t):bv(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return qD(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=ei(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=ei(l,i):(i=Ji(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?wg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=xg,r}return i=t.child,t=i.sibling,r=ei(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bv(t,e){return e=lf({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Qu(t,e,n,r){return r!==null&&uv(r),ka(e,t.child,null,n),t=bv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function qD(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Zm(Error(z(422))),Qu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=lf({mode:"visible",children:r.children},s,0,null),i=Ji(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ka(e,t.child,null,o),e.child.memoizedState=wg(o),e.memoizedState=xg,i);if(!(e.mode&1))return Qu(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(z(419)),r=Zm(i,r,void 0),Qu(t,e,o,r)}if(l=(o&t.childLanes)!==0,tn||l){if(r=bt,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,es(t,s),Xn(r,t,s,-1))}return Rv(),r=Zm(Error(z(421))),Qu(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=iO.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,pn=Ys(s.nextSibling),yn=e,Ge=!0,qn=null,t!==null&&(An[Cn++]=Hr,An[Cn++]=Wr,An[Cn++]=no,Hr=t.id,Wr=t.overflow,no=e),e=bv(e,r.children),e.flags|=4096,e)}function E_(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),fg(t.return,e,n)}function ep(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ES(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Wt(t,e,r.children,n),r=Ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&E_(t,n,e);else if(t.tag===19)E_(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if($e(Ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&lh(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ep(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&lh(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ep(e,!0,n,null,i);break;case"together":ep(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function bd(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ts(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),so|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=ei(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=ei(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GD(t,e,n){switch(e.tag){case 3:wS(e),ja();break;case 5:Kb(e);break;case 1:on(e.type)&&nh(e);break;case 4:gv(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;$e(ih,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?($e(Ke,Ke.current&1),e.flags|=128,null):n&e.child.childLanes?_S(t,e,n):($e(Ke,Ke.current&1),t=ts(t,e,n),t!==null?t.sibling:null);$e(Ke,Ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ES(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),$e(Ke,Ke.current),r)break;return null;case 22:case 23:return e.lanes=0,vS(t,e,n)}return ts(t,e,n)}var TS,_g,bS,SS;TS=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};_g=function(){};bS=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Ui(xr.current);var i=null;switch(n){case"input":s=Bp(t,s),r=Bp(t,r),i=[];break;case"select":s=Ye({},s,{value:void 0}),r=Ye({},r,{value:void 0}),i=[];break;case"textarea":s=qp(t,s),r=qp(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=eh)}Kp(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&He("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};SS=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ml(t,e){if(!Ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function kt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function KD(t,e,n){var r=e.pendingProps;switch(cv(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return on(e.type)&&th(),kt(e),null;case 3:return r=e.stateNode,Da(),We(sn),We(Ft),vv(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Gu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,qn!==null&&(Cg(qn),qn=null))),_g(t,e),kt(e),null;case 5:yv(e);var s=Ui(Ic.current);if(n=e.type,t!==null&&e.stateNode!=null)bS(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return kt(e),null}if(t=Ui(xr.current),Gu(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gr]=e,r[bc]=i,t=(e.mode&1)!==0,n){case"dialog":He("cancel",r),He("close",r);break;case"iframe":case"object":case"embed":He("load",r);break;case"video":case"audio":for(s=0;s<Hl.length;s++)He(Hl[s],r);break;case"source":He("error",r);break;case"img":case"image":case"link":He("error",r),He("load",r);break;case"details":He("toggle",r);break;case"input":P0(r,i),He("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},He("invalid",r);break;case"textarea":k0(r,i),He("invalid",r)}Kp(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&qu(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&qu(r.textContent,l,t),s=["children",""+l]):mc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&He("scroll",r)}switch(n){case"input":Vu(r),j0(r,i,!0);break;case"textarea":Vu(r),D0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=eh)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ZT(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gr]=e,t[bc]=r,TS(t,e,!1,!1),e.stateNode=t;e:{switch(o=Qp(n,r),n){case"dialog":He("cancel",t),He("close",t),s=r;break;case"iframe":case"object":case"embed":He("load",t),s=r;break;case"video":case"audio":for(s=0;s<Hl.length;s++)He(Hl[s],t);s=r;break;case"source":He("error",t),s=r;break;case"img":case"image":case"link":He("error",t),He("load",t),s=r;break;case"details":He("toggle",t),s=r;break;case"input":P0(t,r),s=Bp(t,r),He("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ye({},r,{value:void 0}),He("invalid",t);break;case"textarea":k0(t,r),s=qp(t,r),He("invalid",t);break;default:s=r}Kp(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?nb(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&eb(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&pc(t,c):typeof c=="number"&&pc(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&He("scroll",t):c!=null&&Ky(t,i,c,o))}switch(n){case"input":Vu(t),j0(t,r,!1);break;case"textarea":Vu(t),D0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+ii(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?ta(t,!!r.multiple,i,!1):r.defaultValue!=null&&ta(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=eh)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(t&&e.stateNode!=null)SS(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Ui(Ic.current),Ui(xr.current),Gu(e)){if(r=e.stateNode,n=e.memoizedProps,r[gr]=e,(i=r.nodeValue!==n)&&(t=yn,t!==null))switch(t.tag){case 3:qu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&qu(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gr]=e,e.stateNode=r}return kt(e),null;case 13:if(We(Ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ge&&pn!==null&&e.mode&1&&!(e.flags&128))Bb(),ja(),e.flags|=98560,i=!1;else if(i=Gu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[gr]=e}else ja(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),i=!1}else qn!==null&&(Cg(qn),qn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ke.current&1?vt===0&&(vt=3):Rv())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return Da(),_g(t,e),t===null&&Ec(e.stateNode.containerInfo),kt(e),null;case 10:return fv(e.type._context),kt(e),null;case 17:return on(e.type)&&th(),kt(e),null;case 19:if(We(Ke),i=e.memoizedState,i===null)return kt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ml(i,!1);else{if(vt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lh(t),o!==null){for(e.flags|=128,Ml(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return $e(Ke,Ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&it()>Ma&&(e.flags|=128,r=!0,Ml(i,!1),e.lanes=4194304)}else{if(!r)if(t=lh(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ml(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ge)return kt(e),null}else 2*it()-i.renderingStartTime>Ma&&n!==1073741824&&(e.flags|=128,r=!0,Ml(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=it(),e.sibling=null,n=Ke.current,$e(Ke,r?n&1|2:n&1),e):(kt(e),null);case 22:case 23:return Cv(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?fn&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function QD(t,e){switch(cv(e),e.tag){case 1:return on(e.type)&&th(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Da(),We(sn),We(Ft),vv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return yv(e),null;case 13:if(We(Ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ja()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return We(Ke),null;case 4:return Da(),null;case 10:return fv(e.type._context),null;case 22:case 23:return Cv(),null;case 24:return null;default:return null}}var Yu=!1,Lt=!1,YD=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Xo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){et(t,e,r)}else n.current=null}function Eg(t,e,n){try{n()}catch(r){et(t,e,r)}}var T_=!1;function XD(t,e){if(ig=Xd,t=Rb(),av(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var y;f!==n||s!==0&&f.nodeType!==3||(l=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(y=f.firstChild)!==null;)m=f,f=y;for(;;){if(f===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++h===r&&(c=o),(y=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=y}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(og={focusedElem:t,selectionRange:n},Xd=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var v=b.memoizedProps,_=b.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?v:zn(e.type,v),_);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(R){et(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return b=T_,T_=!1,b}function sc(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Eg(e,n,i)}s=s.next}while(s!==r)}}function of(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Tg(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function IS(t){var e=t.alternate;e!==null&&(t.alternate=null,IS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gr],delete e[bc],delete e[cg],delete e[kD],delete e[DD])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function NS(t){return t.tag===5||t.tag===3||t.tag===4}function b_(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||NS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=eh));else if(r!==4&&(t=t.child,t!==null))for(bg(t,e,n),t=t.sibling;t!==null;)bg(t,e,n),t=t.sibling}function Sg(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Sg(t,e,n),t=t.sibling;t!==null;)Sg(t,e,n),t=t.sibling}var It=null,Wn=!1;function vs(t,e,n){for(n=n.child;n!==null;)AS(t,e,n),n=n.sibling}function AS(t,e,n){if(vr&&typeof vr.onCommitFiberUnmount=="function")try{vr.onCommitFiberUnmount(Xh,n)}catch{}switch(n.tag){case 5:Lt||Xo(n,e);case 6:var r=It,s=Wn;It=null,vs(t,e,n),It=r,Wn=s,It!==null&&(Wn?(t=It,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):It.removeChild(n.stateNode));break;case 18:It!==null&&(Wn?(t=It,n=n.stateNode,t.nodeType===8?Gm(t.parentNode,n):t.nodeType===1&&Gm(t,n),xc(t)):Gm(It,n.stateNode));break;case 4:r=It,s=Wn,It=n.stateNode.containerInfo,Wn=!0,vs(t,e,n),It=r,Wn=s;break;case 0:case 11:case 14:case 15:if(!Lt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Eg(n,e,o),s=s.next}while(s!==r)}vs(t,e,n);break;case 1:if(!Lt&&(Xo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){et(n,e,l)}vs(t,e,n);break;case 21:vs(t,e,n);break;case 22:n.mode&1?(Lt=(r=Lt)||n.memoizedState!==null,vs(t,e,n),Lt=r):vs(t,e,n);break;default:vs(t,e,n)}}function S_(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new YD),e.forEach(function(r){var s=oO.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Vn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:It=l.stateNode,Wn=!1;break e;case 3:It=l.stateNode.containerInfo,Wn=!0;break e;case 4:It=l.stateNode.containerInfo,Wn=!0;break e}l=l.return}if(It===null)throw Error(z(160));AS(i,o,s),It=null,Wn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){et(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)CS(e,t),e=e.sibling}function CS(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Vn(e,t),cr(t),r&4){try{sc(3,t,t.return),of(3,t)}catch(v){et(t,t.return,v)}try{sc(5,t,t.return)}catch(v){et(t,t.return,v)}}break;case 1:Vn(e,t),cr(t),r&512&&n!==null&&Xo(n,n.return);break;case 5:if(Vn(e,t),cr(t),r&512&&n!==null&&Xo(n,n.return),t.flags&32){var s=t.stateNode;try{pc(s,"")}catch(v){et(t,t.return,v)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&XT(s,i),Qp(l,o);var d=Qp(l,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?nb(s,f):h==="dangerouslySetInnerHTML"?eb(s,f):h==="children"?pc(s,f):Ky(s,h,f,d)}switch(l){case"input":Hp(s,i);break;case"textarea":JT(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?ta(s,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?ta(s,!!i.multiple,i.defaultValue,!0):ta(s,!!i.multiple,i.multiple?[]:"",!1))}s[bc]=i}catch(v){et(t,t.return,v)}}break;case 6:if(Vn(e,t),cr(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(v){et(t,t.return,v)}}break;case 3:if(Vn(e,t),cr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xc(e.containerInfo)}catch(v){et(t,t.return,v)}break;case 4:Vn(e,t),cr(t);break;case 13:Vn(e,t),cr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Nv=it())),r&4&&S_(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Lt=(d=Lt)||h,Vn(e,t),Lt=d):Vn(e,t),cr(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(Q=t,h=t.child;h!==null;){for(f=Q=h;Q!==null;){switch(m=Q,y=m.child,m.tag){case 0:case 11:case 14:case 15:sc(4,m,m.return);break;case 1:Xo(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(v){et(r,n,v)}}break;case 5:Xo(m,m.return);break;case 22:if(m.memoizedState!==null){N_(f);continue}}y!==null?(y.return=m,Q=y):N_(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=tb("display",o))}catch(v){et(t,t.return,v)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(v){et(t,t.return,v)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Vn(e,t),cr(t),r&4&&S_(t);break;case 21:break;default:Vn(e,t),cr(t)}}function cr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(NS(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(pc(s,""),r.flags&=-33);var i=b_(t);Sg(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=b_(t);bg(t,l,o);break;default:throw Error(z(161))}}catch(c){et(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function JD(t,e,n){Q=t,RS(t)}function RS(t,e,n){for(var r=(t.mode&1)!==0;Q!==null;){var s=Q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Yu;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||Lt;l=Yu;var d=Lt;if(Yu=o,(Lt=c)&&!d)for(Q=s;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?A_(s):c!==null?(c.return=o,Q=c):A_(s);for(;i!==null;)Q=i,RS(i),i=i.sibling;Q=s,Yu=l,Lt=d}I_(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,Q=i):I_(t)}}function I_(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Lt||of(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Lt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&u_(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}u_(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&xc(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Lt||e.flags&512&&Tg(e)}catch(m){et(e,e.return,m)}}if(e===t){Q=null;break}if(n=e.sibling,n!==null){n.return=e.return,Q=n;break}Q=e.return}}function N_(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Q=n;break}Q=e.return}}function A_(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{of(4,e)}catch(c){et(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){et(e,s,c)}}var i=e.return;try{Tg(e)}catch(c){et(e,i,c)}break;case 5:var o=e.return;try{Tg(e)}catch(c){et(e,o,c)}}}catch(c){et(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var ZD=Math.ceil,dh=cs.ReactCurrentDispatcher,Sv=cs.ReactCurrentOwner,jn=cs.ReactCurrentBatchConfig,Ne=0,bt=null,ut=null,Ct=0,fn=0,Jo=wi(0),vt=0,Rc=null,so=0,af=0,Iv=0,ic=null,Zt=null,Nv=0,Ma=1/0,Vr=null,hh=!1,Ig=null,Js=null,Xu=!1,Bs=null,fh=0,oc=0,Ng=null,Sd=-1,Id=0;function qt(){return Ne&6?it():Sd!==-1?Sd:Sd=it()}function Zs(t){return t.mode&1?Ne&2&&Ct!==0?Ct&-Ct:MD.transition!==null?(Id===0&&(Id=mb()),Id):(t=Me,t!==0||(t=window.event,t=t===void 0?16:_b(t.type)),t):1}function Xn(t,e,n,r){if(50<oc)throw oc=0,Ng=null,Error(z(185));Jc(t,n,r),(!(Ne&2)||t!==bt)&&(t===bt&&(!(Ne&2)&&(af|=n),vt===4&&As(t,Ct)),an(t,r),n===1&&Ne===0&&!(e.mode&1)&&(Ma=it()+500,nf&&_i()))}function an(t,e){var n=t.callbackNode;M2(t,e);var r=Yd(t,t===bt?Ct:0);if(r===0)n!==null&&L0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&L0(n),e===1)t.tag===0?OD(C_.bind(null,t)):Ub(C_.bind(null,t)),PD(function(){!(Ne&6)&&_i()}),n=null;else{switch(pb(r)){case 1:n=Zy;break;case 4:n=hb;break;case 16:n=Qd;break;case 536870912:n=fb;break;default:n=Qd}n=VS(n,PS.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function PS(t,e){if(Sd=-1,Id=0,Ne&6)throw Error(z(327));var n=t.callbackNode;if(oa()&&t.callbackNode!==n)return null;var r=Yd(t,t===bt?Ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=mh(t,r);else{e=r;var s=Ne;Ne|=2;var i=kS();(bt!==t||Ct!==e)&&(Vr=null,Ma=it()+500,Xi(t,e));do try{nO();break}catch(l){jS(t,l)}while(!0);hv(),dh.current=i,Ne=s,ut!==null?e=0:(bt=null,Ct=0,e=vt)}if(e!==0){if(e===2&&(s=eg(t),s!==0&&(r=s,e=Ag(t,s))),e===1)throw n=Rc,Xi(t,0),As(t,r),an(t,it()),n;if(e===6)As(t,r);else{if(s=t.current.alternate,!(r&30)&&!eO(s)&&(e=mh(t,r),e===2&&(i=eg(t),i!==0&&(r=i,e=Ag(t,i))),e===1))throw n=Rc,Xi(t,0),As(t,r),an(t,it()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:Oi(t,Zt,Vr);break;case 3:if(As(t,r),(r&130023424)===r&&(e=Nv+500-it(),10<e)){if(Yd(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){qt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=lg(Oi.bind(null,t,Zt,Vr),e);break}Oi(t,Zt,Vr);break;case 4:if(As(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Yn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=it()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*ZD(r/1960))-r,10<r){t.timeoutHandle=lg(Oi.bind(null,t,Zt,Vr),r);break}Oi(t,Zt,Vr);break;case 5:Oi(t,Zt,Vr);break;default:throw Error(z(329))}}}return an(t,it()),t.callbackNode===n?PS.bind(null,t):null}function Ag(t,e){var n=ic;return t.current.memoizedState.isDehydrated&&(Xi(t,e).flags|=256),t=mh(t,e),t!==2&&(e=Zt,Zt=n,e!==null&&Cg(e)),t}function Cg(t){Zt===null?Zt=t:Zt.push.apply(Zt,t)}function eO(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!er(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function As(t,e){for(e&=~Iv,e&=~af,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Yn(e),r=1<<n;t[n]=-1,e&=~r}}function C_(t){if(Ne&6)throw Error(z(327));oa();var e=Yd(t,0);if(!(e&1))return an(t,it()),null;var n=mh(t,e);if(t.tag!==0&&n===2){var r=eg(t);r!==0&&(e=r,n=Ag(t,r))}if(n===1)throw n=Rc,Xi(t,0),As(t,e),an(t,it()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Oi(t,Zt,Vr),an(t,it()),null}function Av(t,e){var n=Ne;Ne|=1;try{return t(e)}finally{Ne=n,Ne===0&&(Ma=it()+500,nf&&_i())}}function io(t){Bs!==null&&Bs.tag===0&&!(Ne&6)&&oa();var e=Ne;Ne|=1;var n=jn.transition,r=Me;try{if(jn.transition=null,Me=1,t)return t()}finally{Me=r,jn.transition=n,Ne=e,!(Ne&6)&&_i()}}function Cv(){fn=Jo.current,We(Jo)}function Xi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RD(n)),ut!==null)for(n=ut.return;n!==null;){var r=n;switch(cv(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&th();break;case 3:Da(),We(sn),We(Ft),vv();break;case 5:yv(r);break;case 4:Da();break;case 13:We(Ke);break;case 19:We(Ke);break;case 10:fv(r.type._context);break;case 22:case 23:Cv()}n=n.return}if(bt=t,ut=t=ei(t.current,null),Ct=fn=e,vt=0,Rc=null,Iv=af=so=0,Zt=ic=null,Fi!==null){for(e=0;e<Fi.length;e++)if(n=Fi[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Fi=null}return t}function jS(t,e){do{var n=ut;try{if(hv(),Ed.current=uh,ch){for(var r=Qe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ch=!1}if(ro=0,Tt=gt=Qe=null,rc=!1,Nc=0,Sv.current=null,n===null||n.return===null){vt=1,Rc=e,ut=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Ct,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=g_(o);if(y!==null){y.flags&=-257,y_(y,o,l,i,e),y.mode&1&&p_(i,d,e),e=y,c=d;var b=e.updateQueue;if(b===null){var v=new Set;v.add(c),e.updateQueue=v}else b.add(c);break e}else{if(!(e&1)){p_(i,d,e),Rv();break e}c=Error(z(426))}}else if(Ge&&l.mode&1){var _=g_(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),y_(_,o,l,i,e),uv(Oa(c,l));break e}}i=c=Oa(c,l),vt!==4&&(vt=2),ic===null?ic=[i]:ic.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=pS(i,c,e);c_(i,E);break e;case 1:l=c;var x=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Js===null||!Js.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var R=gS(i,l,e);c_(i,R);break e}}i=i.return}while(i!==null)}OS(n)}catch(D){e=D,ut===n&&n!==null&&(ut=n=n.return);continue}break}while(!0)}function kS(){var t=dh.current;return dh.current=uh,t===null?uh:t}function Rv(){(vt===0||vt===3||vt===2)&&(vt=4),bt===null||!(so&268435455)&&!(af&268435455)||As(bt,Ct)}function mh(t,e){var n=Ne;Ne|=2;var r=kS();(bt!==t||Ct!==e)&&(Vr=null,Xi(t,e));do try{tO();break}catch(s){jS(t,s)}while(!0);if(hv(),Ne=n,dh.current=r,ut!==null)throw Error(z(261));return bt=null,Ct=0,vt}function tO(){for(;ut!==null;)DS(ut)}function nO(){for(;ut!==null&&!N2();)DS(ut)}function DS(t){var e=LS(t.alternate,t,fn);t.memoizedProps=t.pendingProps,e===null?OS(t):ut=e,Sv.current=null}function OS(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=QD(n,e),n!==null){n.flags&=32767,ut=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{vt=6,ut=null;return}}else if(n=KD(n,e,fn),n!==null){ut=n;return}if(e=e.sibling,e!==null){ut=e;return}ut=e=t}while(e!==null);vt===0&&(vt=5)}function Oi(t,e,n){var r=Me,s=jn.transition;try{jn.transition=null,Me=1,rO(t,e,n,r)}finally{jn.transition=s,Me=r}return null}function rO(t,e,n,r){do oa();while(Bs!==null);if(Ne&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(L2(t,i),t===bt&&(ut=bt=null,Ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xu||(Xu=!0,VS(Qd,function(){return oa(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=jn.transition,jn.transition=null;var o=Me;Me=1;var l=Ne;Ne|=4,Sv.current=null,XD(t,n),CS(n,t),TD(og),Xd=!!ig,og=ig=null,t.current=n,JD(n),A2(),Ne=l,Me=o,jn.transition=i}else t.current=n;if(Xu&&(Xu=!1,Bs=t,fh=s),i=t.pendingLanes,i===0&&(Js=null),P2(n.stateNode),an(t,it()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(hh)throw hh=!1,t=Ig,Ig=null,t;return fh&1&&t.tag!==0&&oa(),i=t.pendingLanes,i&1?t===Ng?oc++:(oc=0,Ng=t):oc=0,_i(),null}function oa(){if(Bs!==null){var t=pb(fh),e=jn.transition,n=Me;try{if(jn.transition=null,Me=16>t?16:t,Bs===null)var r=!1;else{if(t=Bs,Bs=null,fh=0,Ne&6)throw Error(z(331));var s=Ne;for(Ne|=4,Q=t.current;Q!==null;){var i=Q,o=i.child;if(Q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var h=Q;switch(h.tag){case 0:case 11:case 15:sc(8,h,i)}var f=h.child;if(f!==null)f.return=h,Q=f;else for(;Q!==null;){h=Q;var m=h.sibling,y=h.return;if(IS(h),h===d){Q=null;break}if(m!==null){m.return=y,Q=m;break}Q=y}}}var b=i.alternate;if(b!==null){var v=b.child;if(v!==null){b.child=null;do{var _=v.sibling;v.sibling=null,v=_}while(v!==null)}}Q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Q=o;else e:for(;Q!==null;){if(i=Q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:sc(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,Q=E;break e}Q=i.return}}var x=t.current;for(Q=x;Q!==null;){o=Q;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,Q=S;else e:for(o=x;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:of(9,l)}}catch(D){et(l,l.return,D)}if(l===o){Q=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,Q=R;break e}Q=l.return}}if(Ne=s,_i(),vr&&typeof vr.onPostCommitFiberRoot=="function")try{vr.onPostCommitFiberRoot(Xh,t)}catch{}r=!0}return r}finally{Me=n,jn.transition=e}}return!1}function R_(t,e,n){e=Oa(n,e),e=pS(t,e,1),t=Xs(t,e,1),e=qt(),t!==null&&(Jc(t,1,e),an(t,e))}function et(t,e,n){if(t.tag===3)R_(t,t,n);else for(;e!==null;){if(e.tag===3){R_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Js===null||!Js.has(r))){t=Oa(n,t),t=gS(e,t,1),e=Xs(e,t,1),t=qt(),e!==null&&(Jc(e,1,t),an(e,t));break}}e=e.return}}function sO(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=qt(),t.pingedLanes|=t.suspendedLanes&n,bt===t&&(Ct&n)===n&&(vt===4||vt===3&&(Ct&130023424)===Ct&&500>it()-Nv?Xi(t,0):Iv|=n),an(t,e)}function MS(t,e){e===0&&(t.mode&1?(e=$u,$u<<=1,!($u&130023424)&&($u=4194304)):e=1);var n=qt();t=es(t,e),t!==null&&(Jc(t,e,n),an(t,n))}function iO(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),MS(t,n)}function oO(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),MS(t,n)}var LS;LS=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sn.current)tn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tn=!1,GD(t,e,n);tn=!!(t.flags&131072)}else tn=!1,Ge&&e.flags&1048576&&$b(e,sh,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;bd(t,e),t=e.pendingProps;var s=Pa(e,Ft.current);ia(e,n),s=wv(null,e,r,t,s,n);var i=_v();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,on(r)?(i=!0,nh(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,pv(e),s.updater=sf,e.stateNode=s,s._reactInternals=e,pg(e,r,t,n),e=vg(null,e,r,!0,i,n)):(e.tag=0,Ge&&i&&lv(e),Wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(bd(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=lO(r),t=zn(r,t),s){case 0:e=yg(null,e,r,t,n);break e;case 1:e=w_(null,e,r,t,n);break e;case 11:e=v_(null,e,r,t,n);break e;case 14:e=x_(null,e,r,zn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),yg(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),w_(t,e,r,s,n);case 3:e:{if(wS(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Gb(t,e),ah(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Oa(Error(z(423)),e),e=__(t,e,r,n,s);break e}else if(r!==s){s=Oa(Error(z(424)),e),e=__(t,e,r,n,s);break e}else for(pn=Ys(e.stateNode.containerInfo.firstChild),yn=e,Ge=!0,qn=null,n=Wb(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ja(),r===s){e=ts(t,e,n);break e}Wt(t,e,r,n)}e=e.child}return e;case 5:return Kb(e),t===null&&hg(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,ag(r,s)?o=null:i!==null&&ag(r,i)&&(e.flags|=32),xS(t,e),Wt(t,e,o,n),e.child;case 6:return t===null&&hg(e),null;case 13:return _S(t,e,n);case 4:return gv(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ka(e,null,r,n):Wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),v_(t,e,r,s,n);case 7:return Wt(t,e,e.pendingProps,n),e.child;case 8:return Wt(t,e,e.pendingProps.children,n),e.child;case 12:return Wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,$e(ih,r._currentValue),r._currentValue=o,i!==null)if(er(i.value,o)){if(i.children===s.children&&!sn.current){e=ts(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Kr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),fg(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),fg(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ia(e,n),s=Dn(s),r=r(s),e.flags|=1,Wt(t,e,r,n),e.child;case 14:return r=e.type,s=zn(r,e.pendingProps),s=zn(r.type,s),x_(t,e,r,s,n);case 15:return yS(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:zn(r,s),bd(t,e),e.tag=1,on(r)?(t=!0,nh(e)):t=!1,ia(e,n),mS(e,r,s),pg(e,r,s,n),vg(null,e,r,!0,t,n);case 19:return ES(t,e,n);case 22:return vS(t,e,n)}throw Error(z(156,e.tag))};function VS(t,e){return db(t,e)}function aO(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pn(t,e,n,r){return new aO(t,e,n,r)}function Pv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function lO(t){if(typeof t=="function")return Pv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Yy)return 11;if(t===Xy)return 14}return 2}function ei(t,e){var n=t.alternate;return n===null?(n=Pn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nd(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Pv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zo:return Ji(n.children,s,i,e);case Qy:o=8,s|=8;break;case Fp:return t=Pn(12,n,e,s|2),t.elementType=Fp,t.lanes=i,t;case Up:return t=Pn(13,n,e,s),t.elementType=Up,t.lanes=i,t;case $p:return t=Pn(19,n,e,s),t.elementType=$p,t.lanes=i,t;case KT:return lf(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case qT:o=10;break e;case GT:o=9;break e;case Yy:o=11;break e;case Xy:o=14;break e;case Ss:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=Pn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ji(t,e,n,r){return t=Pn(7,t,r,e),t.lanes=n,t}function lf(t,e,n,r){return t=Pn(22,t,r,e),t.elementType=KT,t.lanes=n,t.stateNode={isHidden:!1},t}function tp(t,e,n){return t=Pn(6,t,null,e),t.lanes=n,t}function np(t,e,n){return e=Pn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cO(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Mm(0),this.expirationTimes=Mm(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mm(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function jv(t,e,n,r,s,i,o,l,c){return t=new cO(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Pn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pv(i),t}function uO(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:$o,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function FS(t){if(!t)return oi;t=t._reactInternals;e:{if(wo(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(on(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(on(n))return Fb(t,n,e)}return e}function US(t,e,n,r,s,i,o,l,c){return t=jv(n,r,!0,t,s,i,o,l,c),t.context=FS(null),n=t.current,r=qt(),s=Zs(n),i=Kr(r,s),i.callback=e??null,Xs(n,i,s),t.current.lanes=s,Jc(t,s,r),an(t,r),t}function cf(t,e,n,r){var s=e.current,i=qt(),o=Zs(s);return n=FS(n),e.context===null?e.context=n:e.pendingContext=n,e=Kr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Xs(s,e,o),t!==null&&(Xn(t,s,o,i),_d(t,s,o)),o}function ph(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function P_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function kv(t,e){P_(t,e),(t=t.alternate)&&P_(t,e)}function dO(){return null}var $S=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dv(t){this._internalRoot=t}uf.prototype.render=Dv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));cf(t,e,null,null)};uf.prototype.unmount=Dv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;io(function(){cf(null,t,null,null)}),e[Zr]=null}};function uf(t){this._internalRoot=t}uf.prototype.unstable_scheduleHydration=function(t){if(t){var e=vb();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ns.length&&e!==0&&e<Ns[n].priority;n++);Ns.splice(n,0,t),n===0&&wb(t)}};function Ov(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function df(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function j_(){}function hO(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=ph(o);i.call(d)}}var o=US(e,r,t,0,null,!1,!1,"",j_);return t._reactRootContainer=o,t[Zr]=o.current,Ec(t.nodeType===8?t.parentNode:t),io(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=ph(c);l.call(d)}}var c=jv(t,0,!1,null,null,!1,!1,"",j_);return t._reactRootContainer=c,t[Zr]=c.current,Ec(t.nodeType===8?t.parentNode:t),io(function(){cf(e,c,n,r)}),c}function hf(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=ph(o);l.call(c)}}cf(e,o,t,s)}else o=hO(n,e,t,s,r);return ph(o)}gb=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Bl(e.pendingLanes);n!==0&&(ev(e,n|1),an(e,it()),!(Ne&6)&&(Ma=it()+500,_i()))}break;case 13:io(function(){var r=es(t,1);if(r!==null){var s=qt();Xn(r,t,1,s)}}),kv(t,1)}};tv=function(t){if(t.tag===13){var e=es(t,134217728);if(e!==null){var n=qt();Xn(e,t,134217728,n)}kv(t,134217728)}};yb=function(t){if(t.tag===13){var e=Zs(t),n=es(t,e);if(n!==null){var r=qt();Xn(n,t,e,r)}kv(t,e)}};vb=function(){return Me};xb=function(t,e){var n=Me;try{return Me=t,e()}finally{Me=n}};Xp=function(t,e,n){switch(e){case"input":if(Hp(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=tf(r);if(!s)throw Error(z(90));YT(r),Hp(r,s)}}}break;case"textarea":JT(t,n);break;case"select":e=n.value,e!=null&&ta(t,!!n.multiple,e,!1)}};ib=Av;ob=io;var fO={usingClientEntryPoint:!1,Events:[eu,qo,tf,rb,sb,Av]},Ll={findFiberByHostInstance:Vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mO={bundleType:Ll.bundleType,version:Ll.version,rendererPackageName:Ll.rendererPackageName,rendererConfig:Ll.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:cs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=cb(t),t===null?null:t.stateNode},findFiberByHostInstance:Ll.findFiberByHostInstance||dO,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ju=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ju.isDisabled&&Ju.supportsFiber)try{Xh=Ju.inject(mO),vr=Ju}catch{}}En.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=fO;En.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ov(e))throw Error(z(200));return uO(t,e,null,n)};En.createRoot=function(t,e){if(!Ov(t))throw Error(z(299));var n=!1,r="",s=$S;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=jv(t,1,!1,null,null,n,!1,r,s),t[Zr]=e.current,Ec(t.nodeType===8?t.parentNode:t),new Dv(e)};En.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=cb(e),t=t===null?null:t.stateNode,t};En.flushSync=function(t){return io(t)};En.hydrate=function(t,e,n){if(!df(e))throw Error(z(200));return hf(null,t,e,!0,n)};En.hydrateRoot=function(t,e,n){if(!Ov(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=$S;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=US(e,null,t,1,n??null,s,!1,i,o),t[Zr]=e.current,Ec(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new uf(e)};En.render=function(t,e,n){if(!df(e))throw Error(z(200));return hf(null,t,e,!1,n)};En.unmountComponentAtNode=function(t){if(!df(t))throw Error(z(40));return t._reactRootContainer?(io(function(){hf(null,null,t,!1,function(){t._reactRootContainer=null,t[Zr]=null})}),!0):!1};En.unstable_batchedUpdates=Av;En.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!df(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return hf(t,e,n,!1,r)};En.version="18.3.1-next-f1338f8080-20240426";function zS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(zS)}catch(t){console.error(t)}}zS(),zT.exports=En;var _o=zT.exports;const pO=CT(_o);var BS,k_=_o;BS=k_.createRoot,k_.hydrateRoot;function gO(t,e){if(t instanceof RegExp)return{keys:!1,pattern:t};var n,r,s,i,o=[],l="",c=t.split("/");for(c[0]||c.shift();s=c.shift();)n=s[0],n==="*"?(o.push(n),l+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):n===":"?(r=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~r?r:~i?i:s.length)),l+=~r&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(l+=(~r?"?":"")+"\\"+s.substring(i))):l+="/"+s;return{keys:o,pattern:new RegExp("^"+l+(e?"(?=$|/)":"/?$"),"i")}}var HS={exports:{}},WS={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var La=p;function yO(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vO=typeof Object.is=="function"?Object.is:yO,xO=La.useState,wO=La.useEffect,_O=La.useLayoutEffect,EO=La.useDebugValue;function TO(t,e){var n=e(),r=xO({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return _O(function(){s.value=n,s.getSnapshot=e,rp(s)&&i({inst:s})},[t,n,e]),wO(function(){return rp(s)&&i({inst:s}),t(function(){rp(s)&&i({inst:s})})},[t]),EO(n),n}function rp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vO(t,n)}catch{return!0}}function bO(t,e){return e()}var SO=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?bO:TO;WS.useSyncExternalStore=La.useSyncExternalStore!==void 0?La.useSyncExternalStore:SO;HS.exports=WS;var IO=HS.exports;const NO=UT.useInsertionEffect,AO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",CO=AO?p.useLayoutEffect:p.useEffect,RO=NO||CO,qS=t=>{const e=p.useRef([t,(...n)=>e[0](...n)]).current;return RO(()=>{e[0]=t}),e[1]},PO="popstate",Mv="pushState",Lv="replaceState",jO="hashchange",D_=[PO,Mv,Lv,jO],kO=t=>{for(const e of D_)addEventListener(e,t);return()=>{for(const e of D_)removeEventListener(e,t)}},GS=(t,e)=>IO.useSyncExternalStore(kO,t,e),DO=()=>location.search,OO=({ssrSearch:t=""}={})=>GS(DO,()=>t),O_=()=>location.pathname,MO=({ssrPath:t}={})=>GS(O_,t?()=>t:O_),LO=(t,{replace:e=!1,state:n=null}={})=>history[e?Lv:Mv](n,"",t),VO=(t={})=>[MO(t),LO],M_=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[M_]>"u"){for(const t of[Mv,Lv]){const e=history[t];history[t]=function(){const n=e.apply(this,arguments),r=new Event(t);return r.arguments=arguments,dispatchEvent(r),n}}Object.defineProperty(window,M_,{value:!0})}const FO=(t,e)=>e.toLowerCase().indexOf(t.toLowerCase())?"~"+e:e.slice(t.length)||"/",KS=(t="")=>t==="/"?"":t,UO=(t,e)=>t[0]==="~"?t.slice(1):KS(e)+t,$O=(t="",e)=>FO(L_(KS(t)),L_(e)),L_=t=>{try{return decodeURI(t)}catch{return t}},QS={hook:VO,searchHook:OO,parser:gO,base:"",ssrPath:void 0,ssrSearch:void 0,hrefs:t=>t},YS=p.createContext(QS),nu=()=>p.useContext(YS),XS={},JS=p.createContext(XS),zO=()=>p.useContext(JS),ff=t=>{const[e,n]=t.hook(t);return[$O(t.base,e),qS((r,s)=>n(UO(r,t.base),s))]},ZS=()=>ff(nu()),eI=(t,e,n,r)=>{const{pattern:s,keys:i}=e instanceof RegExp?{keys:!1,pattern:e}:t(e||"*",r),o=s.exec(n)||[],[l,...c]=o;return l!==void 0?[!0,(()=>{const d=i!==!1?Object.fromEntries(i.map((f,m)=>[f,c[m]])):o.groups;let h={...c};return d&&Object.assign(h,d),h})(),...r?[l]:[]]:[!1,null]},BO=({children:t,...e})=>{var h,f;const n=nu(),r=e.hook?QS:n;let s=r;const[i,o]=((h=e.ssrPath)==null?void 0:h.split("?"))??[];o&&(e.ssrSearch=o,e.ssrPath=i),e.hrefs=e.hrefs??((f=e.hook)==null?void 0:f.hrefs);let l=p.useRef({}),c=l.current,d=c;for(let m in r){const y=m==="base"?r[m]+(e[m]||""):e[m]||r[m];c===d&&y!==d[m]&&(l.current=d={...d}),d[m]=y,y!==r[m]&&(s=d)}return p.createElement(YS.Provider,{value:s,children:t})},V_=({children:t,component:e},n)=>e?p.createElement(e,{params:n}):typeof t=="function"?t(n):t,HO=t=>{let e=p.useRef(XS),n=e.current;for(const r in t)t[r]!==n[r]&&(n=t);return Object.keys(t).length===0&&(n=t),e.current=n},Fn=({path:t,nest:e,match:n,...r})=>{const s=nu(),[i]=ff(s),[o,l,c]=n??eI(s.parser,t,i,e),d=HO({...zO(),...l});if(!o)return null;const h=c?p.createElement(BO,{base:c},V_(r,d)):V_(r,d);return p.createElement(JS.Provider,{value:d,children:h})},WO=p.forwardRef((t,e)=>{const n=nu(),[r,s]=ff(n),{to:i="",href:o=i,onClick:l,asChild:c,children:d,className:h,replace:f,state:m,...y}=t,b=qS(_=>{_.ctrlKey||_.metaKey||_.altKey||_.shiftKey||_.button!==0||(l==null||l(_),_.defaultPrevented||(_.preventDefault(),s(o,t)))}),v=n.hrefs(o[0]==="~"?o.slice(1):n.base+o,n);return c&&p.isValidElement(d)?p.cloneElement(d,{onClick:b,href:v}):p.createElement("a",{...y,onClick:b,href:v,className:h!=null&&h.call?h(r===o):h,children:d,ref:e})}),tI=t=>Array.isArray(t)?t.flatMap(e=>tI(e&&e.type===p.Fragment?e.props.children:e)):[t],qO=({children:t,location:e})=>{const n=nu(),[r]=ff(n);for(const s of tI(t)){let i=0;if(p.isValidElement(s)&&(i=eI(n.parser,s.props.path,e||r,s.props.nest))[0])return p.cloneElement(s,{match:i})}return null};var tl=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(t){return this.listeners.add(t),this.onSubscribe(),()=>{this.listeners.delete(t),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},oo=typeof window>"u"||"Deno"in globalThis;function In(){}function GO(t,e){return typeof t=="function"?t(e):t}function Rg(t){return typeof t=="number"&&t>=0&&t!==1/0}function nI(t,e){return Math.max(t+(e||0)-Date.now(),0)}function aa(t,e){return typeof t=="function"?t(e):t}function Gn(t,e){return typeof t=="function"?t(e):t}function F_(t,e){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:l}=t;if(o){if(r){if(e.queryHash!==Vv(o,e.options))return!1}else if(!Pc(e.queryKey,o))return!1}if(n!=="all"){const c=e.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&e.isStale()!==l||s&&s!==e.state.fetchStatus||i&&!i(e))}function U_(t,e){const{exact:n,status:r,predicate:s,mutationKey:i}=t;if(i){if(!e.options.mutationKey)return!1;if(n){if(ao(e.options.mutationKey)!==ao(i))return!1}else if(!Pc(e.options.mutationKey,i))return!1}return!(r&&e.state.status!==r||s&&!s(e))}function Vv(t,e){return((e==null?void 0:e.queryKeyHashFn)||ao)(t)}function ao(t){return JSON.stringify(t,(e,n)=>Pg(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Pc(t,e){return t===e?!0:typeof t!=typeof e?!1:t&&e&&typeof t=="object"&&typeof e=="object"?!Object.keys(e).some(n=>!Pc(t[n],e[n])):!1}function rI(t,e){if(t===e)return t;const n=$_(t)&&$_(e);if(n||Pg(t)&&Pg(e)){const r=n?t:Object.keys(t),s=r.length,i=n?e:Object.keys(e),o=i.length,l=n?[]:{};let c=0;for(let d=0;d<o;d++){const h=n?d:i[d];(!n&&r.includes(h)||n)&&t[h]===void 0&&e[h]===void 0?(l[h]=void 0,c++):(l[h]=rI(t[h],e[h]),l[h]===t[h]&&t[h]!==void 0&&c++)}return s===o&&c===s?t:l}return e}function gh(t,e){if(!e||Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(t[n]!==e[n])return!1;return!0}function $_(t){return Array.isArray(t)&&t.length===Object.keys(t).length}function Pg(t){if(!z_(t))return!1;const e=t.constructor;if(e===void 0)return!0;const n=e.prototype;return!(!z_(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(t)!==Object.prototype)}function z_(t){return Object.prototype.toString.call(t)==="[object Object]"}function KO(t){return new Promise(e=>{setTimeout(e,t)})}function jg(t,e,n){return typeof n.structuralSharing=="function"?n.structuralSharing(t,e):n.structuralSharing!==!1?rI(t,e):e}function QO(t,e,n=0){const r=[...t,e];return n&&r.length>n?r.slice(1):r}function YO(t,e,n=0){const r=[e,...t];return n&&r.length>n?r.slice(0,-1):r}var Fv=Symbol();function sI(t,e){return!t.queryFn&&(e!=null&&e.initialPromise)?()=>e.initialPromise:!t.queryFn||t.queryFn===Fv?()=>Promise.reject(new Error(`Missing queryFn: '${t.queryHash}'`)):t.queryFn}var Hi,ks,ya,xT,XO=(xT=class extends tl{constructor(){super();ie(this,Hi);ie(this,ks);ie(this,ya);G(this,ya,e=>{if(!oo&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){O(this,ks)||this.setEventListener(O(this,ya))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,ks))==null||e.call(this),G(this,ks,void 0))}setEventListener(e){var n;G(this,ya,e),(n=O(this,ks))==null||n.call(this),G(this,ks,e(r=>{typeof r=="boolean"?this.setFocused(r):this.onFocus()}))}setFocused(e){O(this,Hi)!==e&&(G(this,Hi,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){var e;return typeof O(this,Hi)=="boolean"?O(this,Hi):((e=globalThis.document)==null?void 0:e.visibilityState)!=="hidden"}},Hi=new WeakMap,ks=new WeakMap,ya=new WeakMap,xT),Uv=new XO,va,Ds,xa,wT,JO=(wT=class extends tl{constructor(){super();ie(this,va,!0);ie(this,Ds);ie(this,xa);G(this,xa,e=>{if(!oo&&window.addEventListener){const n=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}}})}onSubscribe(){O(this,Ds)||this.setEventListener(O(this,xa))}onUnsubscribe(){var e;this.hasListeners()||((e=O(this,Ds))==null||e.call(this),G(this,Ds,void 0))}setEventListener(e){var n;G(this,xa,e),(n=O(this,Ds))==null||n.call(this),G(this,Ds,e(this.setOnline.bind(this)))}setOnline(e){O(this,va)!==e&&(G(this,va,e),this.listeners.forEach(r=>{r(e)}))}isOnline(){return O(this,va)}},va=new WeakMap,Ds=new WeakMap,xa=new WeakMap,wT),yh=new JO;function kg(){let t,e;const n=new Promise((s,i)=>{t=s,e=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),t(s)},n.reject=s=>{r({status:"rejected",reason:s}),e(s)},n}function ZO(t){return Math.min(1e3*2**t,3e4)}function iI(t){return(t??"online")==="online"?yh.isOnline():!0}var oI=class extends Error{constructor(t){super("CancelledError"),this.revert=t==null?void 0:t.revert,this.silent=t==null?void 0:t.silent}};function sp(t){return t instanceof oI}function aI(t){let e=!1,n=0,r=!1,s;const i=kg(),o=v=>{var _;r||(m(new oI(v)),(_=t.abort)==null||_.call(t))},l=()=>{e=!0},c=()=>{e=!1},d=()=>Uv.isFocused()&&(t.networkMode==="always"||yh.isOnline())&&t.canRun(),h=()=>iI(t.networkMode)&&t.canRun(),f=v=>{var _;r||(r=!0,(_=t.onSuccess)==null||_.call(t,v),s==null||s(),i.resolve(v))},m=v=>{var _;r||(r=!0,(_=t.onError)==null||_.call(t,v),s==null||s(),i.reject(v))},y=()=>new Promise(v=>{var _;s=E=>{(r||d())&&v(E)},(_=t.onPause)==null||_.call(t)}).then(()=>{var v;s=void 0,r||(v=t.onContinue)==null||v.call(t)}),b=()=>{if(r)return;let v;const _=n===0?t.initialPromise:void 0;try{v=_??t.fn()}catch(E){v=Promise.reject(E)}Promise.resolve(v).then(f).catch(E=>{var M;if(r)return;const x=t.retry??(oo?0:3),S=t.retryDelay??ZO,R=typeof S=="function"?S(n,E):S,D=x===!0||typeof x=="number"&&n<x||typeof x=="function"&&x(n,E);if(e||!D){m(E);return}n++,(M=t.onFail)==null||M.call(t,n,E),KO(R).then(()=>d()?void 0:y()).then(()=>{e?m(E):b()})})};return{promise:i,cancel:o,continue:()=>(s==null||s(),i),cancelRetry:l,continueRetry:c,canStart:h,start:()=>(h()?b():y().then(b),i)}}function eM(){let t=[],e=0,n=l=>{l()},r=l=>{l()},s=l=>setTimeout(l,0);const i=l=>{e?t.push(l):s(()=>{n(l)})},o=()=>{const l=t;t=[],l.length&&s(()=>{r(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;e++;try{c=l()}finally{e--,e||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{r=l},setScheduler:l=>{s=l}}}var yt=eM(),Wi,_T,lI=(_T=class{constructor(){ie(this,Wi)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Rg(this.gcTime)&&G(this,Wi,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(t){this.gcTime=Math.max(this.gcTime||0,t??(oo?1/0:5*60*1e3))}clearGcTimeout(){O(this,Wi)&&(clearTimeout(O(this,Wi)),G(this,Wi,void 0))}},Wi=new WeakMap,_T),wa,_a,Sn,Ot,Gc,qi,Hn,Lr,ET,tM=(ET=class extends lI{constructor(n){super();ie(this,Hn);ie(this,wa);ie(this,_a);ie(this,Sn);ie(this,Ot);ie(this,Gc);ie(this,qi);G(this,qi,!1),G(this,Gc,n.defaultOptions),this.setOptions(n.options),this.observers=[],G(this,Sn,n.cache),this.queryKey=n.queryKey,this.queryHash=n.queryHash,G(this,wa,nM(this.options)),this.state=n.state??O(this,wa),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var n;return(n=O(this,Ot))==null?void 0:n.promise}setOptions(n){this.options={...O(this,Gc),...n},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&O(this,Sn).remove(this)}setData(n,r){const s=jg(this.state.data,n,this.options);return ge(this,Hn,Lr).call(this,{data:s,type:"success",dataUpdatedAt:r==null?void 0:r.updatedAt,manual:r==null?void 0:r.manual}),s}setState(n,r){ge(this,Hn,Lr).call(this,{type:"setState",state:n,setStateOptions:r})}cancel(n){var s,i;const r=(s=O(this,Ot))==null?void 0:s.promise;return(i=O(this,Ot))==null||i.cancel(n),r?r.then(In).catch(In):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(O(this,wa))}isActive(){return this.observers.some(n=>Gn(n.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Fv||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(n=>n.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(n=0){return this.state.isInvalidated||this.state.data===void 0||!nI(this.state.dataUpdatedAt,n)}onFocus(){var r;const n=this.observers.find(s=>s.shouldFetchOnWindowFocus());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Ot))==null||r.continue()}onOnline(){var r;const n=this.observers.find(s=>s.shouldFetchOnReconnect());n==null||n.refetch({cancelRefetch:!1}),(r=O(this,Ot))==null||r.continue()}addObserver(n){this.observers.includes(n)||(this.observers.push(n),this.clearGcTimeout(),O(this,Sn).notify({type:"observerAdded",query:this,observer:n}))}removeObserver(n){this.observers.includes(n)&&(this.observers=this.observers.filter(r=>r!==n),this.observers.length||(O(this,Ot)&&(O(this,qi)?O(this,Ot).cancel({revert:!0}):O(this,Ot).cancelRetry()),this.scheduleGc()),O(this,Sn).notify({type:"observerRemoved",query:this,observer:n}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||ge(this,Hn,Lr).call(this,{type:"invalidate"})}fetch(n,r){var d,h,f;if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&(r!=null&&r.cancelRefetch))this.cancel({silent:!0});else if(O(this,Ot))return O(this,Ot).continueRetry(),O(this,Ot).promise}if(n&&this.setOptions(n),!this.options.queryFn){const m=this.observers.find(y=>y.options.queryFn);m&&this.setOptions(m.options)}const s=new AbortController,i=m=>{Object.defineProperty(m,"signal",{enumerable:!0,get:()=>(G(this,qi,!0),s.signal)})},o=()=>{const m=sI(this.options,r),y={queryKey:this.queryKey,meta:this.meta};return i(y),G(this,qi,!1),this.options.persister?this.options.persister(m,y,this):m(y)},l={fetchOptions:r,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:o};i(l),(d=this.options.behavior)==null||d.onFetch(l,this),G(this,_a,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((h=l.fetchOptions)==null?void 0:h.meta))&&ge(this,Hn,Lr).call(this,{type:"fetch",meta:(f=l.fetchOptions)==null?void 0:f.meta});const c=m=>{var y,b,v,_;sp(m)&&m.silent||ge(this,Hn,Lr).call(this,{type:"error",error:m}),sp(m)||((b=(y=O(this,Sn).config).onError)==null||b.call(y,m,this),(_=(v=O(this,Sn).config).onSettled)==null||_.call(v,this.state.data,m,this)),this.scheduleGc()};return G(this,Ot,aI({initialPromise:r==null?void 0:r.initialPromise,fn:l.fetchFn,abort:s.abort.bind(s),onSuccess:m=>{var y,b,v,_;if(m===void 0){c(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(m)}catch(E){c(E);return}(b=(y=O(this,Sn).config).onSuccess)==null||b.call(y,m,this),(_=(v=O(this,Sn).config).onSettled)==null||_.call(v,m,this.state.error,this),this.scheduleGc()},onError:c,onFail:(m,y)=>{ge(this,Hn,Lr).call(this,{type:"failed",failureCount:m,error:y})},onPause:()=>{ge(this,Hn,Lr).call(this,{type:"pause"})},onContinue:()=>{ge(this,Hn,Lr).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0})),O(this,Ot).start()}},wa=new WeakMap,_a=new WeakMap,Sn=new WeakMap,Ot=new WeakMap,Gc=new WeakMap,qi=new WeakMap,Hn=new WeakSet,Lr=function(n){const r=s=>{switch(n.type){case"failed":return{...s,fetchFailureCount:n.failureCount,fetchFailureReason:n.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...cI(s.data,this.options),fetchMeta:n.meta??null};case"success":return{...s,data:n.data,dataUpdateCount:s.dataUpdateCount+1,dataUpdatedAt:n.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!n.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const i=n.error;return sp(i)&&i.revert&&O(this,_a)?{...O(this,_a),fetchStatus:"idle"}:{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...n.state}}};this.state=r(this.state),yt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),O(this,Sn).notify({query:this,type:"updated",action:n})})},ET);function cI(t,e){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:iI(e.networkMode)?"fetching":"paused",...t===void 0&&{error:null,status:"pending"}}}function nM(t){const e=typeof t.initialData=="function"?t.initialData():t.initialData,n=e!==void 0,r=n?typeof t.initialDataUpdatedAt=="function"?t.initialDataUpdatedAt():t.initialDataUpdatedAt:0;return{data:e,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var hr,TT,rM=(TT=class extends tl{constructor(e={}){super();ie(this,hr);this.config=e,G(this,hr,new Map)}build(e,n,r){const s=n.queryKey,i=n.queryHash??Vv(s,n);let o=this.get(i);return o||(o=new tM({cache:this,queryKey:s,queryHash:i,options:e.defaultQueryOptions(n),state:r,defaultOptions:e.getQueryDefaults(s)}),this.add(o)),o}add(e){O(this,hr).has(e.queryHash)||(O(this,hr).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=O(this,hr).get(e.queryHash);n&&(e.destroy(),n===e&&O(this,hr).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return O(this,hr).get(e)}getAll(){return[...O(this,hr).values()]}find(e){const n={exact:!0,...e};return this.getAll().find(r=>F_(n,r))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(r=>F_(e,r)):n}notify(e){yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){yt.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){yt.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},hr=new WeakMap,TT),fr,Bt,Gi,mr,Es,bT,sM=(bT=class extends lI{constructor(n){super();ie(this,mr);ie(this,fr);ie(this,Bt);ie(this,Gi);this.mutationId=n.mutationId,G(this,Bt,n.mutationCache),G(this,fr,[]),this.state=n.state||uI(),this.setOptions(n.options),this.scheduleGc()}setOptions(n){this.options=n,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(n){O(this,fr).includes(n)||(O(this,fr).push(n),this.clearGcTimeout(),O(this,Bt).notify({type:"observerAdded",mutation:this,observer:n}))}removeObserver(n){G(this,fr,O(this,fr).filter(r=>r!==n)),this.scheduleGc(),O(this,Bt).notify({type:"observerRemoved",mutation:this,observer:n})}optionalRemove(){O(this,fr).length||(this.state.status==="pending"?this.scheduleGc():O(this,Bt).remove(this))}continue(){var n;return((n=O(this,Gi))==null?void 0:n.continue())??this.execute(this.state.variables)}async execute(n){var i,o,l,c,d,h,f,m,y,b,v,_,E,x,S,R,D,M,T,I;G(this,Gi,aI({fn:()=>this.options.mutationFn?this.options.mutationFn(n):Promise.reject(new Error("No mutationFn found")),onFail:(N,C)=>{ge(this,mr,Es).call(this,{type:"failed",failureCount:N,error:C})},onPause:()=>{ge(this,mr,Es).call(this,{type:"pause"})},onContinue:()=>{ge(this,mr,Es).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>O(this,Bt).canRun(this)}));const r=this.state.status==="pending",s=!O(this,Gi).canStart();try{if(!r){ge(this,mr,Es).call(this,{type:"pending",variables:n,isPaused:s}),await((o=(i=O(this,Bt).config).onMutate)==null?void 0:o.call(i,n,this));const C=await((c=(l=this.options).onMutate)==null?void 0:c.call(l,n));C!==this.state.context&&ge(this,mr,Es).call(this,{type:"pending",context:C,variables:n,isPaused:s})}const N=await O(this,Gi).start();return await((h=(d=O(this,Bt).config).onSuccess)==null?void 0:h.call(d,N,n,this.state.context,this)),await((m=(f=this.options).onSuccess)==null?void 0:m.call(f,N,n,this.state.context)),await((b=(y=O(this,Bt).config).onSettled)==null?void 0:b.call(y,N,null,this.state.variables,this.state.context,this)),await((_=(v=this.options).onSettled)==null?void 0:_.call(v,N,null,n,this.state.context)),ge(this,mr,Es).call(this,{type:"success",data:N}),N}catch(N){try{throw await((x=(E=O(this,Bt).config).onError)==null?void 0:x.call(E,N,n,this.state.context,this)),await((R=(S=this.options).onError)==null?void 0:R.call(S,N,n,this.state.context)),await((M=(D=O(this,Bt).config).onSettled)==null?void 0:M.call(D,void 0,N,this.state.variables,this.state.context,this)),await((I=(T=this.options).onSettled)==null?void 0:I.call(T,void 0,N,n,this.state.context)),N}finally{ge(this,mr,Es).call(this,{type:"error",error:N})}}finally{O(this,Bt).runNext(this)}}},fr=new WeakMap,Bt=new WeakMap,Gi=new WeakMap,mr=new WeakSet,Es=function(n){const r=s=>{switch(n.type){case"failed":return{...s,failureCount:n.failureCount,failureReason:n.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:n.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:n.isPaused,status:"pending",variables:n.variables,submittedAt:Date.now()};case"success":return{...s,data:n.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:n.error,failureCount:s.failureCount+1,failureReason:n.error,isPaused:!1,status:"error"}}};this.state=r(this.state),yt.batch(()=>{O(this,fr).forEach(s=>{s.onMutationUpdate(n)}),O(this,Bt).notify({mutation:this,type:"updated",action:n})})},bT);function uI(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var hn,Kc,ST,iM=(ST=class extends tl{constructor(e={}){super();ie(this,hn);ie(this,Kc);this.config=e,G(this,hn,new Map),G(this,Kc,Date.now())}build(e,n,r){const s=new sM({mutationCache:this,mutationId:++Ou(this,Kc)._,options:e.defaultMutationOptions(n),state:r});return this.add(s),s}add(e){const n=Zu(e),r=O(this,hn).get(n)??[];r.push(e),O(this,hn).set(n,r),this.notify({type:"added",mutation:e})}remove(e){var r;const n=Zu(e);if(O(this,hn).has(n)){const s=(r=O(this,hn).get(n))==null?void 0:r.filter(i=>i!==e);s&&(s.length===0?O(this,hn).delete(n):O(this,hn).set(n,s))}this.notify({type:"removed",mutation:e})}canRun(e){var r;const n=(r=O(this,hn).get(Zu(e)))==null?void 0:r.find(s=>s.state.status==="pending");return!n||n===e}runNext(e){var r;const n=(r=O(this,hn).get(Zu(e)))==null?void 0:r.find(s=>s!==e&&s.state.isPaused);return(n==null?void 0:n.continue())??Promise.resolve()}clear(){yt.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...O(this,hn).values()].flat()}find(e){const n={exact:!0,...e};return this.getAll().find(r=>U_(n,r))}findAll(e={}){return this.getAll().filter(n=>U_(e,n))}notify(e){yt.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return yt.batch(()=>Promise.all(e.map(n=>n.continue().catch(In))))}},hn=new WeakMap,Kc=new WeakMap,ST);function Zu(t){var e;return((e=t.options.scope)==null?void 0:e.id)??String(t.mutationId)}function B_(t){return{onFetch:(e,n)=>{var h,f,m,y,b;const r=e.options,s=(m=(f=(h=e.fetchOptions)==null?void 0:h.meta)==null?void 0:f.fetchMore)==null?void 0:m.direction,i=((y=e.state.data)==null?void 0:y.pages)||[],o=((b=e.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let v=!1;const _=S=>{Object.defineProperty(S,"signal",{enumerable:!0,get:()=>(e.signal.aborted?v=!0:e.signal.addEventListener("abort",()=>{v=!0}),e.signal)})},E=sI(e.options,e.fetchOptions),x=async(S,R,D)=>{if(v)return Promise.reject();if(R==null&&S.pages.length)return Promise.resolve(S);const M={queryKey:e.queryKey,pageParam:R,direction:D?"backward":"forward",meta:e.options.meta};_(M);const T=await E(M),{maxPages:I}=e.options,N=D?YO:QO;return{pages:N(S.pages,T,I),pageParams:N(S.pageParams,R,I)}};if(s&&i.length){const S=s==="backward",R=S?oM:H_,D={pages:i,pageParams:o},M=R(r,D);l=await x(D,M,S)}else{const S=t??i.length;do{const R=c===0?o[0]??r.initialPageParam:H_(r,l);if(c>0&&R==null)break;l=await x(l,R),c++}while(c<S)}return l};e.options.persister?e.fetchFn=()=>{var v,_;return(_=(v=e.options).persister)==null?void 0:_.call(v,d,{queryKey:e.queryKey,meta:e.options.meta,signal:e.signal},n)}:e.fetchFn=d}}}function H_(t,{pages:e,pageParams:n}){const r=e.length-1;return e.length>0?t.getNextPageParam(e[r],e,n[r],n):void 0}function oM(t,{pages:e,pageParams:n}){var r;return e.length>0?(r=t.getPreviousPageParam)==null?void 0:r.call(t,e[0],e,n[0],n):void 0}var Ze,Os,Ms,Ea,Ta,Ls,ba,Sa,IT,aM=(IT=class{constructor(t={}){ie(this,Ze);ie(this,Os);ie(this,Ms);ie(this,Ea);ie(this,Ta);ie(this,Ls);ie(this,ba);ie(this,Sa);G(this,Ze,t.queryCache||new rM),G(this,Os,t.mutationCache||new iM),G(this,Ms,t.defaultOptions||{}),G(this,Ea,new Map),G(this,Ta,new Map),G(this,Ls,0)}mount(){Ou(this,Ls)._++,O(this,Ls)===1&&(G(this,ba,Uv.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Ze).onFocus())})),G(this,Sa,yh.subscribe(async t=>{t&&(await this.resumePausedMutations(),O(this,Ze).onOnline())})))}unmount(){var t,e;Ou(this,Ls)._--,O(this,Ls)===0&&((t=O(this,ba))==null||t.call(this),G(this,ba,void 0),(e=O(this,Sa))==null||e.call(this),G(this,Sa,void 0))}isFetching(t){return O(this,Ze).findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return O(this,Os).findAll({...t,status:"pending"}).length}getQueryData(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Ze).get(e.queryHash))==null?void 0:n.state.data}ensureQueryData(t){const e=this.getQueryData(t.queryKey);if(e===void 0)return this.fetchQuery(t);{const n=this.defaultQueryOptions(t),r=O(this,Ze).build(this,n);return t.revalidateIfStale&&r.isStaleByTime(aa(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(e)}}getQueriesData(t){return O(this,Ze).findAll(t).map(({queryKey:e,state:n})=>{const r=n.data;return[e,r]})}setQueryData(t,e,n){const r=this.defaultQueryOptions({queryKey:t}),s=O(this,Ze).get(r.queryHash),i=s==null?void 0:s.state.data,o=GO(e,i);if(o!==void 0)return O(this,Ze).build(this,r).setData(o,{...n,manual:!0})}setQueriesData(t,e,n){return yt.batch(()=>O(this,Ze).findAll(t).map(({queryKey:r})=>[r,this.setQueryData(r,e,n)]))}getQueryState(t){var n;const e=this.defaultQueryOptions({queryKey:t});return(n=O(this,Ze).get(e.queryHash))==null?void 0:n.state}removeQueries(t){const e=O(this,Ze);yt.batch(()=>{e.findAll(t).forEach(n=>{e.remove(n)})})}resetQueries(t,e){const n=O(this,Ze),r={type:"active",...t};return yt.batch(()=>(n.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries(r,e)))}cancelQueries(t={},e={}){const n={revert:!0,...e},r=yt.batch(()=>O(this,Ze).findAll(t).map(s=>s.cancel(n)));return Promise.all(r).then(In).catch(In)}invalidateQueries(t={},e={}){return yt.batch(()=>{if(O(this,Ze).findAll(t).forEach(r=>{r.invalidate()}),t.refetchType==="none")return Promise.resolve();const n={...t,type:t.refetchType??t.type??"active"};return this.refetchQueries(n,e)})}refetchQueries(t={},e){const n={...e,cancelRefetch:(e==null?void 0:e.cancelRefetch)??!0},r=yt.batch(()=>O(this,Ze).findAll(t).filter(s=>!s.isDisabled()).map(s=>{let i=s.fetch(void 0,n);return n.throwOnError||(i=i.catch(In)),s.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(r).then(In)}fetchQuery(t){const e=this.defaultQueryOptions(t);e.retry===void 0&&(e.retry=!1);const n=O(this,Ze).build(this,e);return n.isStaleByTime(aa(e.staleTime,n))?n.fetch(e):Promise.resolve(n.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(In).catch(In)}fetchInfiniteQuery(t){return t.behavior=B_(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(In).catch(In)}ensureInfiniteQueryData(t){return t.behavior=B_(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return yh.isOnline()?O(this,Os).resumePausedMutations():Promise.resolve()}getQueryCache(){return O(this,Ze)}getMutationCache(){return O(this,Os)}getDefaultOptions(){return O(this,Ms)}setDefaultOptions(t){G(this,Ms,t)}setQueryDefaults(t,e){O(this,Ea).set(ao(t),{queryKey:t,defaultOptions:e})}getQueryDefaults(t){const e=[...O(this,Ea).values()];let n={};return e.forEach(r=>{Pc(t,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(t,e){O(this,Ta).set(ao(t),{mutationKey:t,defaultOptions:e})}getMutationDefaults(t){const e=[...O(this,Ta).values()];let n={};return e.forEach(r=>{Pc(t,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(t){if(t._defaulted)return t;const e={...O(this,Ms).queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return e.queryHash||(e.queryHash=Vv(e.queryKey,e)),e.refetchOnReconnect===void 0&&(e.refetchOnReconnect=e.networkMode!=="always"),e.throwOnError===void 0&&(e.throwOnError=!!e.suspense),!e.networkMode&&e.persister&&(e.networkMode="offlineFirst"),e.enabled!==!0&&e.queryFn===Fv&&(e.enabled=!1),e}defaultMutationOptions(t){return t!=null&&t._defaulted?t:{...O(this,Ms).mutations,...(t==null?void 0:t.mutationKey)&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){O(this,Ze).clear(),O(this,Os).clear()}},Ze=new WeakMap,Os=new WeakMap,Ms=new WeakMap,Ea=new WeakMap,Ta=new WeakMap,Ls=new WeakMap,ba=new WeakMap,Sa=new WeakMap,IT),Yt,be,Qc,Ht,Ki,Ia,Vs,pr,Yc,Na,Aa,Qi,Yi,Fs,Ca,ke,Wl,Dg,Og,Mg,Lg,Vg,Fg,Ug,dI,NT,lM=(NT=class extends tl{constructor(e,n){super();ie(this,ke);ie(this,Yt);ie(this,be);ie(this,Qc);ie(this,Ht);ie(this,Ki);ie(this,Ia);ie(this,Vs);ie(this,pr);ie(this,Yc);ie(this,Na);ie(this,Aa);ie(this,Qi);ie(this,Yi);ie(this,Fs);ie(this,Ca,new Set);this.options=n,G(this,Yt,e),G(this,pr,null),G(this,Vs,kg()),this.options.experimental_prefetchInRender||O(this,Vs).reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(O(this,be).addObserver(this),W_(O(this,be),this.options)?ge(this,ke,Wl).call(this):this.updateResult(),ge(this,ke,Lg).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return $g(O(this,be),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return $g(O(this,be),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,ge(this,ke,Vg).call(this),ge(this,ke,Fg).call(this),O(this,be).removeObserver(this)}setOptions(e,n){const r=this.options,s=O(this,be);if(this.options=O(this,Yt).defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Gn(this.options.enabled,O(this,be))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");ge(this,ke,Ug).call(this),O(this,be).setOptions(this.options),r._defaulted&&!gh(this.options,r)&&O(this,Yt).getQueryCache().notify({type:"observerOptionsUpdated",query:O(this,be),observer:this});const i=this.hasListeners();i&&q_(O(this,be),s,this.options,r)&&ge(this,ke,Wl).call(this),this.updateResult(n),i&&(O(this,be)!==s||Gn(this.options.enabled,O(this,be))!==Gn(r.enabled,O(this,be))||aa(this.options.staleTime,O(this,be))!==aa(r.staleTime,O(this,be)))&&ge(this,ke,Dg).call(this);const o=ge(this,ke,Og).call(this);i&&(O(this,be)!==s||Gn(this.options.enabled,O(this,be))!==Gn(r.enabled,O(this,be))||o!==O(this,Fs))&&ge(this,ke,Mg).call(this,o)}getOptimisticResult(e){const n=O(this,Yt).getQueryCache().build(O(this,Yt),e),r=this.createResult(n,e);return uM(this,r)&&(G(this,Ht,r),G(this,Ia,this.options),G(this,Ki,O(this,be).state)),r}getCurrentResult(){return O(this,Ht)}trackResult(e,n){const r={};return Object.keys(e).forEach(s=>{Object.defineProperty(r,s,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(s),n==null||n(s),e[s])})}),r}trackProp(e){O(this,Ca).add(e)}getCurrentQuery(){return O(this,be)}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=O(this,Yt).defaultQueryOptions(e),r=O(this,Yt).getQueryCache().build(O(this,Yt),n);return r.fetch().then(()=>this.createResult(r,n))}fetch(e){return ge(this,ke,Wl).call(this,{...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),O(this,Ht)))}createResult(e,n){var I;const r=O(this,be),s=this.options,i=O(this,Ht),o=O(this,Ki),l=O(this,Ia),d=e!==r?e.state:O(this,Qc),{state:h}=e;let f={...h},m=!1,y;if(n._optimisticResults){const N=this.hasListeners(),C=!N&&W_(e,n),j=N&&q_(e,r,n,s);(C||j)&&(f={...f,...cI(h.data,e.options)}),n._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:b,errorUpdatedAt:v,status:_}=f;if(n.select&&f.data!==void 0)if(i&&f.data===(o==null?void 0:o.data)&&n.select===O(this,Yc))y=O(this,Na);else try{G(this,Yc,n.select),y=n.select(f.data),y=jg(i==null?void 0:i.data,y,n),G(this,Na,y),G(this,pr,null)}catch(N){G(this,pr,N)}else y=f.data;if(n.placeholderData!==void 0&&y===void 0&&_==="pending"){let N;if(i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData))N=i.data;else if(N=typeof n.placeholderData=="function"?n.placeholderData((I=O(this,Aa))==null?void 0:I.state.data,O(this,Aa)):n.placeholderData,n.select&&N!==void 0)try{N=n.select(N),G(this,pr,null)}catch(C){G(this,pr,C)}N!==void 0&&(_="success",y=jg(i==null?void 0:i.data,N,n),m=!0)}O(this,pr)&&(b=O(this,pr),y=O(this,Na),v=Date.now(),_="error");const E=f.fetchStatus==="fetching",x=_==="pending",S=_==="error",R=x&&E,D=y!==void 0,T={status:_,fetchStatus:f.fetchStatus,isPending:x,isSuccess:_==="success",isError:S,isInitialLoading:R,isLoading:R,data:y,dataUpdatedAt:f.dataUpdatedAt,error:b,errorUpdatedAt:v,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>d.dataUpdateCount||f.errorUpdateCount>d.errorUpdateCount,isFetching:E,isRefetching:E&&!x,isLoadingError:S&&!D,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:S&&D,isStale:$v(e,n),refetch:this.refetch,promise:O(this,Vs)};if(this.options.experimental_prefetchInRender){const N=k=>{T.status==="error"?k.reject(T.error):T.data!==void 0&&k.resolve(T.data)},C=()=>{const k=G(this,Vs,T.promise=kg());N(k)},j=O(this,Vs);switch(j.status){case"pending":e.queryHash===r.queryHash&&N(j);break;case"fulfilled":(T.status==="error"||T.data!==j.value)&&C();break;case"rejected":(T.status!=="error"||T.error!==j.reason)&&C();break}}return T}updateResult(e){const n=O(this,Ht),r=this.createResult(O(this,be),this.options);if(G(this,Ki,O(this,be).state),G(this,Ia,this.options),O(this,Ki).data!==void 0&&G(this,Aa,O(this,be)),gh(r,n))return;G(this,Ht,r);const s={},i=()=>{if(!n)return!0;const{notifyOnChangeProps:o}=this.options,l=typeof o=="function"?o():o;if(l==="all"||!l&&!O(this,Ca).size)return!0;const c=new Set(l??O(this,Ca));return this.options.throwOnError&&c.add("error"),Object.keys(O(this,Ht)).some(d=>{const h=d;return O(this,Ht)[h]!==n[h]&&c.has(h)})};(e==null?void 0:e.listeners)!==!1&&i()&&(s.listeners=!0),ge(this,ke,dI).call(this,{...s,...e})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&ge(this,ke,Lg).call(this)}},Yt=new WeakMap,be=new WeakMap,Qc=new WeakMap,Ht=new WeakMap,Ki=new WeakMap,Ia=new WeakMap,Vs=new WeakMap,pr=new WeakMap,Yc=new WeakMap,Na=new WeakMap,Aa=new WeakMap,Qi=new WeakMap,Yi=new WeakMap,Fs=new WeakMap,Ca=new WeakMap,ke=new WeakSet,Wl=function(e){ge(this,ke,Ug).call(this);let n=O(this,be).fetch(this.options,e);return e!=null&&e.throwOnError||(n=n.catch(In)),n},Dg=function(){ge(this,ke,Vg).call(this);const e=aa(this.options.staleTime,O(this,be));if(oo||O(this,Ht).isStale||!Rg(e))return;const r=nI(O(this,Ht).dataUpdatedAt,e)+1;G(this,Qi,setTimeout(()=>{O(this,Ht).isStale||this.updateResult()},r))},Og=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(O(this,be)):this.options.refetchInterval)??!1},Mg=function(e){ge(this,ke,Fg).call(this),G(this,Fs,e),!(oo||Gn(this.options.enabled,O(this,be))===!1||!Rg(O(this,Fs))||O(this,Fs)===0)&&G(this,Yi,setInterval(()=>{(this.options.refetchIntervalInBackground||Uv.isFocused())&&ge(this,ke,Wl).call(this)},O(this,Fs)))},Lg=function(){ge(this,ke,Dg).call(this),ge(this,ke,Mg).call(this,ge(this,ke,Og).call(this))},Vg=function(){O(this,Qi)&&(clearTimeout(O(this,Qi)),G(this,Qi,void 0))},Fg=function(){O(this,Yi)&&(clearInterval(O(this,Yi)),G(this,Yi,void 0))},Ug=function(){const e=O(this,Yt).getQueryCache().build(O(this,Yt),this.options);if(e===O(this,be))return;const n=O(this,be);G(this,be,e),G(this,Qc,e.state),this.hasListeners()&&(n==null||n.removeObserver(this),e.addObserver(this))},dI=function(e){yt.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(O(this,Ht))}),O(this,Yt).getQueryCache().notify({query:O(this,be),type:"observerResultsUpdated"})})},NT);function cM(t,e){return Gn(e.enabled,t)!==!1&&t.state.data===void 0&&!(t.state.status==="error"&&e.retryOnMount===!1)}function W_(t,e){return cM(t,e)||t.state.data!==void 0&&$g(t,e,e.refetchOnMount)}function $g(t,e,n){if(Gn(e.enabled,t)!==!1){const r=typeof n=="function"?n(t):n;return r==="always"||r!==!1&&$v(t,e)}return!1}function q_(t,e,n,r){return(t!==e||Gn(r.enabled,t)===!1)&&(!n.suspense||t.state.status!=="error")&&$v(t,n)}function $v(t,e){return Gn(e.enabled,t)!==!1&&t.isStaleByTime(aa(e.staleTime,t))}function uM(t,e){return!gh(t.getCurrentResult(),e)}var Us,$s,Xt,Ur,Xr,Ad,zg,AT,dM=(AT=class extends tl{constructor(n,r){super();ie(this,Xr);ie(this,Us);ie(this,$s);ie(this,Xt);ie(this,Ur);G(this,Us,n),this.setOptions(r),this.bindMethods(),ge(this,Xr,Ad).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var s;const r=this.options;this.options=O(this,Us).defaultMutationOptions(n),gh(this.options,r)||O(this,Us).getMutationCache().notify({type:"observerOptionsUpdated",mutation:O(this,Xt),observer:this}),r!=null&&r.mutationKey&&this.options.mutationKey&&ao(r.mutationKey)!==ao(this.options.mutationKey)?this.reset():((s=O(this,Xt))==null?void 0:s.state.status)==="pending"&&O(this,Xt).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=O(this,Xt))==null||n.removeObserver(this)}onMutationUpdate(n){ge(this,Xr,Ad).call(this),ge(this,Xr,zg).call(this,n)}getCurrentResult(){return O(this,$s)}reset(){var n;(n=O(this,Xt))==null||n.removeObserver(this),G(this,Xt,void 0),ge(this,Xr,Ad).call(this),ge(this,Xr,zg).call(this)}mutate(n,r){var s;return G(this,Ur,r),(s=O(this,Xt))==null||s.removeObserver(this),G(this,Xt,O(this,Us).getMutationCache().build(O(this,Us),this.options)),O(this,Xt).addObserver(this),O(this,Xt).execute(n)}},Us=new WeakMap,$s=new WeakMap,Xt=new WeakMap,Ur=new WeakMap,Xr=new WeakSet,Ad=function(){var r;const n=((r=O(this,Xt))==null?void 0:r.state)??uI();G(this,$s,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},zg=function(n){yt.batch(()=>{var r,s,i,o,l,c,d,h;if(O(this,Ur)&&this.hasListeners()){const f=O(this,$s).variables,m=O(this,$s).context;(n==null?void 0:n.type)==="success"?((s=(r=O(this,Ur)).onSuccess)==null||s.call(r,n.data,f,m),(o=(i=O(this,Ur)).onSettled)==null||o.call(i,n.data,null,f,m)):(n==null?void 0:n.type)==="error"&&((c=(l=O(this,Ur)).onError)==null||c.call(l,n.error,f,m),(h=(d=O(this,Ur)).onSettled)==null||h.call(d,void 0,n.error,f,m))}this.listeners.forEach(f=>{f(O(this,$s))})})},AT),hI=p.createContext(void 0),Eo=t=>{const e=p.useContext(hI);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e},hM=({client:t,children:e})=>(p.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),a.jsx(hI.Provider,{value:t,children:e})),fI=p.createContext(!1),fM=()=>p.useContext(fI);fI.Provider;function mM(){let t=!1;return{clearReset:()=>{t=!1},reset:()=>{t=!0},isReset:()=>t}}var pM=p.createContext(mM()),gM=()=>p.useContext(pM);function mI(t,e){return typeof t=="function"?t(...e):!!t}function Bg(){}var yM=(t,e)=>{(t.suspense||t.throwOnError||t.experimental_prefetchInRender)&&(e.isReset()||(t.retryOnMount=!1))},vM=t=>{p.useEffect(()=>{t.clearReset()},[t])},xM=({result:t,errorResetBoundary:e,throwOnError:n,query:r})=>t.isError&&!e.isReset()&&!t.isFetching&&r&&mI(n,[t.error,r]),wM=t=>{t.suspense&&(t.staleTime===void 0&&(t.staleTime=1e3),typeof t.gcTime=="number"&&(t.gcTime=Math.max(t.gcTime,1e3)))},_M=(t,e)=>t.isLoading&&t.isFetching&&!e,EM=(t,e)=>(t==null?void 0:t.suspense)&&e.isPending,G_=(t,e,n)=>e.fetchOptimistic(t).catch(()=>{n.clearReset()});function TM(t,e,n){var h,f,m,y,b;const r=Eo(),s=fM(),i=gM(),o=r.defaultQueryOptions(t);(f=(h=r.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o),o._optimisticResults=s?"isRestoring":"optimistic",wM(o),yM(o,i),vM(i);const l=!r.getQueryCache().get(o.queryHash),[c]=p.useState(()=>new e(r,o)),d=c.getOptimisticResult(o);if(p.useSyncExternalStore(p.useCallback(v=>{const _=s?Bg:c.subscribe(yt.batchCalls(v));return c.updateResult(),_},[c,s]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),p.useEffect(()=>{c.setOptions(o,{listeners:!1})},[o,c]),EM(o,d))throw G_(o,c,i);if(xM({result:d,errorResetBoundary:i,throwOnError:o.throwOnError,query:r.getQueryCache().get(o.queryHash)}))throw d.error;if((y=(m=r.getDefaultOptions().queries)==null?void 0:m._experimental_afterQuery)==null||y.call(m,o,d),o.experimental_prefetchInRender&&!oo&&_M(d,s)){const v=l?G_(o,c,i):(b=r.getQueryCache().get(o.queryHash))==null?void 0:b.promise;v==null||v.catch(Bg).finally(()=>{c.updateResult()})}return o.notifyOnChangeProps?d:c.trackResult(d)}function ln(t,e){return TM(t,lM)}function ns(t,e){const n=Eo(),[r]=p.useState(()=>new dM(n,t));p.useEffect(()=>{r.setOptions(t)},[r,t]);const s=p.useSyncExternalStore(p.useCallback(o=>r.subscribe(yt.batchCalls(o)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),i=p.useCallback((o,l)=>{r.mutate(o,l).catch(Bg)},[r]);if(s.error&&mI(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:i,mutateAsync:s.mutate}}class Zo{constructor(){this.errorQueue=[],this.maxQueueSize=100}static getInstance(){return Zo.instance||(Zo.instance=new Zo),Zo.instance}handleError(e,n={}){const r=this.normalizeError(e);return this.addToQueue(r),n.logToConsole!==!1&&this.logError(r),n.reportToService&&this.reportError(r),r}normalizeError(e){return this.isAppError(e)?e:e instanceof Error?{code:"GENERIC_ERROR",message:e.message,stack:e.stack,timestamp:new Date,details:{name:e.name,cause:e.cause}}:typeof e=="string"?{code:"STRING_ERROR",message:e,timestamp:new Date}:{code:"UNKNOWN_ERROR",message:"An unknown error occurred",timestamp:new Date,details:e}}isAppError(e){return e&&typeof e.code=="string"&&typeof e.message=="string"&&e.timestamp instanceof Date}addToQueue(e){this.errorQueue.unshift(e),this.errorQueue.length>this.maxQueueSize&&(this.errorQueue=this.errorQueue.slice(0,this.maxQueueSize))}logError(e){console.group(" Error Handler"),console.error("Code:",e.code),console.error("Message:",e.message),console.error("Timestamp:",e.timestamp.toISOString()),e.details&&console.error("Details:",e.details),e.stack&&console.error("Stack:",e.stack),e.context&&console.error("Context:",e.context),console.groupEnd()}reportError(e){console.log(" Error reported to external service:",e.code)}getRecentErrors(e=10){return this.errorQueue.slice(0,e)}clearErrors(){this.errorQueue=[]}}const Ve={NETWORK_ERROR:"NETWORK_ERROR",TIMEOUT_ERROR:"TIMEOUT_ERROR",CONNECTION_ERROR:"CONNECTION_ERROR",AUTH_REQUIRED:"AUTH_REQUIRED",AUTH_INVALID:"AUTH_INVALID",AUTH_EXPIRED:"AUTH_EXPIRED",AUTH_FORBIDDEN:"AUTH_FORBIDDEN",VALIDATION_ERROR:"VALIDATION_ERROR",REQUIRED_FIELD:"REQUIRED_FIELD",INVALID_FORMAT:"INVALID_FORMAT",API_ERROR:"API_ERROR",NOT_FOUND:"NOT_FOUND",SERVER_ERROR:"SERVER_ERROR",RATE_LIMITED:"RATE_LIMITED",BUSINESS_ERROR:"BUSINESS_ERROR",INSUFFICIENT_PERMISSIONS:"INSUFFICIENT_PERMISSIONS",RESOURCE_CONFLICT:"RESOURCE_CONFLICT",SYSTEM_ERROR:"SYSTEM_ERROR",STORAGE_ERROR:"STORAGE_ERROR",CONFIGURATION_ERROR:"CONFIGURATION_ERROR"},Ts={[Ve.NETWORK_ERROR]:"Network connection failed. Please check your internet connection.",[Ve.TIMEOUT_ERROR]:"Request timed out. Please try again.",[Ve.CONNECTION_ERROR]:"Unable to connect to the server.",[Ve.AUTH_REQUIRED]:"Please log in to continue.",[Ve.AUTH_INVALID]:"Invalid credentials. Please try again.",[Ve.AUTH_EXPIRED]:"Your session has expired. Please log in again.",[Ve.AUTH_FORBIDDEN]:"You do not have permission to perform this action.",[Ve.VALIDATION_ERROR]:"Please check your input and try again.",[Ve.REQUIRED_FIELD]:"This field is required.",[Ve.INVALID_FORMAT]:"Invalid format. Please check your input.",[Ve.API_ERROR]:"An error occurred while processing your request.",[Ve.NOT_FOUND]:"The requested resource was not found.",[Ve.SERVER_ERROR]:"Server error. Please try again later.",[Ve.RATE_LIMITED]:"Too many requests. Please wait a moment.",[Ve.BUSINESS_ERROR]:"Unable to complete the requested action.",[Ve.INSUFFICIENT_PERMISSIONS]:"You do not have sufficient permissions.",[Ve.RESOURCE_CONFLICT]:"This resource is already in use.",[Ve.SYSTEM_ERROR]:"A system error occurred. Please try again.",[Ve.STORAGE_ERROR]:"Unable to save data. Please try again.",[Ve.CONFIGURATION_ERROR]:"Configuration error. Please contact support."};function K_(t,e,n,r){return{code:t,message:e||Ts[t]||"An error occurred",details:n,timestamp:new Date,context:r}}function pI(t){var n,r;const e=Zo.getInstance();if(t.response){const{status:s,data:i}=t.response;let o=Ve.API_ERROR,l=Ts[o];switch(s){case 400:o=Ve.VALIDATION_ERROR,l=(i==null?void 0:i.message)||Ts[o];break;case 401:o=Ve.AUTH_REQUIRED,l=Ts[o];break;case 403:o=Ve.AUTH_FORBIDDEN,l=Ts[o];break;case 404:o=Ve.NOT_FOUND,l=Ts[o];break;case 429:o=Ve.RATE_LIMITED,l=Ts[o];break;case 500:o=Ve.SERVER_ERROR,l=Ts[o];break}return e.handleError(K_(o,l,i,{status:s}))}return t.request?e.handleError(K_(Ve.NETWORK_ERROR,void 0,void 0,{url:(n=t.config)==null?void 0:n.url,method:(r=t.config)==null?void 0:r.method})):e.handleError(t)}async function gI(t){if(!t.ok){const e=await t.text()||t.statusText,n={response:{status:t.status,data:{message:e}},request:null,message:e,config:{url:t.url,method:"GET"}};throw pI(n)}}async function Va(t,e,n){try{const r=await fetch(e,{method:t,headers:n?{"Content-Type":"application/json"}:{},body:n?JSON.stringify(n):void 0,credentials:"include"});return await gI(r),r}catch(r){throw r.code?r:pI(r)}}const bM=({on401:t})=>async({queryKey:e})=>{const n=await fetch(e.join("/"),{credentials:"include"});return t==="returnNull"&&n.status===401?null:(await gI(n),await n.json())},SM=new aM({defaultOptions:{queries:{queryFn:bM({on401:"throw"}),refetchInterval:!1,refetchOnWindowFocus:!1,staleTime:1/0,retry:!1},mutations:{retry:!1}}}),IM=1,NM=1e6;let ip=0;function AM(){return ip=(ip+1)%Number.MAX_SAFE_INTEGER,ip.toString()}const op=new Map,Q_=t=>{if(op.has(t))return;const e=setTimeout(()=>{op.delete(t),ac({type:"REMOVE_TOAST",toastId:t})},NM);op.set(t,e)},CM=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,IM)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Q_(n):t.toasts.forEach(r=>{Q_(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Cd=[];let Rd={toasts:[]};function ac(t){Rd=CM(Rd,t),Cd.forEach(e=>{e(Rd)})}function RM({...t}){const e=AM(),n=s=>ac({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>ac({type:"DISMISS_TOAST",toastId:e});return ac({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function zv(){const[t,e]=p.useState(Rd);return p.useEffect(()=>(Cd.push(e),()=>{const n=Cd.indexOf(e);n>-1&&Cd.splice(n,1)}),[t]),{...t,toast:RM,dismiss:n=>ac({type:"DISMISS_TOAST",toastId:n})}}function Z(t,e,{checkForDefaultPrevented:n=!0}={}){return function(s){if(t==null||t(s),n===!1||!s.defaultPrevented)return e==null?void 0:e(s)}}function Y_(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function yI(...t){return e=>{let n=!1;const r=t.map(s=>{const i=Y_(s,e);return!n&&typeof i=="function"&&(n=!0),i});if(n)return()=>{for(let s=0;s<r.length;s++){const i=r[s];typeof i=="function"?i():Y_(t[s],null)}}}}function Ie(...t){return p.useCallback(yI(...t),t)}function PM(t,e){const n=p.createContext(e),r=i=>{const{children:o,...l}=i,c=p.useMemo(()=>l,Object.values(l));return a.jsx(n.Provider,{value:c,children:o})};r.displayName=t+"Provider";function s(i){const o=p.useContext(n);if(o)return o;if(e!==void 0)return e;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,s]}function bn(t,e=[]){let n=[];function r(i,o){const l=p.createContext(o),c=n.length;n=[...n,o];const d=f=>{var E;const{scope:m,children:y,...b}=f,v=((E=m==null?void 0:m[t])==null?void 0:E[c])||l,_=p.useMemo(()=>b,Object.values(b));return a.jsx(v.Provider,{value:_,children:y})};d.displayName=i+"Provider";function h(f,m){var v;const y=((v=m==null?void 0:m[t])==null?void 0:v[c])||l,b=p.useContext(y);if(b)return b;if(o!==void 0)return o;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[d,h]}const s=()=>{const i=n.map(o=>p.createContext(o));return function(l){const c=(l==null?void 0:l[t])||i;return p.useMemo(()=>({[`__scope${t}`]:{...l,[t]:c}}),[l,c])}};return s.scopeName=t,[r,jM(s,...e)]}function jM(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const r=t.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(i){const o=r.reduce((l,{useScope:c,scopeName:d})=>{const f=c(i)[`__scope${d}`];return{...l,...f}},{});return p.useMemo(()=>({[`__scope${e.scopeName}`]:o}),[o])}};return n.scopeName=e.scopeName,n}function Fa(t){const e=DM(t),n=p.forwardRef((r,s)=>{const{children:i,...o}=r,l=p.Children.toArray(i),c=l.find(MM);if(c){const d=c.props.children,h=l.map(f=>f===c?p.Children.count(d)>1?p.Children.only(null):p.isValidElement(d)?d.props.children:null:f);return a.jsx(e,{...o,ref:s,children:p.isValidElement(d)?p.cloneElement(d,void 0,h):null})}return a.jsx(e,{...o,ref:s,children:i})});return n.displayName=`${t}.Slot`,n}var kM=Fa("Slot");function DM(t){const e=p.forwardRef((n,r)=>{const{children:s,...i}=n;if(p.isValidElement(s)){const o=VM(s),l=LM(i,s.props);return s.type!==p.Fragment&&(l.ref=r?yI(r,o):o),p.cloneElement(s,l)}return p.Children.count(s)>1?p.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var vI=Symbol("radix.slottable");function OM(t){const e=({children:n})=>a.jsx(a.Fragment,{children:n});return e.displayName=`${t}.Slottable`,e.__radixId=vI,e}function MM(t){return p.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===vI}function LM(t,e){const n={...e};for(const r in e){const s=t[r],i=e[r];/^on[A-Z]/.test(r)?s&&i?n[r]=(...l)=>{i(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...i}:r==="className"&&(n[r]=[s,i].filter(Boolean).join(" "))}return{...t,...n}}function VM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function mf(t){const e=t+"CollectionProvider",[n,r]=bn(e),[s,i]=n(e,{collectionRef:{current:null},itemMap:new Map}),o=v=>{const{scope:_,children:E}=v,x=ct.useRef(null),S=ct.useRef(new Map).current;return a.jsx(s,{scope:_,itemMap:S,collectionRef:x,children:E})};o.displayName=e;const l=t+"CollectionSlot",c=Fa(l),d=ct.forwardRef((v,_)=>{const{scope:E,children:x}=v,S=i(l,E),R=Ie(_,S.collectionRef);return a.jsx(c,{ref:R,children:x})});d.displayName=l;const h=t+"CollectionItemSlot",f="data-radix-collection-item",m=Fa(h),y=ct.forwardRef((v,_)=>{const{scope:E,children:x,...S}=v,R=ct.useRef(null),D=Ie(_,R),M=i(h,E);return ct.useEffect(()=>(M.itemMap.set(R,{ref:R,...S}),()=>void M.itemMap.delete(R))),a.jsx(m,{[f]:"",ref:D,children:x})});y.displayName=h;function b(v){const _=i(t+"CollectionConsumer",v);return ct.useCallback(()=>{const x=_.collectionRef.current;if(!x)return[];const S=Array.from(x.querySelectorAll(`[${f}]`));return Array.from(_.itemMap.values()).sort((M,T)=>S.indexOf(M.ref.current)-S.indexOf(T.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:d,ItemSlot:y},b,r]}var FM=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],ne=FM.reduce((t,e)=>{const n=Fa(`Primitive.${e}`),r=p.forwardRef((s,i)=>{const{asChild:o,...l}=s,c=o?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),a.jsx(c,{...l,ref:i})});return r.displayName=`Primitive.${e}`,{...t,[e]:r}},{});function xI(t,e){t&&_o.flushSync(()=>t.dispatchEvent(e))}function tt(t){const e=p.useRef(t);return p.useEffect(()=>{e.current=t}),p.useMemo(()=>(...n)=>{var r;return(r=e.current)==null?void 0:r.call(e,...n)},[])}function UM(t,e=globalThis==null?void 0:globalThis.document){const n=tt(t);p.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return e.addEventListener("keydown",r,{capture:!0}),()=>e.removeEventListener("keydown",r,{capture:!0})},[n,e])}var $M="DismissableLayer",Hg="dismissableLayer.update",zM="dismissableLayer.pointerDownOutside",BM="dismissableLayer.focusOutside",X_,wI=p.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),ru=p.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...c}=t,d=p.useContext(wI),[h,f]=p.useState(null),m=(h==null?void 0:h.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,y]=p.useState({}),b=Ie(e,T=>f(T)),v=Array.from(d.layers),[_]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),E=v.indexOf(_),x=h?v.indexOf(h):-1,S=d.layersWithOutsidePointerEventsDisabled.size>0,R=x>=E,D=WM(T=>{const I=T.target,N=[...d.branches].some(C=>C.contains(I));!R||N||(s==null||s(T),o==null||o(T),T.defaultPrevented||l==null||l())},m),M=qM(T=>{const I=T.target;[...d.branches].some(C=>C.contains(I))||(i==null||i(T),o==null||o(T),T.defaultPrevented||l==null||l())},m);return UM(T=>{x===d.layers.size-1&&(r==null||r(T),!T.defaultPrevented&&l&&(T.preventDefault(),l()))},m),p.useEffect(()=>{if(h)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(X_=m.body.style.pointerEvents,m.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(h)),d.layers.add(h),J_(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(m.body.style.pointerEvents=X_)}},[h,m,n,d]),p.useEffect(()=>()=>{h&&(d.layers.delete(h),d.layersWithOutsidePointerEventsDisabled.delete(h),J_())},[h,d]),p.useEffect(()=>{const T=()=>y({});return document.addEventListener(Hg,T),()=>document.removeEventListener(Hg,T)},[]),a.jsx(ne.div,{...c,ref:b,style:{pointerEvents:S?R?"auto":"none":void 0,...t.style},onFocusCapture:Z(t.onFocusCapture,M.onFocusCapture),onBlurCapture:Z(t.onBlurCapture,M.onBlurCapture),onPointerDownCapture:Z(t.onPointerDownCapture,D.onPointerDownCapture)})});ru.displayName=$M;var HM="DismissableLayerBranch",_I=p.forwardRef((t,e)=>{const n=p.useContext(wI),r=p.useRef(null),s=Ie(e,r);return p.useEffect(()=>{const i=r.current;if(i)return n.branches.add(i),()=>{n.branches.delete(i)}},[n.branches]),a.jsx(ne.div,{...t,ref:s})});_I.displayName=HM;function WM(t,e=globalThis==null?void 0:globalThis.document){const n=tt(t),r=p.useRef(!1),s=p.useRef(()=>{});return p.useEffect(()=>{const i=l=>{if(l.target&&!r.current){let c=function(){EI(zM,n,d,{discrete:!0})};const d={originalEvent:l};l.pointerType==="touch"?(e.removeEventListener("click",s.current),s.current=c,e.addEventListener("click",s.current,{once:!0})):c()}else e.removeEventListener("click",s.current);r.current=!1},o=window.setTimeout(()=>{e.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),e.removeEventListener("pointerdown",i),e.removeEventListener("click",s.current)}},[e,n]),{onPointerDownCapture:()=>r.current=!0}}function qM(t,e=globalThis==null?void 0:globalThis.document){const n=tt(t),r=p.useRef(!1);return p.useEffect(()=>{const s=i=>{i.target&&!r.current&&EI(BM,n,{originalEvent:i},{discrete:!1})};return e.addEventListener("focusin",s),()=>e.removeEventListener("focusin",s)},[e,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function J_(){const t=new CustomEvent(Hg);document.dispatchEvent(t)}function EI(t,e,n,{discrete:r}){const s=n.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?xI(s,i):s.dispatchEvent(i)}var GM=ru,KM=_I,at=globalThis!=null&&globalThis.document?p.useLayoutEffect:()=>{},QM="Portal",pf=p.forwardRef((t,e)=>{var l;const{container:n,...r}=t,[s,i]=p.useState(!1);at(()=>i(!0),[]);const o=n||s&&((l=globalThis==null?void 0:globalThis.document)==null?void 0:l.body);return o?pO.createPortal(a.jsx(ne.div,{...r,ref:e}),o):null});pf.displayName=QM;function YM(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var Mn=t=>{const{present:e,children:n}=t,r=XM(e),s=typeof n=="function"?n({present:r.isPresent}):p.Children.only(n),i=Ie(r.ref,JM(s));return typeof n=="function"||r.isPresent?p.cloneElement(s,{ref:i}):null};Mn.displayName="Presence";function XM(t){const[e,n]=p.useState(),r=p.useRef({}),s=p.useRef(t),i=p.useRef("none"),o=t?"mounted":"unmounted",[l,c]=YM(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return p.useEffect(()=>{const d=ed(r.current);i.current=l==="mounted"?d:"none"},[l]),at(()=>{const d=r.current,h=s.current;if(h!==t){const m=i.current,y=ed(d);t?c("MOUNT"):y==="none"||(d==null?void 0:d.display)==="none"?c("UNMOUNT"):c(h&&m!==y?"ANIMATION_OUT":"UNMOUNT"),s.current=t}},[t,c]),at(()=>{if(e){let d;const h=e.ownerDocument.defaultView??window,f=y=>{const v=ed(r.current).includes(y.animationName);if(y.target===e&&v&&(c("ANIMATION_END"),!s.current)){const _=e.style.animationFillMode;e.style.animationFillMode="forwards",d=h.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=_)})}},m=y=>{y.target===e&&(i.current=ed(r.current))};return e.addEventListener("animationstart",m),e.addEventListener("animationcancel",f),e.addEventListener("animationend",f),()=>{h.clearTimeout(d),e.removeEventListener("animationstart",m),e.removeEventListener("animationcancel",f),e.removeEventListener("animationend",f)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:p.useCallback(d=>{d&&(r.current=getComputedStyle(d)),n(d)},[])}}function ed(t){return(t==null?void 0:t.animationName)||"none"}function JM(t){var r,s;let e=(r=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(s=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:s.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function Ir({prop:t,defaultProp:e,onChange:n=()=>{}}){const[r,s]=ZM({defaultProp:e,onChange:n}),i=t!==void 0,o=i?t:r,l=tt(n),c=p.useCallback(d=>{if(i){const f=typeof d=="function"?d(t):d;f!==t&&l(f)}else s(d)},[i,t,s,l]);return[o,c]}function ZM({defaultProp:t,onChange:e}){const n=p.useState(t),[r]=n,s=p.useRef(r),i=tt(e);return p.useEffect(()=>{s.current!==r&&(i(r),s.current=r)},[r,s,i]),n}var eL="VisuallyHidden",su=p.forwardRef((t,e)=>a.jsx(ne.span,{...t,ref:e,style:{position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal",...t.style}}));su.displayName=eL;var tL=su,Bv="ToastProvider",[Hv,nL,rL]=mf("Toast"),[TI,mW]=bn("Toast",[rL]),[sL,gf]=TI(Bv),bI=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:i=50,children:o}=t,[l,c]=p.useState(null),[d,h]=p.useState(0),f=p.useRef(!1),m=p.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Bv}\`. Expected non-empty \`string\`.`),a.jsx(Hv.Provider,{scope:e,children:a.jsx(sL,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:i,toastCount:d,viewport:l,onViewportChange:c,onToastAdd:p.useCallback(()=>h(y=>y+1),[]),onToastRemove:p.useCallback(()=>h(y=>y-1),[]),isFocusedToastEscapeKeyDownRef:f,isClosePausedRef:m,children:o})})};bI.displayName=Bv;var SI="ToastViewport",iL=["F8"],Wg="toast.viewportPause",qg="toast.viewportResume",II=p.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=iL,label:s="Notifications ({hotkey})",...i}=t,o=gf(SI,n),l=nL(n),c=p.useRef(null),d=p.useRef(null),h=p.useRef(null),f=p.useRef(null),m=Ie(e,f,o.onViewportChange),y=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),b=o.toastCount>0;p.useEffect(()=>{const _=E=>{var S;r.length!==0&&r.every(R=>E[R]||E.code===R)&&((S=f.current)==null||S.focus())};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[r]),p.useEffect(()=>{const _=c.current,E=f.current;if(b&&_&&E){const x=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(Wg);E.dispatchEvent(M),o.isClosePausedRef.current=!0}},S=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(qg);E.dispatchEvent(M),o.isClosePausedRef.current=!1}},R=M=>{!_.contains(M.relatedTarget)&&S()},D=()=>{_.contains(document.activeElement)||S()};return _.addEventListener("focusin",x),_.addEventListener("focusout",R),_.addEventListener("pointermove",x),_.addEventListener("pointerleave",D),window.addEventListener("blur",x),window.addEventListener("focus",S),()=>{_.removeEventListener("focusin",x),_.removeEventListener("focusout",R),_.removeEventListener("pointermove",x),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",x),window.removeEventListener("focus",S)}}},[b,o.isClosePausedRef]);const v=p.useCallback(({tabbingDirection:_})=>{const x=l().map(S=>{const R=S.ref.current,D=[R,...vL(R)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?x.reverse():x).flat()},[l]);return p.useEffect(()=>{const _=f.current;if(_){const E=x=>{var D,M,T;const S=x.altKey||x.ctrlKey||x.metaKey;if(x.key==="Tab"&&!S){const I=document.activeElement,N=x.shiftKey;if(x.target===_&&N){(D=d.current)==null||D.focus();return}const k=v({tabbingDirection:N?"backwards":"forwards"}),P=k.findIndex(B=>B===I);ap(k.slice(P+1))?x.preventDefault():N?(M=d.current)==null||M.focus():(T=h.current)==null||T.focus()}};return _.addEventListener("keydown",E),()=>_.removeEventListener("keydown",E)}},[l,v]),a.jsxs(KM,{ref:c,role:"region","aria-label":s.replace("{hotkey}",y),tabIndex:-1,style:{pointerEvents:b?void 0:"none"},children:[b&&a.jsx(Gg,{ref:d,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"forwards"});ap(_)}}),a.jsx(Hv.Slot,{scope:n,children:a.jsx(ne.ol,{tabIndex:-1,...i,ref:m})}),b&&a.jsx(Gg,{ref:h,onFocusFromOutsideViewport:()=>{const _=v({tabbingDirection:"backwards"});ap(_)}})]})});II.displayName=SI;var NI="ToastFocusProxy",Gg=p.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,i=gf(NI,n);return a.jsx(su,{"aria-hidden":!0,tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:o=>{var d;const l=o.relatedTarget;!((d=i.viewport)!=null&&d.contains(l))&&r()}})});Gg.displayName=NI;var yf="Toast",oL="toast.swipeStart",aL="toast.swipeMove",lL="toast.swipeCancel",cL="toast.swipeEnd",AI=p.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:i,...o}=t,[l=!0,c]=Ir({prop:r,defaultProp:s,onChange:i});return a.jsx(Mn,{present:n||l,children:a.jsx(hL,{open:l,...o,ref:e,onClose:()=>c(!1),onPause:tt(t.onPause),onResume:tt(t.onResume),onSwipeStart:Z(t.onSwipeStart,d=>{d.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Z(t.onSwipeMove,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","move"),d.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${f}px`)}),onSwipeCancel:Z(t.onSwipeCancel,d=>{d.currentTarget.setAttribute("data-swipe","cancel"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Z(t.onSwipeEnd,d=>{const{x:h,y:f}=d.detail.delta;d.currentTarget.setAttribute("data-swipe","end"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),d.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),d.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),d.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${f}px`),c(!1)})})})});AI.displayName=yf;var[uL,dL]=TI(yf,{onClose(){}}),hL=p.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:i,onClose:o,onEscapeKeyDown:l,onPause:c,onResume:d,onSwipeStart:h,onSwipeMove:f,onSwipeCancel:m,onSwipeEnd:y,...b}=t,v=gf(yf,n),[_,E]=p.useState(null),x=Ie(e,B=>E(B)),S=p.useRef(null),R=p.useRef(null),D=s||v.duration,M=p.useRef(0),T=p.useRef(D),I=p.useRef(0),{onToastAdd:N,onToastRemove:C}=v,j=tt(()=>{var ae;(_==null?void 0:_.contains(document.activeElement))&&((ae=v.viewport)==null||ae.focus()),o()}),k=p.useCallback(B=>{!B||B===1/0||(window.clearTimeout(I.current),M.current=new Date().getTime(),I.current=window.setTimeout(j,B))},[j]);p.useEffect(()=>{const B=v.viewport;if(B){const ae=()=>{k(T.current),d==null||d()},X=()=>{const he=new Date().getTime()-M.current;T.current=T.current-he,window.clearTimeout(I.current),c==null||c()};return B.addEventListener(Wg,X),B.addEventListener(qg,ae),()=>{B.removeEventListener(Wg,X),B.removeEventListener(qg,ae)}}},[v.viewport,D,c,d,k]),p.useEffect(()=>{i&&!v.isClosePausedRef.current&&k(D)},[i,D,v.isClosePausedRef,k]),p.useEffect(()=>(N(),()=>C()),[N,C]);const P=p.useMemo(()=>_?OI(_):null,[_]);return v.viewport?a.jsxs(a.Fragment,{children:[P&&a.jsx(fL,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite","aria-atomic":!0,children:P}),a.jsx(uL,{scope:n,onClose:j,children:_o.createPortal(a.jsx(Hv.ItemSlot,{scope:n,children:a.jsx(GM,{asChild:!0,onEscapeKeyDown:Z(l,()=>{v.isFocusedToastEscapeKeyDownRef.current||j(),v.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ne.li,{role:"status","aria-live":"off","aria-atomic":!0,tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":v.swipeDirection,...b,ref:x,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Z(t.onKeyDown,B=>{B.key==="Escape"&&(l==null||l(B.nativeEvent),B.nativeEvent.defaultPrevented||(v.isFocusedToastEscapeKeyDownRef.current=!0,j()))}),onPointerDown:Z(t.onPointerDown,B=>{B.button===0&&(S.current={x:B.clientX,y:B.clientY})}),onPointerMove:Z(t.onPointerMove,B=>{if(!S.current)return;const ae=B.clientX-S.current.x,X=B.clientY-S.current.y,he=!!R.current,U=["left","right"].includes(v.swipeDirection),H=["left","up"].includes(v.swipeDirection)?Math.min:Math.max,J=U?H(0,ae):0,ue=U?0:H(0,X),Re=B.pointerType==="touch"?10:2,wt={x:J,y:ue},qe={originalEvent:B,delta:wt};he?(R.current=wt,td(aL,f,qe,{discrete:!1})):Z_(wt,v.swipeDirection,Re)?(R.current=wt,td(oL,h,qe,{discrete:!1}),B.target.setPointerCapture(B.pointerId)):(Math.abs(ae)>Re||Math.abs(X)>Re)&&(S.current=null)}),onPointerUp:Z(t.onPointerUp,B=>{const ae=R.current,X=B.target;if(X.hasPointerCapture(B.pointerId)&&X.releasePointerCapture(B.pointerId),R.current=null,S.current=null,ae){const he=B.currentTarget,U={originalEvent:B,delta:ae};Z_(ae,v.swipeDirection,v.swipeThreshold)?td(cL,y,U,{discrete:!0}):td(lL,m,U,{discrete:!0}),he.addEventListener("click",H=>H.preventDefault(),{once:!0})}})})})}),v.viewport)})]}):null}),fL=t=>{const{__scopeToast:e,children:n,...r}=t,s=gf(yf,e),[i,o]=p.useState(!1),[l,c]=p.useState(!1);return gL(()=>o(!0)),p.useEffect(()=>{const d=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(d)},[]),l?null:a.jsx(pf,{asChild:!0,children:a.jsx(su,{...r,children:i&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},mL="ToastTitle",CI=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ne.div,{...r,ref:e})});CI.displayName=mL;var pL="ToastDescription",RI=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ne.div,{...r,ref:e})});RI.displayName=pL;var PI="ToastAction",jI=p.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(DI,{altText:n,asChild:!0,children:a.jsx(Wv,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${PI}\`. Expected non-empty \`string\`.`),null)});jI.displayName=PI;var kI="ToastClose",Wv=p.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=dL(kI,n);return a.jsx(DI,{asChild:!0,children:a.jsx(ne.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,s.onClose)})})});Wv.displayName=kI;var DI=p.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ne.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function OI(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),yL(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!s)if(i){const o=r.dataset.radixToastAnnounceAlt;o&&e.push(o)}else e.push(...OI(r))}}),e}function td(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?xI(s,i):s.dispatchEvent(i)}var Z_=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),i=r>s;return e==="left"||e==="right"?i&&r>n:!i&&s>n};function gL(t=()=>{}){const e=tt(t);at(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function yL(t){return t.nodeType===t.ELEMENT_NODE}function vL(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function ap(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var xL=bI,MI=II,LI=AI,VI=CI,FI=RI,UI=jI,$I=Wv;function zI(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var s=t.length;for(e=0;e<s;e++)t[e]&&(n=zI(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function BI(){for(var t,e,n=0,r="",s=arguments.length;n<s;n++)(t=arguments[n])&&(e=zI(t))&&(r&&(r+=" "),r+=e);return r}const eE=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,tE=BI,iu=(t,e)=>n=>{var r;if((e==null?void 0:e.variants)==null)return tE(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:s,defaultVariants:i}=e,o=Object.keys(s).map(d=>{const h=n==null?void 0:n[d],f=i==null?void 0:i[d];if(h===null)return null;const m=eE(h)||eE(f);return s[d][m]}),l=n&&Object.entries(n).reduce((d,h)=>{let[f,m]=h;return m===void 0||(d[f]=m),d},{}),c=e==null||(r=e.compoundVariants)===null||r===void 0?void 0:r.reduce((d,h)=>{let{class:f,className:m,...y}=h;return Object.entries(y).every(b=>{let[v,_]=b;return Array.isArray(_)?_.includes({...i,...l}[v]):{...i,...l}[v]===_})?[...d,f,m]:d},[]);return tE(t,o,c,n==null?void 0:n.class,n==null?void 0:n.className)};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),HI=(...t)=>t.filter((e,n,r)=>!!e&&r.indexOf(e)===n).join(" ");/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var _L={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EL=p.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},c)=>p.createElement("svg",{ref:c,..._L,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:HI("lucide",s),...l},[...o.map(([d,h])=>p.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ae=(t,e)=>{const n=p.forwardRef(({className:r,...s},i)=>p.createElement(EL,{ref:i,iconNode:e,className:HI(`lucide-${wL(t)}`,r),...s}));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TL=Ae("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bL=Ae("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vf=Ae("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=Ae("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IL=Ae("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nE=Ae("Brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=Ae("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=Ae("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=Ae("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=Ae("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=Ae("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rE=Ae("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=Ae("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WI=Ae("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=Ae("Cog",[["path",{d:"M12 20a8 8 0 1 0 0-16 8 8 0 0 0 0 16Z",key:"sobvz5"}],["path",{d:"M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z",key:"11i496"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 22v-2",key:"1osdcq"}],["path",{d:"m17 20.66-1-1.73",key:"eq3orb"}],["path",{d:"M11 10.27 7 3.34",key:"16pf9h"}],["path",{d:"m20.66 17-1.73-1",key:"sg0v6f"}],["path",{d:"m3.34 7 1.73 1",key:"1ulond"}],["path",{d:"M14 12h8",key:"4f43i9"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"m20.66 7-1.73 1",key:"1ow05n"}],["path",{d:"m3.34 17 1.73-1",key:"nuk764"}],["path",{d:"m17 3.34-1 1.73",key:"2wel8s"}],["path",{d:"m11 13.73-4 6.93",key:"794ttg"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qI=Ae("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=Ae("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sE=Ae("Flame",[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=Ae("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pd=Ae("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iE=Ae("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=Ae("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vh=Ae("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xf=Ae("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jc=Ae("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=Ae("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Ae("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=Ae("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Ae("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kc=Ae("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=Ae("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=Ae("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ua=Ae("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Kv="-",FL=t=>{const e=$L(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=t;return{getClassGroupId:o=>{const l=o.split(Kv);return l[0]===""&&l.length!==1&&l.shift(),KI(l,e)||UL(o)},getConflictingClassGroupIds:(o,l)=>{const c=n[o]||[];return l&&r[o]?[...c,...r[o]]:c}}},KI=(t,e)=>{var o;if(t.length===0)return e.classGroupId;const n=t[0],r=e.nextPart.get(n),s=r?KI(t.slice(1),r):void 0;if(s)return s;if(e.validators.length===0)return;const i=t.join(Kv);return(o=e.validators.find(({validator:l})=>l(i)))==null?void 0:o.classGroupId},oE=/^\[(.+)\]$/,UL=t=>{if(oE.test(t)){const e=oE.exec(t)[1],n=e==null?void 0:e.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},$L=t=>{const{theme:e,prefix:n}=t,r={nextPart:new Map,validators:[]};return BL(Object.entries(t.classGroups),n).forEach(([i,o])=>{Kg(o,r,i,e)}),r},Kg=(t,e,n,r)=>{t.forEach(s=>{if(typeof s=="string"){const i=s===""?e:aE(e,s);i.classGroupId=n;return}if(typeof s=="function"){if(zL(s)){Kg(s(r),e,n,r);return}e.validators.push({validator:s,classGroupId:n});return}Object.entries(s).forEach(([i,o])=>{Kg(o,aE(e,i),n,r)})})},aE=(t,e)=>{let n=t;return e.split(Kv).forEach(r=>{n.nextPart.has(r)||n.nextPart.set(r,{nextPart:new Map,validators:[]}),n=n.nextPart.get(r)}),n},zL=t=>t.isThemeGetter,BL=(t,e)=>e?t.map(([n,r])=>{const s=r.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[e+o,l])):i);return[n,s]}):t,HL=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,r=new Map;const s=(i,o)=>{n.set(i,o),e++,e>t&&(e=0,r=n,n=new Map)};return{get(i){let o=n.get(i);if(o!==void 0)return o;if((o=r.get(i))!==void 0)return s(i,o),o},set(i,o){n.has(i)?n.set(i,o):s(i,o)}}},QI="!",WL=t=>{const{separator:e,experimentalParseClassName:n}=t,r=e.length===1,s=e[0],i=e.length,o=l=>{const c=[];let d=0,h=0,f;for(let _=0;_<l.length;_++){let E=l[_];if(d===0){if(E===s&&(r||l.slice(_,_+i)===e)){c.push(l.slice(h,_)),h=_+i;continue}if(E==="/"){f=_;continue}}E==="["?d++:E==="]"&&d--}const m=c.length===0?l:l.substring(h),y=m.startsWith(QI),b=y?m.substring(1):m,v=f&&f>h?f-h:void 0;return{modifiers:c,hasImportantModifier:y,baseClassName:b,maybePostfixModifierPosition:v}};return n?l=>n({className:l,parseClassName:o}):o},qL=t=>{if(t.length<=1)return t;const e=[];let n=[];return t.forEach(r=>{r[0]==="["?(e.push(...n.sort(),r),n=[]):n.push(r)}),e.push(...n.sort()),e},GL=t=>({cache:HL(t.cacheSize),parseClassName:WL(t),...FL(t)}),KL=/\s+/,QL=(t,e)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s}=e,i=[],o=t.trim().split(KL);let l="";for(let c=o.length-1;c>=0;c-=1){const d=o[c],{modifiers:h,hasImportantModifier:f,baseClassName:m,maybePostfixModifierPosition:y}=n(d);let b=!!y,v=r(b?m.substring(0,y):m);if(!v){if(!b){l=d+(l.length>0?" "+l:l);continue}if(v=r(m),!v){l=d+(l.length>0?" "+l:l);continue}b=!1}const _=qL(h).join(":"),E=f?_+QI:_,x=E+v;if(i.includes(x))continue;i.push(x);const S=s(v,b);for(let R=0;R<S.length;++R){const D=S[R];i.push(E+D)}l=d+(l.length>0?" "+l:l)}return l};function YL(){let t=0,e,n,r="";for(;t<arguments.length;)(e=arguments[t++])&&(n=YI(e))&&(r&&(r+=" "),r+=n);return r}const YI=t=>{if(typeof t=="string")return t;let e,n="";for(let r=0;r<t.length;r++)t[r]&&(e=YI(t[r]))&&(n&&(n+=" "),n+=e);return n};function XL(t,...e){let n,r,s,i=o;function o(c){const d=e.reduce((h,f)=>f(h),t());return n=GL(d),r=n.cache.get,s=n.cache.set,i=l,l(c)}function l(c){const d=r(c);if(d)return d;const h=QL(c,n);return s(c,h),h}return function(){return i(YL.apply(null,arguments))}}const Be=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},XI=/^\[(?:([a-z-]+):)?(.+)\]$/i,JL=/^\d+\/\d+$/,ZL=new Set(["px","full","screen"]),e4=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,t4=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,n4=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,r4=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,s4=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Mr=t=>la(t)||ZL.has(t)||JL.test(t),xs=t=>nl(t,"length",h4),la=t=>!!t&&!Number.isNaN(Number(t)),lp=t=>nl(t,"number",la),Vl=t=>!!t&&Number.isInteger(Number(t)),i4=t=>t.endsWith("%")&&la(t.slice(0,-1)),me=t=>XI.test(t),ws=t=>e4.test(t),o4=new Set(["length","size","percentage"]),a4=t=>nl(t,o4,JI),l4=t=>nl(t,"position",JI),c4=new Set(["image","url"]),u4=t=>nl(t,c4,m4),d4=t=>nl(t,"",f4),Fl=()=>!0,nl=(t,e,n)=>{const r=XI.exec(t);return r?r[1]?typeof e=="string"?r[1]===e:e.has(r[1]):n(r[2]):!1},h4=t=>t4.test(t)&&!n4.test(t),JI=()=>!1,f4=t=>r4.test(t),m4=t=>s4.test(t),p4=()=>{const t=Be("colors"),e=Be("spacing"),n=Be("blur"),r=Be("brightness"),s=Be("borderColor"),i=Be("borderRadius"),o=Be("borderSpacing"),l=Be("borderWidth"),c=Be("contrast"),d=Be("grayscale"),h=Be("hueRotate"),f=Be("invert"),m=Be("gap"),y=Be("gradientColorStops"),b=Be("gradientColorStopPositions"),v=Be("inset"),_=Be("margin"),E=Be("opacity"),x=Be("padding"),S=Be("saturate"),R=Be("scale"),D=Be("sepia"),M=Be("skew"),T=Be("space"),I=Be("translate"),N=()=>["auto","contain","none"],C=()=>["auto","hidden","clip","visible","scroll"],j=()=>["auto",me,e],k=()=>[me,e],P=()=>["",Mr,xs],B=()=>["auto",la,me],ae=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],X=()=>["solid","dashed","dotted","double","none"],he=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],U=()=>["start","end","center","between","around","evenly","stretch"],H=()=>["","0",me],J=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ue=()=>[la,me];return{cacheSize:500,separator:":",theme:{colors:[Fl],spacing:[Mr,xs],blur:["none","",ws,me],brightness:ue(),borderColor:[t],borderRadius:["none","","full",ws,me],borderSpacing:k(),borderWidth:P(),contrast:ue(),grayscale:H(),hueRotate:ue(),invert:H(),gap:k(),gradientColorStops:[t],gradientColorStopPositions:[i4,xs],inset:j(),margin:j(),opacity:ue(),padding:k(),saturate:ue(),scale:ue(),sepia:H(),skew:ue(),space:k(),translate:k()},classGroups:{aspect:[{aspect:["auto","square","video",me]}],container:["container"],columns:[{columns:[ws]}],"break-after":[{"break-after":J()}],"break-before":[{"break-before":J()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ae(),me]}],overflow:[{overflow:C()}],"overflow-x":[{"overflow-x":C()}],"overflow-y":[{"overflow-y":C()}],overscroll:[{overscroll:N()}],"overscroll-x":[{"overscroll-x":N()}],"overscroll-y":[{"overscroll-y":N()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[v]}],"inset-x":[{"inset-x":[v]}],"inset-y":[{"inset-y":[v]}],start:[{start:[v]}],end:[{end:[v]}],top:[{top:[v]}],right:[{right:[v]}],bottom:[{bottom:[v]}],left:[{left:[v]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Vl,me]}],basis:[{basis:j()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",me]}],grow:[{grow:H()}],shrink:[{shrink:H()}],order:[{order:["first","last","none",Vl,me]}],"grid-cols":[{"grid-cols":[Fl]}],"col-start-end":[{col:["auto",{span:["full",Vl,me]},me]}],"col-start":[{"col-start":B()}],"col-end":[{"col-end":B()}],"grid-rows":[{"grid-rows":[Fl]}],"row-start-end":[{row:["auto",{span:[Vl,me]},me]}],"row-start":[{"row-start":B()}],"row-end":[{"row-end":B()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",me]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",me]}],gap:[{gap:[m]}],"gap-x":[{"gap-x":[m]}],"gap-y":[{"gap-y":[m]}],"justify-content":[{justify:["normal",...U()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...U(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...U(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[x]}],px:[{px:[x]}],py:[{py:[x]}],ps:[{ps:[x]}],pe:[{pe:[x]}],pt:[{pt:[x]}],pr:[{pr:[x]}],pb:[{pb:[x]}],pl:[{pl:[x]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[T]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[T]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",me,e]}],"min-w":[{"min-w":[me,e,"min","max","fit"]}],"max-w":[{"max-w":[me,e,"none","full","min","max","fit","prose",{screen:[ws]},ws]}],h:[{h:[me,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[me,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[me,e,"auto","min","max","fit"]}],"font-size":[{text:["base",ws,xs]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",lp]}],"font-family":[{font:[Fl]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",me]}],"line-clamp":[{"line-clamp":["none",la,lp]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Mr,me]}],"list-image":[{"list-image":["none",me]}],"list-style-type":[{list:["none","disc","decimal",me]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[t]}],"placeholder-opacity":[{"placeholder-opacity":[E]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[t]}],"text-opacity":[{"text-opacity":[E]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...X(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Mr,xs]}],"underline-offset":[{"underline-offset":["auto",Mr,me]}],"text-decoration-color":[{decoration:[t]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:k()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[E]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ae(),l4]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",a4]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},u4]}],"bg-color":[{bg:[t]}],"gradient-from-pos":[{from:[b]}],"gradient-via-pos":[{via:[b]}],"gradient-to-pos":[{to:[b]}],"gradient-from":[{from:[y]}],"gradient-via":[{via:[y]}],"gradient-to":[{to:[y]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[E]}],"border-style":[{border:[...X(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[E]}],"divide-style":[{divide:X()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...X()]}],"outline-offset":[{"outline-offset":[Mr,me]}],"outline-w":[{outline:[Mr,xs]}],"outline-color":[{outline:[t]}],"ring-w":[{ring:P()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[t]}],"ring-opacity":[{"ring-opacity":[E]}],"ring-offset-w":[{"ring-offset":[Mr,xs]}],"ring-offset-color":[{"ring-offset":[t]}],shadow:[{shadow:["","inner","none",ws,d4]}],"shadow-color":[{shadow:[Fl]}],opacity:[{opacity:[E]}],"mix-blend":[{"mix-blend":[...he(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":he()}],filter:[{filter:["","none"]}],blur:[{blur:[n]}],brightness:[{brightness:[r]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",ws,me]}],grayscale:[{grayscale:[d]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[f]}],saturate:[{saturate:[S]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[n]}],"backdrop-brightness":[{"backdrop-brightness":[r]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[d]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[f]}],"backdrop-opacity":[{"backdrop-opacity":[E]}],"backdrop-saturate":[{"backdrop-saturate":[S]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",me]}],duration:[{duration:ue()}],ease:[{ease:["linear","in","out","in-out",me]}],delay:[{delay:ue()}],animate:[{animate:["none","spin","ping","pulse","bounce",me]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[R]}],"scale-x":[{"scale-x":[R]}],"scale-y":[{"scale-y":[R]}],rotate:[{rotate:[Vl,me]}],"translate-x":[{"translate-x":[I]}],"translate-y":[{"translate-y":[I]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",me]}],accent:[{accent:["auto",t]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",me]}],"caret-color":[{caret:[t]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":k()}],"scroll-mx":[{"scroll-mx":k()}],"scroll-my":[{"scroll-my":k()}],"scroll-ms":[{"scroll-ms":k()}],"scroll-me":[{"scroll-me":k()}],"scroll-mt":[{"scroll-mt":k()}],"scroll-mr":[{"scroll-mr":k()}],"scroll-mb":[{"scroll-mb":k()}],"scroll-ml":[{"scroll-ml":k()}],"scroll-p":[{"scroll-p":k()}],"scroll-px":[{"scroll-px":k()}],"scroll-py":[{"scroll-py":k()}],"scroll-ps":[{"scroll-ps":k()}],"scroll-pe":[{"scroll-pe":k()}],"scroll-pt":[{"scroll-pt":k()}],"scroll-pr":[{"scroll-pr":k()}],"scroll-pb":[{"scroll-pb":k()}],"scroll-pl":[{"scroll-pl":k()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",me]}],fill:[{fill:[t,"none"]}],"stroke-w":[{stroke:[Mr,xs,lp]}],stroke:[{stroke:[t,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},g4=XL(p4);function se(...t){return g4(BI(t))}const y4=xL,ZI=p.forwardRef(({className:t,...e},n)=>a.jsx(MI,{ref:n,className:se("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...e}));ZI.displayName=MI.displayName;const v4=iu("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),eN=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(LI,{ref:r,className:se(v4({variant:e}),t),...n}));eN.displayName=LI.displayName;const x4=p.forwardRef(({className:t,...e},n)=>a.jsx(UI,{ref:n,className:se("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...e}));x4.displayName=UI.displayName;const tN=p.forwardRef(({className:t,...e},n)=>a.jsx($I,{ref:n,className:se("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(GI,{className:"h-4 w-4"})}));tN.displayName=$I.displayName;const nN=p.forwardRef(({className:t,...e},n)=>a.jsx(VI,{ref:n,className:se("text-sm font-semibold",t),...e}));nN.displayName=VI.displayName;const rN=p.forwardRef(({className:t,...e},n)=>a.jsx(FI,{ref:n,className:se("text-sm opacity-90",t),...e}));rN.displayName=FI.displayName;function w4(){const{toasts:t}=zv();return a.jsxs(y4,{children:[t.map(function({id:e,title:n,description:r,action:s,...i}){return a.jsxs(eN,{...i,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(nN,{children:n}),r&&a.jsx(rN,{children:r})]}),s,a.jsx(tN,{})]},e)}),a.jsx(ZI,{})]})}var _4=UT[" useId ".trim().toString()]||(()=>{}),E4=0;function Jn(t){const[e,n]=p.useState(_4());return at(()=>{t||n(r=>r??String(E4++))},[t]),t||(e?`radix-${e}`:"")}const T4=["top","right","bottom","left"],li=Math.min,mn=Math.max,xh=Math.round,nd=Math.floor,wr=t=>({x:t,y:t}),b4={left:"right",right:"left",bottom:"top",top:"bottom"},S4={start:"end",end:"start"};function Qg(t,e,n){return mn(t,li(e,n))}function rs(t,e){return typeof t=="function"?t(e):t}function ss(t){return t.split("-")[0]}function rl(t){return t.split("-")[1]}function Qv(t){return t==="x"?"y":"x"}function Yv(t){return t==="y"?"height":"width"}function ci(t){return["top","bottom"].includes(ss(t))?"y":"x"}function Xv(t){return Qv(ci(t))}function I4(t,e,n){n===void 0&&(n=!1);const r=rl(t),s=Xv(t),i=Yv(s);let o=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[i]>e.floating[i]&&(o=wh(o)),[o,wh(o)]}function N4(t){const e=wh(t);return[Yg(t),e,Yg(e)]}function Yg(t){return t.replace(/start|end/g,e=>S4[e])}function A4(t,e,n){const r=["left","right"],s=["right","left"],i=["top","bottom"],o=["bottom","top"];switch(t){case"top":case"bottom":return n?e?s:r:e?r:s;case"left":case"right":return e?i:o;default:return[]}}function C4(t,e,n,r){const s=rl(t);let i=A4(ss(t),n==="start",r);return s&&(i=i.map(o=>o+"-"+s),e&&(i=i.concat(i.map(Yg)))),i}function wh(t){return t.replace(/left|right|bottom|top/g,e=>b4[e])}function R4(t){return{top:0,right:0,bottom:0,left:0,...t}}function sN(t){return typeof t!="number"?R4(t):{top:t,right:t,bottom:t,left:t}}function _h(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function lE(t,e,n){let{reference:r,floating:s}=t;const i=ci(e),o=Xv(e),l=Yv(o),c=ss(e),d=i==="y",h=r.x+r.width/2-s.width/2,f=r.y+r.height/2-s.height/2,m=r[l]/2-s[l]/2;let y;switch(c){case"top":y={x:h,y:r.y-s.height};break;case"bottom":y={x:h,y:r.y+r.height};break;case"right":y={x:r.x+r.width,y:f};break;case"left":y={x:r.x-s.width,y:f};break;default:y={x:r.x,y:r.y}}switch(rl(e)){case"start":y[o]-=m*(n&&d?-1:1);break;case"end":y[o]+=m*(n&&d?-1:1);break}return y}const P4=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:i=[],platform:o}=n,l=i.filter(Boolean),c=await(o.isRTL==null?void 0:o.isRTL(e));let d=await o.getElementRects({reference:t,floating:e,strategy:s}),{x:h,y:f}=lE(d,r,c),m=r,y={},b=0;for(let v=0;v<l.length;v++){const{name:_,fn:E}=l[v],{x,y:S,data:R,reset:D}=await E({x:h,y:f,initialPlacement:r,placement:m,strategy:s,middlewareData:y,rects:d,platform:o,elements:{reference:t,floating:e}});h=x??h,f=S??f,y={...y,[_]:{...y[_],...R}},D&&b<=50&&(b++,typeof D=="object"&&(D.placement&&(m=D.placement),D.rects&&(d=D.rects===!0?await o.getElementRects({reference:t,floating:e,strategy:s}):D.rects),{x:h,y:f}=lE(d,m,c)),v=-1)}return{x:h,y:f,placement:m,strategy:s,middlewareData:y}};async function Dc(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:i,rects:o,elements:l,strategy:c}=t,{boundary:d="clippingAncestors",rootBoundary:h="viewport",elementContext:f="floating",altBoundary:m=!1,padding:y=0}=rs(e,t),b=sN(y),_=l[m?f==="floating"?"reference":"floating":f],E=_h(await i.getClippingRect({element:(n=await(i.isElement==null?void 0:i.isElement(_)))==null||n?_:_.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:d,rootBoundary:h,strategy:c})),x=f==="floating"?{x:r,y:s,width:o.floating.width,height:o.floating.height}:o.reference,S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),R=await(i.isElement==null?void 0:i.isElement(S))?await(i.getScale==null?void 0:i.getScale(S))||{x:1,y:1}:{x:1,y:1},D=_h(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:x,offsetParent:S,strategy:c}):x);return{top:(E.top-D.top+b.top)/R.y,bottom:(D.bottom-E.bottom+b.bottom)/R.y,left:(E.left-D.left+b.left)/R.x,right:(D.right-E.right+b.right)/R.x}}const j4=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:i,platform:o,elements:l,middlewareData:c}=e,{element:d,padding:h=0}=rs(t,e)||{};if(d==null)return{};const f=sN(h),m={x:n,y:r},y=Xv(s),b=Yv(y),v=await o.getDimensions(d),_=y==="y",E=_?"top":"left",x=_?"bottom":"right",S=_?"clientHeight":"clientWidth",R=i.reference[b]+i.reference[y]-m[y]-i.floating[b],D=m[y]-i.reference[y],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(d));let T=M?M[S]:0;(!T||!await(o.isElement==null?void 0:o.isElement(M)))&&(T=l.floating[S]||i.floating[b]);const I=R/2-D/2,N=T/2-v[b]/2-1,C=li(f[E],N),j=li(f[x],N),k=C,P=T-v[b]-j,B=T/2-v[b]/2+I,ae=Qg(k,B,P),X=!c.arrow&&rl(s)!=null&&B!==ae&&i.reference[b]/2-(B<k?C:j)-v[b]/2<0,he=X?B<k?B-k:B-P:0;return{[y]:m[y]+he,data:{[y]:ae,centerOffset:B-ae-he,...X&&{alignmentOffset:he}},reset:X}}}),k4=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:i,rects:o,initialPlacement:l,platform:c,elements:d}=e,{mainAxis:h=!0,crossAxis:f=!0,fallbackPlacements:m,fallbackStrategy:y="bestFit",fallbackAxisSideDirection:b="none",flipAlignment:v=!0,..._}=rs(t,e);if((n=i.arrow)!=null&&n.alignmentOffset)return{};const E=ss(s),x=ci(l),S=ss(l)===l,R=await(c.isRTL==null?void 0:c.isRTL(d.floating)),D=m||(S||!v?[wh(l)]:N4(l)),M=b!=="none";!m&&M&&D.push(...C4(l,v,b,R));const T=[l,...D],I=await Dc(e,_),N=[];let C=((r=i.flip)==null?void 0:r.overflows)||[];if(h&&N.push(I[E]),f){const B=I4(s,o,R);N.push(I[B[0]],I[B[1]])}if(C=[...C,{placement:s,overflows:N}],!N.every(B=>B<=0)){var j,k;const B=(((j=i.flip)==null?void 0:j.index)||0)+1,ae=T[B];if(ae)return{data:{index:B,overflows:C},reset:{placement:ae}};let X=(k=C.filter(he=>he.overflows[0]<=0).sort((he,U)=>he.overflows[1]-U.overflows[1])[0])==null?void 0:k.placement;if(!X)switch(y){case"bestFit":{var P;const he=(P=C.filter(U=>{if(M){const H=ci(U.placement);return H===x||H==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(H=>H>0).reduce((H,J)=>H+J,0)]).sort((U,H)=>U[1]-H[1])[0])==null?void 0:P[0];he&&(X=he);break}case"initialPlacement":X=l;break}if(s!==X)return{reset:{placement:X}}}return{}}}};function cE(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function uE(t){return T4.some(e=>t[e]>=0)}const D4=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=rs(t,e);switch(r){case"referenceHidden":{const i=await Dc(e,{...s,elementContext:"reference"}),o=cE(i,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:uE(o)}}}case"escaped":{const i=await Dc(e,{...s,altBoundary:!0}),o=cE(i,n.floating);return{data:{escapedOffsets:o,escaped:uE(o)}}}default:return{}}}}};async function O4(t,e){const{placement:n,platform:r,elements:s}=t,i=await(r.isRTL==null?void 0:r.isRTL(s.floating)),o=ss(n),l=rl(n),c=ci(n)==="y",d=["left","top"].includes(o)?-1:1,h=i&&c?-1:1,f=rs(e,t);let{mainAxis:m,crossAxis:y,alignmentAxis:b}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return l&&typeof b=="number"&&(y=l==="end"?b*-1:b),c?{x:y*h,y:m*d}:{x:m*d,y:y*h}}const M4=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:i,placement:o,middlewareData:l}=e,c=await O4(e,t);return o===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:i+c.y,data:{...c,placement:o}}}}},L4=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:E,y:x}=_;return{x:E,y:x}}},...c}=rs(t,e),d={x:n,y:r},h=await Dc(e,c),f=ci(ss(s)),m=Qv(f);let y=d[m],b=d[f];if(i){const _=m==="y"?"top":"left",E=m==="y"?"bottom":"right",x=y+h[_],S=y-h[E];y=Qg(x,y,S)}if(o){const _=f==="y"?"top":"left",E=f==="y"?"bottom":"right",x=b+h[_],S=b-h[E];b=Qg(x,b,S)}const v=l.fn({...e,[m]:y,[f]:b});return{...v,data:{x:v.x-n,y:v.y-r,enabled:{[m]:i,[f]:o}}}}}},V4=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:i,middlewareData:o}=e,{offset:l=0,mainAxis:c=!0,crossAxis:d=!0}=rs(t,e),h={x:n,y:r},f=ci(s),m=Qv(f);let y=h[m],b=h[f];const v=rs(l,e),_=typeof v=="number"?{mainAxis:v,crossAxis:0}:{mainAxis:0,crossAxis:0,...v};if(c){const S=m==="y"?"height":"width",R=i.reference[m]-i.floating[S]+_.mainAxis,D=i.reference[m]+i.reference[S]-_.mainAxis;y<R?y=R:y>D&&(y=D)}if(d){var E,x;const S=m==="y"?"width":"height",R=["top","left"].includes(ss(s)),D=i.reference[f]-i.floating[S]+(R&&((E=o.offset)==null?void 0:E[f])||0)+(R?0:_.crossAxis),M=i.reference[f]+i.reference[S]+(R?0:((x=o.offset)==null?void 0:x[f])||0)-(R?_.crossAxis:0);b<D?b=D:b>M&&(b=M)}return{[m]:y,[f]:b}}}},F4=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:i,platform:o,elements:l}=e,{apply:c=()=>{},...d}=rs(t,e),h=await Dc(e,d),f=ss(s),m=rl(s),y=ci(s)==="y",{width:b,height:v}=i.floating;let _,E;f==="top"||f==="bottom"?(_=f,E=m===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(E=f,_=m==="end"?"top":"bottom");const x=v-h.top-h.bottom,S=b-h.left-h.right,R=li(v-h[_],x),D=li(b-h[E],S),M=!e.middlewareData.shift;let T=R,I=D;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(I=S),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(T=x),M&&!m){const C=mn(h.left,0),j=mn(h.right,0),k=mn(h.top,0),P=mn(h.bottom,0);y?I=b-2*(C!==0||j!==0?C+j:mn(h.left,h.right)):T=v-2*(k!==0||P!==0?k+P:mn(h.top,h.bottom))}await c({...e,availableWidth:I,availableHeight:T});const N=await o.getDimensions(l.floating);return b!==N.width||v!==N.height?{reset:{rects:!0}}:{}}}};function wf(){return typeof window<"u"}function sl(t){return iN(t)?(t.nodeName||"").toLowerCase():"#document"}function vn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function jr(t){var e;return(e=(iN(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function iN(t){return wf()?t instanceof Node||t instanceof vn(t).Node:!1}function tr(t){return wf()?t instanceof Element||t instanceof vn(t).Element:!1}function Nr(t){return wf()?t instanceof HTMLElement||t instanceof vn(t).HTMLElement:!1}function dE(t){return!wf()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof vn(t).ShadowRoot}function ou(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=nr(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!["inline","contents"].includes(s)}function U4(t){return["table","td","th"].includes(sl(t))}function _f(t){return[":popover-open",":modal"].some(e=>{try{return t.matches(e)}catch{return!1}})}function Jv(t){const e=Zv(),n=tr(t)?nr(t):t;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function $4(t){let e=ui(t);for(;Nr(e)&&!$a(e);){if(Jv(e))return e;if(_f(e))return null;e=ui(e)}return null}function Zv(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function $a(t){return["html","body","#document"].includes(sl(t))}function nr(t){return vn(t).getComputedStyle(t)}function Ef(t){return tr(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function ui(t){if(sl(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dE(t)&&t.host||jr(t);return dE(e)?e.host:e}function oN(t){const e=ui(t);return $a(e)?t.ownerDocument?t.ownerDocument.body:t.body:Nr(e)&&ou(e)?e:oN(e)}function Oc(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=oN(t),i=s===((r=t.ownerDocument)==null?void 0:r.body),o=vn(s);if(i){const l=Xg(o);return e.concat(o,o.visualViewport||[],ou(s)?s:[],l&&n?Oc(l):[])}return e.concat(s,Oc(s,[],n))}function Xg(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function aN(t){const e=nr(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=Nr(t),i=s?t.offsetWidth:n,o=s?t.offsetHeight:r,l=xh(n)!==i||xh(r)!==o;return l&&(n=i,r=o),{width:n,height:r,$:l}}function ex(t){return tr(t)?t:t.contextElement}function ca(t){const e=ex(t);if(!Nr(e))return wr(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:i}=aN(e);let o=(i?xh(n.width):n.width)/r,l=(i?xh(n.height):n.height)/s;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const z4=wr(0);function lN(t){const e=vn(t);return!Zv()||!e.visualViewport?z4:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function B4(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==vn(t)?!1:e}function lo(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),i=ex(t);let o=wr(1);e&&(r?tr(r)&&(o=ca(r)):o=ca(t));const l=B4(i,n,r)?lN(i):wr(0);let c=(s.left+l.x)/o.x,d=(s.top+l.y)/o.y,h=s.width/o.x,f=s.height/o.y;if(i){const m=vn(i),y=r&&tr(r)?vn(r):r;let b=m,v=Xg(b);for(;v&&r&&y!==b;){const _=ca(v),E=v.getBoundingClientRect(),x=nr(v),S=E.left+(v.clientLeft+parseFloat(x.paddingLeft))*_.x,R=E.top+(v.clientTop+parseFloat(x.paddingTop))*_.y;c*=_.x,d*=_.y,h*=_.x,f*=_.y,c+=S,d+=R,b=vn(v),v=Xg(b)}}return _h({width:h,height:f,x:c,y:d})}function tx(t,e){const n=Ef(t).scrollLeft;return e?e.left+n:lo(jr(t)).left+n}function cN(t,e,n){n===void 0&&(n=!1);const r=t.getBoundingClientRect(),s=r.left+e.scrollLeft-(n?0:tx(t,r)),i=r.top+e.scrollTop;return{x:s,y:i}}function H4(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const i=s==="fixed",o=jr(r),l=e?_f(e.floating):!1;if(r===o||l&&i)return n;let c={scrollLeft:0,scrollTop:0},d=wr(1);const h=wr(0),f=Nr(r);if((f||!f&&!i)&&((sl(r)!=="body"||ou(o))&&(c=Ef(r)),Nr(r))){const y=lo(r);d=ca(r),h.x=y.x+r.clientLeft,h.y=y.y+r.clientTop}const m=o&&!f&&!i?cN(o,c,!0):wr(0);return{width:n.width*d.x,height:n.height*d.y,x:n.x*d.x-c.scrollLeft*d.x+h.x+m.x,y:n.y*d.y-c.scrollTop*d.y+h.y+m.y}}function W4(t){return Array.from(t.getClientRects())}function q4(t){const e=jr(t),n=Ef(t),r=t.ownerDocument.body,s=mn(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),i=mn(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+tx(t);const l=-n.scrollTop;return nr(r).direction==="rtl"&&(o+=mn(e.clientWidth,r.clientWidth)-s),{width:s,height:i,x:o,y:l}}function G4(t,e){const n=vn(t),r=jr(t),s=n.visualViewport;let i=r.clientWidth,o=r.clientHeight,l=0,c=0;if(s){i=s.width,o=s.height;const d=Zv();(!d||d&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:i,height:o,x:l,y:c}}function K4(t,e){const n=lo(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,i=Nr(t)?ca(t):wr(1),o=t.clientWidth*i.x,l=t.clientHeight*i.y,c=s*i.x,d=r*i.y;return{width:o,height:l,x:c,y:d}}function hE(t,e,n){let r;if(e==="viewport")r=G4(t,n);else if(e==="document")r=q4(jr(t));else if(tr(e))r=K4(e,n);else{const s=lN(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return _h(r)}function uN(t,e){const n=ui(t);return n===e||!tr(n)||$a(n)?!1:nr(n).position==="fixed"||uN(n,e)}function Q4(t,e){const n=e.get(t);if(n)return n;let r=Oc(t,[],!1).filter(l=>tr(l)&&sl(l)!=="body"),s=null;const i=nr(t).position==="fixed";let o=i?ui(t):t;for(;tr(o)&&!$a(o);){const l=nr(o),c=Jv(o);!c&&l.position==="fixed"&&(s=null),(i?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||ou(o)&&!c&&uN(t,o))?r=r.filter(h=>h!==o):s=l,o=ui(o)}return e.set(t,r),r}function Y4(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const o=[...n==="clippingAncestors"?_f(e)?[]:Q4(e,this._c):[].concat(n),r],l=o[0],c=o.reduce((d,h)=>{const f=hE(e,h,s);return d.top=mn(f.top,d.top),d.right=li(f.right,d.right),d.bottom=li(f.bottom,d.bottom),d.left=mn(f.left,d.left),d},hE(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function X4(t){const{width:e,height:n}=aN(t);return{width:e,height:n}}function J4(t,e,n){const r=Nr(e),s=jr(e),i=n==="fixed",o=lo(t,!0,i,e);let l={scrollLeft:0,scrollTop:0};const c=wr(0);if(r||!r&&!i)if((sl(e)!=="body"||ou(s))&&(l=Ef(e)),r){const m=lo(e,!0,i,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&(c.x=tx(s));const d=s&&!r&&!i?cN(s,l):wr(0),h=o.left+l.scrollLeft-c.x-d.x,f=o.top+l.scrollTop-c.y-d.y;return{x:h,y:f,width:o.width,height:o.height}}function cp(t){return nr(t).position==="static"}function fE(t,e){if(!Nr(t)||nr(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return jr(t)===n&&(n=n.ownerDocument.body),n}function dN(t,e){const n=vn(t);if(_f(t))return n;if(!Nr(t)){let s=ui(t);for(;s&&!$a(s);){if(tr(s)&&!cp(s))return s;s=ui(s)}return n}let r=fE(t,e);for(;r&&U4(r)&&cp(r);)r=fE(r,e);return r&&$a(r)&&cp(r)&&!Jv(r)?n:r||$4(t)||n}const Z4=async function(t){const e=this.getOffsetParent||dN,n=this.getDimensions,r=await n(t.floating);return{reference:J4(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function eV(t){return nr(t).direction==="rtl"}const tV={convertOffsetParentRelativeRectToViewportRelativeRect:H4,getDocumentElement:jr,getClippingRect:Y4,getOffsetParent:dN,getElementRects:Z4,getClientRects:W4,getDimensions:X4,getScale:ca,isElement:tr,isRTL:eV};function hN(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function nV(t,e){let n=null,r;const s=jr(t);function i(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function o(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),i();const d=t.getBoundingClientRect(),{left:h,top:f,width:m,height:y}=d;if(l||e(),!m||!y)return;const b=nd(f),v=nd(s.clientWidth-(h+m)),_=nd(s.clientHeight-(f+y)),E=nd(h),S={rootMargin:-b+"px "+-v+"px "+-_+"px "+-E+"px",threshold:mn(0,li(1,c))||1};let R=!0;function D(M){const T=M[0].intersectionRatio;if(T!==c){if(!R)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}T===1&&!hN(d,t.getBoundingClientRect())&&o(),R=!1}try{n=new IntersectionObserver(D,{...S,root:s.ownerDocument})}catch{n=new IntersectionObserver(D,S)}n.observe(t)}return o(!0),i}function rV(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,d=ex(t),h=s||i?[...d?Oc(d):[],...Oc(e)]:[];h.forEach(E=>{s&&E.addEventListener("scroll",n,{passive:!0}),i&&E.addEventListener("resize",n)});const f=d&&l?nV(d,n):null;let m=-1,y=null;o&&(y=new ResizeObserver(E=>{let[x]=E;x&&x.target===d&&y&&(y.unobserve(e),cancelAnimationFrame(m),m=requestAnimationFrame(()=>{var S;(S=y)==null||S.observe(e)})),n()}),d&&!c&&y.observe(d),y.observe(e));let b,v=c?lo(t):null;c&&_();function _(){const E=lo(t);v&&!hN(v,E)&&n(),v=E,b=requestAnimationFrame(_)}return n(),()=>{var E;h.forEach(x=>{s&&x.removeEventListener("scroll",n),i&&x.removeEventListener("resize",n)}),f==null||f(),(E=y)==null||E.disconnect(),y=null,c&&cancelAnimationFrame(b)}}const sV=M4,iV=L4,oV=k4,aV=F4,lV=D4,mE=j4,cV=V4,uV=(t,e,n)=>{const r=new Map,s={platform:tV,...n},i={...s.platform,_c:r};return P4(t,e,{...s,platform:i})};var jd=typeof document<"u"?p.useLayoutEffect:p.useEffect;function Eh(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Eh(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const i=s[r];if(!(i==="_owner"&&t.$$typeof)&&!Eh(t[i],e[i]))return!1}return!0}return t!==t&&e!==e}function fN(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function pE(t,e){const n=fN(t);return Math.round(e*n)/n}function up(t){const e=p.useRef(t);return jd(()=>{e.current=t}),e}function dV(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:c,open:d}=t,[h,f]=p.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[m,y]=p.useState(r);Eh(m,r)||y(r);const[b,v]=p.useState(null),[_,E]=p.useState(null),x=p.useCallback(U=>{U!==M.current&&(M.current=U,v(U))},[]),S=p.useCallback(U=>{U!==T.current&&(T.current=U,E(U))},[]),R=i||b,D=o||_,M=p.useRef(null),T=p.useRef(null),I=p.useRef(h),N=c!=null,C=up(c),j=up(s),k=up(d),P=p.useCallback(()=>{if(!M.current||!T.current)return;const U={placement:e,strategy:n,middleware:m};j.current&&(U.platform=j.current),uV(M.current,T.current,U).then(H=>{const J={...H,isPositioned:k.current!==!1};B.current&&!Eh(I.current,J)&&(I.current=J,_o.flushSync(()=>{f(J)}))})},[m,e,n,j,k]);jd(()=>{d===!1&&I.current.isPositioned&&(I.current.isPositioned=!1,f(U=>({...U,isPositioned:!1})))},[d]);const B=p.useRef(!1);jd(()=>(B.current=!0,()=>{B.current=!1}),[]),jd(()=>{if(R&&(M.current=R),D&&(T.current=D),R&&D){if(C.current)return C.current(R,D,P);P()}},[R,D,P,C,N]);const ae=p.useMemo(()=>({reference:M,floating:T,setReference:x,setFloating:S}),[x,S]),X=p.useMemo(()=>({reference:R,floating:D}),[R,D]),he=p.useMemo(()=>{const U={position:n,left:0,top:0};if(!X.floating)return U;const H=pE(X.floating,h.x),J=pE(X.floating,h.y);return l?{...U,transform:"translate("+H+"px, "+J+"px)",...fN(X.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:H,top:J}},[n,l,X.floating,h.x,h.y]);return p.useMemo(()=>({...h,update:P,refs:ae,elements:X,floatingStyles:he}),[h,P,ae,X,he])}const hV=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?mE({element:r.current,padding:s}).fn(n):{}:r?mE({element:r,padding:s}).fn(n):{}}}},fV=(t,e)=>({...sV(t),options:[t,e]}),mV=(t,e)=>({...iV(t),options:[t,e]}),pV=(t,e)=>({...cV(t),options:[t,e]}),gV=(t,e)=>({...oV(t),options:[t,e]}),yV=(t,e)=>({...aV(t),options:[t,e]}),vV=(t,e)=>({...lV(t),options:[t,e]}),xV=(t,e)=>({...hV(t),options:[t,e]});var wV="Arrow",mN=p.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...i}=t;return a.jsx(ne.svg,{...i,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});mN.displayName=wV;var _V=mN;function EV(t){const[e,n]=p.useState(void 0);return at(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const i=s[0];let o,l;if("borderBoxSize"in i){const c=i.borderBoxSize,d=Array.isArray(c)?c[0]:c;o=d.inlineSize,l=d.blockSize}else o=t.offsetWidth,l=t.offsetHeight;n({width:o,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var nx="Popper",[pN,Tf]=bn(nx),[TV,gN]=pN(nx),yN=t=>{const{__scopePopper:e,children:n}=t,[r,s]=p.useState(null);return a.jsx(TV,{scope:e,anchor:r,onAnchorChange:s,children:n})};yN.displayName=nx;var vN="PopperAnchor",xN=p.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,i=gN(vN,n),o=p.useRef(null),l=Ie(e,o);return p.useEffect(()=>{i.onAnchorChange((r==null?void 0:r.current)||o.current)}),r?null:a.jsx(ne.div,{...s,ref:l})});xN.displayName=vN;var rx="PopperContent",[bV,SV]=pN(rx),wN=p.forwardRef((t,e)=>{var re,Oe,mt,Le,je,Pe;const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:d=[],collisionPadding:h=0,sticky:f="partial",hideWhenDetached:m=!1,updatePositionStrategy:y="optimized",onPlaced:b,...v}=t,_=gN(rx,n),[E,x]=p.useState(null),S=Ie(e,St=>x(St)),[R,D]=p.useState(null),M=EV(R),T=(M==null?void 0:M.width)??0,I=(M==null?void 0:M.height)??0,N=r+(i!=="center"?"-"+i:""),C=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},j=Array.isArray(d)?d:[d],k=j.length>0,P={padding:C,boundary:j.filter(NV),altBoundary:k},{refs:B,floatingStyles:ae,placement:X,isPositioned:he,middlewareData:U}=dV({strategy:"fixed",placement:N,whileElementsMounted:(...St)=>rV(...St,{animationFrame:y==="always"}),elements:{reference:_.anchor},middleware:[fV({mainAxis:s+I,alignmentAxis:o}),c&&mV({mainAxis:!0,crossAxis:!1,limiter:f==="partial"?pV():void 0,...P}),c&&gV({...P}),yV({...P,apply:({elements:St,rects:un,availableWidth:Ni,availableHeight:Dr})=>{const{width:Or,height:Eu}=un.reference,rt=St.floating.style;rt.setProperty("--radix-popper-available-width",`${Ni}px`),rt.setProperty("--radix-popper-available-height",`${Dr}px`),rt.setProperty("--radix-popper-anchor-width",`${Or}px`),rt.setProperty("--radix-popper-anchor-height",`${Eu}px`)}}),R&&xV({element:R,padding:l}),AV({arrowWidth:T,arrowHeight:I}),m&&vV({strategy:"referenceHidden",...P})]}),[H,J]=TN(X),ue=tt(b);at(()=>{he&&(ue==null||ue())},[he,ue]);const Re=(re=U.arrow)==null?void 0:re.x,wt=(Oe=U.arrow)==null?void 0:Oe.y,qe=((mt=U.arrow)==null?void 0:mt.centerOffset)!==0,[Qt,ft]=p.useState();return at(()=>{E&&ft(window.getComputedStyle(E).zIndex)},[E]),a.jsx("div",{ref:B.setFloating,"data-radix-popper-content-wrapper":"",style:{...ae,transform:he?ae.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Qt,"--radix-popper-transform-origin":[(Le=U.transformOrigin)==null?void 0:Le.x,(je=U.transformOrigin)==null?void 0:je.y].join(" "),...((Pe=U.hide)==null?void 0:Pe.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(bV,{scope:n,placedSide:H,onArrowChange:D,arrowX:Re,arrowY:wt,shouldHideArrow:qe,children:a.jsx(ne.div,{"data-side":H,"data-align":J,...v,ref:S,style:{...v.style,animation:he?void 0:"none"}})})})});wN.displayName=rx;var _N="PopperArrow",IV={top:"bottom",right:"left",bottom:"top",left:"right"},EN=p.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,i=SV(_N,r),o=IV[i.placedSide];return a.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:a.jsx(_V,{...s,ref:n,style:{...s.style,display:"block"}})})});EN.displayName=_N;function NV(t){return t!==null}var AV=t=>({name:"transformOrigin",options:t,fn(e){var _,E,x;const{placement:n,rects:r,middlewareData:s}=e,o=((_=s.arrow)==null?void 0:_.centerOffset)!==0,l=o?0:t.arrowWidth,c=o?0:t.arrowHeight,[d,h]=TN(n),f={start:"0%",center:"50%",end:"100%"}[h],m=(((E=s.arrow)==null?void 0:E.x)??0)+l/2,y=(((x=s.arrow)==null?void 0:x.y)??0)+c/2;let b="",v="";return d==="bottom"?(b=o?f:`${m}px`,v=`${-c}px`):d==="top"?(b=o?f:`${m}px`,v=`${r.floating.height+c}px`):d==="right"?(b=`${-c}px`,v=o?f:`${y}px`):d==="left"&&(b=`${r.floating.width+c}px`,v=o?f:`${y}px`),{data:{x:b,y:v}}}});function TN(t){const[e,n="center"]=t.split("-");return[e,n]}var bN=yN,SN=xN,IN=wN,NN=EN,[bf,pW]=bn("Tooltip",[Tf]),Sf=Tf(),AN="TooltipProvider",CV=700,Jg="tooltip.open",[RV,sx]=bf(AN),CN=t=>{const{__scopeTooltip:e,delayDuration:n=CV,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:i}=t,o=p.useRef(!0),l=p.useRef(!1),c=p.useRef(0);return p.useEffect(()=>{const d=c.current;return()=>window.clearTimeout(d)},[]),a.jsx(RV,{scope:e,isOpenDelayedRef:o,delayDuration:n,onOpen:p.useCallback(()=>{window.clearTimeout(c.current),o.current=!1},[]),onClose:p.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>o.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:p.useCallback(d=>{l.current=d},[]),disableHoverableContent:s,children:i})};CN.displayName=AN;var If="Tooltip",[PV,Nf]=bf(If),RN=t=>{const{__scopeTooltip:e,children:n,open:r,defaultOpen:s=!1,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=t,c=sx(If,t.__scopeTooltip),d=Sf(e),[h,f]=p.useState(null),m=Jn(),y=p.useRef(0),b=o??c.disableHoverableContent,v=l??c.delayDuration,_=p.useRef(!1),[E=!1,x]=Ir({prop:r,defaultProp:s,onChange:T=>{T?(c.onOpen(),document.dispatchEvent(new CustomEvent(Jg))):c.onClose(),i==null||i(T)}}),S=p.useMemo(()=>E?_.current?"delayed-open":"instant-open":"closed",[E]),R=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,_.current=!1,x(!0)},[x]),D=p.useCallback(()=>{window.clearTimeout(y.current),y.current=0,x(!1)},[x]),M=p.useCallback(()=>{window.clearTimeout(y.current),y.current=window.setTimeout(()=>{_.current=!0,x(!0),y.current=0},v)},[v,x]);return p.useEffect(()=>()=>{y.current&&(window.clearTimeout(y.current),y.current=0)},[]),a.jsx(bN,{...d,children:a.jsx(PV,{scope:e,contentId:m,open:E,stateAttribute:S,trigger:h,onTriggerChange:f,onTriggerEnter:p.useCallback(()=>{c.isOpenDelayedRef.current?M():R()},[c.isOpenDelayedRef,M,R]),onTriggerLeave:p.useCallback(()=>{b?D():(window.clearTimeout(y.current),y.current=0)},[D,b]),onOpen:R,onClose:D,disableHoverableContent:b,children:n})})};RN.displayName=If;var Zg="TooltipTrigger",PN=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Nf(Zg,n),i=sx(Zg,n),o=Sf(n),l=p.useRef(null),c=Ie(e,l,s.onTriggerChange),d=p.useRef(!1),h=p.useRef(!1),f=p.useCallback(()=>d.current=!1,[]);return p.useEffect(()=>()=>document.removeEventListener("pointerup",f),[f]),a.jsx(SN,{asChild:!0,...o,children:a.jsx(ne.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Z(t.onPointerMove,m=>{m.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(s.onTriggerEnter(),h.current=!0)}),onPointerLeave:Z(t.onPointerLeave,()=>{s.onTriggerLeave(),h.current=!1}),onPointerDown:Z(t.onPointerDown,()=>{s.open&&s.onClose(),d.current=!0,document.addEventListener("pointerup",f,{once:!0})}),onFocus:Z(t.onFocus,()=>{d.current||s.onOpen()}),onBlur:Z(t.onBlur,s.onClose),onClick:Z(t.onClick,s.onClose)})})});PN.displayName=Zg;var jV="TooltipPortal",[gW,kV]=bf(jV,{forceMount:void 0}),za="TooltipContent",jN=p.forwardRef((t,e)=>{const n=kV(za,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...i}=t,o=Nf(za,t.__scopeTooltip);return a.jsx(Mn,{present:r||o.open,children:o.disableHoverableContent?a.jsx(kN,{side:s,...i,ref:e}):a.jsx(DV,{side:s,...i,ref:e})})}),DV=p.forwardRef((t,e)=>{const n=Nf(za,t.__scopeTooltip),r=sx(za,t.__scopeTooltip),s=p.useRef(null),i=Ie(e,s),[o,l]=p.useState(null),{trigger:c,onClose:d}=n,h=s.current,{onPointerInTransitChange:f}=r,m=p.useCallback(()=>{l(null),f(!1)},[f]),y=p.useCallback((b,v)=>{const _=b.currentTarget,E={x:b.clientX,y:b.clientY},x=FV(E,_.getBoundingClientRect()),S=UV(E,x),R=$V(v.getBoundingClientRect()),D=BV([...S,...R]);l(D),f(!0)},[f]);return p.useEffect(()=>()=>m(),[m]),p.useEffect(()=>{if(c&&h){const b=_=>y(_,h),v=_=>y(_,c);return c.addEventListener("pointerleave",b),h.addEventListener("pointerleave",v),()=>{c.removeEventListener("pointerleave",b),h.removeEventListener("pointerleave",v)}}},[c,h,y,m]),p.useEffect(()=>{if(o){const b=v=>{const _=v.target,E={x:v.clientX,y:v.clientY},x=(c==null?void 0:c.contains(_))||(h==null?void 0:h.contains(_)),S=!zV(E,o);x?m():S&&(m(),d())};return document.addEventListener("pointermove",b),()=>document.removeEventListener("pointermove",b)}},[c,h,o,d,m]),a.jsx(kN,{...t,ref:i})}),[OV,MV]=bf(If,{isInside:!1}),LV=OM("TooltipContent"),kN=p.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=t,c=Nf(za,n),d=Sf(n),{onClose:h}=c;return p.useEffect(()=>(document.addEventListener(Jg,h),()=>document.removeEventListener(Jg,h)),[h]),p.useEffect(()=>{if(c.trigger){const f=m=>{const y=m.target;y!=null&&y.contains(c.trigger)&&h()};return window.addEventListener("scroll",f,{capture:!0}),()=>window.removeEventListener("scroll",f,{capture:!0})}},[c.trigger,h]),a.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:f=>f.preventDefault(),onDismiss:h,children:a.jsxs(IN,{"data-state":c.stateAttribute,...d,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(LV,{children:r}),a.jsx(OV,{scope:n,isInside:!0,children:a.jsx(tL,{id:c.contentId,role:"tooltip",children:s||r})})]})})});jN.displayName=za;var DN="TooltipArrow",VV=p.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Sf(n);return MV(DN,n).isInside?null:a.jsx(NN,{...s,...r,ref:e})});VV.displayName=DN;function FV(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),i=Math.abs(e.left-t.x);switch(Math.min(n,r,s,i)){case i:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function UV(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function $V(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function zV(t,e){const{x:n,y:r}=t;let s=!1;for(let i=0,o=e.length-1;i<e.length;o=i++){const l=e[i].x,c=e[i].y,d=e[o].x,h=e[o].y;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(s=!s)}return s}function BV(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),HV(e)}function HV(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const i=e[e.length-1],o=e[e.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const i=n[n.length-1],o=n[n.length-2];if((i.x-o.x)*(s.y-o.y)>=(i.y-o.y)*(s.x-o.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var WV=CN,qV=RN,GV=PN,ON=jN;const MN=WV,rd=qV,sd=GV,ql=p.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(ON,{ref:r,sideOffset:e,className:se("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));ql.displayName=ON.displayName;const KV=p.createContext(void 0);function QV({children:t}){const[e,n]=p.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"light");p.useEffect(()=>{const s=document.documentElement;s.classList.remove("light","dark"),s.classList.add(e),localStorage.setItem("theme",e)},[e]);const r=()=>{n(s=>s==="light"?"dark":"light")};return a.jsx(KV.Provider,{value:{theme:e,setTheme:n,toggleTheme:r},children:t})}const YV=()=>{};var gE={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},XV=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},VN={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,y=d&63;c||(y=64,o||(m=64)),r.push(n[h],n[f],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(LN(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):XV(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new JV;const m=i<<2|l>>4;if(r.push(m),d!==64){const y=l<<4&240|d>>2;if(r.push(y),f!==64){const b=d<<6&192|f;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class JV extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ZV=function(t){const e=LN(t);return VN.encodeByteArray(e,!0)},Th=function(t){return ZV(t).replace(/\./g,"")},FN=function(t){try{return VN.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tF=()=>eF().__FIREBASE_DEFAULTS__,nF=()=>{if(typeof process>"u"||typeof gE>"u")return;const t=gE.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},rF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&FN(t[1]);return e&&JSON.parse(e)},Af=()=>{try{return YV()||tF()||nF()||rF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},UN=t=>{var e,n;return(n=(e=Af())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},sF=t=>{const e=UN(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$N=()=>{var t;return(t=Af())==null?void 0:t.config},zN=t=>{var e;return(e=Af())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function BN(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Th(JSON.stringify(n)),Th(JSON.stringify(o)),""].join(".")}const lc={};function aF(){const t={prod:[],emulator:[]};for(const e of Object.keys(lc))lc[e]?t.emulator.push(e):t.prod.push(e);return t}function lF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let yE=!1;function HN(t,e){if(typeof window>"u"||typeof document>"u"||!il(window.location.host)||lc[t]===e||lc[t]||yE)return;lc[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=aF().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{yE=!0,o()},m}function h(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=lF(r),y=n("text"),b=document.getElementById(y)||document.createElement("span"),v=n("learnmore"),_=document.getElementById(v)||document.createElement("a"),E=n("preprendIcon"),x=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(_,v);const R=d();c(x,E),S.append(x,b,_,R),document.body.appendChild(S)}i?(b.innerText="Preview backend disconnected.",x.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(x.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function cF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ut())}function uF(){var e;const t=(e=Af())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function dF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function WN(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function hF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fF(){const t=Ut();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function mF(){return!uF()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function qN(){try{return typeof indexedDB=="object"}catch{return!1}}function GN(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}function pF(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gF="FirebaseError";class ir extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=gF,Object.setPrototypeOf(this,ir.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,To.prototype.create)}}class To{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yF(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new ir(s,l,r)}}function yF(t,e){return t.replace(vF,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const vF=/\{\$([^}]+)}/g;function xF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function di(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(vE(i)&&vE(o)){if(!di(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function vE(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function wF(t,e){const n=new _F(t,e);return n.subscribe.bind(n)}class _F{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");EF(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=dp),s.error===void 0&&(s.error=dp),s.complete===void 0&&(s.complete=dp);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function EF(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function dp(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TF=1e3,bF=2,SF=4*60*60*1e3,IF=.5;function xE(t,e=TF,n=bF){const r=e*Math.pow(n,t),s=Math.round(IF*r*(Math.random()-.5)*2);return Math.min(SF,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){return t&&t._delegate?t._delegate:t}class rr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NF{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(CF(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:AF(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function AF(t){return t===Mi?void 0:t}function CF(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RF{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NF(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var we;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(we||(we={}));const PF={debug:we.DEBUG,verbose:we.VERBOSE,info:we.INFO,warn:we.WARN,error:we.ERROR,silent:we.SILENT},jF=we.INFO,kF={[we.DEBUG]:"log",[we.VERBOSE]:"log",[we.INFO]:"info",[we.WARN]:"warn",[we.ERROR]:"error"},DF=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=kF[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cf{constructor(e){this.name=e,this._logLevel=jF,this._logHandler=DF,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in we))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?PF[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,we.DEBUG,...e),this._logHandler(this,we.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,we.VERBOSE,...e),this._logHandler(this,we.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,we.INFO,...e),this._logHandler(this,we.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,we.WARN,...e),this._logHandler(this,we.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,we.ERROR,...e),this._logHandler(this,we.ERROR,...e)}}const OF=(t,e)=>e.some(n=>t instanceof n);let wE,_E;function MF(){return wE||(wE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LF(){return _E||(_E=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const KN=new WeakMap,ey=new WeakMap,QN=new WeakMap,hp=new WeakMap,ix=new WeakMap;function VF(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(ti(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&KN.set(n,t)}).catch(()=>{}),ix.set(e,t),e}function FF(t){if(ey.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});ey.set(t,e)}let ty={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ey.get(t);if(e==="objectStoreNames")return t.objectStoreNames||QN.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ti(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function UF(t){ty=t(ty)}function $F(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(fp(this),e,...n);return QN.set(r,e.sort?e.sort():[e]),ti(r)}:LF().includes(t)?function(...e){return t.apply(fp(this),e),ti(KN.get(this))}:function(...e){return ti(t.apply(fp(this),e))}}function zF(t){return typeof t=="function"?$F(t):(t instanceof IDBTransaction&&FF(t),OF(t,MF())?new Proxy(t,ty):t)}function ti(t){if(t instanceof IDBRequest)return VF(t);if(hp.has(t))return hp.get(t);const e=zF(t);return e!==t&&(hp.set(t,e),ix.set(e,t)),e}const fp=t=>ix.get(t);function YN(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=ti(o);return r&&o.addEventListener("upgradeneeded",c=>{r(ti(o.result),c.oldVersion,c.newVersion,ti(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const BF=["get","getKey","getAll","getAllKeys","count"],HF=["put","add","delete","clear"],mp=new Map;function EE(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(mp.get(e))return mp.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=HF.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BF.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return mp.set(e,i),i}UF(t=>({...t,get:(e,n,r)=>EE(e,n)||t.get(e,n,r),has:(e,n)=>!!EE(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WF{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qF(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qF(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ny="@firebase/app",TE="0.14.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is=new Cf("@firebase/app"),GF="@firebase/app-compat",KF="@firebase/analytics-compat",QF="@firebase/analytics",YF="@firebase/app-check-compat",XF="@firebase/app-check",JF="@firebase/auth",ZF="@firebase/auth-compat",e3="@firebase/database",t3="@firebase/data-connect",n3="@firebase/database-compat",r3="@firebase/functions",s3="@firebase/functions-compat",i3="@firebase/installations",o3="@firebase/installations-compat",a3="@firebase/messaging",l3="@firebase/messaging-compat",c3="@firebase/performance",u3="@firebase/performance-compat",d3="@firebase/remote-config",h3="@firebase/remote-config-compat",f3="@firebase/storage",m3="@firebase/storage-compat",p3="@firebase/firestore",g3="@firebase/ai",y3="@firebase/firestore-compat",v3="firebase",x3="12.3.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry="[DEFAULT]",w3={[ny]:"fire-core",[GF]:"fire-core-compat",[QF]:"fire-analytics",[KF]:"fire-analytics-compat",[XF]:"fire-app-check",[YF]:"fire-app-check-compat",[JF]:"fire-auth",[ZF]:"fire-auth-compat",[e3]:"fire-rtdb",[t3]:"fire-data-connect",[n3]:"fire-rtdb-compat",[r3]:"fire-fn",[s3]:"fire-fn-compat",[i3]:"fire-iid",[o3]:"fire-iid-compat",[a3]:"fire-fcm",[l3]:"fire-fcm-compat",[c3]:"fire-perf",[u3]:"fire-perf-compat",[d3]:"fire-rc",[h3]:"fire-rc-compat",[f3]:"fire-gcs",[m3]:"fire-gcs-compat",[p3]:"fire-fst",[y3]:"fire-fst-compat",[g3]:"fire-vertex","fire-js":"fire-js",[v3]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh=new Map,_3=new Map,sy=new Map;function bE(t,e){try{t.container.addComponent(e)}catch(n){is.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ar(t){const e=t.name;if(sy.has(e))return is.debug(`There were multiple attempts to register component ${e}.`),!1;sy.set(e,t);for(const n of bh.values())bE(n,t);for(const n of _3.values())bE(n,t);return!0}function bo(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Kn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E3={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ni=new To("app","Firebase",E3);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T3{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ni.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ol=x3;function XN(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:ry,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw ni.create("bad-app-name",{appName:String(s)});if(n||(n=$N()),!n)throw ni.create("no-options");const i=bh.get(s);if(i){if(di(n,i.options)&&di(r,i.config))return i;throw ni.create("duplicate-app",{appName:s})}const o=new RF(s);for(const c of sy.values())o.addComponent(c);const l=new T3(n,r,o);return bh.set(s,l),l}function ox(t=ry){const e=bh.get(t);if(!e&&t===ry&&$N())return XN();if(!e)throw ni.create("no-app",{appName:t});return e}function kn(t,e,n){let r=w3[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),is.warn(o.join(" "));return}Ar(new rr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3="firebase-heartbeat-database",S3=1,Mc="firebase-heartbeat-store";let pp=null;function JN(){return pp||(pp=YN(b3,S3,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Mc)}catch(n){console.warn(n)}}}}).catch(t=>{throw ni.create("idb-open",{originalErrorMessage:t.message})})),pp}async function I3(t){try{const n=(await JN()).transaction(Mc),r=await n.objectStore(Mc).get(ZN(t));return await n.done,r}catch(e){if(e instanceof ir)is.warn(e.message);else{const n=ni.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});is.warn(n.message)}}}async function SE(t,e){try{const r=(await JN()).transaction(Mc,"readwrite");await r.objectStore(Mc).put(e,ZN(t)),await r.done}catch(n){if(n instanceof ir)is.warn(n.message);else{const r=ni.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});is.warn(r.message)}}}function ZN(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N3=1024,A3=30;class C3{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new P3(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=IE();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>A3){const o=j3(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){is.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=IE(),{heartbeatsToSend:r,unsentEntries:s}=R3(this._heartbeatsCache.heartbeats),i=Th(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return is.warn(n),""}}}function IE(){return new Date().toISOString().substring(0,10)}function R3(t,e=N3){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),NE(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),NE(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class P3{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return qN()?GN().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await I3(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return SE(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function NE(t){return Th(JSON.stringify({version:2,heartbeats:t})).length}function j3(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k3(t){Ar(new rr("platform-logger",e=>new WF(e),"PRIVATE")),Ar(new rr("heartbeat",e=>new C3(e),"PRIVATE")),kn(ny,TE,t),kn(ny,TE,"esm2020"),kn("fire-js","")}k3("");var D3="firebase",O3="12.3.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */kn(D3,O3,"app");const eA="@firebase/installations",ax="0.6.19";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=1e4,nA=`w:${ax}`,rA="FIS_v2",M3="https://firebaseinstallations.googleapis.com/v1",L3=60*60*1e3,V3="installations",F3="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U3={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},co=new To(V3,F3,U3);function sA(t){return t instanceof ir&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA({projectId:t}){return`${M3}/projects/${t}/installations`}function oA(t){return{token:t.token,requestStatus:2,expiresIn:z3(t.expiresIn),creationTime:Date.now()}}async function aA(t,e){const r=(await e.json()).error;return co.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function lA({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function $3(t,{refreshToken:e}){const n=lA(t);return n.append("Authorization",B3(e)),n}async function cA(t){const e=await t();return e.status>=500&&e.status<600?t():e}function z3(t){return Number(t.replace("s","000"))}function B3(t){return`${rA} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H3({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=iA(t),s=lA(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:rA,appId:t.appId,sdkVersion:nA},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await cA(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:oA(d.authToken)}}else throw await aA("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W3(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3=/^[cdef][\w-]{21}$/,iy="";function G3(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=K3(t);return q3.test(n)?n:iy}catch{return iy}}function K3(t){return W3(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=new Map;function hA(t,e){const n=Rf(t);fA(n,e),Q3(n,e)}function fA(t,e){const n=dA.get(t);if(n)for(const r of n)r(e)}function Q3(t,e){const n=Y3();n&&n.postMessage({key:t,fid:e}),X3()}let $i=null;function Y3(){return!$i&&"BroadcastChannel"in self&&($i=new BroadcastChannel("[Firebase] FID Change"),$i.onmessage=t=>{fA(t.data.key,t.data.fid)}),$i}function X3(){dA.size===0&&$i&&($i.close(),$i=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J3="firebase-installations-database",Z3=1,uo="firebase-installations-store";let gp=null;function lx(){return gp||(gp=YN(J3,Z3,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(uo)}}})),gp}async function Sh(t,e){const n=Rf(t),s=(await lx()).transaction(uo,"readwrite"),i=s.objectStore(uo),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&hA(t,e.fid),e}async function mA(t){const e=Rf(t),r=(await lx()).transaction(uo,"readwrite");await r.objectStore(uo).delete(e),await r.done}async function Pf(t,e){const n=Rf(t),s=(await lx()).transaction(uo,"readwrite"),i=s.objectStore(uo),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&hA(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cx(t){let e;const n=await Pf(t.appConfig,r=>{const s=e5(r),i=t5(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===iy?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function e5(t){const e=t||{fid:G3(),registrationStatus:0};return pA(e)}function t5(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(co.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=n5(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:r5(t)}:{installationEntry:e}}async function n5(t,e){try{const n=await H3(t,e);return Sh(t.appConfig,n)}catch(n){throw sA(n)&&n.customData.serverCode===409?await mA(t.appConfig):await Sh(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function r5(t){let e=await AE(t.appConfig);for(;e.registrationStatus===1;)await uA(100),e=await AE(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await cx(t);return r||n}return e}function AE(t){return Pf(t,e=>{if(!e)throw co.create("installation-not-found");return pA(e)})}function pA(t){return s5(t)?{fid:t.fid,registrationStatus:0}:t}function s5(t){return t.registrationStatus===1&&t.registrationTime+tA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i5({appConfig:t,heartbeatServiceProvider:e},n){const r=o5(t,n),s=$3(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:nA,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await cA(()=>fetch(r,l));if(c.ok){const d=await c.json();return oA(d)}else throw await aA("Generate Auth Token",c)}function o5(t,{fid:e}){return`${iA(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ux(t,e=!1){let n;const r=await Pf(t.appConfig,i=>{if(!gA(i))throw co.create("not-registered");const o=i.authToken;if(!e&&c5(o))return i;if(o.requestStatus===1)return n=a5(t,e),i;{if(!navigator.onLine)throw co.create("app-offline");const l=d5(i);return n=l5(t,l),l}});return n?await n:r.authToken}async function a5(t,e){let n=await CE(t.appConfig);for(;n.authToken.requestStatus===1;)await uA(100),n=await CE(t.appConfig);const r=n.authToken;return r.requestStatus===0?ux(t,e):r}function CE(t){return Pf(t,e=>{if(!gA(e))throw co.create("not-registered");const n=e.authToken;return h5(n)?{...e,authToken:{requestStatus:0}}:e})}async function l5(t,e){try{const n=await i5(t,e),r={...e,authToken:n};return await Sh(t.appConfig,r),n}catch(n){if(sA(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await mA(t.appConfig);else{const r={...e,authToken:{requestStatus:0}};await Sh(t.appConfig,r)}throw n}}function gA(t){return t!==void 0&&t.registrationStatus===2}function c5(t){return t.requestStatus===2&&!u5(t)}function u5(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+L3}function d5(t){const e={requestStatus:1,requestTime:Date.now()};return{...t,authToken:e}}function h5(t){return t.requestStatus===1&&t.requestTime+tA<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t){const e=t,{installationEntry:n,registrationPromise:r}=await cx(e);return r?r.catch(console.error):ux(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m5(t,e=!1){const n=t;return await p5(n),(await ux(n,e)).token}async function p5(t){const{registrationPromise:e}=await cx(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g5(t){if(!t||!t.options)throw yp("App Configuration");if(!t.name)throw yp("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw yp(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function yp(t){return co.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="installations",y5="installations-internal",v5=t=>{const e=t.getProvider("app").getImmediate(),n=g5(e),r=bo(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},x5=t=>{const e=t.getProvider("app").getImmediate(),n=bo(e,yA).getImmediate();return{getId:()=>f5(n),getToken:s=>m5(n,s)}};function w5(){Ar(new rr(yA,v5,"PUBLIC")),Ar(new rr(y5,x5,"PRIVATE"))}w5();kn(eA,ax);kn(eA,ax,"esm2020");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ih="analytics",_5="firebase_id",E5="origin",T5=60*1e3,b5="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",dx="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cn=new Cf("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S5={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},xn=new To("analytics","Analytics",S5);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t){if(!t.startsWith(dx)){const e=xn.create("invalid-gtag-resource",{gtagURL:t});return cn.warn(e.message),""}return t}function vA(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function N5(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function A5(t,e){const n=N5("firebase-js-sdk-policy",{createScriptURL:I5}),r=document.createElement("script"),s=`${dx}?l=${t}&id=${e}`;r.src=n?n==null?void 0:n.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function C5(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function R5(t,e,n,r,s,i){const o=r[s];try{if(o)await e[o];else{const c=(await vA(n)).find(d=>d.measurementId===s);c&&await e[c.appId]}}catch(l){cn.error(l)}t("config",s,i)}async function P5(t,e,n,r,s){try{let i=[];if(s&&s.send_to){let o=s.send_to;Array.isArray(o)||(o=[o]);const l=await vA(n);for(const c of o){const d=l.find(f=>f.measurementId===c),h=d&&e[d.appId];if(h)i.push(h);else{i=[];break}}}i.length===0&&(i=Object.values(e)),await Promise.all(i),t("event",r,s||{})}catch(i){cn.error(i)}}function j5(t,e,n,r){async function s(i,...o){try{if(i==="event"){const[l,c]=o;await P5(t,e,n,l,c)}else if(i==="config"){const[l,c]=o;await R5(t,e,n,r,l,c)}else if(i==="consent"){const[l,c]=o;t("consent",l,c)}else if(i==="get"){const[l,c,d]=o;t("get",l,c,d)}else if(i==="set"){const[l]=o;t("set",l)}else t(i,...o)}catch(l){cn.error(l)}}return s}function k5(t,e,n,r,s){let i=function(...o){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(i=window[s]),window[s]=j5(i,t,e,n),{gtagCore:i,wrappedGtag:window[s]}}function D5(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(dx)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O5=30,M5=1e3;class L5{constructor(e={},n=M5){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xA=new L5;function V5(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function F5(t){var o;const{appId:e,apiKey:n}=t,r={method:"GET",headers:V5(n)},s=b5.replace("{app-id}",e),i=await fetch(s,r);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();(o=c.error)!=null&&o.message&&(l=c.error.message)}catch{}throw xn.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function U5(t,e=xA,n){const{appId:r,apiKey:s,measurementId:i}=t.options;if(!r)throw xn.create("no-app-id");if(!s){if(i)return{measurementId:i,appId:r};throw xn.create("no-api-key")}const o=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new B5;return setTimeout(async()=>{l.abort()},T5),wA({appId:r,apiKey:s,measurementId:i},o,l,e)}async function wA(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=xA){var l;const{appId:i,measurementId:o}=t;try{await $5(r,e)}catch(c){if(o)return cn.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:i,measurementId:o};throw c}try{const c=await F5(t);return s.deleteThrottleMetadata(i),c}catch(c){const d=c;if(!z5(d)){if(s.deleteThrottleMetadata(i),o)return cn.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${o} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:i,measurementId:o};throw c}const h=Number((l=d==null?void 0:d.customData)==null?void 0:l.httpStatus)===503?xE(n,s.intervalMillis,O5):xE(n,s.intervalMillis),f={throttleEndTimeMillis:Date.now()+h,backoffCount:n+1};return s.setThrottleMetadata(i,f),cn.debug(`Calling attemptFetch again in ${h} millis`),wA(t,f,r,s)}}function $5(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),i=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(i),r(xn.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function z5(t){if(!(t instanceof ir)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class B5{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function H5(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const i=await e,o={...r,send_to:i};t("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function W5(){if(qN())try{await GN()}catch(t){return cn.warn(xn.create("indexeddb-unavailable",{errorInfo:t==null?void 0:t.toString()}).message),!1}else return cn.warn(xn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function q5(t,e,n,r,s,i,o){const l=U5(t);l.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&cn.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>cn.error(m)),e.push(l);const c=W5().then(m=>{if(m)return r.getId()}),[d,h]=await Promise.all([l,c]);D5(i)||A5(i,d.measurementId),s("js",new Date);const f=(o==null?void 0:o.config)??{};return f[E5]="firebase",f.update=!0,h!=null&&(f[_5]=h),s("config",d.measurementId,f),d.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G5{constructor(e){this.app=e}_delete(){return delete cc[this.app.options.appId],Promise.resolve()}}let cc={},RE=[];const PE={};let vp="dataLayer",K5="gtag",jE,_A,kE=!1;function Q5(){const t=[];if(WN()&&t.push("This is a browser extension environment."),pF()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=xn.create("invalid-analytics-context",{errorInfo:e});cn.warn(n.message)}}function Y5(t,e,n){Q5();const r=t.options.appId;if(!r)throw xn.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)cn.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw xn.create("no-api-key");if(cc[r]!=null)throw xn.create("already-exists",{id:r});if(!kE){C5(vp);const{wrappedGtag:i,gtagCore:o}=k5(cc,RE,PE,vp,K5);_A=i,jE=o,kE=!0}return cc[r]=q5(t,RE,PE,e,jE,vp,n),new G5(t)}function X5(t=ox()){t=nt(t);const e=bo(t,Ih);return e.isInitialized()?e.getImmediate():J5(t)}function J5(t,e={}){const n=bo(t,Ih);if(n.isInitialized()){const s=n.getImmediate();if(di(e,n.getOptions()))return s;throw xn.create("already-initialized")}return n.initialize({options:e})}function Z5(t,e,n,r){t=nt(t),H5(_A,cc[t.app.options.appId],e,n,r).catch(s=>cn.error(s))}const DE="@firebase/analytics",OE="0.10.18";function e6(){Ar(new rr(Ih,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Y5(r,s,n)},"PUBLIC")),Ar(new rr("analytics-internal",t,"PRIVATE")),kn(DE,OE),kn(DE,OE,"esm2020");function t(e){try{const n=e.getProvider(Ih).getImmediate();return{logEvent:(r,s,i)=>Z5(n,r,s,i)}}catch(n){throw xn.create("interop-component-reg-failed",{reason:n})}}}e6();function EA(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const t6=EA,TA=new To("auth","Firebase",EA());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh=new Cf("@firebase/auth");function n6(t,...e){Nh.logLevel<=we.WARN&&Nh.warn(`Auth (${ol}): ${t}`,...e)}function kd(t,...e){Nh.logLevel<=we.ERROR&&Nh.error(`Auth (${ol}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t,...e){throw fx(t,...e)}function Zn(t,...e){return fx(t,...e)}function hx(t,e,n){const r={...t6(),[e]:n};return new To("auth","Firebase",r).create(e,{appName:t.name})}function Zi(t){return hx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function r6(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Cr(t,"argument-error"),hx(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function fx(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return TA.create(t,...e)}function ce(t,e,...n){if(!t)throw fx(e,...n)}function qr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw kd(e),new Error(e)}function os(t,e){t||qr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oy(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function s6(){return ME()==="http:"||ME()==="https:"}function ME(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i6(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(s6()||WN()||"connection"in navigator)?navigator.onLine:!0}function o6(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.shortDelay=e,this.longDelay=n,os(n>e,"Short delay should be less than long delay!"),this.isMobile=cF()||hF()}get(){return i6()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){os(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;qr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;qr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;qr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a6={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l6=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],c6=new lu(3e4,6e4);function px(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function al(t,e,n,r,s={}){return SA(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=au({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return dF()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&il(t.emulatorConfig.host)&&(d.credentials="include"),bA.fetch()(await IA(t,t.config.apiHost,n,l),d)})}async function SA(t,e,n){t._canInitEmulator=!1;const r={...a6,...e};try{const s=new d6(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw id(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw id(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw id(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw id(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw hx(t,h,d);Cr(t,h)}}catch(s){if(s instanceof ir)throw s;Cr(t,"network-request-failed",{message:String(s)})}}async function u6(t,e,n,r,s={}){const i=await al(t,e,n,r,s);return"mfaPendingCredential"in i&&Cr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function IA(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?mx(t.config,s):`${t.config.apiScheme}://${s}`;return l6.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class d6{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Zn(this.auth,"network-request-failed")),c6.get())})}}function id(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Zn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h6(t,e){return al(t,"POST","/v1/accounts:delete",e)}async function Ah(t,e){return al(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uc(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function f6(t,e=!1){const n=nt(t),r=await n.getIdToken(e),s=gx(r);ce(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:uc(xp(s.auth_time)),issuedAtTime:uc(xp(s.iat)),expirationTime:uc(xp(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function xp(t){return Number(t)*1e3}function gx(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return kd("JWT malformed, contained fewer than 3 sections"),null;try{const s=FN(n);return s?JSON.parse(s):(kd("Failed to decode base64 JWT payload"),null)}catch(s){return kd("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function LE(t){const e=gx(t);return ce(e,"internal-error"),ce(typeof e.exp<"u","internal-error"),ce(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lc(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ir&&m6(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function m6({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p6{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ay{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=uc(this.lastLoginAt),this.creationTime=uc(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ch(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Lc(t,Ah(e,{idToken:n}));ce(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?NA(s.providerUserInfo):[],o=y6(t.providerData,i),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=l?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function g6(t){const e=nt(t);await Ch(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function y6(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function NA(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v6(t,e){const n=await SA(t,{},async()=>{const r=au({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await IA(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&il(t.emulatorConfig.host)&&(c.credentials="include"),bA.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function x6(t,e){return al(t,"POST","/v2/accounts:revokeToken",px(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ce(e.idToken,"internal-error"),ce(typeof e.idToken<"u","internal-error"),ce(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):LE(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){ce(e.length!==0,"internal-error");const n=LE(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(ce(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await v6(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ua;return r&&(ce(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(ce(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(ce(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ua,this.toJSON())}_performRefresh(){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _s(t,e){ce(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new p6(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ay(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Lc(this,this.stsTokenManager.getToken(this.auth,e));return ce(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return f6(this,e)}reload(){return g6(this)}_assign(e){this!==e&&(ce(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){ce(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ch(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Kn(this.auth.app))return Promise.reject(Zi(this.auth));const e=await this.getIdToken();return await Lc(this,h6(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:y,providerData:b,stsTokenManager:v}=n;ce(f&&v,e,"internal-error");const _=ua.fromJSON(this.name,v);ce(typeof f=="string",e,"internal-error"),_s(r,e.name),_s(s,e.name),ce(typeof m=="boolean",e,"internal-error"),ce(typeof y=="boolean",e,"internal-error"),_s(i,e.name),_s(o,e.name),_s(l,e.name),_s(c,e.name),_s(d,e.name),_s(h,e.name);const E=new Qn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:y,photoURL:o,phoneNumber:i,tenantId:l,stsTokenManager:_,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(E.providerData=b.map(x=>({...x}))),c&&(E._redirectEventId=c),E}static async _fromIdTokenResponse(e,n,r=!1){const s=new ua;s.updateFromServerResponse(n);const i=new Qn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Ch(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];ce(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?NA(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ua;l.updateFromIdToken(r);const c=new Qn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new ay(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=new Map;function Gr(t){os(t instanceof Function,"Expected a class definition");let e=VE.get(t);return e?(os(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,VE.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}AA.type="NONE";const FE=AA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dd(t,e,n){return`firebase:${t}:${e}:${n}`}class da{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Dd(this.userKey,s.apiKey,i),this.fullPersistenceKey=Dd("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ah(this.auth,{idToken:e}).catch(()=>{});return n?Qn._fromGetAccountInfoResponse(this.auth,n,e):null}return Qn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new da(Gr(FE),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Gr(FE);const o=Dd(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await Ah(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Qn._fromGetAccountInfoResponse(e,m,h)}else f=Qn._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new da(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new da(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UE(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jA(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(CA(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(DA(e))return"Blackberry";if(OA(e))return"Webos";if(RA(e))return"Safari";if((e.includes("chrome/")||PA(e))&&!e.includes("edge/"))return"Chrome";if(kA(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function CA(t=Ut()){return/firefox\//i.test(t)}function RA(t=Ut()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function PA(t=Ut()){return/crios\//i.test(t)}function jA(t=Ut()){return/iemobile/i.test(t)}function kA(t=Ut()){return/android/i.test(t)}function DA(t=Ut()){return/blackberry/i.test(t)}function OA(t=Ut()){return/webos/i.test(t)}function yx(t=Ut()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function w6(t=Ut()){var e;return yx(t)&&!!((e=window.navigator)!=null&&e.standalone)}function _6(){return fF()&&document.documentMode===10}function MA(t=Ut()){return yx(t)||kA(t)||OA(t)||DA(t)||/windows phone/i.test(t)||jA(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LA(t,e=[]){let n;switch(t){case"Browser":n=UE(Ut());break;case"Worker":n=`${UE(Ut())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ol}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E6{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T6(t,e={}){return al(t,"GET","/v2/passwordPolicy",px(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b6=6;class S6{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??b6,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I6{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $E(this),this.idTokenSubscription=new $E(this),this.beforeStateQueue=new E6(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=TA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await da.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ah(this,{idToken:e}),r=await Qn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Kn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ce(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ch(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=o6()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Kn(this.app))return Promise.reject(Zi(this));const n=e?nt(e):null;return n&&ce(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&ce(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Kn(this.app)?Promise.reject(Zi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Kn(this.app)?Promise.reject(Zi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await T6(this),n=new S6(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new To("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await x6(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gr(e)||this._popupRedirectResolver;ce(n,this,"argument-error"),this.redirectPersistenceManager=await da.create(this,[Gr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(ce(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ce(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=LA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Kn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&n6(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function jf(t){return nt(t)}class $E{constructor(e){this.auth=e,this.observer=null,this.addObserver=wF(n=>this.observer=n)}get next(){return ce(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vx={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function N6(t){vx=t}function A6(t){return vx.loadJS(t)}function C6(){return vx.gapiScript}function R6(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P6(t,e){const n=bo(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(di(i,e??{}))return s;Cr(s,"already-initialized")}return n.initialize({options:e})}function j6(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function k6(t,e,n){const r=jf(t);ce(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=VA(e),{host:o,port:l}=D6(e),c=l===null?"":`:${l}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){ce(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),ce(di(d,r.config.emulator)&&di(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,il(o)?(BN(`${i}//${o}${c}`),HN("Auth",!0)):O6()}function VA(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function D6(t){const e=VA(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:zE(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:zE(o)}}}function zE(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function O6(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return qr("not implemented")}_getIdTokenResponse(e){return qr("not implemented")}_linkToIdToken(e,n){return qr("not implemented")}_getReauthenticationResolver(e){return qr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ha(t,e){return u6(t,"POST","/v1/accounts:signInWithIdp",px(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M6="http://localhost";class ho extends FA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ho(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Cr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new ho(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ha(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ha(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ha(e,n)}buildRequest(){const e={requestUri:M6,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=au(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cu extends xx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs extends cu{constructor(){super("facebook.com")}static credential(e){return ho._fromParams({providerId:Cs.PROVIDER_ID,signInMethod:Cs.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cs.credentialFromTaggedObject(e)}static credentialFromError(e){return Cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cs.credential(e.oauthAccessToken)}catch{return null}}}Cs.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cs.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $r extends cu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ho._fromParams({providerId:$r.PROVIDER_ID,signInMethod:$r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return $r.credentialFromTaggedObject(e)}static credentialFromError(e){return $r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return $r.credential(n,r)}catch{return null}}}$r.GOOGLE_SIGN_IN_METHOD="google.com";$r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rs extends cu{constructor(){super("github.com")}static credential(e){return ho._fromParams({providerId:Rs.PROVIDER_ID,signInMethod:Rs.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rs.credentialFromTaggedObject(e)}static credentialFromError(e){return Rs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rs.credential(e.oauthAccessToken)}catch{return null}}}Rs.GITHUB_SIGN_IN_METHOD="github.com";Rs.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends cu{constructor(){super("twitter.com")}static credential(e,n){return ho._fromParams({providerId:Ps.PROVIDER_ID,signInMethod:Ps.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ps.credentialFromTaggedObject(e)}static credentialFromError(e){return Ps.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ps.credential(n,r)}catch{return null}}}Ps.TWITTER_SIGN_IN_METHOD="twitter.com";Ps.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Qn._fromIdTokenResponse(e,r,s),o=BE(r);return new Ba({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=BE(r);return new Ba({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function BE(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rh extends ir{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Rh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Rh(e,n,r,s)}}function UA(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Rh._fromErrorAndOperation(t,i,e,r):i})}async function L6(t,e,n=!1){const r=await Lc(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ba._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V6(t,e,n=!1){const{auth:r}=t;if(Kn(r.app))return Promise.reject(Zi(r));const s="reauthenticate";try{const i=await Lc(t,UA(r,s,e,t),n);ce(i.idToken,r,"internal-error");const o=gx(i.idToken);ce(o,r,"internal-error");const{sub:l}=o;return ce(t.uid===l,r,"user-mismatch"),Ba._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Cr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F6(t,e,n=!1){if(Kn(t.app))return Promise.reject(Zi(t));const r="signIn",s=await UA(t,r,e),i=await Ba._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function U6(t,e,n,r){return nt(t).onIdTokenChanged(e,n,r)}function $6(t,e,n){return nt(t).beforeAuthStateChanged(e,n)}function z6(t,e,n,r){return nt(t).onAuthStateChanged(e,n,r)}function B6(t){return nt(t).signOut()}const Ph="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $A{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Ph,"1"),this.storage.removeItem(Ph),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H6=1e3,W6=10;class zA extends $A{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=MA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);_6()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,W6):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},H6)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}zA.type="LOCAL";const q6=zA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA extends $A{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}BA.type="SESSION";const HA=BA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G6(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kf{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new kf(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await G6(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}kf.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wx(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K6{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=wx("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _r(){return window}function Q6(t){_r().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WA(){return typeof _r().WorkerGlobalScope<"u"&&typeof _r().importScripts=="function"}async function Y6(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function X6(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function J6(){return WA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA="firebaseLocalStorageDb",Z6=1,jh="firebaseLocalStorage",GA="fbase_key";class uu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Df(t,e){return t.transaction([jh],e?"readwrite":"readonly").objectStore(jh)}function eU(){const t=indexedDB.deleteDatabase(qA);return new uu(t).toPromise()}function ly(){const t=indexedDB.open(qA,Z6);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(jh,{keyPath:GA})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(jh)?e(r):(r.close(),await eU(),e(await ly()))})})}async function HE(t,e,n){const r=Df(t,!0).put({[GA]:e,value:n});return new uu(r).toPromise()}async function tU(t,e){const n=Df(t,!1).get(e),r=await new uu(n).toPromise();return r===void 0?null:r.value}function WE(t,e){const n=Df(t,!0).delete(e);return new uu(n).toPromise()}const nU=800,rU=3;class KA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ly(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>rU)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return WA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=kf._getInstance(J6()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await Y6(),!this.activeServiceWorker)return;this.sender=new K6(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||X6()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ly();return await HE(e,Ph,"1"),await WE(e,Ph),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>HE(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>tU(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>WE(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Df(s,!1).getAll();return new uu(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),nU)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}KA.type="LOCAL";const sU=KA;new lu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){return e?Gr(e):(ce(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _x extends FA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ha(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ha(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ha(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iU(t){return F6(t.auth,new _x(t),t.bypassAuthState)}function oU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),V6(n,new _x(t),t.bypassAuthState)}async function aU(t){const{auth:e,user:n}=t;return ce(n,e,"internal-error"),L6(n,new _x(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iU;case"linkViaPopup":case"linkViaRedirect":return aU;case"reauthViaPopup":case"reauthViaRedirect":return oU;default:Cr(this.auth,"internal-error")}}resolve(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){os(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lU=new lu(2e3,1e4);async function cU(t,e,n){if(Kn(t.app))return Promise.reject(Zn(t,"operation-not-supported-in-this-environment"));const r=jf(t);r6(t,e,xx);const s=QA(r,n);return new zi(r,"signInViaPopup",e,s).executeNotNull()}class zi extends YA{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,zi.currentPopupAction&&zi.currentPopupAction.cancel(),zi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ce(e,this.auth,"internal-error"),e}async onExecution(){os(this.filter.length===1,"Popup operations only handle one event");const e=wx();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Zn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Zn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Zn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lU.get())};e()}}zi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uU="pendingRedirect",Od=new Map;class dU extends YA{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Od.get(this.auth._key());if(!e){try{const r=await hU(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Od.set(this.auth._key(),e)}return this.bypassAuthState||Od.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hU(t,e){const n=pU(e),r=mU(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function fU(t,e){Od.set(t._key(),e)}function mU(t){return Gr(t._redirectPersistence)}function pU(t){return Dd(uU,t.config.apiKey,t.name)}async function gU(t,e,n=!1){if(Kn(t.app))return Promise.reject(Zi(t));const r=jf(t),s=QA(r,e),o=await new dU(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yU=10*60*1e3;class vU{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!xU(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!XA(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Zn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=yU&&this.cachedEventUids.clear(),this.cachedEventUids.has(qE(e))}saveEventToCache(e){this.cachedEventUids.add(qE(e)),this.lastProcessedEventTime=Date.now()}}function qE(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function XA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function xU(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return XA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wU(t,e={}){return al(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _U=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,EU=/^https?/;async function TU(t){if(t.config.emulator)return;const{authorizedDomains:e}=await wU(t);for(const n of e)try{if(bU(n))return}catch{}Cr(t,"unauthorized-domain")}function bU(t){const e=oy(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!EU.test(n))return!1;if(_U.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SU=new lu(3e4,6e4);function GE(){const t=_r().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function IU(t){return new Promise((e,n)=>{var s,i,o;function r(){GE(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{GE(),n(Zn(t,"network-request-failed"))},timeout:SU.get()})}if((i=(s=_r().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=_r().gapi)!=null&&o.load)r();else{const l=R6("iframefcb");return _r()[l]=()=>{gapi.load?r():n(Zn(t,"network-request-failed"))},A6(`${C6()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Md=null,e})}let Md=null;function NU(t){return Md=Md||IU(t),Md}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AU=new lu(5e3,15e3),CU="__/auth/iframe",RU="emulator/auth/iframe",PU={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},jU=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function kU(t){const e=t.config;ce(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?mx(e,RU):`https://${t.config.authDomain}/${CU}`,r={apiKey:e.apiKey,appName:t.name,v:ol},s=jU.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${au(r).slice(1)}`}async function DU(t){const e=await NU(t),n=_r().gapi;return ce(n,t,"internal-error"),e.open({where:document.body,url:kU(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:PU,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=Zn(t,"network-request-failed"),l=_r().setTimeout(()=>{i(o)},AU.get());function c(){_r().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OU={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MU=500,LU=600,VU="_blank",FU="http://localhost";class KE{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function UU(t,e,n,r=MU,s=LU){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c={...OU,width:r.toString(),height:s.toString(),top:i,left:o},d=Ut().toLowerCase();n&&(l=PA(d)?VU:n),CA(d)&&(e=e||FU,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[y,b])=>`${m}${y}=${b},`,"");if(w6(d)&&l!=="_self")return $U(e||"",l),new KE(null);const f=window.open(e||"",l,h);ce(f,t,"popup-blocked");try{f.focus()}catch{}return new KE(f)}function $U(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zU="__/auth/handler",BU="emulator/auth/handler",HU=encodeURIComponent("fac");async function QE(t,e,n,r,s,i){ce(t.config.authDomain,t,"auth-domain-config-required"),ce(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ol,eventId:s};if(e instanceof xx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",xF(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries({}))o[h]=f}if(e instanceof cu){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const c=await t._getAppCheckToken(),d=c?`#${HU}=${encodeURIComponent(c)}`:"";return`${WU(t)}?${au(l).slice(1)}${d}`}function WU({config:t}){return t.emulator?mx(t,BU):`https://${t.authDomain}/${zU}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="webStorageSupport";class qU{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=HA,this._completeRedirectFn=gU,this._overrideRedirectResult=fU}async _openPopup(e,n,r,s){var o;os((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await QE(e,n,r,oy(),s);return UU(e,i,wx())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await QE(e,n,r,oy(),s);return Q6(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(os(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DU(e),r=new vU(e);return n.register("authEvent",s=>(ce(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(wp,{type:wp},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[wp];i!==void 0&&n(!!i),Cr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TU(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return MA()||RA()||yx()}}const GU=qU;var YE="@firebase/auth",XE="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KU{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){ce(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function YU(t){Ar(new rr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;ce(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:LA(t)},d=new I6(r,s,i,c);return j6(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ar(new rr("auth-internal",e=>{const n=jf(e.getProvider("auth").getImmediate());return(r=>new KU(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),kn(YE,XE,QU(t)),kn(YE,XE,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XU=5*60,JU=zN("authIdTokenMaxAge")||XU;let JE=null;const ZU=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>JU)return;const s=n==null?void 0:n.token;JE!==s&&(JE=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function e9(t=ox()){const e=bo(t,"auth");if(e.isInitialized())return e.getImmediate();const n=P6(t,{popupRedirectResolver:GU,persistence:[sU,q6,HA]}),r=zN("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=ZU(i.toString());$6(n,o,()=>o(n.currentUser)),U6(n,l=>o(l))}}const s=UN("auth");return s&&k6(n,`http://${s}`),n}function t9(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}N6({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=Zn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",t9().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});YU("Browser");var ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ri,JA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,I){function N(){}N.prototype=I.prototype,T.F=I.prototype,T.prototype=new N,T.prototype.constructor=T,T.D=function(C,j,k){for(var P=Array(arguments.length-2),B=2;B<arguments.length;B++)P[B-2]=arguments[B];return I.prototype[j].apply(C,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,I,N){N||(N=0);const C=Array(16);if(typeof I=="string")for(var j=0;j<16;++j)C[j]=I.charCodeAt(N++)|I.charCodeAt(N++)<<8|I.charCodeAt(N++)<<16|I.charCodeAt(N++)<<24;else for(j=0;j<16;++j)C[j]=I[N++]|I[N++]<<8|I[N++]<<16|I[N++]<<24;I=T.g[0],N=T.g[1],j=T.g[2];let k=T.g[3],P;P=I+(k^N&(j^k))+C[0]+3614090360&4294967295,I=N+(P<<7&4294967295|P>>>25),P=k+(j^I&(N^j))+C[1]+3905402710&4294967295,k=I+(P<<12&4294967295|P>>>20),P=j+(N^k&(I^N))+C[2]+606105819&4294967295,j=k+(P<<17&4294967295|P>>>15),P=N+(I^j&(k^I))+C[3]+3250441966&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(k^N&(j^k))+C[4]+4118548399&4294967295,I=N+(P<<7&4294967295|P>>>25),P=k+(j^I&(N^j))+C[5]+1200080426&4294967295,k=I+(P<<12&4294967295|P>>>20),P=j+(N^k&(I^N))+C[6]+2821735955&4294967295,j=k+(P<<17&4294967295|P>>>15),P=N+(I^j&(k^I))+C[7]+4249261313&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(k^N&(j^k))+C[8]+1770035416&4294967295,I=N+(P<<7&4294967295|P>>>25),P=k+(j^I&(N^j))+C[9]+2336552879&4294967295,k=I+(P<<12&4294967295|P>>>20),P=j+(N^k&(I^N))+C[10]+4294925233&4294967295,j=k+(P<<17&4294967295|P>>>15),P=N+(I^j&(k^I))+C[11]+2304563134&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(k^N&(j^k))+C[12]+1804603682&4294967295,I=N+(P<<7&4294967295|P>>>25),P=k+(j^I&(N^j))+C[13]+4254626195&4294967295,k=I+(P<<12&4294967295|P>>>20),P=j+(N^k&(I^N))+C[14]+2792965006&4294967295,j=k+(P<<17&4294967295|P>>>15),P=N+(I^j&(k^I))+C[15]+1236535329&4294967295,N=j+(P<<22&4294967295|P>>>10),P=I+(j^k&(N^j))+C[1]+4129170786&4294967295,I=N+(P<<5&4294967295|P>>>27),P=k+(N^j&(I^N))+C[6]+3225465664&4294967295,k=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(k^I))+C[11]+643717713&4294967295,j=k+(P<<14&4294967295|P>>>18),P=N+(k^I&(j^k))+C[0]+3921069994&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^k&(N^j))+C[5]+3593408605&4294967295,I=N+(P<<5&4294967295|P>>>27),P=k+(N^j&(I^N))+C[10]+38016083&4294967295,k=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(k^I))+C[15]+3634488961&4294967295,j=k+(P<<14&4294967295|P>>>18),P=N+(k^I&(j^k))+C[4]+3889429448&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^k&(N^j))+C[9]+568446438&4294967295,I=N+(P<<5&4294967295|P>>>27),P=k+(N^j&(I^N))+C[14]+3275163606&4294967295,k=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(k^I))+C[3]+4107603335&4294967295,j=k+(P<<14&4294967295|P>>>18),P=N+(k^I&(j^k))+C[8]+1163531501&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(j^k&(N^j))+C[13]+2850285829&4294967295,I=N+(P<<5&4294967295|P>>>27),P=k+(N^j&(I^N))+C[2]+4243563512&4294967295,k=I+(P<<9&4294967295|P>>>23),P=j+(I^N&(k^I))+C[7]+1735328473&4294967295,j=k+(P<<14&4294967295|P>>>18),P=N+(k^I&(j^k))+C[12]+2368359562&4294967295,N=j+(P<<20&4294967295|P>>>12),P=I+(N^j^k)+C[5]+4294588738&4294967295,I=N+(P<<4&4294967295|P>>>28),P=k+(I^N^j)+C[8]+2272392833&4294967295,k=I+(P<<11&4294967295|P>>>21),P=j+(k^I^N)+C[11]+1839030562&4294967295,j=k+(P<<16&4294967295|P>>>16),P=N+(j^k^I)+C[14]+4259657740&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^k)+C[1]+2763975236&4294967295,I=N+(P<<4&4294967295|P>>>28),P=k+(I^N^j)+C[4]+1272893353&4294967295,k=I+(P<<11&4294967295|P>>>21),P=j+(k^I^N)+C[7]+4139469664&4294967295,j=k+(P<<16&4294967295|P>>>16),P=N+(j^k^I)+C[10]+3200236656&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^k)+C[13]+681279174&4294967295,I=N+(P<<4&4294967295|P>>>28),P=k+(I^N^j)+C[0]+3936430074&4294967295,k=I+(P<<11&4294967295|P>>>21),P=j+(k^I^N)+C[3]+3572445317&4294967295,j=k+(P<<16&4294967295|P>>>16),P=N+(j^k^I)+C[6]+76029189&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(N^j^k)+C[9]+3654602809&4294967295,I=N+(P<<4&4294967295|P>>>28),P=k+(I^N^j)+C[12]+3873151461&4294967295,k=I+(P<<11&4294967295|P>>>21),P=j+(k^I^N)+C[15]+530742520&4294967295,j=k+(P<<16&4294967295|P>>>16),P=N+(j^k^I)+C[2]+3299628645&4294967295,N=j+(P<<23&4294967295|P>>>9),P=I+(j^(N|~k))+C[0]+4096336452&4294967295,I=N+(P<<6&4294967295|P>>>26),P=k+(N^(I|~j))+C[7]+1126891415&4294967295,k=I+(P<<10&4294967295|P>>>22),P=j+(I^(k|~N))+C[14]+2878612391&4294967295,j=k+(P<<15&4294967295|P>>>17),P=N+(k^(j|~I))+C[5]+4237533241&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~k))+C[12]+1700485571&4294967295,I=N+(P<<6&4294967295|P>>>26),P=k+(N^(I|~j))+C[3]+2399980690&4294967295,k=I+(P<<10&4294967295|P>>>22),P=j+(I^(k|~N))+C[10]+4293915773&4294967295,j=k+(P<<15&4294967295|P>>>17),P=N+(k^(j|~I))+C[1]+2240044497&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~k))+C[8]+1873313359&4294967295,I=N+(P<<6&4294967295|P>>>26),P=k+(N^(I|~j))+C[15]+4264355552&4294967295,k=I+(P<<10&4294967295|P>>>22),P=j+(I^(k|~N))+C[6]+2734768916&4294967295,j=k+(P<<15&4294967295|P>>>17),P=N+(k^(j|~I))+C[13]+1309151649&4294967295,N=j+(P<<21&4294967295|P>>>11),P=I+(j^(N|~k))+C[4]+4149444226&4294967295,I=N+(P<<6&4294967295|P>>>26),P=k+(N^(I|~j))+C[11]+3174756917&4294967295,k=I+(P<<10&4294967295|P>>>22),P=j+(I^(k|~N))+C[2]+718787259&4294967295,j=k+(P<<15&4294967295|P>>>17),P=N+(k^(j|~I))+C[9]+3951481745&4294967295,T.g[0]=T.g[0]+I&4294967295,T.g[1]=T.g[1]+(j+(P<<21&4294967295|P>>>11))&4294967295,T.g[2]=T.g[2]+j&4294967295,T.g[3]=T.g[3]+k&4294967295}r.prototype.v=function(T,I){I===void 0&&(I=T.length);const N=I-this.blockSize,C=this.C;let j=this.h,k=0;for(;k<I;){if(j==0)for(;k<=N;)s(this,T,k),k+=this.blockSize;if(typeof T=="string"){for(;k<I;)if(C[j++]=T.charCodeAt(k++),j==this.blockSize){s(this,C),j=0;break}}else for(;k<I;)if(C[j++]=T[k++],j==this.blockSize){s(this,C),j=0;break}}this.h=j,this.o+=I},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var I=1;I<T.length-8;++I)T[I]=0;I=this.o*8;for(var N=T.length-8;N<T.length;++N)T[N]=I&255,I/=256;for(this.v(T),T=Array(16),I=0,N=0;N<4;++N)for(let C=0;C<32;C+=8)T[I++]=this.g[N]>>>C&255;return T};function i(T,I){var N=l;return Object.prototype.hasOwnProperty.call(N,T)?N[T]:N[T]=I(T)}function o(T,I){this.h=I;const N=[];let C=!0;for(let j=T.length-1;j>=0;j--){const k=T[j]|0;C&&k==I||(N[j]=k,C=!1)}this.g=N}var l={};function c(T){return-128<=T&&T<128?i(T,function(I){return new o([I|0],I<0?-1:0)}):new o([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return _(d(-T));const I=[];let N=1;for(let C=0;T>=N;C++)I[C]=T/N|0,N*=4294967296;return new o(I,0)}function h(T,I){if(T.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(T.charAt(0)=="-")return _(h(T.substring(1),I));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const N=d(Math.pow(I,8));let C=f;for(let k=0;k<T.length;k+=8){var j=Math.min(8,T.length-k);const P=parseInt(T.substring(k,k+j),I);j<8?(j=d(Math.pow(I,j)),C=C.j(j).add(d(P))):(C=C.j(N),C=C.add(d(P)))}return C}var f=c(0),m=c(1),y=c(16777216);t=o.prototype,t.m=function(){if(v(this))return-_(this).m();let T=0,I=1;for(let N=0;N<this.g.length;N++){const C=this.i(N);T+=(C>=0?C:4294967296+C)*I,I*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(v(this))return"-"+_(this).toString(T);const I=d(Math.pow(T,6));var N=this;let C="";for(;;){const j=R(N,I).g;N=E(N,j.j(I));let k=((N.g.length>0?N.g[0]:N.h)>>>0).toString(T);if(N=j,b(N))return k+C;for(;k.length<6;)k="0"+k;C=k+C}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let I=0;I<T.g.length;I++)if(T.g[I]!=0)return!1;return!0}function v(T){return T.h==-1}t.l=function(T){return T=E(this,T),v(T)?-1:b(T)?0:1};function _(T){const I=T.g.length,N=[];for(let C=0;C<I;C++)N[C]=~T.g[C];return new o(N,~T.h).add(m)}t.abs=function(){return v(this)?_(this):this},t.add=function(T){const I=Math.max(this.g.length,T.g.length),N=[];let C=0;for(let j=0;j<=I;j++){let k=C+(this.i(j)&65535)+(T.i(j)&65535),P=(k>>>16)+(this.i(j)>>>16)+(T.i(j)>>>16);C=P>>>16,k&=65535,P&=65535,N[j]=P<<16|k}return new o(N,N[N.length-1]&-2147483648?-1:0)};function E(T,I){return T.add(_(I))}t.j=function(T){if(b(this)||b(T))return f;if(v(this))return v(T)?_(this).j(_(T)):_(_(this).j(T));if(v(T))return _(this.j(_(T)));if(this.l(y)<0&&T.l(y)<0)return d(this.m()*T.m());const I=this.g.length+T.g.length,N=[];for(var C=0;C<2*I;C++)N[C]=0;for(C=0;C<this.g.length;C++)for(let j=0;j<T.g.length;j++){const k=this.i(C)>>>16,P=this.i(C)&65535,B=T.i(j)>>>16,ae=T.i(j)&65535;N[2*C+2*j]+=P*ae,x(N,2*C+2*j),N[2*C+2*j+1]+=k*ae,x(N,2*C+2*j+1),N[2*C+2*j+1]+=P*B,x(N,2*C+2*j+1),N[2*C+2*j+2]+=k*B,x(N,2*C+2*j+2)}for(T=0;T<I;T++)N[T]=N[2*T+1]<<16|N[2*T];for(T=I;T<2*I;T++)N[T]=0;return new o(N,0)};function x(T,I){for(;(T[I]&65535)!=T[I];)T[I+1]+=T[I]>>>16,T[I]&=65535,I++}function S(T,I){this.g=T,this.h=I}function R(T,I){if(b(I))throw Error("division by zero");if(b(T))return new S(f,f);if(v(T))return I=R(_(T),I),new S(_(I.g),_(I.h));if(v(I))return I=R(T,_(I)),new S(_(I.g),I.h);if(T.g.length>30){if(v(T)||v(I))throw Error("slowDivide_ only works with positive integers.");for(var N=m,C=I;C.l(T)<=0;)N=D(N),C=D(C);var j=M(N,1),k=M(C,1);for(C=M(C,2),N=M(N,2);!b(C);){var P=k.add(C);P.l(T)<=0&&(j=j.add(N),k=P),C=M(C,1),N=M(N,1)}return I=E(T,j.j(I)),new S(j,I)}for(j=f;T.l(I)>=0;){for(N=Math.max(1,Math.floor(T.m()/I.m())),C=Math.ceil(Math.log(N)/Math.LN2),C=C<=48?1:Math.pow(2,C-48),k=d(N),P=k.j(I);v(P)||P.l(T)>0;)N-=C,k=d(N),P=k.j(I);b(k)&&(k=m),j=j.add(k),T=E(T,P)}return new S(j,T)}t.B=function(T){return R(this,T).h},t.and=function(T){const I=Math.max(this.g.length,T.g.length),N=[];for(let C=0;C<I;C++)N[C]=this.i(C)&T.i(C);return new o(N,this.h&T.h)},t.or=function(T){const I=Math.max(this.g.length,T.g.length),N=[];for(let C=0;C<I;C++)N[C]=this.i(C)|T.i(C);return new o(N,this.h|T.h)},t.xor=function(T){const I=Math.max(this.g.length,T.g.length),N=[];for(let C=0;C<I;C++)N[C]=this.i(C)^T.i(C);return new o(N,this.h^T.h)};function D(T){const I=T.g.length+1,N=[];for(let C=0;C<I;C++)N[C]=T.i(C)<<1|T.i(C-1)>>>31;return new o(N,T.h)}function M(T,I){const N=I>>5;I%=32;const C=T.g.length-N,j=[];for(let k=0;k<C;k++)j[k]=I>0?T.i(k+N)>>>I|T.i(k+N+1)<<32-I:T.i(k+N);return new o(j,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,JA=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ri=o}).apply(typeof ZE<"u"?ZE:typeof self<"u"?self:typeof window<"u"?window:{});var od=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZA,Gl,eC,Ld,cy,tC,nC,rC;(function(){var t,e=Object.defineProperty;function n(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof od=="object"&&od];for(var g=0;g<u.length;++g){var w=u[g];if(w&&w.Math==Math)return w}throw Error("Cannot find global object")}var r=n(this);function s(u,g){if(g)e:{var w=r;u=u.split(".");for(var A=0;A<u.length-1;A++){var L=u[A];if(!(L in w))break e;w=w[L]}u=u[u.length-1],A=w[u],g=g(A),g!=A&&g!=null&&e(w,u,{configurable:!0,writable:!0,value:g})}}s("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(u){return u||function(g){var w=[],A;for(A in g)Object.prototype.hasOwnProperty.call(g,A)&&w.push([A,g[A]]);return w}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function l(u){var g=typeof u;return g=="object"&&u!=null||g=="function"}function c(u,g,w){return u.call.apply(u.bind,arguments)}function d(u,g,w){return d=c,d.apply(null,arguments)}function h(u,g){var w=Array.prototype.slice.call(arguments,1);return function(){var A=w.slice();return A.push.apply(A,arguments),u.apply(this,A)}}function f(u,g){function w(){}w.prototype=g.prototype,u.Z=g.prototype,u.prototype=new w,u.prototype.constructor=u,u.Ob=function(A,L,V){for(var q=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)q[pe-2]=arguments[pe];return g.prototype[L].apply(A,q)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function y(u){const g=u.length;if(g>0){const w=Array(g);for(let A=0;A<g;A++)w[A]=u[A];return w}return[]}function b(u,g){for(let A=1;A<arguments.length;A++){const L=arguments[A];var w=typeof L;if(w=w!="object"?w:L?Array.isArray(L)?"array":w:"null",w=="array"||w=="object"&&typeof L.length=="number"){w=u.length||0;const V=L.length||0;u.length=w+V;for(let q=0;q<V;q++)u[w+q]=L[q]}else u.push(L)}}class v{constructor(g,w){this.i=g,this.j=w,this.h=0,this.g=null}get(){let g;return this.h>0?(this.h--,g=this.g,this.g=g.next,g.next=null):g=this.i(),g}}function _(u){o.setTimeout(()=>{throw u},0)}function E(){var u=T;let g=null;return u.g&&(g=u.g,u.g=u.g.next,u.g||(u.h=null),g.next=null),g}class x{constructor(){this.h=this.g=null}add(g,w){const A=S.get();A.set(g,w),this.h?this.h.next=A:this.g=A,this.h=A}}var S=new v(()=>new R,u=>u.reset());class R{constructor(){this.next=this.g=this.h=null}set(g,w){this.h=g,this.g=w,this.next=null}reset(){this.next=this.g=this.h=null}}let D,M=!1,T=new x,I=()=>{const u=Promise.resolve(void 0);D=()=>{u.then(N)}};function N(){for(var u;u=E();){try{u.h.call(u.g)}catch(w){_(w)}var g=S;g.j(u),g.h<100&&(g.h++,u.next=g.g,g.g=u)}M=!1}function C(){this.u=this.u,this.C=this.C}C.prototype.u=!1,C.prototype.dispose=function(){this.u||(this.u=!0,this.N())},C.prototype[Symbol.dispose]=function(){this.dispose()},C.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,g){this.type=u,this.g=this.target=g,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var u=!1,g=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const w=()=>{};o.addEventListener("test",w,g),o.removeEventListener("test",w,g)}catch{}return u}();function P(u){return/^[\s\xa0]*$/.test(u)}function B(u,g){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,g)}f(B,j),B.prototype.init=function(u,g){const w=this.type=u.type,A=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=g,g=u.relatedTarget,g||(w=="mouseover"?g=u.fromElement:w=="mouseout"&&(g=u.toElement)),this.relatedTarget=g,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&B.Z.h.call(this)},B.prototype.h=function(){B.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ae="closure_listenable_"+(Math.random()*1e6|0),X=0;function he(u,g,w,A,L){this.listener=u,this.proxy=null,this.src=g,this.type=w,this.capture=!!A,this.ha=L,this.key=++X,this.da=this.fa=!1}function U(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function H(u,g,w){for(const A in u)g.call(w,u[A],A,u)}function J(u,g){for(const w in u)g.call(void 0,u[w],w,u)}function ue(u){const g={};for(const w in u)g[w]=u[w];return g}const Re="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function wt(u,g){let w,A;for(let L=1;L<arguments.length;L++){A=arguments[L];for(w in A)u[w]=A[w];for(let V=0;V<Re.length;V++)w=Re[V],Object.prototype.hasOwnProperty.call(A,w)&&(u[w]=A[w])}}function qe(u){this.src=u,this.g={},this.h=0}qe.prototype.add=function(u,g,w,A,L){const V=u.toString();u=this.g[V],u||(u=this.g[V]=[],this.h++);const q=ft(u,g,A,L);return q>-1?(g=u[q],w||(g.fa=!1)):(g=new he(g,this.src,V,!!A,L),g.fa=w,u.push(g)),g};function Qt(u,g){const w=g.type;if(w in u.g){var A=u.g[w],L=Array.prototype.indexOf.call(A,g,void 0),V;(V=L>=0)&&Array.prototype.splice.call(A,L,1),V&&(U(g),u.g[w].length==0&&(delete u.g[w],u.h--))}}function ft(u,g,w,A){for(let L=0;L<u.length;++L){const V=u[L];if(!V.da&&V.listener==g&&V.capture==!!w&&V.ha==A)return L}return-1}var re="closure_lm_"+(Math.random()*1e6|0),Oe={};function mt(u,g,w,A,L){if(Array.isArray(g)){for(let V=0;V<g.length;V++)mt(u,g[V],w,A,L);return null}return w=Eu(w),u&&u[ae]?u.J(g,w,l(A)?!!A.capture:!!A,L):Le(u,g,w,!1,A,L)}function Le(u,g,w,A,L,V){if(!g)throw Error("Invalid event type");const q=l(L)?!!L.capture:!!L;let pe=Dr(u);if(pe||(u[re]=pe=new qe(u)),w=pe.add(g,w,A,q,V),w.proxy)return w;if(A=je(),w.proxy=A,A.src=u,A.listener=w,u.addEventListener)k||(L=q),L===void 0&&(L=!1),u.addEventListener(g.toString(),A,L);else if(u.attachEvent)u.attachEvent(un(g.toString()),A);else if(u.addListener&&u.removeListener)u.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return w}function je(){function u(w){return g.call(u.src,u.listener,w)}const g=Ni;return u}function Pe(u,g,w,A,L){if(Array.isArray(g))for(var V=0;V<g.length;V++)Pe(u,g[V],w,A,L);else A=l(A)?!!A.capture:!!A,w=Eu(w),u&&u[ae]?(u=u.i,V=String(g).toString(),V in u.g&&(g=u.g[V],w=ft(g,w,A,L),w>-1&&(U(g[w]),Array.prototype.splice.call(g,w,1),g.length==0&&(delete u.g[V],u.h--)))):u&&(u=Dr(u))&&(g=u.g[g.toString()],u=-1,g&&(u=ft(g,w,A,L)),(w=u>-1?g[u]:null)&&St(w))}function St(u){if(typeof u!="number"&&u&&!u.da){var g=u.src;if(g&&g[ae])Qt(g.i,u);else{var w=u.type,A=u.proxy;g.removeEventListener?g.removeEventListener(w,A,u.capture):g.detachEvent?g.detachEvent(un(w),A):g.addListener&&g.removeListener&&g.removeListener(A),(w=Dr(g))?(Qt(w,u),w.h==0&&(w.src=null,g[re]=null)):U(u)}}}function un(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function Ni(u,g){if(u.da)u=!0;else{g=new B(g,this);const w=u.listener,A=u.ha||u.src;u.fa&&St(u),u=w.call(A,g)}return u}function Dr(u){return u=u[re],u instanceof qe?u:null}var Or="__closure_events_fn_"+(Math.random()*1e9>>>0);function Eu(u){return typeof u=="function"?u:(u[Or]||(u[Or]=function(g){return u.handleEvent(g)}),u[Or])}function rt(){C.call(this),this.i=new qe(this),this.M=this,this.G=null}f(rt,C),rt.prototype[ae]=!0,rt.prototype.removeEventListener=function(u,g,w,A){Pe(this,u,g,w,A)};function $t(u,g){var w,A=u.G;if(A)for(w=[];A;A=A.G)w.push(A);if(u=u.M,A=g.type||g,typeof g=="string")g=new j(g,u);else if(g instanceof j)g.target=g.target||u;else{var L=g;g=new j(A,u),wt(g,L)}L=!0;let V,q;if(w)for(q=w.length-1;q>=0;q--)V=g.g=w[q],L=Tu(V,A,!0,g)&&L;if(V=g.g=u,L=Tu(V,A,!0,g)&&L,L=Tu(V,A,!1,g)&&L,w)for(q=0;q<w.length;q++)V=g.g=w[q],L=Tu(V,A,!1,g)&&L}rt.prototype.N=function(){if(rt.Z.N.call(this),this.i){var u=this.i;for(const g in u.g){const w=u.g[g];for(let A=0;A<w.length;A++)U(w[A]);delete u.g[g],u.h--}}this.G=null},rt.prototype.J=function(u,g,w,A){return this.i.add(String(u),g,!1,w,A)},rt.prototype.K=function(u,g,w,A){return this.i.add(String(u),g,!0,w,A)};function Tu(u,g,w,A){if(g=u.i.g[String(g)],!g)return!0;g=g.concat();let L=!0;for(let V=0;V<g.length;++V){const q=g[V];if(q&&!q.da&&q.capture==w){const pe=q.listener,pt=q.ha||q.src;q.fa&&Qt(u.i,q),L=pe.call(pt,A)!==!1&&L}}return L&&!A.defaultPrevented}function yk(u,g){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=d(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(g)>2147483647?-1:o.setTimeout(u,g||0)}function Rw(u){u.g=yk(()=>{u.g=null,u.i&&(u.i=!1,Rw(u))},u.l);const g=u.h;u.h=null,u.m.apply(null,g)}class vk extends C{constructor(g,w){super(),this.m=g,this.l=w,this.h=null,this.i=!1,this.g=null}j(g){this.h=arguments,this.g?this.i=!0:Rw(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ml(u){C.call(this),this.h=u,this.g={}}f(ml,C);var Pw=[];function jw(u){H(u.g,function(g,w){this.g.hasOwnProperty(w)&&St(g)},u),u.g={}}ml.prototype.N=function(){ml.Z.N.call(this),jw(this)},ml.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var fm=o.JSON.stringify,xk=o.JSON.parse,wk=class{stringify(u){return o.JSON.stringify(u,void 0)}parse(u){return o.JSON.parse(u,void 0)}};function kw(){}function Dw(){}var pl={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function mm(){j.call(this,"d")}f(mm,j);function pm(){j.call(this,"c")}f(pm,j);var Ai={},Ow=null;function bu(){return Ow=Ow||new rt}Ai.Ia="serverreachability";function Mw(u){j.call(this,Ai.Ia,u)}f(Mw,j);function gl(u){const g=bu();$t(g,new Mw(g))}Ai.STAT_EVENT="statevent";function Lw(u,g){j.call(this,Ai.STAT_EVENT,u),this.stat=g}f(Lw,j);function zt(u){const g=bu();$t(g,new Lw(g,u))}Ai.Ja="timingevent";function Vw(u,g){j.call(this,Ai.Ja,u),this.size=g}f(Vw,j);function yl(u,g){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){u()},g)}function vl(){this.g=!0}vl.prototype.ua=function(){this.g=!1};function _k(u,g,w,A,L,V){u.info(function(){if(u.g)if(V){var q="",pe=V.split("&");for(let Fe=0;Fe<pe.length;Fe++){var pt=pe[Fe].split("=");if(pt.length>1){const _t=pt[0];pt=pt[1];const lr=_t.split("_");q=lr.length>=2&&lr[1]=="type"?q+(_t+"="+pt+"&"):q+(_t+"=redacted&")}}}else q=null;else q=V;return"XMLHTTP REQ ("+A+") [attempt "+L+"]: "+g+`
`+w+`
`+q})}function Ek(u,g,w,A,L,V,q){u.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+L+"]: "+g+`
`+w+`
`+V+" "+q})}function Ro(u,g,w,A){u.info(function(){return"XMLHTTP TEXT ("+g+"): "+bk(u,w)+(A?" "+A:"")})}function Tk(u,g){u.info(function(){return"TIMEOUT: "+g})}vl.prototype.info=function(){};function bk(u,g){if(!u.g)return g;if(!g)return null;try{const V=JSON.parse(g);if(V){for(u=0;u<V.length;u++)if(Array.isArray(V[u])){var w=V[u];if(!(w.length<2)){var A=w[1];if(Array.isArray(A)&&!(A.length<1)){var L=A[0];if(L!="noop"&&L!="stop"&&L!="close")for(let q=1;q<A.length;q++)A[q]=""}}}}return fm(V)}catch{return g}}var Su={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Fw={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Uw;function gm(){}f(gm,kw),gm.prototype.g=function(){return new XMLHttpRequest},Uw=new gm;function xl(u){return encodeURIComponent(String(u))}function Sk(u){var g=1;u=u.split(":");const w=[];for(;g>0&&u.length;)w.push(u.shift()),g--;return u.length&&w.push(u.join(":")),w}function hs(u,g,w,A){this.j=u,this.i=g,this.l=w,this.S=A||1,this.V=new ml(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $w}function $w(){this.i=null,this.g="",this.h=!1}var zw={},ym={};function vm(u,g,w){u.M=1,u.A=Nu(ar(g)),u.u=w,u.R=!0,Bw(u,null)}function Bw(u,g){u.F=Date.now(),Iu(u),u.B=ar(u.A);var w=u.B,A=u.S;Array.isArray(A)||(A=[String(A)]),n0(w.i,"t",A),u.C=0,w=u.j.L,u.h=new $w,u.g=w0(u.j,w?g:null,!u.u),u.P>0&&(u.O=new vk(d(u.Y,u,u.g),u.P)),g=u.V,w=u.g,A=u.ba;var L="readystatechange";Array.isArray(L)||(L&&(Pw[0]=L.toString()),L=Pw);for(let V=0;V<L.length;V++){const q=mt(w,L[V],A||g.handleEvent,!1,g.h||g);if(!q)break;g.g[q.key]=q}g=u.J?ue(u.J):{},u.u?(u.v||(u.v="POST"),g["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,g)):(u.v="GET",u.g.ea(u.B,u.v,null,g)),gl(),_k(u.i,u.v,u.B,u.l,u.S,u.u)}hs.prototype.ba=function(u){u=u.target;const g=this.O;g&&ps(u)==3?g.j():this.Y(u)},hs.prototype.Y=function(u){try{if(u==this.g)e:{const pe=ps(this.g),pt=this.g.ya(),Fe=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||c0(this.g)))){this.K||pe!=4||pt==7||(pt==8||Fe<=0?gl(3):gl(2)),xm(this);var g=this.g.ca();this.X=g;var w=Ik(this);if(this.o=g==200,Ek(this.i,this.v,this.B,this.l,this.S,pe,g),this.o){if(this.U&&!this.L){t:{if(this.g){var A,L=this.g;if((A=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!P(A)){var V=A;break t}}V=null}if(u=V)Ro(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,wm(this,u);else{this.o=!1,this.m=3,zt(12),Ci(this),wl(this);break e}}if(this.R){u=!0;let _t;for(;!this.K&&this.C<w.length;)if(_t=Nk(this,w),_t==ym){pe==4&&(this.m=4,zt(14),u=!1),Ro(this.i,this.l,null,"[Incomplete Response]");break}else if(_t==zw){this.m=4,zt(15),Ro(this.i,this.l,w,"[Invalid Chunk]"),u=!1;break}else Ro(this.i,this.l,_t,null),wm(this,_t);if(Hw(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||w.length!=0||this.h.h||(this.m=1,zt(16),u=!1),this.o=this.o&&u,!u)Ro(this.i,this.l,w,"[Invalid Chunked Response]"),Ci(this),wl(this);else if(w.length>0&&!this.W){this.W=!0;var q=this.j;q.g==this&&q.aa&&!q.P&&(q.j.info("Great, no buffering proxy detected. Bytes received: "+w.length),Am(q),q.P=!0,zt(11))}}else Ro(this.i,this.l,w,null),wm(this,w);pe==4&&Ci(this),this.o&&!this.K&&(pe==4?g0(this.j,this):(this.o=!1,Iu(this)))}else $k(this.g),g==400&&w.indexOf("Unknown SID")>0?(this.m=3,zt(12)):(this.m=0,zt(13)),Ci(this),wl(this)}}}catch{}finally{}};function Ik(u){if(!Hw(u))return u.g.la();const g=c0(u.g);if(g==="")return"";let w="";const A=g.length,L=ps(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return Ci(u),wl(u),"";u.h.i=new o.TextDecoder}for(let V=0;V<A;V++)u.h.h=!0,w+=u.h.i.decode(g[V],{stream:!(L&&V==A-1)});return g.length=0,u.h.g+=w,u.C=0,u.h.g}function Hw(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function Nk(u,g){var w=u.C,A=g.indexOf(`
`,w);return A==-1?ym:(w=Number(g.substring(w,A)),isNaN(w)?zw:(A+=1,A+w>g.length?ym:(g=g.slice(A,A+w),u.C=A+w,g)))}hs.prototype.cancel=function(){this.K=!0,Ci(this)};function Iu(u){u.T=Date.now()+u.H,Ww(u,u.H)}function Ww(u,g){if(u.D!=null)throw Error("WatchDog timer not null");u.D=yl(d(u.aa,u),g)}function xm(u){u.D&&(o.clearTimeout(u.D),u.D=null)}hs.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(Tk(this.i,this.B),this.M!=2&&(gl(),zt(17)),Ci(this),this.m=2,wl(this)):Ww(this,this.T-u)};function wl(u){u.j.I==0||u.K||g0(u.j,u)}function Ci(u){xm(u);var g=u.O;g&&typeof g.dispose=="function"&&g.dispose(),u.O=null,jw(u.V),u.g&&(g=u.g,u.g=null,g.abort(),g.dispose())}function wm(u,g){try{var w=u.j;if(w.I!=0&&(w.g==u||_m(w.h,u))){if(!u.L&&_m(w.h,u)&&w.I==3){try{var A=w.Ba.g.parse(g)}catch{A=null}if(Array.isArray(A)&&A.length==3){var L=A;if(L[0]==0){e:if(!w.v){if(w.g)if(w.g.F+3e3<u.F)ju(w),Ru(w);else break e;Nm(w),zt(18)}}else w.xa=L[1],0<w.xa-w.K&&L[2]<37500&&w.F&&w.A==0&&!w.C&&(w.C=yl(d(w.Va,w),6e3));Kw(w.h)<=1&&w.ta&&(w.ta=void 0)}else Pi(w,11)}else if((u.L||w.g==u)&&ju(w),!P(g))for(L=w.Ba.g.parse(g),g=0;g<L.length;g++){let Fe=L[g];const _t=Fe[0];if(!(_t<=w.K))if(w.K=_t,Fe=Fe[1],w.I==2)if(Fe[0]=="c"){w.M=Fe[1],w.ba=Fe[2];const lr=Fe[3];lr!=null&&(w.ka=lr,w.j.info("VER="+w.ka));const ji=Fe[4];ji!=null&&(w.za=ji,w.j.info("SVER="+w.za));const gs=Fe[5];gs!=null&&typeof gs=="number"&&gs>0&&(A=1.5*gs,w.O=A,w.j.info("backChannelRequestTimeoutMs_="+A)),A=w;const ys=u.g;if(ys){const Du=ys.g?ys.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Du){var V=A.h;V.g||Du.indexOf("spdy")==-1&&Du.indexOf("quic")==-1&&Du.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Em(V,V.h),V.h=null))}if(A.G){const Cm=ys.g?ys.g.getResponseHeader("X-HTTP-Session-Id"):null;Cm&&(A.wa=Cm,ze(A.J,A.G,Cm))}}w.I=3,w.l&&w.l.ra(),w.aa&&(w.T=Date.now()-u.F,w.j.info("Handshake RTT: "+w.T+"ms")),A=w;var q=u;if(A.na=x0(A,A.L?A.ba:null,A.W),q.L){Qw(A.h,q);var pe=q,pt=A.O;pt&&(pe.H=pt),pe.D&&(xm(pe),Iu(pe)),A.g=q}else m0(A);w.i.length>0&&Pu(w)}else Fe[0]!="stop"&&Fe[0]!="close"||Pi(w,7);else w.I==3&&(Fe[0]=="stop"||Fe[0]=="close"?Fe[0]=="stop"?Pi(w,7):Im(w):Fe[0]!="noop"&&w.l&&w.l.qa(Fe),w.A=0)}}gl(4)}catch{}}var Ak=class{constructor(u,g){this.g=u,this.map=g}};function qw(u){this.l=u||10,o.PerformanceNavigationTiming?(u=o.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Gw(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Kw(u){return u.h?1:u.g?u.g.size:0}function _m(u,g){return u.h?u.h==g:u.g?u.g.has(g):!1}function Em(u,g){u.g?u.g.add(g):u.h=g}function Qw(u,g){u.h&&u.h==g?u.h=null:u.g&&u.g.has(g)&&u.g.delete(g)}qw.prototype.cancel=function(){if(this.i=Yw(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function Yw(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let g=u.i;for(const w of u.g.values())g=g.concat(w.G);return g}return y(u.i)}var Xw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ck(u,g){if(u){u=u.split("&");for(let w=0;w<u.length;w++){const A=u[w].indexOf("=");let L,V=null;A>=0?(L=u[w].substring(0,A),V=u[w].substring(A+1)):L=u[w],g(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function fs(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let g;u instanceof fs?(this.l=u.l,_l(this,u.j),this.o=u.o,this.g=u.g,El(this,u.u),this.h=u.h,Tm(this,r0(u.i)),this.m=u.m):u&&(g=String(u).match(Xw))?(this.l=!1,_l(this,g[1]||"",!0),this.o=Tl(g[2]||""),this.g=Tl(g[3]||"",!0),El(this,g[4]),this.h=Tl(g[5]||"",!0),Tm(this,g[6]||"",!0),this.m=Tl(g[7]||"")):(this.l=!1,this.i=new Sl(null,this.l))}fs.prototype.toString=function(){const u=[];var g=this.j;g&&u.push(bl(g,Jw,!0),":");var w=this.g;return(w||g=="file")&&(u.push("//"),(g=this.o)&&u.push(bl(g,Jw,!0),"@"),u.push(xl(w).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),w=this.u,w!=null&&u.push(":",String(w))),(w=this.h)&&(this.g&&w.charAt(0)!="/"&&u.push("/"),u.push(bl(w,w.charAt(0)=="/"?jk:Pk,!0))),(w=this.i.toString())&&u.push("?",w),(w=this.m)&&u.push("#",bl(w,Dk)),u.join("")},fs.prototype.resolve=function(u){const g=ar(this);let w=!!u.j;w?_l(g,u.j):w=!!u.o,w?g.o=u.o:w=!!u.g,w?g.g=u.g:w=u.u!=null;var A=u.h;if(w)El(g,u.u);else if(w=!!u.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var L=g.h.lastIndexOf("/");L!=-1&&(A=g.h.slice(0,L+1)+A)}if(L=A,L==".."||L==".")A="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){A=L.lastIndexOf("/",0)==0,L=L.split("/");const V=[];for(let q=0;q<L.length;){const pe=L[q++];pe=="."?A&&q==L.length&&V.push(""):pe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),A&&q==L.length&&V.push("")):(V.push(pe),A=!0)}A=V.join("/")}else A=L}return w?g.h=A:w=u.i.toString()!=="",w?Tm(g,r0(u.i)):w=!!u.m,w&&(g.m=u.m),g};function ar(u){return new fs(u)}function _l(u,g,w){u.j=w?Tl(g,!0):g,u.j&&(u.j=u.j.replace(/:$/,""))}function El(u,g){if(g){if(g=Number(g),isNaN(g)||g<0)throw Error("Bad port number "+g);u.u=g}else u.u=null}function Tm(u,g,w){g instanceof Sl?(u.i=g,Ok(u.i,u.l)):(w||(g=bl(g,kk)),u.i=new Sl(g,u.l))}function ze(u,g,w){u.i.set(g,w)}function Nu(u){return ze(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function Tl(u,g){return u?g?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function bl(u,g,w){return typeof u=="string"?(u=encodeURI(u).replace(g,Rk),w&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function Rk(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Jw=/[#\/\?@]/g,Pk=/[#\?:]/g,jk=/[#\?]/g,kk=/[#\?@]/g,Dk=/#/g;function Sl(u,g){this.h=this.g=null,this.i=u||null,this.j=!!g}function Ri(u){u.g||(u.g=new Map,u.h=0,u.i&&Ck(u.i,function(g,w){u.add(decodeURIComponent(g.replace(/\+/g," ")),w)}))}t=Sl.prototype,t.add=function(u,g){Ri(this),this.i=null,u=Po(this,u);let w=this.g.get(u);return w||this.g.set(u,w=[]),w.push(g),this.h+=1,this};function Zw(u,g){Ri(u),g=Po(u,g),u.g.has(g)&&(u.i=null,u.h-=u.g.get(g).length,u.g.delete(g))}function e0(u,g){return Ri(u),g=Po(u,g),u.g.has(g)}t.forEach=function(u,g){Ri(this),this.g.forEach(function(w,A){w.forEach(function(L){u.call(g,L,A,this)},this)},this)};function t0(u,g){Ri(u);let w=[];if(typeof g=="string")e0(u,g)&&(w=w.concat(u.g.get(Po(u,g))));else for(u=Array.from(u.g.values()),g=0;g<u.length;g++)w=w.concat(u[g]);return w}t.set=function(u,g){return Ri(this),this.i=null,u=Po(this,u),e0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[g]),this.h+=1,this},t.get=function(u,g){return u?(u=t0(this,u),u.length>0?String(u[0]):g):g};function n0(u,g,w){Zw(u,g),w.length>0&&(u.i=null,u.g.set(Po(u,g),y(w)),u.h+=w.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],g=Array.from(this.g.keys());for(let A=0;A<g.length;A++){var w=g[A];const L=xl(w);w=t0(this,w);for(let V=0;V<w.length;V++){let q=L;w[V]!==""&&(q+="="+xl(w[V])),u.push(q)}}return this.i=u.join("&")};function r0(u){const g=new Sl;return g.i=u.i,u.g&&(g.g=new Map(u.g),g.h=u.h),g}function Po(u,g){return g=String(g),u.j&&(g=g.toLowerCase()),g}function Ok(u,g){g&&!u.j&&(Ri(u),u.i=null,u.g.forEach(function(w,A){const L=A.toLowerCase();A!=L&&(Zw(this,A),n0(this,L,w))},u)),u.j=g}function Mk(u,g){const w=new vl;if(o.Image){const A=new Image;A.onload=h(ms,w,"TestLoadImage: loaded",!0,g,A),A.onerror=h(ms,w,"TestLoadImage: error",!1,g,A),A.onabort=h(ms,w,"TestLoadImage: abort",!1,g,A),A.ontimeout=h(ms,w,"TestLoadImage: timeout",!1,g,A),o.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=u}else g(!1)}function Lk(u,g){const w=new vl,A=new AbortController,L=setTimeout(()=>{A.abort(),ms(w,"TestPingServer: timeout",!1,g)},1e4);fetch(u,{signal:A.signal}).then(V=>{clearTimeout(L),V.ok?ms(w,"TestPingServer: ok",!0,g):ms(w,"TestPingServer: server error",!1,g)}).catch(()=>{clearTimeout(L),ms(w,"TestPingServer: error",!1,g)})}function ms(u,g,w,A,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),A(w)}catch{}}function Vk(){this.g=new wk}function bm(u){this.i=u.Sb||null,this.h=u.ab||!1}f(bm,kw),bm.prototype.g=function(){return new Au(this.i,this.h)};function Au(u,g){rt.call(this),this.H=u,this.o=g,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Au,rt),t=Au.prototype,t.open=function(u,g){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=g,this.readyState=1,Nl(this)},t.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const g={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(g.body=u),(this.H||o).fetch(new Request(this.D,g)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Il(this)),this.readyState=0},t.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Nl(this)),this.g&&(this.readyState=3,Nl(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;s0(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function s0(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}t.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var g=u.value?u.value:new Uint8Array(0);(g=this.B.decode(g,{stream:!u.done}))&&(this.response=this.responseText+=g)}u.done?Il(this):Nl(this),this.readyState==3&&s0(this)}},t.Oa=function(u){this.g&&(this.response=this.responseText=u,Il(this))},t.Na=function(u){this.g&&(this.response=u,Il(this))},t.ga=function(){this.g&&Il(this)};function Il(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Nl(u)}t.setRequestHeader=function(u,g){this.A.append(u,g)},t.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],g=this.h.entries();for(var w=g.next();!w.done;)w=w.value,u.push(w[0]+": "+w[1]),w=g.next();return u.join(`\r
`)};function Nl(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Au.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function i0(u){let g="";return H(u,function(w,A){g+=A,g+=":",g+=w,g+=`\r
`}),g}function Sm(u,g,w){e:{for(A in w){var A=!1;break e}A=!0}A||(w=i0(w),typeof u=="string"?w!=null&&xl(w):ze(u,g,w))}function Je(u){rt.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Je,rt);var Fk=/^https?$/i,Uk=["POST","PUT"];t=Je.prototype,t.Fa=function(u){this.H=u},t.ea=function(u,g,w,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);g=g?g.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Uw.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(g,String(u),!0),this.B=!1}catch(V){o0(this,V);return}if(u=w||"",w=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var L in A)w.set(L,A[L]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const V of A.keys())w.set(V,A.get(V));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(w.keys()).find(V=>V.toLowerCase()=="content-type"),L=o.FormData&&u instanceof o.FormData,!(Array.prototype.indexOf.call(Uk,g,void 0)>=0)||A||L||w.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,q]of w)this.g.setRequestHeader(V,q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(V){o0(this,V)}};function o0(u,g){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=g,u.o=5,a0(u),Cu(u)}function a0(u){u.A||(u.A=!0,$t(u,"complete"),$t(u,"error"))}t.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,$t(this,"complete"),$t(this,"abort"),Cu(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Cu(this,!0)),Je.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?l0(this):this.Xa())},t.Xa=function(){l0(this)};function l0(u){if(u.h&&typeof i<"u"){if(u.v&&ps(u)==4)setTimeout(u.Ca.bind(u),0);else if($t(u,"readystatechange"),ps(u)==4){u.h=!1;try{const V=u.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var g=!0;break e;default:g=!1}var w;if(!(w=g)){var A;if(A=V===0){let q=String(u.D).match(Xw)[1]||null;!q&&o.self&&o.self.location&&(q=o.self.location.protocol.slice(0,-1)),A=!Fk.test(q?q.toLowerCase():"")}w=A}if(w)$t(u,"complete"),$t(u,"success");else{u.o=6;try{var L=ps(u)>2?u.g.statusText:""}catch{L=""}u.l=L+" ["+u.ca()+"]",a0(u)}}finally{Cu(u)}}}}function Cu(u,g){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const w=u.g;u.g=null,g||$t(u,"ready");try{w.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function ps(u){return u.g?u.g.readyState:0}t.ca=function(){try{return ps(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(u){if(this.g){var g=this.g.responseText;return u&&g.indexOf(u)==0&&(g=g.substring(u.length)),xk(g)}};function c0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function $k(u){const g={};u=(u.g&&ps(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<u.length;A++){if(P(u[A]))continue;var w=Sk(u[A]);const L=w[0];if(w=w[1],typeof w!="string")continue;w=w.trim();const V=g[L]||[];g[L]=V,V.push(w)}J(g,function(A){return A.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Al(u,g,w){return w&&w.internalChannelParams&&w.internalChannelParams[u]||g}function u0(u){this.za=0,this.i=[],this.j=new vl,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Al("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Al("baseRetryDelayMs",5e3,u),this.Za=Al("retryDelaySeedMs",1e4,u),this.Ta=Al("forwardChannelMaxRetries",2,u),this.va=Al("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new qw(u&&u.concurrentRequestLimit),this.Ba=new Vk,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=u0.prototype,t.ka=8,t.I=1,t.connect=function(u,g,w,A){zt(0),this.W=u,this.H=g||{},w&&A!==void 0&&(this.H.OSID=w,this.H.OAID=A),this.F=this.X,this.J=x0(this,null,this.W),Pu(this)};function Im(u){if(d0(u),u.I==3){var g=u.V++,w=ar(u.J);if(ze(w,"SID",u.M),ze(w,"RID",g),ze(w,"TYPE","terminate"),Cl(u,w),g=new hs(u,u.j,g),g.M=2,g.A=Nu(ar(w)),w=!1,o.navigator&&o.navigator.sendBeacon)try{w=o.navigator.sendBeacon(g.A.toString(),"")}catch{}!w&&o.Image&&(new Image().src=g.A,w=!0),w||(g.g=w0(g.j,null),g.g.ea(g.A)),g.F=Date.now(),Iu(g)}v0(u)}function Ru(u){u.g&&(Am(u),u.g.cancel(),u.g=null)}function d0(u){Ru(u),u.v&&(o.clearTimeout(u.v),u.v=null),ju(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&o.clearTimeout(u.m),u.m=null)}function Pu(u){if(!Gw(u.h)&&!u.m){u.m=!0;var g=u.Ea;D||I(),M||(D(),M=!0),T.add(g,u),u.D=0}}function zk(u,g){return Kw(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=g.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=yl(d(u.Ea,u,g),y0(u,u.D)),u.D++,!0)}t.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const L=new hs(this,this.j,u);let V=this.o;if(this.U&&(V?(V=ue(V),wt(V,this.U)):V=this.U),this.u!==null||this.R||(L.J=V,V=null),this.S)e:{for(var g=0,w=0;w<this.i.length;w++){t:{var A=this.i[w];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(g+=A,g>4096){g=w;break e}if(g===4096||w===this.i.length-1){g=w+1;break e}}g=1e3}else g=1e3;g=f0(this,L,g),w=ar(this.J),ze(w,"RID",u),ze(w,"CVER",22),this.G&&ze(w,"X-HTTP-Session-Id",this.G),Cl(this,w),V&&(this.R?g="headers="+xl(i0(V))+"&"+g:this.u&&Sm(w,this.u,V)),Em(this.h,L),this.Ra&&ze(w,"TYPE","init"),this.S?(ze(w,"$req",g),ze(w,"SID","null"),L.U=!0,vm(L,w,null)):vm(L,w,g),this.I=2}}else this.I==3&&(u?h0(this,u):this.i.length==0||Gw(this.h)||h0(this))};function h0(u,g){var w;g?w=g.l:w=u.V++;const A=ar(u.J);ze(A,"SID",u.M),ze(A,"RID",w),ze(A,"AID",u.K),Cl(u,A),u.u&&u.o&&Sm(A,u.u,u.o),w=new hs(u,u.j,w,u.D+1),u.u===null&&(w.J=u.o),g&&(u.i=g.G.concat(u.i)),g=f0(u,w,1e3),w.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),Em(u.h,w),vm(w,A,g)}function Cl(u,g){u.H&&H(u.H,function(w,A){ze(g,A,w)}),u.l&&H({},function(w,A){ze(g,A,w)})}function f0(u,g,w){w=Math.min(u.i.length,w);const A=u.l?d(u.l.Ka,u.l,u):null;e:{var L=u.i;let pe=-1;for(;;){const pt=["count="+w];pe==-1?w>0?(pe=L[0].g,pt.push("ofs="+pe)):pe=0:pt.push("ofs="+pe);let Fe=!0;for(let _t=0;_t<w;_t++){var V=L[_t].g;const lr=L[_t].map;if(V-=pe,V<0)pe=Math.max(0,L[_t].g-100),Fe=!1;else try{V="req"+V+"_"||"";try{var q=lr instanceof Map?lr:Object.entries(lr);for(const[ji,gs]of q){let ys=gs;l(gs)&&(ys=fm(gs)),pt.push(V+ji+"="+encodeURIComponent(ys))}}catch(ji){throw pt.push(V+"type="+encodeURIComponent("_badmap")),ji}}catch{A&&A(lr)}}if(Fe){q=pt.join("&");break e}}q=void 0}return u=u.i.splice(0,w),g.G=u,q}function m0(u){if(!u.g&&!u.v){u.Y=1;var g=u.Da;D||I(),M||(D(),M=!0),T.add(g,u),u.A=0}}function Nm(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=yl(d(u.Da,u),y0(u,u.A)),u.A++,!0)}t.Da=function(){if(this.v=null,p0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=yl(d(this.Wa,this),u)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,zt(10),Ru(this),p0(this))};function Am(u){u.B!=null&&(o.clearTimeout(u.B),u.B=null)}function p0(u){u.g=new hs(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var g=ar(u.na);ze(g,"RID","rpc"),ze(g,"SID",u.M),ze(g,"AID",u.K),ze(g,"CI",u.F?"0":"1"),!u.F&&u.ia&&ze(g,"TO",u.ia),ze(g,"TYPE","xmlhttp"),Cl(u,g),u.u&&u.o&&Sm(g,u.u,u.o),u.O&&(u.g.H=u.O);var w=u.g;u=u.ba,w.M=1,w.A=Nu(ar(g)),w.u=null,w.R=!0,Bw(w,u)}t.Va=function(){this.C!=null&&(this.C=null,Ru(this),Nm(this),zt(19))};function ju(u){u.C!=null&&(o.clearTimeout(u.C),u.C=null)}function g0(u,g){var w=null;if(u.g==g){ju(u),Am(u),u.g=null;var A=2}else if(_m(u.h,g))w=g.G,Qw(u.h,g),A=1;else return;if(u.I!=0){if(g.o)if(A==1){w=g.u?g.u.length:0,g=Date.now()-g.F;var L=u.D;A=bu(),$t(A,new Vw(A,w)),Pu(u)}else m0(u);else if(L=g.m,L==3||L==0&&g.X>0||!(A==1&&zk(u,g)||A==2&&Nm(u)))switch(w&&w.length>0&&(g=u.h,g.i=g.i.concat(w)),L){case 1:Pi(u,5);break;case 4:Pi(u,10);break;case 3:Pi(u,6);break;default:Pi(u,2)}}}function y0(u,g){let w=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(w*=2),w*g}function Pi(u,g){if(u.j.info("Error code "+g),g==2){var w=d(u.bb,u),A=u.Ua;const L=!A;A=new fs(A||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||_l(A,"https"),Nu(A),L?Mk(A.toString(),w):Lk(A.toString(),w)}else zt(2);u.I=0,u.l&&u.l.pa(g),v0(u),d0(u)}t.bb=function(u){u?(this.j.info("Successfully pinged google.com"),zt(2)):(this.j.info("Failed to ping google.com"),zt(1))};function v0(u){if(u.I=0,u.ja=[],u.l){const g=Yw(u.h);(g.length!=0||u.i.length!=0)&&(b(u.ja,g),b(u.ja,u.i),u.h.i.length=0,y(u.i),u.i.length=0),u.l.oa()}}function x0(u,g,w){var A=w instanceof fs?ar(w):new fs(w);if(A.g!="")g&&(A.g=g+"."+A.g),El(A,A.u);else{var L=o.location;A=L.protocol,g=g?g+"."+L.hostname:L.hostname,L=+L.port;const V=new fs(null);A&&_l(V,A),g&&(V.g=g),L&&El(V,L),w&&(V.h=w),A=V}return w=u.G,g=u.wa,w&&g&&ze(A,w,g),ze(A,"VER",u.ka),Cl(u,A),A}function w0(u,g,w){if(g&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return g=u.Aa&&!u.ma?new Je(new bm({ab:w})):new Je(u.ma),g.Fa(u.L),g}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function _0(){}t=_0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function ku(){}ku.prototype.g=function(u,g){return new dn(u,g)};function dn(u,g){rt.call(this),this.g=new u0(g),this.l=u,this.h=g&&g.messageUrlParams||null,u=g&&g.messageHeaders||null,g&&g.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=g&&g.initMessageHeaders||null,g&&g.messageContentType&&(u?u["X-WebChannel-Content-Type"]=g.messageContentType:u={"X-WebChannel-Content-Type":g.messageContentType}),g&&g.sa&&(u?u["X-WebChannel-Client-Profile"]=g.sa:u={"X-WebChannel-Client-Profile":g.sa}),this.g.U=u,(u=g&&g.Qb)&&!P(u)&&(this.g.u=u),this.A=g&&g.supportsCrossDomainXhr||!1,this.v=g&&g.sendRawJson||!1,(g=g&&g.httpSessionIdParam)&&!P(g)&&(this.g.G=g,u=this.h,u!==null&&g in u&&(u=this.h,g in u&&delete u[g])),this.j=new jo(this)}f(dn,rt),dn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},dn.prototype.close=function(){Im(this.g)},dn.prototype.o=function(u){var g=this.g;if(typeof u=="string"){var w={};w.__data__=u,u=w}else this.v&&(w={},w.__data__=fm(u),u=w);g.i.push(new Ak(g.Ya++,u)),g.I==3&&Pu(g)},dn.prototype.N=function(){this.g.l=null,delete this.j,Im(this.g),delete this.g,dn.Z.N.call(this)};function E0(u){mm.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var g=u.__sm__;if(g){e:{for(const w in g){u=w;break e}u=void 0}(this.i=u)&&(u=this.i,g=g!==null&&u in g?g[u]:void 0),this.data=g}else this.data=u}f(E0,mm);function T0(){pm.call(this),this.status=1}f(T0,pm);function jo(u){this.g=u}f(jo,_0),jo.prototype.ra=function(){$t(this.g,"a")},jo.prototype.qa=function(u){$t(this.g,new E0(u))},jo.prototype.pa=function(u){$t(this.g,new T0)},jo.prototype.oa=function(){$t(this.g,"b")},ku.prototype.createWebChannel=ku.prototype.g,dn.prototype.send=dn.prototype.o,dn.prototype.open=dn.prototype.m,dn.prototype.close=dn.prototype.close,rC=function(){return new ku},nC=function(){return bu()},tC=Ai,cy={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Su.NO_ERROR=0,Su.TIMEOUT=8,Su.HTTP_ERROR=6,Ld=Su,Fw.COMPLETE="complete",eC=Fw,Dw.EventType=pl,pl.OPEN="a",pl.CLOSE="b",pl.ERROR="c",pl.MESSAGE="d",rt.prototype.listen=rt.prototype.J,Gl=Dw,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,ZA=Je}).apply(typeof od<"u"?od:typeof self<"u"?self:typeof window<"u"?window:{});const e1="@firebase/firestore",t1="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Mt.UNAUTHENTICATED=new Mt(null),Mt.GOOGLE_CREDENTIALS=new Mt("google-credentials-uid"),Mt.FIRST_PARTY=new Mt("first-party-uid"),Mt.MOCK_USER=new Mt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fo=new Cf("@firebase/firestore");function Lo(){return fo.logLevel}function K(t,...e){if(fo.logLevel<=we.DEBUG){const n=e.map(Ex);fo.debug(`Firestore (${ll}): ${t}`,...n)}}function as(t,...e){if(fo.logLevel<=we.ERROR){const n=e.map(Ex);fo.error(`Firestore (${ll}): ${t}`,...n)}}function Ha(t,...e){if(fo.logLevel<=we.WARN){const n=e.map(Ex);fo.warn(`Firestore (${ll}): ${t}`,...n)}}function Ex(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,sC(t,r,n)}function sC(t,e,n){let r=`FIRESTORE (${ll}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw as(r),new Error(r)}function De(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||sC(e,s,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends ir{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class n9{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Mt.UNAUTHENTICATED))}shutdown(){}}class r9{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class s9{constructor(e){this.t=e,this.currentUser=Mt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){De(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Qr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Qr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Qr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(De(typeof r.accessToken=="string",31837,{l:r}),new iC(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return De(e===null||typeof e=="string",2055,{h:e}),new Mt(e)}}class i9{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Mt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class o9{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new i9(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Mt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n1{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class a9{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Kn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){De(this.o===void 0,3512);const r=i=>{i.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new n1(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(De(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new n1(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l9(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=l9(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function _e(t,e){return t<e?-1:t>e?1:0}function uy(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return _p(s)===_p(i)?_e(s,i):_p(s)?1:-1}return _e(t.length,e.length)}const c9=55296,u9=57343;function _p(t){const e=t.charCodeAt(0);return e>=c9&&e<=u9}function Wa(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r1="__name__";class dr{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&le(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return dr.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof dr?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=dr.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return _e(e.length,n.length)}static compareSegments(e,n){const r=dr.isNumericId(e),s=dr.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?dr.extractNumericId(e).compare(dr.extractNumericId(n)):uy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ri.fromString(e.substring(4,e.length-2))}}class Ue extends dr{construct(e,n,r){return new Ue(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ue(n)}static emptyPath(){return new Ue([])}}const d9=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class At extends dr{construct(e,n,r){return new At(e,n,r)}static isValidIdentifier(e){return d9.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),At.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===r1}static keyField(){return new At([r1])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new W(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new W(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new W(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new At(n)}static emptyPath(){return new At([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class te{constructor(e){this.path=e}static fromPath(e){return new te(Ue.fromString(e))}static fromName(e){return new te(Ue.fromString(e).popFirst(5))}static empty(){return new te(Ue.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ue.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ue.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new te(new Ue(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(t,e,n){if(!n)throw new W(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function h9(t,e,n,r){if(e===!0&&r===!0)throw new W(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function s1(t){if(!te.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function i1(t){if(te.isDocumentKey(t))throw new W(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function aC(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Of(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":le(12329,{type:typeof t})}function Rr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Of(t);throw new W(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function f9(t,e){if(e<=0)throw new W(F.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ht(t,e){const n={typeString:t};return e&&(n.value=e),n}function du(t,e){if(!aC(t))throw new W(F.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new W(F.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o1=-62135596800,a1=1e6;class Ce{static now(){return Ce.fromMillis(Date.now())}static fromDate(e){return Ce.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*a1);return new Ce(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<o1)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/a1}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ce._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(du(e,Ce._jsonSchema))return new Ce(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-o1;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ce._jsonSchemaVersion="firestore/timestamp/1.0",Ce._jsonSchema={type:ht("string",Ce._jsonSchemaVersion),seconds:ht("number"),nanoseconds:ht("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Ce(0,0))}static max(){return new de(new Ce(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=-1;function m9(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=de.fromTimestamp(r===1e9?new Ce(n+1,0):new Ce(n,r));return new hi(s,te.empty(),e)}function p9(t){return new hi(t.readTime,t.key,Vc)}class hi{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new hi(de.min(),te.empty(),Vc)}static max(){return new hi(de.max(),te.empty(),Vc)}}function g9(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=te.comparator(t.documentKey,e.documentKey),n!==0?n:_e(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y9="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class v9{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cl(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==y9)throw t;K("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(s=>s?$.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new $((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++l,l===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new $((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function x9(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ul(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Mf.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=-1;function Lf(t){return t==null}function kh(t){return t===0&&1/t==-1/0}function w9(t){return typeof t=="number"&&Number.isInteger(t)&&!kh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC="";function _9(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=l1(e)),e=E9(t.get(n),e);return l1(e)}function E9(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case lC:n+="";break;default:n+=i}}return n}function l1(t){return t+lC+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c1(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ei(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){this.comparator=e,this.root=n||Nt.EMPTY}insert(e,n){return new Xe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Nt.BLACK,null,null))}remove(e){return new Xe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Nt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ad(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ad(this.root,e,this.comparator,!1)}getReverseIterator(){return new ad(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ad(this.root,e,this.comparator,!0)}}class ad{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Nt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Nt.RED,this.left=s??Nt.EMPTY,this.right=i??Nt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Nt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Nt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Nt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Nt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Nt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw le(43730,{key:this.key,value:this.value});if(this.right.isRed())throw le(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw le(27949);return e+(this.isRed()?0:1)}}Nt.EMPTY=null,Nt.RED=!0,Nt.BLACK=!1;Nt.EMPTY=new class{constructor(){this.size=0}get key(){throw le(57766)}get value(){throw le(16141)}get color(){throw le(16727)}get left(){throw le(29726)}get right(){throw le(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new Nt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(e){this.comparator=e,this.data=new Xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u1(this.data.getIterator())}getIteratorFrom(e){return new u1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof xt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new xt(this.comparator);return n.data=e,n}}class u1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(e){this.fields=e,e.sort(At.comparator)}static empty(){return new gn([])}unionWith(e){let n=new xt(At.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new gn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Wa(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uC extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new uC("Invalid base64 string: "+i):i}}(e);return new Pt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Pt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Pt.EMPTY_BYTE_STRING=new Pt("");const T9=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fi(t){if(De(!!t,39018),typeof t=="string"){let e=0;const n=T9.exec(t);if(De(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:st(t.seconds),nanos:st(t.nanos)}}function st(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function mi(t){return typeof t=="string"?Pt.fromBase64String(t):Pt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC="server_timestamp",hC="__type__",fC="__previous_value__",mC="__local_write_time__";function Vf(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[hC])==null?void 0:r.stringValue)===dC}function Ff(t){const e=t.mapValue.fields[fC];return Vf(e)?Ff(e):e}function Fc(t){const e=fi(t.mapValue.fields[mC].timestampValue);return new Ce(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b9{constructor(e,n,r,s,i,o,l,c,d,h){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h}}const Dh="(default)";class Uc{constructor(e,n){this.projectId=e,this.database=n||Dh}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===Dh}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pC="__type__",gC="__max__",ld={mapValue:{fields:{__type__:{stringValue:gC}}}},yC="__vector__",Oh="value";function pi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Vf(t)?4:I9(t)?9007199254740991:S9(t)?10:11:le(28295,{value:t})}function Pr(t,e){if(t===e)return!0;const n=pi(t);if(n!==pi(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Fc(t).isEqual(Fc(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=fi(s.timestampValue),l=fi(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return mi(s.bytesValue).isEqual(mi(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return st(s.geoPointValue.latitude)===st(i.geoPointValue.latitude)&&st(s.geoPointValue.longitude)===st(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return st(s.integerValue)===st(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=st(s.doubleValue),l=st(i.doubleValue);return o===l?kh(o)===kh(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Wa(t.arrayValue.values||[],e.arrayValue.values||[],Pr);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(c1(o)!==c1(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Pr(o[c],l[c])))return!1;return!0}(t,e);default:return le(52216,{left:t})}}function $c(t,e){return(t.values||[]).find(n=>Pr(n,e))!==void 0}function qa(t,e){if(t===e)return 0;const n=pi(t),r=pi(e);if(n!==r)return _e(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return _e(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=st(i.integerValue||i.doubleValue),c=st(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return d1(t.timestampValue,e.timestampValue);case 4:return d1(Fc(t),Fc(e));case 5:return uy(t.stringValue,e.stringValue);case 6:return function(i,o){const l=mi(i),c=mi(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const h=_e(l[d],c[d]);if(h!==0)return h}return _e(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=_e(st(i.latitude),st(o.latitude));return l!==0?l:_e(st(i.longitude),st(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h1(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,y,b,v;const l=i.fields||{},c=o.fields||{},d=(m=l[Oh])==null?void 0:m.arrayValue,h=(y=c[Oh])==null?void 0:y.arrayValue,f=_e(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((v=h==null?void 0:h.values)==null?void 0:v.length)||0);return f!==0?f:h1(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===ld.mapValue&&o===ld.mapValue)return 0;if(i===ld.mapValue)return 1;if(o===ld.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=uy(c[f],h[f]);if(m!==0)return m;const y=qa(l[c[f]],d[h[f]]);if(y!==0)return y}return _e(c.length,h.length)}(t.mapValue,e.mapValue);default:throw le(23264,{he:n})}}function d1(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return _e(t,e);const n=fi(t),r=fi(e),s=_e(n.seconds,r.seconds);return s!==0?s:_e(n.nanos,r.nanos)}function h1(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=qa(n[s],r[s]);if(i)return i}return _e(n.length,r.length)}function Ga(t){return dy(t)}function dy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=fi(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return mi(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return te.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=dy(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${dy(n.fields[o])}`;return s+"}"}(t.mapValue):le(61005,{value:t})}function Vd(t){switch(pi(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ff(t);return e?16+Vd(e):16;case 5:return 2*t.stringValue.length;case 6:return mi(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+Vd(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return Ei(r.fields,(i,o)=>{s+=i.length+Vd(o)}),s}(t.mapValue);default:throw le(13486,{value:t})}}function Mh(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function hy(t){return!!t&&"integerValue"in t}function Sx(t){return!!t&&"arrayValue"in t}function f1(t){return!!t&&"nullValue"in t}function m1(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Fd(t){return!!t&&"mapValue"in t}function S9(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[pC])==null?void 0:r.stringValue)===yC}function dc(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Ei(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=dc(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=dc(t.arrayValue.values[n]);return e}return{...t}}function I9(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===gC}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.value=e}static empty(){return new en({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Fd(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=dc(n)}setAll(e){let n=At.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=dc(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Fd(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Pr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Fd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ei(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new en(dc(this.value))}}function vC(t){const e=[];return Ei(t.fields,(n,r)=>{const s=new At([n]);if(Fd(r)){const i=vC(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Vt(e,0,de.min(),de.min(),de.min(),en.empty(),0)}static newFoundDocument(e,n,r,s){return new Vt(e,1,n,de.min(),r,s,0)}static newNoDocument(e,n){return new Vt(e,2,n,de.min(),de.min(),en.empty(),0)}static newUnknownDocument(e,n){return new Vt(e,3,n,de.min(),de.min(),en.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=en.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=en.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Vt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Vt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(e,n){this.position=e,this.inclusive=n}}function p1(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=te.comparator(te.fromName(o.referenceValue),n.key):r=qa(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function g1(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Pr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n="asc"){this.field=e,this.dir=n}}function N9(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{}class dt extends xC{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new C9(e,n,r):n==="array-contains"?new j9(e,r):n==="in"?new k9(e,r):n==="not-in"?new D9(e,r):n==="array-contains-any"?new O9(e,r):new dt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new R9(e,r):new P9(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(qa(n,this.value)):n!==null&&pi(this.value)===pi(n)&&this.matchesComparison(qa(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sr extends xC{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sr(e,n)}matches(e){return wC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function wC(t){return t.op==="and"}function _C(t){return A9(t)&&wC(t)}function A9(t){for(const e of t.filters)if(e instanceof sr)return!1;return!0}function fy(t){if(t instanceof dt)return t.field.canonicalString()+t.op.toString()+Ga(t.value);if(_C(t))return t.filters.map(e=>fy(e)).join(",");{const e=t.filters.map(n=>fy(n)).join(",");return`${t.op}(${e})`}}function EC(t,e){return t instanceof dt?function(r,s){return s instanceof dt&&r.op===s.op&&r.field.isEqual(s.field)&&Pr(r.value,s.value)}(t,e):t instanceof sr?function(r,s){return s instanceof sr&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&EC(o,s.filters[l]),!0):!1}(t,e):void le(19439)}function TC(t){return t instanceof dt?function(n){return`${n.field.canonicalString()} ${n.op} ${Ga(n.value)}`}(t):t instanceof sr?function(n){return n.op.toString()+" {"+n.getFilters().map(TC).join(" ,")+"}"}(t):"Filter"}class C9 extends dt{constructor(e,n,r){super(e,n,r),this.key=te.fromName(r.referenceValue)}matches(e){const n=te.comparator(e.key,this.key);return this.matchesComparison(n)}}class R9 extends dt{constructor(e,n){super(e,"in",n),this.keys=bC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class P9 extends dt{constructor(e,n){super(e,"not-in",n),this.keys=bC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function bC(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>te.fromName(r.referenceValue))}class j9 extends dt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Sx(n)&&$c(n.arrayValue,this.value)}}class k9 extends dt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&$c(this.value.arrayValue,n)}}class D9 extends dt{constructor(e,n){super(e,"not-in",n)}matches(e){if($c(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!$c(this.value.arrayValue,n)}}class O9 extends dt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Sx(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>$c(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M9{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.Te=null}}function y1(t,e=null,n=[],r=[],s=null,i=null,o=null){return new M9(t,e,n,r,s,i,o)}function Ix(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>fy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Lf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ga(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ga(r)).join(",")),e.Te=n}return e.Te}function Nx(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!N9(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!EC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g1(t.startAt,e.startAt)&&g1(t.endAt,e.endAt)}function my(t){return te.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function L9(t,e,n,r,s,i,o,l){return new So(t,e,n,r,s,i,o,l)}function Ax(t){return new So(t)}function v1(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Cx(t){return t.collectionGroup!==null}function fa(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new xt(At.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new zc(i,r))}),n.has(At.keyField().canonicalString())||e.Ie.push(new zc(At.keyField(),r))}return e.Ie}function Er(t){const e=fe(t);return e.Ee||(e.Ee=V9(e,fa(t))),e.Ee}function V9(t,e){if(t.limitType==="F")return y1(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new zc(s.field,i)});const n=t.endAt?new Ka(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ka(t.startAt.position,t.startAt.inclusive):null;return y1(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function py(t,e){const n=t.filters.concat([e]);return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Lh(t,e,n){return new So(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Uf(t,e){return Nx(Er(t),Er(e))&&t.limitType===e.limitType}function SC(t){return`${Ix(Er(t))}|lt:${t.limitType}`}function Vo(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>TC(s)).join(", ")}]`),Lf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ga(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ga(s)).join(",")),`Target(${r})`}(Er(t))}; limitType=${t.limitType})`}function $f(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):te.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of fa(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=p1(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,fa(r),s)||r.endAt&&!function(o,l,c){const d=p1(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,fa(r),s))}(t,e)}function F9(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IC(t){return(e,n)=>{let r=!1;for(const s of fa(t)){const i=U9(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function U9(t,e,n){const r=t.field.isKeyField()?te.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?qa(c,d):le(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Io{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ei(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cC(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9=new Xe(te.comparator);function ls(){return $9}const NC=new Xe(te.comparator);function Kl(...t){let e=NC;for(const n of t)e=e.insert(n.key,n);return e}function AC(t){let e=NC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Bi(){return hc()}function CC(){return hc()}function hc(){return new Io(t=>t.toString(),(t,e)=>t.isEqual(e))}const z9=new Xe(te.comparator),B9=new xt(te.comparator);function Ee(...t){let e=B9;for(const n of t)e=e.add(n);return e}const H9=new xt(_e);function W9(){return H9}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kh(e)?"-0":e}}function RC(t){return{integerValue:""+t}}function PC(t,e){return w9(e)?RC(e):Rx(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zf{constructor(){this._=void 0}}function q9(t,e,n){return t instanceof Vh?function(s,i){const o={fields:{[hC]:{stringValue:dC},[mC]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Vf(i)&&(i=Ff(i)),i&&(o.fields[fC]=i),{mapValue:o}}(n,e):t instanceof Bc?kC(t,e):t instanceof Hc?DC(t,e):function(s,i){const o=jC(s,i),l=x1(o)+x1(s.Ae);return hy(o)&&hy(s.Ae)?RC(l):Rx(s.serializer,l)}(t,e)}function G9(t,e,n){return t instanceof Bc?kC(t,e):t instanceof Hc?DC(t,e):n}function jC(t,e){return t instanceof Wc?function(r){return hy(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Vh extends zf{}class Bc extends zf{constructor(e){super(),this.elements=e}}function kC(t,e){const n=OC(e);for(const r of t.elements)n.some(s=>Pr(s,r))||n.push(r);return{arrayValue:{values:n}}}class Hc extends zf{constructor(e){super(),this.elements=e}}function DC(t,e){let n=OC(e);for(const r of t.elements)n=n.filter(s=>!Pr(s,r));return{arrayValue:{values:n}}}class Wc extends zf{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function x1(t){return st(t.integerValue||t.doubleValue)}function OC(t){return Sx(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K9{constructor(e,n){this.field=e,this.transform=n}}function Q9(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Bc&&s instanceof Bc||r instanceof Hc&&s instanceof Hc?Wa(r.elements,s.elements,Pr):r instanceof Wc&&s instanceof Wc?Pr(r.Ae,s.Ae):r instanceof Vh&&s instanceof Vh}(t.transform,e.transform)}class Y9{constructor(e,n){this.version=e,this.transformResults=n}}class wn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new wn}static exists(e){return new wn(void 0,e)}static updateTime(e){return new wn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ud(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Bf{}function MC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Px(t.key,wn.none()):new hu(t.key,t.data,wn.none());{const n=t.data,r=en.empty();let s=new xt(At.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Ti(t.key,r,new gn(s.toArray()),wn.none())}}function X9(t,e,n){t instanceof hu?function(s,i,o){const l=s.value.clone(),c=_1(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Ti?function(s,i,o){if(!Ud(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=_1(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(LC(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fc(t,e,n,r){return t instanceof hu?function(i,o,l,c){if(!Ud(i.precondition,o))return l;const d=i.value.clone(),h=E1(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Ti?function(i,o,l,c){if(!Ud(i.precondition,o))return l;const d=E1(i.fieldTransforms,c,o),h=o.data;return h.setAll(LC(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,l){return Ud(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function J9(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=jC(r.transform,s||null);i!=null&&(n===null&&(n=en.empty()),n.set(r.field,i))}return n||null}function w1(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Wa(r,s,(i,o)=>Q9(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hu extends Bf{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ti extends Bf{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function LC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _1(t,e,n){const r=new Map;De(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,G9(o,l,n[s]))}return r}function E1(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,q9(i,o,e))}return r}class Px extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Z9 extends Bf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e${constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&X9(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CC();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=MC(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&Wa(this.mutations,e.mutations,(n,r)=>w1(n,r))&&Wa(this.baseMutations,e.baseMutations,(n,r)=>w1(n,r))}}class jx{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){De(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return z9}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new jx(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t$=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n${constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var lt,Se;function r$(t){switch(t){case F.OK:return le(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return le(15467,{code:t})}}function VC(t){if(t===void 0)return as("GRPC error has no .code"),F.UNKNOWN;switch(t){case lt.OK:return F.OK;case lt.CANCELLED:return F.CANCELLED;case lt.UNKNOWN:return F.UNKNOWN;case lt.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case lt.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case lt.INTERNAL:return F.INTERNAL;case lt.UNAVAILABLE:return F.UNAVAILABLE;case lt.UNAUTHENTICATED:return F.UNAUTHENTICATED;case lt.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case lt.NOT_FOUND:return F.NOT_FOUND;case lt.ALREADY_EXISTS:return F.ALREADY_EXISTS;case lt.PERMISSION_DENIED:return F.PERMISSION_DENIED;case lt.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case lt.ABORTED:return F.ABORTED;case lt.OUT_OF_RANGE:return F.OUT_OF_RANGE;case lt.UNIMPLEMENTED:return F.UNIMPLEMENTED;case lt.DATA_LOSS:return F.DATA_LOSS;default:return le(39323,{code:t})}}(Se=lt||(lt={}))[Se.OK=0]="OK",Se[Se.CANCELLED=1]="CANCELLED",Se[Se.UNKNOWN=2]="UNKNOWN",Se[Se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Se[Se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Se[Se.NOT_FOUND=5]="NOT_FOUND",Se[Se.ALREADY_EXISTS=6]="ALREADY_EXISTS",Se[Se.PERMISSION_DENIED=7]="PERMISSION_DENIED",Se[Se.UNAUTHENTICATED=16]="UNAUTHENTICATED",Se[Se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Se[Se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Se[Se.ABORTED=10]="ABORTED",Se[Se.OUT_OF_RANGE=11]="OUT_OF_RANGE",Se[Se.UNIMPLEMENTED=12]="UNIMPLEMENTED",Se[Se.INTERNAL=13]="INTERNAL",Se[Se.UNAVAILABLE=14]="UNAVAILABLE",Se[Se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s$(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i$=new ri([4294967295,4294967295],0);function T1(t){const e=s$().encode(t),n=new JA;return n.update(e),new Uint8Array(n.digest())}function b1(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ri([n,r],0),new ri([s,i],0)]}class kx{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Ql(`Invalid padding: ${n}`);if(r<0)throw new Ql(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ql(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Ql(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ri.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ri.fromNumber(r)));return s.compare(i$)===1&&(s=new ri([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=T1(e),[r,s]=b1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new kx(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=T1(e),[r,s]=b1(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Ql extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hf{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,fu.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Hf(de.min(),s,new Xe(_e),ls(),Ee())}}class fu{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new fu(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(e,n,r,s){this.be=e,this.removedTargetIds=n,this.key=r,this.De=s}}class FC{constructor(e,n){this.targetId=e,this.Ce=n}}class UC{constructor(e,n,r=Pt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class S1{constructor(){this.ve=0,this.Fe=I1(),this.Me=Pt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Ee(),n=Ee(),r=Ee();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:le(38017,{changeType:i})}}),new fu(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=I1()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,De(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class o${constructor(e){this.Ge=e,this.ze=new Map,this.je=ls(),this.Je=cd(),this.He=cd(),this.Ye=new Xe(_e)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:le(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(my(i))if(r===0){const o=new te(i.path);this.et(n,o,Vt.newNoDocument(o,de.min()))}else De(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),c=l?this.ct(l,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=mi(r).toUint8Array()}catch(c){if(c instanceof uC)return Ha("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new kx(o,s,i)}catch(c){return Ha(c instanceof Ql?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const l=this.ot(o);if(l){if(i.current&&my(l.target)){const c=new te(l.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Vt.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.qe())}});let r=Ee();this.He.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new Hf(e,n,this.Ye,this.je,r);return this.je=ls(),this.Je=cd(),this.He=cd(),this.Ye=new Xe(_e),s}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.Qe(n,1):s.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new S1,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new xt(_e),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new xt(_e),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||K("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new S1),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function cd(){return new Xe(te.comparator)}function I1(){return new Xe(te.comparator)}const a$={asc:"ASCENDING",desc:"DESCENDING"},l$={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},c$={and:"AND",or:"OR"};class u${constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function gy(t,e){return t.useProto3Json||Lf(e)?e:{value:e}}function Fh(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $C(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function d$(t,e){return Fh(t,e.toTimestamp())}function Tr(t){return De(!!t,49232),de.fromTimestamp(function(n){const r=fi(n);return new Ce(r.seconds,r.nanos)}(t))}function Dx(t,e){return yy(t,e).canonicalString()}function yy(t,e){const n=function(s){return new Ue(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function zC(t){const e=Ue.fromString(t);return De(GC(e),10190,{key:e.toString()}),e}function vy(t,e){return Dx(t.databaseId,e.path)}function Ep(t,e){const n=zC(e);if(n.get(1)!==t.databaseId.projectId)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new te(HC(n))}function BC(t,e){return Dx(t.databaseId,e)}function h$(t){const e=zC(t);return e.length===4?Ue.emptyPath():HC(e)}function xy(t){return new Ue(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function HC(t){return De(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function N1(t,e,n){return{name:vy(t,e),fields:n.value.mapValue.fields}}function f$(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:le(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(De(h===void 0||typeof h=="string",58123),Pt.fromBase64String(h||"")):(De(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),Pt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const h=d.code===void 0?F.UNKNOWN:VC(d.code);return new W(h,d.message||"")}(o);n=new UC(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Ep(t,r.document.name),i=Tr(r.document.updateTime),o=r.document.createTime?Tr(r.document.createTime):de.min(),l=new en({mapValue:{fields:r.document.fields}}),c=Vt.newFoundDocument(s,i,o,l),d=r.targetIds||[],h=r.removedTargetIds||[];n=new $d(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Ep(t,r.document),i=r.readTime?Tr(r.readTime):de.min(),o=Vt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new $d([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Ep(t,r.document),i=r.removedTargetIds||[];n=new $d([],i,s,null)}else{if(!("filter"in e))return le(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new n$(s,i),l=r.targetId;n=new FC(l,o)}}return n}function m$(t,e){let n;if(e instanceof hu)n={update:N1(t,e.key,e.value)};else if(e instanceof Px)n={delete:vy(t,e.key)};else if(e instanceof Ti)n={update:N1(t,e.key,e.data),updateMask:T$(e.fieldMask)};else{if(!(e instanceof Z9))return le(16599,{Vt:e.type});n={verify:vy(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Vh)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Bc)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Hc)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wc)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw le(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:d$(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:le(27497)}(t,e.precondition)),n}function p$(t,e){return t&&t.length>0?(De(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Tr(s.updateTime):Tr(i);return o.isEqual(de.min())&&(o=Tr(i)),new Y9(o,s.transformResults||[])}(n,e))):[]}function g$(t,e){return{documents:[BC(t,e.path)]}}function y$(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=BC(t,s);const i=function(d){if(d.length!==0)return qC(sr.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:Fo(m.field),direction:w$(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=gy(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function v$(t){let e=h$(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){De(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=WC(f);return m instanceof sr&&_C(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(b){return new zc(Uo(b.field),function(_){switch(_){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,Lf(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,y=f.values||[];return new Ka(y,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,y=f.values||[];return new Ka(y,m)}(n.endAt)),L9(e,s,o,i,l,"F",c,d)}function x$(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function WC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uo(n.unaryFilter.field);return dt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Uo(n.unaryFilter.field);return dt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Uo(n.unaryFilter.field);return dt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uo(n.unaryFilter.field);return dt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return le(61313);default:return le(60726)}}(t):t.fieldFilter!==void 0?function(n){return dt.create(Uo(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return le(58110);default:return le(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sr.create(n.compositeFilter.filters.map(r=>WC(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return le(1026)}}(n.compositeFilter.op))}(t):le(30097,{filter:t})}function w$(t){return a$[t]}function _$(t){return l$[t]}function E$(t){return c$[t]}function Fo(t){return{fieldPath:t.canonicalString()}}function Uo(t){return At.fromServerFormat(t.fieldPath)}function qC(t){return t instanceof dt?function(n){if(n.op==="=="){if(m1(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NAN"}};if(f1(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(m1(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NAN"}};if(f1(n.value))return{unaryFilter:{field:Fo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Fo(n.field),op:_$(n.op),value:n.value}}}(t):t instanceof sr?function(n){const r=n.getFilters().map(s=>qC(s));return r.length===1?r[0]:{compositeFilter:{op:E$(n.op),filters:r}}}(t):le(54877,{filter:t})}function T$(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function GC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hs{constructor(e,n,r,s,i=de.min(),o=de.min(),l=Pt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Hs(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hs(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b${constructor(e){this.yt=e}}function S$(t){const e=v$({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I${constructor(){this.Cn=new N$}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(hi.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(hi.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class N${constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new xt(Ue.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new xt(Ue.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},KC=41943040;class Jt{static withCacheSize(e){return new Jt(e,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Jt.DEFAULT_COLLECTION_PERCENTILE=10,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Jt.DEFAULT=new Jt(KC,Jt.DEFAULT_COLLECTION_PERCENTILE,Jt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Jt.DISABLED=new Jt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qa(0)}static cr(){return new Qa(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C1="LruGarbageCollector",A$=1048576;function R1([t,e],[n,r]){const s=_e(t,n);return s===0?_e(e,r):s}class C${constructor(e){this.Ir=e,this.buffer=new xt(R1),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();R1(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class R${constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){K(C1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ul(n)?K(C1,"Ignoring IndexedDB error during garbage collection: ",n):await cl(n)}await this.Vr(3e5)})}}class P${constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(Mf.ce);const r=new C$(n);return this.mr.forEachTarget(e,s=>r.Ar(s.sequenceNumber)).next(()=>this.mr.pr(e,s=>r.Ar(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(K("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(A1)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(K("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A1):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,s,i,o,l,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(K("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,l=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),Lo()<=we.DEBUG&&K("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(l-o)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function j$(t,e){return new P$(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k${constructor(){this.changes=new Io(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D${constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O${constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fc(r.mutation,s,gn.empty(),Ce.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const s=Bi();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Kl();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Bi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=ls();const o=hc(),l=function(){return hc()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ti)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),fc(h.mutation,d,h.mutation.getFieldMask(),Ce.now())):o.set(d.key,gn.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>l.set(d,new D$(h,o.get(d)??null))),l))}recalculateAndSaveOverlays(e,n){const r=hc();let s=new Xe((o,l)=>o-l),i=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||gn.empty();h=l.applyToLocalView(d,h),r.set(c,h);const f=(s.get(l.batchId)||Ee()).add(c);s=s.insert(l.batchId,f)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,h=c.value,f=CC();h.forEach(m=>{if(!i.has(m)){const y=MC(n.get(m),r.get(m));y!==null&&f.set(m,y),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return te.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):Cx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):$.resolve(Bi());let l=Vc,c=i;return o.next(d=>$.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?$.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,Ee())).next(h=>({batchId:l,changes:AC(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new te(n)).next(r=>{let s=Kl();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Kl();return this.indexManager.getCollectionParents(e,i).next(l=>$.forEach(l,c=>{const d=function(f,m){return new So(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Vt.newInvalidDocument(h)))});let l=Kl();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&fc(h.mutation,d,gn.empty(),Ce.now()),$f(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M${constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tr(s.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(s){return{name:s.name,query:S$(s.bundledQuery),readTime:Tr(s.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(){this.overlays=new Xe(te.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Bi();return $.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.St(e,n,i)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.qr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const s=Bi(),i=n.length+1,o=new te(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return $.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Xe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Bi(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Bi(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return $.resolve(l)}St(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(r.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new t$(n,r));let i=this.qr.get(n);i===void 0&&(i=Ee(),this.qr.set(n,i)),this.qr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V${constructor(){this.sessionToken=Pt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(){this.Qr=new xt(Et.$r),this.Ur=new xt(Et.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new Et(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new Et(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new te(new Ue([])),r=new Et(n,e),s=new Et(n,e+1),i=[];return this.Ur.forEachInRange([r,s],o=>{this.Gr(o),i.push(o.key)}),i}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new te(new Ue([])),r=new Et(n,e),s=new Et(n,e+1);let i=Ee();return this.Ur.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Et(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Et{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return te.comparator(e.key,n.key)||_e(e.Yr,n.Yr)}static Kr(e,n){return _e(e.Yr,n.Yr)||te.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F${constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new xt(Et.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new e$(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.Zr=this.Zr.add(new Et(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.ei(r),i=s<0?0:s;return $.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?bx:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Et(n,0),s=new Et(n,Number.POSITIVE_INFINITY),i=[];return this.Zr.forEachInRange([r,s],o=>{const l=this.Xr(o.Yr);i.push(l)}),$.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new xt(_e);return n.forEach(s=>{const i=new Et(s,0),o=new Et(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([i,o],l=>{r=r.add(l.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;te.isDocumentKey(i)||(i=i.child(""));const o=new Et(new te(i),0);let l=new xt(_e);return this.Zr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.Yr)),!0)},o),$.resolve(this.ti(l))}ti(e){const n=[];return e.forEach(r=>{const s=this.Xr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){De(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,s=>{const i=new Et(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new Et(n,0),s=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.ri=e,this.docs=function(){return new Xe(te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Vt.newInvalidDocument(n))}getEntries(e,n){let r=ls();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Vt.newInvalidDocument(s))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=ls();const o=n.path,l=new te(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||g9(p9(h),r)<=0||(s.has(h.key)||$f(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return $.resolve(i)}getAllFromCollectionGroup(e,n,r,s){le(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new $$(this)}getSize(e){return $.resolve(this.size)}}class $$ extends k${constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z${constructor(e){this.persistence=e,this.si=new Io(n=>Ix(n),Nx),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new Ox,this.targetCount=0,this.ai=Qa.ur()}forEachTarget(e,n){return this.si.forEach((r,s)=>n(s)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new Qa(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.si.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.si.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),$.waitFor(i).next(()=>s)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),$.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e,n){this.ui={},this.overlays={},this.ci=new Mf(0),this.li=!1,this.li=!0,this.hi=new V$,this.referenceDelegate=e(this),this.Pi=new z$(this),this.indexManager=new I$,this.remoteDocumentCache=function(s){return new U$(s)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new b$(n),this.Ii=new M$(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new L$,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new F$(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){K("MemoryPersistence","Starting transaction:",e);const s=new B$(this.ci.next());return this.referenceDelegate.Ei(),r(s).next(i=>this.referenceDelegate.di(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class B$ extends v9{constructor(e){super(),this.currentSequenceNumber=e}}class Mx{constructor(e){this.persistence=e,this.Ri=new Ox,this.Vi=null}static mi(e){return new Mx(e)}get fi(){if(this.Vi)return this.Vi;throw le(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(s=>this.fi.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.fi.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const s=te.fromPath(r);return this.gi(e,s).next(i=>{i||n.removeEntry(s,de.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Uh{constructor(e,n){this.persistence=e,this.pi=new Io(r=>_9(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=j$(this,n)}static mi(e,n){return new Uh(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,s)=>this.br(e,r,s).next(i=>i?$.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ii(e,o=>this.br(e,o,n).next(l=>{l||(r++,i.removeEntry(o,de.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Vd(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.pi.get(n);return $.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=s}static As(e,n){let r=Ee(),s=Ee();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Lx(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H${constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W${constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return mF()?8:x9(Ut())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.ys(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ws(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new H$;return this.Ss(e,n,o).next(l=>{if(i.result=l,this.Vs)return this.bs(e,n,o,l.size)})}).next(()=>i.result)}bs(e,n,r,s){return r.documentReadCount<this.fs?(Lo()<=we.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",Vo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Lo()<=we.DEBUG&&K("QueryEngine","Query:",Vo(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.gs*s?(Lo()<=we.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",Vo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Er(n))):$.resolve())}ys(e,n){if(v1(n))return $.resolve(null);let r=Er(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Lh(n,null,"F"),r=Er(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=Ee(...i);return this.ps.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.Ds(n,l);return this.Cs(n,d,o,c.readTime)?this.ys(e,Lh(n,null,"F")):this.vs(e,d,n,c)}))})))}ws(e,n,r,s){return v1(n)||s.isEqual(de.min())?$.resolve(null):this.ps.getDocuments(e,r).next(i=>{const o=this.Ds(n,i);return this.Cs(n,o,r,s)?$.resolve(null):(Lo()<=we.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Vo(n)),this.vs(e,o,n,m9(s,Vc)).next(l=>l))})}Ds(e,n){let r=new xt(IC(e));return n.forEach((s,i)=>{$f(e,i)&&(r=r.add(i))}),r}Cs(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Ss(e,n,r){return Lo()<=we.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",Vo(n)),this.ps.getDocumentsMatchingQuery(e,n,hi.min(),r)}vs(e,n,r,s){return this.ps.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vx="LocalStore",q$=3e8;class G${constructor(e,n,r,s){this.persistence=e,this.Fs=n,this.serializer=s,this.Ms=new Xe(_e),this.xs=new Io(i=>Ix(i),Nx),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new O$(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function K$(t,e,n,r){return new G$(t,e,n,r)}async function YC(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=Ee();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ls:d,removedBatchIds:o,addedBatchIds:l}))})})}function Q$(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.Ns.newChangeBuffer({trackRemovals:!0});return function(l,c,d,h){const f=d.batch,m=f.keys();let y=$.resolve();return m.forEach(b=>{y=y.next(()=>h.getEntry(c,b)).next(v=>{const _=d.docVersions.get(b);De(_!==null,48541),v.version.compareTo(_)<0&&(f.applyToRemoteDocument(v,d),v.isValidDocument()&&(v.setReadTime(d.commitVersion),h.addEntry(v)))})}),y.next(()=>l.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=Ee();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function XC(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function Y$(t,e){const n=fe(t),r=e.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(n.Pi.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(i,h.addedDocuments,f)));let y=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?y=y.withResumeToken(Pt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):h.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(h.resumeToken,r)),s=s.insert(f,y),function(v,_,E){return v.resumeToken.approximateByteSize()===0||_.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=q$?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,y,h)&&l.push(n.Pi.updateTargetData(i,y))});let c=ls(),d=Ee();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(X$(i,o,e.documentUpdates).next(h=>{c=h.ks,d=h.qs})),!r.isEqual(de.min())){const h=n.Pi.getLastRemoteSnapshotVersion(i).next(f=>n.Pi.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(h)}return $.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.Ms=s,i))}function X$(t,e,n){let r=Ee(),s=Ee();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=ls();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(de.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):K(Vx,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{ks:o,qs:s}})}function J$(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=bx),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Z$(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Pi.getTargetData(r,e).next(i=>i?(s=i,$.resolve(s)):n.Pi.allocateTargetId(r).next(o=>(s=new Hs(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ms.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function wy(t,e,n){const r=fe(t),s=r.Ms.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ul(o))throw o;K(Vx,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(s.target)}function P1(t,e,n){const r=fe(t);let s=de.min(),i=Ee();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=fe(c),m=f.xs.get(h);return m!==void 0?$.resolve(f.Ms.get(m)):f.Pi.getTargetData(d,h)}(r,o,Er(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?s:de.min(),n?i:Ee())).next(l=>(ez(r,F9(e),l),{documents:l,Qs:i})))}function ez(t,e,n){let r=t.Os.get(e)||de.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Os.set(e,r)}class j1{constructor(){this.activeTargetIds=W9()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class tz{constructor(){this.Mo=new j1,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new j1,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nz{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1="ConnectivityMonitor";class D1{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){K(k1,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){K(k1,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ud=null;function _y(){return ud===null?ud=function(){return 268435456+Math.round(2147483648*Math.random())}():ud++,"0x"+ud.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tp="RestConnection",rz={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sz{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${s}`,this.Wo=this.databaseId.database===Dh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Go(e,n,r,s,i){const o=_y(),l=this.zo(e,n.toUriEncodedString());K(Tp,`Sending RPC '${e}' ${o}:`,l,r);const c={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(c,s,i);const{host:d}=new URL(l),h=il(d);return this.Jo(e,l,c,r,h).then(f=>(K(Tp,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Ha(Tp,`RPC '${e}' ${o} failed with error: `,f,"url: ",l,"request:",r),f})}Ho(e,n,r,s,i,o){return this.Go(e,n,r,s,i)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ll}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}zo(e,n){const r=rz[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iz{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt="WebChannelConnection";class oz extends sz{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,s,i){const o=_y();return new Promise((l,c)=>{const d=new ZA;d.setWithCredentials(!0),d.listenOnce(eC.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case Ld.NO_ERROR:const f=d.getResponseJson();K(Dt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),l(f);break;case Ld.TIMEOUT:K(Dt,`RPC '${e}' ${o} timed out`),c(new W(F.DEADLINE_EXCEEDED,"Request time out"));break;case Ld.HTTP_ERROR:const m=d.getStatus();if(K(Dt,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let y=d.getResponseJson();Array.isArray(y)&&(y=y[0]);const b=y==null?void 0:y.error;if(b&&b.status&&b.message){const v=function(E){const x=E.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(x)>=0?x:F.UNKNOWN}(b.status);c(new W(v,b.message))}else c(new W(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new W(F.UNAVAILABLE,"Connection failed."));break;default:le(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{K(Dt,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);K(Dt,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=_y(),i=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=rC(),l=nC(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.jo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const h=i.join("");K(Dt,`Creating RPC '${e}' stream ${s}: ${h}`,c);const f=o.createWebChannel(h,c);this.I_(f);let m=!1,y=!1;const b=new iz({Yo:_=>{y?K(Dt,`Not sending because RPC '${e}' stream ${s} is closed:`,_):(m||(K(Dt,`Opening RPC '${e}' stream ${s} transport.`),f.open(),m=!0),K(Dt,`RPC '${e}' stream ${s} sending:`,_),f.send(_))},Zo:()=>f.close()}),v=(_,E,x)=>{_.listen(E,S=>{try{x(S)}catch(R){setTimeout(()=>{throw R},0)}})};return v(f,Gl.EventType.OPEN,()=>{y||(K(Dt,`RPC '${e}' stream ${s} transport opened.`),b.o_())}),v(f,Gl.EventType.CLOSE,()=>{y||(y=!0,K(Dt,`RPC '${e}' stream ${s} transport closed`),b.a_(),this.E_(f))}),v(f,Gl.EventType.ERROR,_=>{y||(y=!0,Ha(Dt,`RPC '${e}' stream ${s} transport errored. Name:`,_.name,"Message:",_.message),b.a_(new W(F.UNAVAILABLE,"The operation could not be completed")))}),v(f,Gl.EventType.MESSAGE,_=>{var E;if(!y){const x=_.data[0];De(!!x,16349);const S=x,R=(S==null?void 0:S.error)||((E=S[0])==null?void 0:E.error);if(R){K(Dt,`RPC '${e}' stream ${s} received error:`,R);const D=R.status;let M=function(N){const C=lt[N];if(C!==void 0)return VC(C)}(D),T=R.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+D+" with message "+R.message),y=!0,b.a_(new W(M,T)),f.close()}else K(Dt,`RPC '${e}' stream ${s} received:`,x),b.u_(x)}}),v(l,tC.STAT_EVENT,_=>{_.stat===cy.PROXY?K(Dt,`RPC '${e}' stream ${s} detected buffering proxy`):_.stat===cy.NOPROXY&&K(Dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.__()},0),b}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function bp(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wf(t){return new u$(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=s,this.R_=i,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&K("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O1="PersistentStream";class ZC{constructor(e,n,r,s,i,o,l,c){this.Mi=e,this.S_=r,this.b_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new JC(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(as(n.toString()),as("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new W(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.J_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return K(O1,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(K(O1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class az extends ZC{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=f$(this.serializer,e),r=function(i){if(!("targetChange"in i))return de.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?Tr(o.readTime):de.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=xy(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=my(c)?{documents:g$(i,c)}:{query:y$(i,c).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=$C(i,o.resumeToken);const d=gy(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(de.min())>0){l.readTime=Fh(i,o.snapshotVersion.toTimestamp());const d=gy(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=x$(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=xy(this.serializer),n.removeTarget=e,this.q_(n)}}class lz extends ZC{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return De(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,De(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){De(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=p$(e.writeResults,e.commitTime),r=Tr(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=xy(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>m$(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cz{}class uz extends cz{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Go(e,yy(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new W(F.UNKNOWN,i.toString())})}Ho(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Ho(e,yy(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(F.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class dz{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(as(n),this.aa=!1):K("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo="RemoteStore";class hz{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=i,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{No(this)&&(K(mo,"Restarting streams for network reachability change."),await async function(c){const d=fe(c);d.Ea.add(4),await mu(d),d.Ra.set("Unknown"),d.Ea.delete(4),await qf(d)}(this))})}),this.Ra=new dz(r,s)}}async function qf(t){if(No(t))for(const e of t.da)await e(!0)}async function mu(t){for(const e of t.da)await e(!1)}function eR(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),zx(n)?$x(n):dl(n).O_()&&Ux(n,e))}function Fx(t,e){const n=fe(t),r=dl(n);n.Ia.delete(e),r.O_()&&tR(n,e),n.Ia.size===0&&(r.O_()?r.L_():No(n)&&n.Ra.set("Unknown"))}function Ux(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}dl(t).Y_(e)}function tR(t,e){t.Va.Ue(e),dl(t).Z_(e)}function $x(t){t.Va=new o$({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),dl(t).start(),t.Ra.ua()}function zx(t){return No(t)&&!dl(t).x_()&&t.Ia.size>0}function No(t){return fe(t).Ea.size===0}function nR(t){t.Va=void 0}async function fz(t){t.Ra.set("Online")}async function mz(t){t.Ia.forEach((e,n)=>{Ux(t,e)})}async function pz(t,e){nR(t),zx(t)?(t.Ra.ha(e),$x(t)):t.Ra.set("Unknown")}async function gz(t,e,n){if(t.Ra.set("Online"),e instanceof UC&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.Ia.delete(l),s.Va.removeTarget(l))}(t,e)}catch(r){K(mo,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await $h(t,r)}else if(e instanceof $d?t.Va.Ze(e):e instanceof FC?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await XC(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Va.Tt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(Pt.EMPTY_BYTE_STRING,h.snapshotVersion)),tR(i,c);const f=new Hs(h.target,c,d,h.sequenceNumber);Ux(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){K(mo,"Failed to raise snapshot:",r),await $h(t,r)}}async function $h(t,e,n){if(!ul(e))throw e;t.Ea.add(1),await mu(t),t.Ra.set("Offline"),n||(n=()=>XC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{K(mo,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await qf(t)})}function rR(t,e){return e().catch(n=>$h(t,n,e))}async function Gf(t){const e=fe(t),n=gi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:bx;for(;yz(e);)try{const s=await J$(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,vz(e,s)}catch(s){await $h(e,s)}sR(e)&&iR(e)}function yz(t){return No(t)&&t.Ta.length<10}function vz(t,e){t.Ta.push(e);const n=gi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function sR(t){return No(t)&&!gi(t).x_()&&t.Ta.length>0}function iR(t){gi(t).start()}async function xz(t){gi(t).ra()}async function wz(t){const e=gi(t);for(const n of t.Ta)e.ea(n.mutations)}async function _z(t,e,n){const r=t.Ta.shift(),s=jx.from(r,e,n);await rR(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gf(t)}async function Ez(t,e){e&&gi(t).X_&&await async function(r,s){if(function(o){return r$(o)&&o!==F.ABORTED}(s.code)){const i=r.Ta.shift();gi(r).B_(),await rR(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Gf(r)}}(t,e),sR(t)&&iR(t)}async function M1(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),K(mo,"RemoteStore received new credentials");const r=No(n);n.Ea.add(3),await mu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await qf(n)}async function Tz(t,e){const n=fe(t);e?(n.Ea.delete(2),await qf(n)):e||(n.Ea.add(2),await mu(n),n.Ra.set("Unknown"))}function dl(t){return t.ma||(t.ma=function(n,r,s){const i=fe(n);return i.sa(),new az(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:fz.bind(null,t),t_:mz.bind(null,t),r_:pz.bind(null,t),H_:gz.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),zx(t)?$x(t):t.Ra.set("Unknown")):(await t.ma.stop(),nR(t))})),t.ma}function gi(t){return t.fa||(t.fa=function(n,r,s){const i=fe(n);return i.sa(),new lz(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:xz.bind(null,t),r_:Ez.bind(null,t),ta:wz.bind(null,t),na:_z.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Gf(t)):(await t.fa.stop(),t.Ta.length>0&&(K(mo,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Qr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Bx(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hx(t,e){if(as("AsyncQueue",`${e}: ${t}`),ul(t))return new W(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{static emptySet(e){return new ma(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||te.comparator(n.key,r.key):(n,r)=>te.comparator(n.key,r.key),this.keyedMap=Kl(),this.sortedSet=new Xe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ma)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ma;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L1{constructor(){this.ga=new Xe(te.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):le(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ya{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Ya(e,n,ma.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Uf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class Sz{constructor(){this.queries=V1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=fe(n),i=s.queries;s.queries=V1(),i.forEach((o,l)=>{for(const c of l.Sa)c.onError(r)})})(this,new W(F.ABORTED,"Firestore shutting down"))}}function V1(){return new Io(t=>SC(t),Uf)}async function oR(t,e){const n=fe(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.ba()&&e.Da()&&(r=2):(i=new bz,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Hx(o,`Initialization of query '${Vo(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.Sa.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&Wx(n)}async function aR(t,e){const n=fe(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.Sa.indexOf(e);o>=0&&(i.Sa.splice(o,1),i.Sa.length===0?s=e.Da()?0:1:!i.ba()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Iz(t,e){const n=fe(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.Sa)l.Fa(s)&&(r=!0);o.wa=s}}r&&Wx(n)}function Nz(t,e,n){const r=fe(t),s=r.queries.get(e);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(e)}function Wx(t){t.Ca.forEach(e=>{e.next()})}var Ey,F1;(F1=Ey||(Ey={})).Ma="default",F1.Cache="cache";class lR{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ya(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ya.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Ey.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.key=e}}class uR{constructor(e){this.key=e}}class Az{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=Ee(),this.mutatedKeys=Ee(),this.eu=IC(e),this.tu=new ma(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new L1,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),y=$f(this.query,f)?f:null,b=!!m&&this.mutatedKeys.has(m.key),v=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations);let _=!1;m&&y?m.data.isEqual(y.data)?b!==v&&(r.track({type:3,doc:y}),_=!0):this.su(m,y)||(r.track({type:2,doc:y}),_=!0,(c&&this.eu(y,c)>0||d&&this.eu(y,d)<0)&&(l=!0)):!m&&y?(r.track({type:0,doc:y}),_=!0):m&&!y&&(r.track({type:1,doc:m}),_=!0,(c||d)&&(l=!0)),_&&(y?(o=o.add(y),i=v?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Cs:l,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(y,b){const v=_=>{switch(_){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le(20277,{Rt:_})}};return v(y)-v(b)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const l=n&&!s?this._u():[],c=this.Xa.size===0&&this.current&&!s?1:0,d=c!==this.Za;return this.Za=c,o.length!==0||d?{snapshot:new Ya(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new L1,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=Ee(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new uR(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new cR(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=Ee();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ya.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const qx="SyncEngine";class Cz{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rz{constructor(e){this.key=e,this.hu=!1}}class Pz{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Io(l=>SC(l),Uf),this.Iu=new Map,this.Eu=new Set,this.du=new Xe(te.comparator),this.Au=new Map,this.Ru=new Ox,this.Vu={},this.mu=new Map,this.fu=Qa.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function jz(t,e,n=!0){const r=gR(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await dR(r,e,n,!0),s}async function kz(t,e){const n=gR(t);await dR(n,e,!0,!1)}async function dR(t,e,n,r){const s=await Z$(t.localStore,Er(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Dz(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&eR(t.remoteStore,s),l}async function Dz(t,e,n,r,s){t.pu=(f,m,y)=>async function(v,_,E,x){let S=_.view.ru(E);S.Cs&&(S=await P1(v.localStore,_.query,!1).then(({documents:T})=>_.view.ru(T,S)));const R=x&&x.targetChanges.get(_.targetId),D=x&&x.targetMismatches.get(_.targetId)!=null,M=_.view.applyChanges(S,v.isPrimaryClient,R,D);return $1(v,_.targetId,M.au),M.snapshot}(t,f,m,y);const i=await P1(t.localStore,e,!0),o=new Az(e,i.Qs),l=o.ru(i.documents),c=fu.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);$1(t,n,d.au);const h=new Cz(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function Oz(t,e,n){const r=fe(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!Uf(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await wy(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Fx(r.remoteStore,s.targetId),Ty(r,s.targetId)}).catch(cl)):(Ty(r,s.targetId),await wy(r.localStore,s.targetId,!0))}async function Mz(t,e){const n=fe(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Fx(n.remoteStore,r.targetId))}async function Lz(t,e,n){const r=Hz(t);try{const s=await function(o,l){const c=fe(o),d=Ce.now(),h=l.reduce((y,b)=>y.add(b.key),Ee());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",y=>{let b=ls(),v=Ee();return c.Ns.getEntries(y,h).next(_=>{b=_,b.forEach((E,x)=>{x.isValidDocument()||(v=v.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(y,b)).next(_=>{f=_;const E=[];for(const x of l){const S=J9(x,f.get(x.key).overlayedDocument);S!=null&&E.push(new Ti(x.key,S,vC(S.value.mapValue),wn.exists(!0)))}return c.mutationQueue.addMutationBatch(y,d,E,l)}).next(_=>{m=_;const E=_.applyToLocalDocumentSet(f,v);return c.documentOverlayCache.saveOverlays(y,_.batchId,E)})}).then(()=>({batchId:m.batchId,changes:AC(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Vu[o.currentUser.toKey()];d||(d=new Xe(_e)),d=d.insert(l,c),o.Vu[o.currentUser.toKey()]=d}(r,s.batchId,n),await pu(r,s.changes),await Gf(r.remoteStore)}catch(s){const i=Hx(s,"Failed to persist write");n.reject(i)}}async function hR(t,e){const n=fe(t);try{const r=await Y$(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(De(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?De(o.hu,14607):s.removedDocuments.size>0&&(De(o.hu,42227),o.hu=!1))}),await pu(n,r,e)}catch(r){await cl(r)}}function U1(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const l=o.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=fe(o);c.onlineState=l;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.Sa)m.va(l)&&(d=!0)}),d&&Wx(c)}(r.eventManager,e),s.length&&r.Pu.H_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Vz(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Xe(te.comparator);o=o.insert(i,Vt.newNoDocument(i,de.min()));const l=Ee().add(i),c=new Hf(de.min(),new Map,new Xe(_e),o,l);await hR(r,c),r.du=r.du.remove(i),r.Au.delete(e),Gx(r)}else await wy(r.localStore,e,!1).then(()=>Ty(r,e,n)).catch(cl)}async function Fz(t,e){const n=fe(t),r=e.batch.batchId;try{const s=await Q$(n.localStore,e);mR(n,r,null),fR(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pu(n,s)}catch(s){await cl(s)}}async function Uz(t,e,n){const r=fe(t);try{const s=await function(o,l){const c=fe(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,l).next(f=>(De(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);mR(r,e,n),fR(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await pu(r,s)}catch(s){await cl(s)}}function fR(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function mR(t,e,n){const r=fe(t);let s=r.Vu[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Vu[r.currentUser.toKey()]=s}}function Ty(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||pR(t,r)})}function pR(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(Fx(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Gx(t))}function $1(t,e,n){for(const r of n)r instanceof cR?(t.Ru.addReference(r.key,e),$z(t,r)):r instanceof uR?(K(qx,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||pR(t,r.key)):le(19791,{wu:r})}function $z(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(K(qx,"New document in limbo: "+n),t.Eu.add(r),Gx(t))}function Gx(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new te(Ue.fromString(e)),r=t.fu.next();t.Au.set(r,new Rz(n)),t.du=t.du.insert(n,r),eR(t.remoteStore,new Hs(Er(Ax(n.path)),r,"TargetPurposeLimboResolution",Mf.ce))}}async function pu(t,e,n){const r=fe(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Lx.As(c.targetId,d);i.push(f)}}))}),await Promise.all(o),r.Pu.H_(s),await async function(c,d){const h=fe(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(d,m=>$.forEach(m.Es,y=>h.persistence.referenceDelegate.addReference(f,m.targetId,y)).next(()=>$.forEach(m.ds,y=>h.persistence.referenceDelegate.removeReference(f,m.targetId,y)))))}catch(f){if(!ul(f))throw f;K(Vx,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const y=h.Ms.get(m),b=y.snapshotVersion,v=y.withLastLimboFreeSnapshotVersion(b);h.Ms=h.Ms.insert(m,v)}}}(r.localStore,i))}async function zz(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){K(qx,"User change. New user:",e.toKey());const r=await YC(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(l=>{l.forEach(c=>{c.reject(new W(F.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await pu(n,r.Ls)}}function Bz(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return Ee().add(r.key);{let s=Ee();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const l=n.Tu.get(o);s=s.unionWith(l.view.nu)}return s}}function gR(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=hR.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bz.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Vz.bind(null,e),e.Pu.H_=Iz.bind(null,e.eventManager),e.Pu.yu=Nz.bind(null,e.eventManager),e}function Hz(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Fz.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Uz.bind(null,e),e}class zh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Wf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return K$(this.persistence,new W$,e.initialUser,this.serializer)}Cu(e){return new QC(Mx.mi,this.serializer)}Du(e){return new tz}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}zh.provider={build:()=>new zh};class Wz extends zh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){De(this.persistence.referenceDelegate instanceof Uh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new R$(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Jt.withCacheSize(this.cacheSizeBytes):Jt.DEFAULT;return new QC(r=>Uh.mi(r,n),this.serializer)}}class by{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>U1(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=zz.bind(null,this.syncEngine),await Tz(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sz}()}createDatastore(e){const n=Wf(e.databaseInfo.databaseId),r=function(i){return new oz(i)}(e.databaseInfo);return function(i,o,l,c){return new uz(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new hz(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>U1(this.syncEngine,n,0),function(){return D1.v()?new D1:new nz}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,h){const f=new Pz(s,i,o,l,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=fe(s);K(mo,"RemoteStore shutting down."),i.Ea.add(5),await mu(i),i.Aa.shutdown(),i.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}by.provider={build:()=>new by};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):as("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi="FirestoreClient";class qz{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=Mt.UNAUTHENTICATED,this.clientId=Tx.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{K(yi,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(K(yi,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Qr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Hx(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Sp(t,e){t.asyncQueue.verifyOperationInProgress(),K(yi,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await YC(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function z1(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Gz(t);K(yi,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>M1(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>M1(e.remoteStore,s)),t._onlineComponents=e}async function Gz(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){K(yi,"Using user provided OfflineComponentProvider");try{await Sp(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ha("Error using user provided cache. Falling back to memory cache: "+n),await Sp(t,new zh)}}else K(yi,"Using default OfflineComponentProvider"),await Sp(t,new Wz(void 0));return t._offlineComponents}async function vR(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(K(yi,"Using user provided OnlineComponentProvider"),await z1(t,t._uninitializedComponentsProvider._online)):(K(yi,"Using default OnlineComponentProvider"),await z1(t,new by))),t._onlineComponents}function Kz(t){return vR(t).then(e=>e.syncEngine)}async function xR(t){const e=await vR(t),n=e.eventManager;return n.onListen=jz.bind(null,e.syncEngine),n.onUnlisten=Oz.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=kz.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Mz.bind(null,e.syncEngine),n}function Qz(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new yR({next:m=>{h.Nu(),o.enqueueAndForget(()=>aR(i,f));const y=m.docs.has(l);!y&&m.fromCache?d.reject(new W(F.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&c&&c.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new lR(Ax(l.path),h,{includeMetadataChanges:!0,qa:!0});return oR(i,f)}(await xR(t),t.asyncQueue,e,n,r)),r.promise}function Yz(t,e,n={}){const r=new Qr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const h=new yR({next:m=>{h.Nu(),o.enqueueAndForget(()=>aR(i,f)),m.fromCache&&c.source==="server"?d.reject(new W(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new lR(l,h,{includeMetadataChanges:!0,qa:!0});return oR(i,f)}(await xR(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wR(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B1=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _R="firestore.googleapis.com",H1=!0;class W1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=_R,this.ssl=H1}else this.host=e.host,this.ssl=e.ssl??H1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=KC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<A$)throw new W(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}h9("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=wR(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(F.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kf{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new W1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new W1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new n9;switch(r.type){case"firstParty":return new o9(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=B1.get(n);r&&(K("ComponentProvider","Removing Datastore"),B1.delete(n),r.terminate())}(this),Promise.resolve()}}function Xz(t,e,n,r={}){var d;t=Rr(t,Kf);const s=il(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;s&&(BN(`https://${l}`),HN("Firestore",!0)),i.host!==_R&&i.host!==l&&Ha("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:l,ssl:s,emulatorOptions:r};if(!di(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=Mt.MOCK_USER;else{h=oF(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new W(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Mt(m)}t._authCredentials=new r9(new iC(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new us(this.firestore,e,this._query)}}class ot{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new si(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ot(this.firestore,e,this._key)}toJSON(){return{type:ot._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(du(n,ot._jsonSchema))return new ot(e,r||null,new te(Ue.fromString(n.referencePath)))}}ot._jsonSchemaVersion="firestore/documentReference/1.0",ot._jsonSchema={type:ht("string",ot._jsonSchemaVersion),referencePath:ht("string")};class si extends us{constructor(e,n,r){super(e,n,Ax(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ot(this.firestore,null,new te(e))}withConverter(e){return new si(this.firestore,e,this._path)}}function Ip(t,e,...n){if(t=nt(t),oC("collection","path",e),t instanceof Kf){const r=Ue.fromString(e,...n);return i1(r),new si(t,null,r)}{if(!(t instanceof ot||t instanceof si))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return i1(r),new si(t.firestore,null,r)}}function js(t,e,...n){if(t=nt(t),arguments.length===1&&(e=Tx.newId()),oC("doc","path",e),t instanceof Kf){const r=Ue.fromString(e,...n);return s1(r),new ot(t,null,new te(r))}{if(!(t instanceof ot||t instanceof si))throw new W(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ue.fromString(e,...n));return s1(r),new ot(t.firestore,t instanceof si?t.converter:null,new te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q1="AsyncQueue";class G1{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new JC(this,"async_queue_retry"),this._c=()=>{const r=bp();r&&K(q1,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=bp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=bp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Qr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ul(e))throw e;K(q1,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,as("INTERNAL UNHANDLED ERROR: ",K1(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Bx.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&le(47125,{Pc:K1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function K1(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class hl extends Kf{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new G1,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new G1(e),this._firestoreClient=void 0,await e}}}function Jz(t,e){const n=typeof t=="object"?t:ox(),r=typeof t=="string"?t:Dh,s=bo(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=sF("firestore");i&&Xz(s,...i)}return s}function Qf(t){if(t._terminated)throw new W(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Zz(t),t._firestoreClient}function Zz(t){var r,s,i;const e=t._freezeSettings(),n=function(l,c,d,h){return new b9(l,c,d,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,wR(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((i=e.localCache)!=null&&i._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new qz(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Pt.fromBase64String(e))}catch(n){throw new W(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Rn(Pt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(du(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:ht("string",Rn._jsonSchemaVersion),bytes:ht("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new At(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:br._jsonSchemaVersion}}static fromJSON(e){if(du(e,br._jsonSchema))return new br(e.latitude,e.longitude)}}br._jsonSchemaVersion="firestore/geoPoint/1.0",br._jsonSchema={type:ht("string",br._jsonSchemaVersion),latitude:ht("number"),longitude:ht("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Sr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(du(e,Sr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Sr(e.vectorValues);throw new W(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Sr._jsonSchemaVersion="firestore/vectorValue/1.0",Sr._jsonSchema={type:ht("string",Sr._jsonSchemaVersion),vectorValues:ht("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eB=/^__.*__$/;class tB{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms):new hu(e,this.data,n,this.fieldTransforms)}}class ER{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Ti(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function TR(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le(40011,{Ac:t})}}class Kx{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.Rc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Kx({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Bh(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(TR(this.Ac)&&eB.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class nB{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Wf(e)}Cc(e,n,r,s=!1){return new Kx({Ac:e,methodName:n,Dc:r,path:At.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function yu(t){const e=t._freezeSettings(),n=Wf(t._databaseId);return new nB(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bR(t,e,n,r,s,i={}){const o=t.Cc(i.merge||i.mergeFields?2:0,e,n,s);Yx("Data must be an object, but it was:",o,r);const l=AR(r,o);let c,d;if(i.merge)c=new gn(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=Sy(e,f,n);if(!o.contains(m))throw new W(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);RR(h,m)||h.push(m)}c=new gn(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new tB(new en(l),c,d)}class Xf extends Yf{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Xf}}class Qx extends Yf{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new Wc(e.serializer,PC(e.serializer,this.Fc));return new K9(e.path,n)}isEqual(e){return e instanceof Qx&&this.Fc===e.Fc}}function SR(t,e,n,r){const s=t.Cc(1,e,n);Yx("Data must be an object, but it was:",s,r);const i=[],o=en.empty();Ei(r,(c,d)=>{const h=Xx(e,c,n);d=nt(d);const f=s.yc(h);if(d instanceof Xf)i.push(h);else{const m=vu(d,f);m!=null&&(i.push(h),o.set(h,m))}});const l=new gn(i);return new ER(o,l,s.fieldTransforms)}function IR(t,e,n,r,s,i){const o=t.Cc(1,e,n),l=[Sy(e,r,n)],c=[s];if(i.length%2!=0)throw new W(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(Sy(e,i[m])),c.push(i[m+1]);const d=[],h=en.empty();for(let m=l.length-1;m>=0;--m)if(!RR(d,l[m])){const y=l[m];let b=c[m];b=nt(b);const v=o.yc(y);if(b instanceof Xf)d.push(y);else{const _=vu(b,v);_!=null&&(d.push(y),h.set(y,_))}}const f=new gn(d);return new ER(h,f,o.fieldTransforms)}function NR(t,e,n,r=!1){return vu(n,t.Cc(r?4:3,e))}function vu(t,e){if(CR(t=nt(t)))return Yx("Unsupported field value:",e,t),AR(t,e);if(t instanceof Yf)return function(r,s){if(!TR(s.Ac))throw s.Sc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=vu(l,s.wc(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=nt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return PC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ce.fromDate(r);return{timestampValue:Fh(s.serializer,i)}}if(r instanceof Ce){const i=new Ce(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Fh(s.serializer,i)}}if(r instanceof br)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rn)return{bytesValue:$C(s.serializer,r._byteString)};if(r instanceof ot){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Dx(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sr)return function(o,l){return{mapValue:{fields:{[pC]:{stringValue:yC},[Oh]:{arrayValue:{values:o.toArray().map(d=>{if(typeof d!="number")throw l.Sc("VectorValues must only contain numeric values.");return Rx(l.serializer,d)})}}}}}}(r,s);throw s.Sc(`Unsupported field value: ${Of(r)}`)}(t,e)}function AR(t,e){const n={};return cC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ei(t,(r,s)=>{const i=vu(s,e.mc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function CR(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ce||t instanceof br||t instanceof Rn||t instanceof ot||t instanceof Yf||t instanceof Sr)}function Yx(t,e,n){if(!CR(n)||!aC(n)){const r=Of(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function Sy(t,e,n){if((e=nt(e))instanceof gu)return e._internalPath;if(typeof e=="string")return Xx(t,e);throw Bh("Field path arguments must be of type string or ",t,!1,void 0,n)}const rB=new RegExp("[~\\*/\\[\\]]");function Xx(t,e,n){if(e.search(rB)>=0)throw Bh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new gu(...e.split("."))._internalPath}catch{throw Bh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Bh(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new W(F.INVALID_ARGUMENT,l+t+c)}function RR(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new sB(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Jf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class sB extends Jx{data(){return super.data()}}function Jf(t,e){return typeof e=="string"?Xx(t,e):e instanceof gu?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iB(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new W(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Zx{}class Zf extends Zx{}function Ul(t,e,...n){let r=[];e instanceof Zx&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ew).length,l=i.filter(c=>c instanceof em).length;if(o>1||o>0&&l>0)throw new W(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class em extends Zf{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new em(e,n,r)}_apply(e){const n=this._parse(e);return PR(e._query,n),new us(e.firestore,e.converter,py(e._query,n))}_parse(e){const n=yu(e.firestore);return function(i,o,l,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new W(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){J1(f,h);const b=[];for(const v of f)b.push(X1(c,i,v));m={arrayValue:{values:b}}}else m=X1(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||J1(f,h),m=NR(l,o,f,h==="in"||h==="not-in");return dt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function dd(t,e,n){const r=e,s=Jf("where",t);return em._create(s,r,n)}class ew extends Zx{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ew(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:sr.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)PR(o,c),o=py(o,c)}(e._query,n),new us(e.firestore,e.converter,py(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class tw extends Zf{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new tw(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new W(F.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(i,o)}(e._query,this._field,this._direction);return new us(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new So(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Q1(t,e="asc"){const n=e,r=Jf("orderBy",t);return tw._create(r,n)}class nw extends Zf{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new nw(e,n,r)}_apply(e){return new us(e.firestore,e.converter,Lh(e._query,this._limit,this._limitType))}}function Y1(t){return f9("limit",t),nw._create("limit",t,"F")}class rw extends Zf{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new rw(e,n,r)}_apply(e){const n=aB(e,this.type,this._docOrFields,this._inclusive);return new us(e.firestore,e.converter,function(s,i){return new So(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function oB(...t){return rw._create("startAfter",t,!1)}function aB(t,e,n,r){if(n[0]=nt(n[0]),n[0]instanceof Jx)return function(i,o,l,c,d){if(!c)throw new W(F.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const h=[];for(const f of fa(i))if(f.field.isKeyField())h.push(Mh(o,c.key));else{const m=c.data.field(f.field);if(Vf(m))throw new W(F.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const y=f.field.canonicalString();throw new W(F.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${y}' (used as the orderBy) does not exist.`)}h.push(m)}return new Ka(h,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=yu(t.firestore);return function(o,l,c,d,h,f){const m=o.explicitOrderBy;if(h.length>m.length)throw new W(F.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const y=[];for(let b=0;b<h.length;b++){const v=h[b];if(m[b].field.isKeyField()){if(typeof v!="string")throw new W(F.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof v}`);if(!Cx(o)&&v.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${v}' contains a slash.`);const _=o.path.child(Ue.fromString(v));if(!te.isDocumentKey(_))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${_}' is not because it contains an odd number of segments.`);const E=new te(_);y.push(Mh(l,E))}else{const _=NR(c,d,v);y.push(_)}}return new Ka(y,f)}(t._query,t.firestore._databaseId,s,e,n,r)}}function X1(t,e,n){if(typeof(n=nt(n))=="string"){if(n==="")throw new W(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Cx(e)&&n.indexOf("/")!==-1)throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ue.fromString(n));if(!te.isDocumentKey(r))throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Mh(t,new te(r))}if(n instanceof ot)return Mh(t,n._key);throw new W(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Of(n)}.`)}function J1(t,e){if(!Array.isArray(t)||t.length===0)throw new W(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function PR(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new W(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class lB{convertValue(e,n="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return st(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(mi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw le(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ei(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[Oh].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>st(o.doubleValue));return new Sr(n)}convertGeoPoint(e){return new br(st(e.latitude),st(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ff(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Fc(e));default:return null}}convertTimestamp(e){const n=fi(e);return new Ce(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ue.fromString(e);De(GC(r),9688,{name:e});const s=new Uc(r.get(1),r.get(3)),i=new te(r.popFirst(5));return s.isEqual(n)||as(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jR(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Yl{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eo extends Jx{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new zd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Jf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=eo._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}eo._jsonSchemaVersion="firestore/documentSnapshot/1.0",eo._jsonSchema={type:ht("string",eo._jsonSchemaVersion),bundleSource:ht("string","DocumentSnapshot"),bundleName:ht("string"),bundle:ht("string")};class zd extends eo{data(e={}){return super.data(e)}}class pa{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Yl(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new zd(this._firestore,this._userDataWriter,r.key,r,new Yl(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new zd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Yl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new zd(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Yl(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),h=o.indexOf(l.doc.key)),{type:cB(l.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=pa._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Tx.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function cB(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uB(t){t=Rr(t,ot);const e=Rr(t.firestore,hl);return Qz(Qf(e),t._key).then(n=>dB(e,t,n))}pa._jsonSchemaVersion="firestore/querySnapshot/1.0",pa._jsonSchema={type:ht("string",pa._jsonSchemaVersion),bundleSource:ht("string","QuerySnapshot"),bundleName:ht("string"),bundle:ht("string")};class kR extends lB{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ot(this.firestore,null,n)}}function Z1(t){t=Rr(t,us);const e=Rr(t.firestore,hl),n=Qf(e),r=new kR(e);return iB(t._query),Yz(n,t._query).then(s=>new pa(e,r,t,s))}function Iy(t,e,n){t=Rr(t,ot);const r=Rr(t.firestore,hl),s=jR(t.converter,e,n);return sw(r,[bR(yu(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,wn.none())])}function Ny(t,e,n,...r){t=Rr(t,ot);const s=Rr(t.firestore,hl),i=yu(s);let o;return o=typeof(e=nt(e))=="string"||e instanceof gu?IR(i,"updateDoc",t._key,e,n,r):SR(i,"updateDoc",t._key,e),sw(s,[o.toMutation(t._key,wn.exists(!0))])}function sw(t,e){return function(r,s){const i=new Qr;return r.asyncQueue.enqueueAndForget(async()=>Lz(await Kz(r),s,i)),i.promise}(Qf(t),e)}function dB(t,e,n){const r=n.docs.get(e._key),s=new kR(t);return new eo(t,s,e._key,r,new Yl(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hB{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=yu(e)}set(e,n,r){this._verifyNotCommitted();const s=Np(e,this._firestore),i=jR(s.converter,n,r),o=bR(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,wn.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Np(e,this._firestore);let o;return o=typeof(n=nt(n))=="string"||n instanceof gu?IR(this._dataReader,"WriteBatch.update",i._key,n,r,s):SR(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,wn.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Np(e,this._firestore);return this._mutations=this._mutations.concat(new Px(n._key,wn.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new W(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Np(t,e){if((t=nt(t)).firestore!==e)throw new W(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function fB(t){return new Qx("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mB(t){return Qf(t=Rr(t,hl)),new hB(t,e=>sw(t,e))}(function(e,n=!0){(function(s){ll=s})(ol),Ar(new rr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new hl(new s9(r.getProvider("auth-internal")),new a9(o,r.getProvider("app-check-internal")),function(d,h){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new W(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(d.options.projectId,h)}(o,s),o);return i={useFetchStreams:n,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),kn(e1,t1,e),kn(e1,t1,"esm2020")})();const pB={apiKey:"AIzaSyApDku-geNVplwIgRBz2U0rs46aAVo-_mE",authDomain:"aios-97581.firebaseapp.com",projectId:"aios-97581",storageBucket:"aios-97581.appspot.com",messagingSenderId:"307575156824",appId:"1:307575156824:web:00924bd384df1f29909a2d"},iw=XN(pB),Ap=e9(iw),Bn=Jz(iw);X5(iw);const ow=new $r;ow.addScope("email");ow.addScope("profile");class Cp{static async signInWithGoogle(){try{const n=(await cU(Ap,ow)).user;return await this.saveUserToFirestore(n),n}catch(e){throw console.error("Google sign-in error:",e),e}}static async signOut(){try{await B6(Ap)}catch(e){throw console.error("Sign-out error:",e),e}}static onAuthStateChanged(e){return z6(Ap,e)}static async saveUserToFirestore(e){try{const n=js(Bn,"users",e.uid),r={uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,emailVerified:e.emailVerified,createdAt:new Date,lastLoginAt:new Date,preferences:{theme:"light",notifications:!0,language:"en"}};await Iy(n,r,{merge:!0})}catch(n){throw console.error("Error saving user to Firestore:",n),n}}static async getUserData(e){try{const n=js(Bn,"users",e),r=await uB(n);if(r.exists())return r.data();throw new Error("User data not found")}catch(n){throw console.error("Error getting user data:",n),n}}static async updateUserData(e,n){try{const r=js(Bn,"users",e);await Ny(r,{...n,updatedAt:new Date})}catch(r){throw console.error("Error updating user data:",r),r}}}const DR=p.createContext(void 0);function gB({children:t}){const[e,n]=p.useState(null),[r,s]=p.useState(!0);p.useEffect(()=>Cp.onAuthStateChanged(d=>{n(d),s(!1)}),[]);const l={user:e,loading:r,signInWithGoogle:async()=>{try{s(!0),await Cp.signInWithGoogle()}catch(c){throw console.error("Sign-in error:",c),c}finally{s(!1)}},signOut:async()=>{try{s(!0),await Cp.signOut()}catch(c){throw console.error("Sign-out error:",c),c}finally{s(!1)}},isAuthenticated:!!e};return a.jsx(DR.Provider,{value:l,children:t})}function bi(){const t=p.useContext(DR);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const ee=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("glass-card rounded-lg border bg-card/80 backdrop-blur-xl text-card-foreground shadow-sm transition-all duration-300 hover:shadow-lg",t),...e}));ee.displayName="Card";const ve=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("flex flex-col space-y-1.5 p-6",t),...e}));ve.displayName="CardHeader";const Te=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("text-2xl font-semibold leading-none tracking-tight cyber-text",t),...e}));Te.displayName="CardTitle";const Yr=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("text-sm text-muted-foreground",t),...e}));Yr.displayName="CardDescription";const oe=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("p-6 pt-0",t),...e}));oe.displayName="CardContent";const yB=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("flex items-center p-6 pt-0",t),...e}));yB.displayName="CardFooter";function vB(){return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 flex items-center justify-center p-4",children:a.jsx(ee,{className:"w-full max-w-md",children:a.jsxs(oe,{className:"p-8 text-center",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-primary to-accent rounded-2xl flex items-center justify-center mx-auto mb-4",children:a.jsx("i",{className:"fas fa-robot text-white text-2xl"})}),a.jsx("h1",{className:"text-2xl font-bold text-foreground",children:"AuraOS"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-Powered Social Media Platform"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-sm font-medium text-foreground",children:"Loading your workspace..."}),a.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:a.jsx("div",{className:"bg-primary h-2 rounded-full animate-pulse",style:{width:"60%"}})})]}),a.jsxs("div",{className:"text-left space-y-2 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{children:"Initializing AI systems"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),a.jsx("span",{children:"Loading social media integrations"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"}),a.jsx("span",{children:"Connecting to Firestore database"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-2 h-2 bg-muted rounded-full"}),a.jsx("span",{children:"Preparing your dashboard"})]})]})]}),a.jsxs("div",{className:"mt-8 pt-6 border-t border-border",children:[a.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"Powered by advanced AI"}),a.jsxs("div",{className:"flex justify-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("i",{className:"fas fa-brain text-primary"}),a.jsx("span",{children:"Smart Agents"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("i",{className:"fas fa-share-alt text-accent"}),a.jsx("span",{children:"Auto Posting"})]}),a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("i",{className:"fas fa-chart-line text-green-500"}),a.jsx("span",{children:"Analytics"})]})]})]})]})})})}const xB=iu("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 relative overflow-hidden",{variants:{variant:{default:"neon-button bg-gradient-to-r from-primary to-accent text-primary-foreground hover:from-primary/90 hover:to-accent/90 neon-glow-md hover:neon-glow-lg",destructive:"bg-gradient-to-r from-destructive to-red-500 text-destructive-foreground hover:from-destructive/90 hover:to-red-500/90 neon-glow-md hover:neon-glow-lg",outline:"border border-primary/50 bg-transparent hover:bg-primary/10 hover:text-primary hover:border-primary neon-glow-sm hover:neon-glow-md",secondary:"bg-gradient-to-r from-secondary to-secondary/80 text-secondary-foreground hover:from-secondary/90 hover:to-secondary/70 neon-glow-sm hover:neon-glow-md",ghost:"hover:bg-primary/10 hover:text-primary transition-all duration-300",link:"text-primary underline-offset-4 hover:underline neon-text",neon:"neon-button bg-gradient-to-r from-primary via-accent to-primary text-primary-foreground animate-neon-pulse hover:animate-none",cyber:"cyber-border bg-gradient-to-r from-primary/20 to-accent/20 text-primary hover:from-primary/30 hover:to-accent/30 animate-cyber-border",holographic:"holographic text-white font-bold animate-holographic-shift"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10",xl:"h-12 rounded-lg px-10 text-base"}},defaultVariants:{variant:"default",size:"default"}}),Y=p.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},i)=>{const o=r?kM:"button";return a.jsx(o,{className:se(xB({variant:e,size:n,className:t})),ref:i,...s})});Y.displayName="Button";const wB=iu("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zr=p.forwardRef(({className:t,variant:e,...n},r)=>a.jsx("div",{ref:r,role:"alert",className:se(wB({variant:e}),t),...n}));zr.displayName="Alert";const _B=p.forwardRef(({className:t,...e},n)=>a.jsx("h5",{ref:n,className:se("mb-1 font-medium leading-none tracking-tight",t),...e}));_B.displayName="AlertTitle";const Br=p.forwardRef(({className:t,...e},n)=>a.jsx("div",{ref:n,className:se("text-sm [&_p]:leading-relaxed",t),...e}));Br.displayName="AlertDescription";var EB="Separator",eT="horizontal",TB=["horizontal","vertical"],OR=p.forwardRef((t,e)=>{const{decorative:n,orientation:r=eT,...s}=t,i=bB(r)?r:eT,l=n?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return a.jsx(ne.div,{"data-orientation":i,...l,...s,ref:e})});OR.displayName=EB;function bB(t){return TB.includes(t)}var MR=OR;const po=p.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(MR,{ref:s,decorative:n,orientation:e,className:se("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));po.displayName=MR.displayName;const SB=()=>a.jsx("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[...Array(20)].map((t,e)=>a.jsx("div",{className:"absolute bg-primary/20 rounded-full animate-float",style:{width:`${Math.random()*30+10}px`,height:`${Math.random()*30+10}px`,left:`${Math.random()*100}%`,animationDuration:`${Math.random()*20+15}s`,animationDelay:`${Math.random()*-20}s`}},e))});function IB(){const{signInWithGoogle:t,loading:e}=bi(),[n,r]=p.useState(null),[s,i]=p.useState(!1),o=async()=>{try{r(null),i(!0),await t()}catch(l){r(l.message||"Failed to sign in with Google")}finally{i(!1)}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-primary/10 via-background to-accent/10 flex items-center justify-center p-4 relative overflow-hidden",children:[a.jsx(SB,{}),a.jsxs("div",{className:"w-full max-w-md z-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-primary to-accent rounded-3xl flex items-center justify-center mx-auto mb-6 transform rotate-12 transition-transform duration-500 hover:rotate-0 shadow-lg",children:a.jsx("i",{className:"fas fa-robot text-white text-4xl"})}),a.jsx("h1",{className:"text-5xl font-bold text-foreground mb-2",children:"AuraOS"}),a.jsx("p",{className:"text-xl text-muted-foreground",children:"The Future of AI-Powered Automation"})]}),a.jsxs(ee,{className:"shadow-2xl border-0 bg-card/80 backdrop-blur-sm transform-gpu transition-transform duration-500 hover:scale-105 [transform-style:preserve-3d]",children:[a.jsxs(ve,{className:"text-center pb-4",children:[a.jsx(Te,{className:"text-2xl font-semibold",children:"Unlock Your AI Potential"}),a.jsx("p",{className:"text-muted-foreground",children:"Sign in to access your intelligent automation dashboard"})]}),a.jsxs(oe,{className:"space-y-6",children:[n&&a.jsx(zr,{variant:"destructive",children:a.jsx(Br,{children:n})}),a.jsx(Y,{onClick:o,disabled:s||e,className:"w-full h-14 text-lg font-medium bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white border-0 shadow-lg transform transition-transform hover:scale-105",children:s?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white mr-3"}),"Authenticating..."]}):a.jsxs(a.Fragment,{children:[a.jsx("i",{className:"fab fa-google text-2xl mr-4"}),"Continue with Google"]})}),a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(Y,{variant:"link",className:"text-xs text-muted-foreground",children:"Sign in as Guest"}),a.jsx(po,{orientation:"vertical",className:"h-4"}),a.jsx(Y,{variant:"link",className:"text-xs text-muted-foreground",children:"Sign up for a free trial"})]}),a.jsx(po,{className:"my-6",children:a.jsx("span",{className:"text-xs text-muted-foreground bg-card px-2",children:"or"})}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-sm font-medium text-foreground text-center",children:"Unlock cutting-edge features:"}),a.jsx(MN,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-3 text-xs",children:[a.jsxs(rd,{children:[a.jsxs(sd,{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[a.jsx("i",{className:"fas fa-robot text-primary"}),a.jsx("span",{children:"Autonomous AI Agents"})]}),a.jsx(ql,{children:a.jsx("p",{children:"Deploy AI agents that learn and adapt to automate complex tasks."})})]}),a.jsxs(rd,{children:[a.jsxs(sd,{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[a.jsx("i",{className:"fas fa-cogs text-accent"}),a.jsx("span",{children:"Self-Improving Workflows"})]}),a.jsx(ql,{children:a.jsx("p",{children:"Create workflows that optimize themselves for maximum efficiency."})})]}),a.jsxs(rd,{children:[a.jsxs(sd,{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[a.jsx("i",{className:"fas fa-brain text-green-500"}),a.jsx("span",{children:"Predictive Analytics"})]}),a.jsx(ql,{children:a.jsx("p",{children:"Gain insights into future trends and make data-driven decisions."})})]}),a.jsxs(rd,{children:[a.jsxs(sd,{className:"flex items-center gap-2 p-2 rounded-lg bg-muted/50 hover:bg-muted/70 transition-colors",children:[a.jsx("i",{className:"fas fa-users text-purple-500"}),a.jsx("span",{children:"Collaborative AI"})]}),a.jsx(ql,{children:a.jsx("p",{children:"Enable multiple AI agents to collaborate on complex projects."})})]})]})})]}),a.jsxs("div",{className:"pt-4",children:[a.jsx("h3",{className:"text-sm font-medium text-foreground text-center mb-2",children:"Trusted by innovators:"}),a.jsxs("blockquote",{className:"text-center text-xs text-muted-foreground italic",children:['"AuraOS has transformed our workflow, saving us countless hours and delivering incredible results."',a.jsx("footer",{className:"mt-1 not-italic font-semibold",children:"- CEO of a leading tech company"})]})]}),a.jsx("div",{className:"text-center pt-4",children:a.jsxs("span",{className:"inline-flex items-center text-xs text-muted-foreground",children:[a.jsx("i",{className:"fas fa-lock text-green-500 mr-2"}),"Secure sign-in powered by Firebase Authentication"]})})]})]}),a.jsxs("div",{className:"text-center mt-8",children:[a.jsxs("p",{className:"text-xs text-muted-foreground",children:["By signing in, you agree to our"," ",a.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",a.jsx("a",{href:"#",className:"text-primary hover:underline",children:"Privacy Policy"})]}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Your data is protected with end-to-end encryption and advanced security protocols."})]})]})]})}function NB({children:t}){const{user:e,loading:n,isAuthenticated:r}=bi();return n?a.jsx(vB,{}):r?a.jsx(a.Fragment,{children:t}):a.jsx(IB,{})}class AB extends p.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null},this.logErrorToService=(e,n)=>{console.group(" Error Boundary Caught Error"),console.error("Error:",e),console.error("Error Info:",n),console.error("Component Stack:",n.componentStack),console.groupEnd()},this.handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})},this.handleReload=()=>{window.location.reload()},this.handleGoHome=()=>{window.location.href="/"}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("ErrorBoundary caught an error:",e,n),this.setState({error:e,errorInfo:n}),this.props.onError&&this.props.onError(e,n),this.logErrorToService(e,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:a.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:a.jsxs(ee,{className:"glass-card neon-glow-md max-w-2xl w-full",children:[a.jsxs(ve,{className:"text-center",children:[a.jsx("div",{className:"mx-auto mb-4 w-16 h-16 rounded-full bg-destructive/10 flex items-center justify-center",children:a.jsx(LL,{className:"h-8 w-8 text-destructive"})}),a.jsx(Te,{className:"text-2xl cyber-text",children:"Oops! Something went wrong"}),a.jsx("p",{className:"text-muted-foreground mt-2",children:"We encountered an unexpected error. Don't worry, our team has been notified."})]}),a.jsxs(oe,{className:"space-y-6",children:[!1,a.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:[a.jsxs(Y,{onClick:this.handleReset,variant:"default",className:"neon-button",children:[a.jsx(vh,{className:"h-4 w-4 mr-2"}),"Try Again"]}),a.jsxs(Y,{onClick:this.handleGoHome,variant:"outline",className:"neon-glow-sm",children:[a.jsx(DL,{className:"h-4 w-4 mr-2"}),"Go Home"]}),a.jsxs(Y,{onClick:this.handleReload,variant:"ghost",children:[a.jsx(vh,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]}),a.jsx("div",{className:"text-center text-sm text-muted-foreground",children:a.jsx("p",{children:"If this problem persists, please contact support or try refreshing the page."})})]})]})}):this.props.children}}function CB({shortcuts:t,children:e,className:n,enabled:r=!0}){return p.useEffect(()=>{if(!r)return;const s=i=>{const{key:o,ctrlKey:l,altKey:c,metaKey:d,shiftKey:h}=i,f=[];(l||d)&&f.push("ctrl"),c&&f.push("alt"),h&&f.push("shift");const m=[...f,o.toLowerCase()].join("+");t[m]&&(i.preventDefault(),t[m]())};return document.addEventListener("keydown",s),()=>document.removeEventListener("keydown",s)},[t,r]),a.jsx("div",{className:n,children:e})}const RB={"ctrl+k":()=>{console.log("Opening search/command palette")},"ctrl+/":()=>{console.log("Showing keyboard shortcuts")},escape:()=>{const t=document.activeElement;t!=null&&t.blur&&t.blur()},"ctrl+enter":()=>{const t=document.querySelector('button[type="submit"]');t&&t.click()}},ki={USERS:"users",POSTS:"posts",WORKFLOWS:"workflows",AGENTS:"agents",CHAT_MESSAGES:"chatMessages",ANALYTICS:"analytics",NOTIFICATIONS:"notifications",USER_HISTORY:"userHistory",USER_SESSIONS:"userSessions",USER_ANALYTICS:"userAnalytics"},Li=class Li{static async initialize(e){try{await this.startSession(e),setInterval(()=>{this.actionBuffer.length>0&&this.flushActionBuffer()},this.flushInterval),typeof document<"u"&&(document.addEventListener("visibilitychange",()=>{document.hidden?this.trackAction(e,{type:"navigate",category:"navigation",description:"Page hidden",details:{visibility:"hidden"}}):this.trackAction(e,{type:"navigate",category:"navigation",description:"Page visible",details:{visibility:"visible"}})}),window.addEventListener("beforeunload",()=>{this.trackAction(e,{type:"navigate",category:"navigation",description:"Page unload",details:{event:"beforeunload"}}),this.endSession(e)})),console.log("User history tracking initialized")}catch(n){console.error("Failed to initialize user history tracking:",n)}}static async startSession(e){try{const n=this.generateSessionId(),r=new Date,s={id:n,userId:e,startTime:r,deviceInfo:this.getDeviceInfo(),location:await this.getLocationInfo(),actions:0,lastActivity:r,isActive:!0};return await Iy(js(Bn,ki.USER_SESSIONS,n),{...s,startTime:Ce.fromDate(s.startTime),lastActivity:Ce.fromDate(s.lastActivity)}),this.currentSession=s,this.sessionStartTime=r,s}catch(n){throw console.error("Failed to start session:",n),n}}static async endSession(e){try{if(!this.currentSession)return;const n=new Date,r=n.getTime()-this.currentSession.startTime.getTime();await Ny(js(Bn,ki.USER_SESSIONS,this.currentSession.id),{endTime:Ce.fromDate(n),duration:r,isActive:!1,lastActivity:Ce.fromDate(n)}),this.currentSession=null,this.sessionStartTime=null,this.actionBuffer.length>0&&await this.flushActionBuffer()}catch(n){console.error("Failed to end session:",n)}}static async trackAction(e,n,r,s=!0,i){var o;try{const l={id:this.generateHistoryId(),userId:e,action:n,timestamp:new Date,sessionId:((o=this.currentSession)==null?void 0:o.id)||"unknown",metadata:r,success:s,errorMessage:i};this.actionBuffer.push(l),this.currentSession&&await Ny(js(Bn,ki.USER_SESSIONS,this.currentSession.id),{actions:fB(1),lastActivity:Ce.fromDate(new Date)}),this.actionBuffer.length>=this.bufferSize&&await this.flushActionBuffer()}catch(l){console.error("Failed to track action:",l)}}static async trackNavigation(e,n,r,s){await this.trackAction(e,{type:"navigate",category:"navigation",description:`Navigated to ${n}`,details:{page:n,previousPage:r,duration:s}})}static async trackContentInteraction(e,n,r,s,i){await this.trackAction(e,{type:n,category:"content",description:`${n} ${r}`,target:s,targetType:r,details:i})}static async trackAIInteraction(e,n,r,s){await this.trackAction(e,{type:n,category:"ai",description:`AI ${n}`,target:r,targetType:"agent",details:s})}static async trackSocialInteraction(e,n,r,s){await this.trackAction(e,{type:n,category:"social",description:`Social ${n}`,target:r,targetType:"post",details:s})}static async trackWorkflowInteraction(e,n,r,s){await this.trackAction(e,{type:n,category:"workflow",description:`Workflow ${n}`,target:r,targetType:"workflow",details:s})}static async trackAuthEvent(e,n,r){await this.trackAction(e,{type:n,category:"authentication",description:`User ${n}`,details:r})}static async trackError(e,n,r,s){await this.trackAction(e,{type:"error",category:"system",description:`Error: ${n.message}`,details:{...s,context:r,stack:n.stack,name:n.name}},void 0,!1,n.message)}static async getUserHistory(e,n={}){try{let r=Ul(Ip(Bn,ki.USER_HISTORY),dd("userId","==",e),Q1("timestamp","desc"),Y1(n.limit||50));n.actionType&&(r=Ul(r,dd("action.type","==",n.actionType))),n.category&&(r=Ul(r,dd("action.category","==",n.category))),n.startAfter&&(r=Ul(r,oB(n.startAfter)));const s=await Z1(r),i=s.docs.map(l=>({id:l.id,...l.data(),timestamp:l.data().timestamp.toDate()})),o=s.docs[s.docs.length-1];return{history:i,lastDoc:o}}catch(r){throw console.error("Failed to get user history:",r),r}}static async getUserSessions(e,n=20){try{const r=Ul(Ip(Bn,ki.USER_SESSIONS),dd("userId","==",e),Q1("startTime","desc"),Y1(n));return(await Z1(r)).docs.map(i=>{var o;return{id:i.id,...i.data(),startTime:i.data().startTime.toDate(),endTime:(o=i.data().endTime)==null?void 0:o.toDate(),lastActivity:i.data().lastActivity.toDate()}})}catch(r){throw console.error("Failed to get user sessions:",r),r}}static async generateUserAnalytics(e,n="monthly"){try{const r=new Date,s=this.getPeriodStartDate(r,n),{history:i}=await this.getUserHistory(e,{dateRange:{start:s,end:r}}),o=await this.getUserSessions(e,1e3),l={userId:e,period:n,date:r,stats:{totalSessions:o.length,totalActions:i.length,averageSessionDuration:this.calculateAverageSessionDuration(o),mostUsedFeatures:this.calculateMostUsedFeatures(i),topPages:this.calculateTopPages(i),deviceBreakdown:this.calculateDeviceBreakdown(o),errorRate:this.calculateErrorRate(i),retentionRate:this.calculateRetentionRate(o)}};return await Iy(js(Bn,ki.USER_ANALYTICS,`${e}_${n}_${r.getTime()}`),{...l,date:Ce.fromDate(l.date)}),l}catch(r){throw console.error("Failed to generate user analytics:",r),r}}static async flushActionBuffer(){if(this.actionBuffer.length!==0)try{const e=mB(Bn);this.actionBuffer.forEach(n=>{const r=js(Ip(Bn,ki.USER_HISTORY));e.set(r,{...n,timestamp:Ce.fromDate(n.timestamp)})}),await e.commit(),this.actionBuffer=[]}catch(e){console.error("Failed to flush action buffer:",e)}}static generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static generateHistoryId(){return`history_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}static getDeviceInfo(){return typeof navigator>"u"?{userAgent:"Unknown",platform:"Unknown",language:"Unknown",timezone:"Unknown",screenResolution:"Unknown",viewport:"Unknown"}:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,screenResolution:`${screen.width}x${screen.height}`,viewport:`${window.innerWidth}x${window.innerHeight}`}}static async getLocationInfo(){return{country:"Unknown",region:"Unknown",city:"Unknown"}}static getPeriodStartDate(e,n){const r=new Date(e);switch(n){case"daily":r.setHours(0,0,0,0);break;case"weekly":r.setDate(r.getDate()-7);break;case"monthly":r.setMonth(r.getMonth()-1);break;case"yearly":r.setFullYear(r.getFullYear()-1);break}return r}static calculateAverageSessionDuration(e){const n=e.filter(s=>s.duration);return n.length===0?0:n.reduce((s,i)=>s+(i.duration||0),0)/n.length}static calculateMostUsedFeatures(e){const n={};e.forEach(s=>{const i=s.action.category;n[i]=(n[i]||0)+1});const r=e.length;return Object.entries(n).map(([s,i])=>({feature:s,count:i,percentage:i/r*100})).sort((s,i)=>i.count-s.count).slice(0,10)}static calculateTopPages(e){const n={};return e.filter(r=>r.action.type==="navigate").forEach(r=>{var i;const s=(i=r.action.details)==null?void 0:i.page;s&&(n[s]||(n[s]={visits:0,totalTime:0}),n[s].visits++,n[s].totalTime+=r.duration||0)}),Object.entries(n).map(([r,s])=>({page:r,visits:s.visits,averageTime:s.totalTime/s.visits})).sort((r,s)=>s.visits-r.visits).slice(0,10)}static calculateDeviceBreakdown(e){const n={};e.forEach(s=>{const i=s.deviceInfo.platform;n[i]=(n[i]||0)+1});const r=e.length;return Object.entries(n).map(([s,i])=>({device:s,count:i,percentage:i/r*100})).sort((s,i)=>i.count-s.count)}static calculateErrorRate(e){return e.filter(r=>!r.success).length/e.length*100}static calculateRetentionRate(e){return e.filter(r=>r.isActive).length/e.length*100}};Li.currentSession=null,Li.sessionStartTime=null,Li.actionBuffer=[],Li.bufferSize=10,Li.flushInterval=5e3;let Nn=Li;function PB(){const{user:t}=bi(),[e,n]=p.useState(!1),[r,s]=p.useState(null),[i,o]=p.useState(null);p.useEffect(()=>{t&&!e?Nn.initialize(t.uid).then(()=>{n(!0),o(null)}).catch(y=>{o(y.message),console.error("Failed to initialize user history:",y)}):!t&&e&&(n(!1),s(null))},[t,e]);const l=p.useCallback((y,b,v)=>{t&&e&&Nn.trackNavigation(t.uid,y,b,v)},[t,e]),c=p.useCallback((y,b,v,_)=>{t&&e&&Nn.trackContentInteraction(t.uid,y,b,v,_)},[t,e]),d=p.useCallback((y,b,v)=>{t&&e&&Nn.trackAIInteraction(t.uid,y,b,v)},[t,e]),h=p.useCallback((y,b,v)=>{t&&e&&Nn.trackSocialInteraction(t.uid,y,b,v)},[t,e]),f=p.useCallback((y,b,v)=>{t&&e&&Nn.trackWorkflowInteraction(t.uid,y,b,v)},[t,e]),m=p.useCallback((y,b,v)=>{t&&e&&Nn.trackError(t.uid,y,b,v)},[t,e]);return{isInitialized:e,currentSession:r,error:i,trackNavigation:l,trackContentInteraction:c,trackAIInteraction:d,trackSocialInteraction:h,trackWorkflowInteraction:f,trackError:m}}function jB(t){const{trackNavigation:e}=PB(),[n,r]=p.useState(null),s=p.useRef(Date.now());p.useEffect(()=>{const i=Date.now();if(s.current=i,n){const o=i-s.current;e(t,n,o)}else e(t);return r(t),()=>{const o=Date.now()-s.current;o>1e3&&e(t,void 0,o)}},[t,e,n])}function kB(t={}){const{user:e}=bi(),[n,r]=p.useState([]),[s,i]=p.useState(!0),[o,l]=p.useState(null),[c,d]=p.useState(!0),[h,f]=p.useState(null),m=p.useCallback(async(v=!1)=>{if(e)try{i(!0),l(null);const _=await Nn.getUserHistory(e.uid,{...t,startAfter:v?void 0:h});r(v?_.history:E=>[...E,..._.history]),f(_.lastDoc),d(_.history.length===(t.limit||50))}catch(_){l(_.message)}finally{i(!1)}},[e,t,h]),y=p.useCallback(()=>{!s&&c&&m(!1)},[s,c,m]),b=p.useCallback(()=>{f(null),d(!0),m(!0)},[m]);return p.useEffect(()=>{m(!0)},[e]),{history:n,loading:s,error:o,hasMore:c,loadMore:y,refresh:b}}function DB(){const{user:t}=bi(),[e,n]=p.useState([]),[r,s]=p.useState(!0),[i,o]=p.useState(null),l=p.useCallback(async()=>{if(t)try{s(!0),o(null);const c=await Nn.getUserSessions(t.uid);n(c)}catch(c){o(c.message)}finally{s(!1)}},[t]);return p.useEffect(()=>{l()},[l]),{sessions:e,loading:r,error:i,refresh:l}}function OB(t="monthly"){const{user:e}=bi(),[n,r]=p.useState(null),[s,i]=p.useState(!0),[o,l]=p.useState(null),c=p.useCallback(async()=>{if(e)try{i(!0),l(null);const d=await Nn.generateUserAnalytics(e.uid,t);r(d)}catch(d){l(d.message)}finally{i(!1)}},[e,t]);return p.useEffect(()=>{c()},[c]),{analytics:n,loading:s,error:o,refresh:c}}function MB({pageName:t,children:e}){return jB(t),a.jsx(a.Fragment,{children:e})}function LB(){const[t]=ZS(),e=p.useRef(null);p.useEffect(()=>{e.current&&e.current!==t&&console.log(`Navigation: ${e.current} -> ${t}`),e.current=t},[t])}function Un(t,e){return function(r){return a.jsx(MB,{pageName:e,children:a.jsx(t,{...r})})}}var aw="Avatar",[VB,xW]=bn(aw),[FB,LR]=VB(aw),VR=p.forwardRef((t,e)=>{const{__scopeAvatar:n,...r}=t,[s,i]=p.useState("idle");return a.jsx(FB,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:i,children:a.jsx(ne.span,{...r,ref:e})})});VR.displayName=aw;var FR="AvatarImage",UR=p.forwardRef((t,e)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...i}=t,o=LR(FR,n),l=UB(r,i),c=tt(d=>{s(d),o.onImageLoadingStatusChange(d)});return at(()=>{l!=="idle"&&c(l)},[l,c]),l==="loaded"?a.jsx(ne.img,{...i,ref:e,src:r}):null});UR.displayName=FR;var $R="AvatarFallback",zR=p.forwardRef((t,e)=>{const{__scopeAvatar:n,delayMs:r,...s}=t,i=LR($R,n),[o,l]=p.useState(r===void 0);return p.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>l(!0),r);return()=>window.clearTimeout(c)}},[r]),o&&i.imageLoadingStatus!=="loaded"?a.jsx(ne.span,{...s,ref:e}):null});zR.displayName=$R;function tT(t,e){return t?e?(t.src!==e&&(t.src=e),t.complete&&t.naturalWidth>0?"loaded":"loading"):"error":"idle"}function UB(t,{referrerPolicy:e,crossOrigin:n}){const r=zB(),s=p.useRef(null),i=r?(s.current||(s.current=new window.Image),s.current):null,[o,l]=p.useState(()=>tT(i,t));return at(()=>{l(tT(i,t))},[i,t]),at(()=>{const c=f=>()=>{l(f)};if(!i)return;const d=c("loaded"),h=c("error");return i.addEventListener("load",d),i.addEventListener("error",h),e&&(i.referrerPolicy=e),typeof n=="string"&&(i.crossOrigin=n),()=>{i.removeEventListener("load",d),i.removeEventListener("error",h)}},[i,n,e]),o}function $B(){return()=>{}}function zB(){return p.useSyncExternalStore($B,()=>!0,()=>!1)}var BR=VR,HR=UR,WR=zR;const Ws=p.forwardRef(({className:t,...e},n)=>a.jsx(BR,{ref:n,className:se("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...e}));Ws.displayName=BR.displayName;const tm=p.forwardRef(({className:t,...e},n)=>a.jsx(HR,{ref:n,className:se("aspect-square h-full w-full",t),...e}));tm.displayName=HR.displayName;const qs=p.forwardRef(({className:t,...e},n)=>a.jsx(WR,{ref:n,className:se("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...e}));qs.displayName=WR.displayName;const BB=[{name:"Dashboard",href:"/",icon:"fas fa-home"},{name:"Social Feed",href:"/social-feed",icon:"fas fa-users",hasNotification:!0},{name:"Workflows",href:"/workflows",icon:"fas fa-project-diagram"},{name:"AI Agents",href:"/ai-agents",icon:"fas fa-robot"},{name:"Learning",href:"/learning",icon:"fas fa-graduation-cap",hasNotification:!0},{name:"Smart Learning",href:"/smart-learning",icon:"fas fa-brain"},{name:"AI Tools",href:"/advanced-ai-tools",icon:"fas fa-tools"},{name:"Telegram",href:"/telegram",icon:"fab fa-telegram"},{name:"Analytics",href:"/analytics",icon:"fas fa-chart-bar"},{name:"Settings",href:"/settings",icon:"fas fa-cog"},{name:"Debug",href:"/debug",icon:"fas fa-bug"},{name:"Workspace",href:"/workspace",icon:"fas fa-star"}];function Ao(){var s,i,o;const[t]=ZS(),{user:e,signOut:n}=bi();ln({queryKey:["userData",e==null?void 0:e.uid],queryFn:()=>e!=null&&e.uid?Promise.resolve({displayName:e.displayName,email:e.email}):null,enabled:!!(e!=null&&e.uid)});const r=async()=>{try{await n()}catch(l){console.error("Sign out error:",l)}};return a.jsxs("div",{className:"w-64 glass-card border-r border-border/50 flex flex-col backdrop-blur-xl cyber-scrollbar",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 gradient-cyber-primary rounded-xl flex items-center justify-center neon-glow-lg animate-neon-pulse",children:a.jsx("i",{className:"fas fa-robot text-white text-lg"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-xl neon-text animate-neon-flicker",children:"AuraOS"}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:"v2.0"})]})]})}),a.jsx("nav",{className:"flex-1 px-4 pb-4",children:a.jsx("ul",{className:"space-y-2",children:BB.map(l=>{const c=t===l.href;return a.jsx("li",{children:a.jsx(WO,{href:l.href,children:a.jsxs("a",{className:se("flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 group relative overflow-hidden",c?"gradient-cyber-primary text-white neon-glow-lg animate-neon-pulse":"text-muted-foreground hover:text-foreground hover:bg-primary/10 hover:neon-glow-sm hover:border-primary/30 border border-transparent"),"data-testid":`nav-${l.name.toLowerCase().replace(" ","-")}`,children:[a.jsx("i",{className:`${l.icon} w-5 transition-transform duration-300 group-hover:scale-110`}),a.jsx("span",{className:"font-medium",children:l.name}),l.hasNotification&&a.jsx("div",{className:"ml-auto w-2 h-2 bg-accent rounded-full animate-neon-pulse neon-glow-sm"}),c&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-cyber-scan"})]})})},l.name)})})}),a.jsx(po,{className:"bg-border/30"}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-primary/10 transition-all duration-300 group",children:[a.jsxs(Ws,{className:"w-10 h-10 border border-primary/30 neon-glow-sm group-hover:neon-glow-md transition-all duration-300",children:[a.jsx(tm,{src:(e==null?void 0:e.photoURL)||void 0,alt:(e==null?void 0:e.displayName)||"User"}),a.jsx(qs,{className:"bg-gradient-to-r from-primary/20 to-accent/20 text-primary font-bold",children:((s=e==null?void 0:e.displayName)==null?void 0:s.split(" ").map(l=>l[0]).join(""))||((o=(i=e==null?void 0:e.email)==null?void 0:i[0])==null?void 0:o.toUpperCase())||"U"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate neon-text","data-testid":"text-user-name",children:(e==null?void 0:e.displayName)||(e==null?void 0:e.email)||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate","data-testid":"text-user-email",children:(e==null?void 0:e.email)||"user@example.com"})]}),a.jsx(Y,{variant:"ghost",size:"sm",onClick:r,"data-testid":"button-sign-out",title:"Sign Out",className:"hover:bg-primary/20 hover:text-primary transition-all duration-300 neon-glow-sm hover:neon-glow-md",children:a.jsx("i",{className:"fas fa-sign-out-alt"})})]})})]})}function Co({title:t,subtitle:e,actions:n}){return a.jsx("header",{className:"glass-card border-b border-border/50 px-6 py-4 backdrop-blur-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold neon-text animate-neon-flicker","data-testid":"text-page-title",children:t}),e&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1","data-testid":"text-page-subtitle",children:e})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(Y,{variant:"ghost",size:"sm",className:"relative neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-notifications",children:[a.jsx("i",{className:"fas fa-bell text-lg"}),a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full animate-neon-pulse neon-glow-sm"})]}),n]})]})})}function HB(){var r,s,i,o;const{data:t,isLoading:e}=ln({queryKey:["/api/users/user-1/stats"]});if(e)return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Array.from({length:4}).map((l,c)=>a.jsx(ee,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-3",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/2"}),a.jsx("div",{className:"h-8 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-2/3"})]})},c))});const n=[{title:"Total Posts",value:((r=t==null?void 0:t.totalPosts)==null?void 0:r.toLocaleString())||"0",change:"+12%",changeText:"from last month",icon:"fas fa-file-alt",iconBg:"bg-primary/10",iconColor:"text-primary",isPositive:!0,testId:"stat-total-posts"},{title:"Active Agents",value:((s=t==null?void 0:t.activeAgents)==null?void 0:s.toString())||"0",change:"+3",changeText:"new this week",icon:"fas fa-robot",iconBg:"bg-accent/10",iconColor:"text-accent",isPositive:!0,testId:"stat-active-agents"},{title:"Engagement Rate",value:`${((i=t==null?void 0:t.engagementRate)==null?void 0:i.toFixed(1))||"0.0"}%`,change:"+0.8%",changeText:"from last week",icon:"fas fa-heart",iconBg:"bg-green-500/10",iconColor:"text-green-500",isPositive:!0,testId:"stat-engagement-rate"},{title:"Automations Run",value:((o=t==null?void 0:t.automationsRun)==null?void 0:o.toLocaleString())||"0",change:"+24%",changeText:"efficiency gain",icon:"fas fa-bolt",iconBg:"bg-blue-500/10",iconColor:"text-blue-500",isPositive:!0,testId:"stat-automations-run"}];return a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(l=>a.jsx(ee,{className:"p-6","data-testid":l.testId,children:a.jsxs(oe,{className:"p-0",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:l.title}),a.jsx("p",{className:"text-2xl font-bold text-foreground","data-testid":`${l.testId}-value`,children:l.value})]}),a.jsx("div",{className:`w-12 h-12 ${l.iconBg} rounded-lg flex items-center justify-center`,children:a.jsx("i",{className:`${l.icon} ${l.iconColor} text-xl`})})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:`text-sm ${l.isPositive?"text-green-600":"text-red-600"}`,"data-testid":`${l.testId}-change`,children:l.change}),a.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`${l.testId}-change-text`,children:l.changeText})]})]})},l.testId))})}const WB=iu("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ye({className:t,variant:e,...n}){return a.jsx("div",{className:se(WB({variant:e}),t),...n})}function qR({post:t}){const[e,n]=p.useState(!1),r=Eo(),s=ns({mutationFn:async()=>Va("POST",`/api/posts/${t.id}/like`),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/posts"]}),n(!0)}}),i=o=>{const l=new Date,c=new Date(o),d=Math.floor((l.getTime()-c.getTime())/(1e3*60*60));return d<1?"Just now":d<24?`${d}h ago`:`${Math.floor(d/24)}d ago`};return a.jsx(ee,{className:"overflow-hidden transition-all duration-200 hover:shadow-md","data-testid":`post-card-${t.id}`,children:a.jsxs(oe,{className:"p-6",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs(Ws,{className:"w-12 h-12",children:[a.jsx(tm,{src:t.author.identityIcon||void 0,alt:t.author.identityName}),a.jsx(qs,{children:t.author.identityName.split(" ").map(o=>o[0]).join("")})]}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h3",{className:"font-semibold text-foreground","data-testid":`text-author-${t.id}`,children:t.author.identityName}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",t.author.username]}),a.jsx("div",{className:"w-1 h-1 bg-muted-foreground rounded-full"}),a.jsx("span",{className:"text-sm text-muted-foreground","data-testid":`text-timestamp-${t.id}`,children:i(t.createdAt||new Date)}),t.isAiGenerated&&a.jsxs(ye,{variant:"secondary",className:"ml-auto bg-primary/10 text-primary","data-testid":`badge-ai-generated-${t.id}`,children:[a.jsx("i",{className:"fas fa-robot mr-1"}),"AI Enhanced"]})]}),a.jsx("p",{className:"text-foreground mb-4 whitespace-pre-wrap","data-testid":`text-content-${t.id}`,children:t.content}),t.imageUrl&&a.jsx("img",{src:t.imageUrl,alt:"Post content",className:"w-full h-48 object-cover rounded-lg mb-4","data-testid":`img-content-${t.id}`})]})]}),a.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-border",children:[a.jsxs("div",{className:"flex items-center gap-6",children:[a.jsxs(Y,{variant:"ghost",size:"sm",className:`flex items-center gap-2 transition-colors ${e?"text-red-500":"text-muted-foreground hover:text-red-500"}`,onClick:()=>s.mutate(),disabled:s.isPending,"data-testid":`button-like-${t.id}`,children:[a.jsx("i",{className:e?"fas fa-heart":"far fa-heart"}),a.jsx("span",{"data-testid":`text-likes-${t.id}`,children:e?t.likes+1:t.likes})]}),a.jsxs(Y,{variant:"ghost",size:"sm",className:"flex items-center gap-2 text-muted-foreground hover:text-primary transition-colors","data-testid":`button-comment-${t.id}`,children:[a.jsx("i",{className:"fas fa-comment"}),a.jsx("span",{"data-testid":`text-comments-${t.id}`,children:t.comments})]}),a.jsxs(Y,{variant:"ghost",size:"sm",className:"flex items-center gap-2 text-muted-foreground hover:text-green-500 transition-colors","data-testid":`button-share-${t.id}`,children:[a.jsx("i",{className:"fas fa-retweet"}),a.jsx("span",{"data-testid":`text-shares-${t.id}`,children:t.shares})]})]}),a.jsx(Y,{variant:"ghost",size:"sm",className:"text-muted-foreground hover:text-foreground","data-testid":`button-bookmark-${t.id}`,children:a.jsx("i",{className:"far fa-bookmark"})})]})]})})}function GR({template:t,showActions:e=!1}){const{toast:n}=zv(),r=Eo(),s=ns({mutationFn:async()=>(await Va("POST",`/api/agent-templates/${t.id}/use`),Va("POST","/api/user-agents",{userId:"user-1",templateId:t.id,name:t.name,config:t.config,isActive:!0})),onSuccess:()=>{r.invalidateQueries({queryKey:["/api/user-agents"]}),r.invalidateQueries({queryKey:["/api/agent-templates"]}),n({title:"Agent created!",description:`${t.name} has been added to your agents.`})},onError:()=>{n({title:"Error",description:"Failed to create agent. Please try again.",variant:"destructive"})}}),i=o=>{const l={Content:"from-blue-500 to-purple-500",Engagement:"from-green-500 to-teal-500",Analytics:"from-orange-500 to-red-500",default:"from-gray-500 to-gray-600"};return l[o]||l.default};return a.jsx(ee,{className:"transition-all duration-200 hover:shadow-md cursor-pointer","data-testid":`agent-template-${t.id}`,children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-8 h-8 bg-gradient-to-r ${i(t.category)} rounded-lg flex items-center justify-center flex-shrink-0`,children:a.jsx("i",{className:`${t.icon} text-white text-sm`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-foreground","data-testid":`text-name-${t.id}`,children:t.name}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3","data-testid":`text-description-${t.id}`,children:t.description}),a.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.isPopular&&a.jsx(ye,{variant:"default",className:"bg-primary/10 text-primary","data-testid":`badge-popular-${t.id}`,children:"Popular"}),a.jsx(ye,{variant:"outline","data-testid":`badge-category-${t.id}`,children:t.category}),a.jsxs("span",{className:"text-xs text-muted-foreground","data-testid":`text-usage-${t.id}`,children:["Used ",t.usageCount.toLocaleString()," times"]})]}),e&&a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs(Y,{size:"sm",onClick:()=>s.mutate(),disabled:s.isPending,"data-testid":`button-use-${t.id}`,children:[a.jsx("i",{className:`fas ${s.isPending?"fa-spinner fa-spin":"fa-plus"} mr-1`}),s.isPending?"Creating...":"Use Template"]}),a.jsxs(Y,{size:"sm",variant:"outline","data-testid":`button-preview-${t.id}`,children:[a.jsx("i",{className:"fas fa-eye mr-1"}),"Preview"]})]})]})]})})})}const vi=p.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:se("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));vi.displayName="Input";var qB=p.createContext(void 0);function xu(t){const e=p.useContext(qB);return t||e||"ltr"}function Ay(t,[e,n]){return Math.min(n,Math.max(e,t))}function GB(t,e){return p.useReducer((n,r)=>e[n][r]??n,t)}var lw="ScrollArea",[KR,wW]=bn(lw),[KB,Ln]=KR(lw),QR=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:i=600,...o}=t,[l,c]=p.useState(null),[d,h]=p.useState(null),[f,m]=p.useState(null),[y,b]=p.useState(null),[v,_]=p.useState(null),[E,x]=p.useState(0),[S,R]=p.useState(0),[D,M]=p.useState(!1),[T,I]=p.useState(!1),N=Ie(e,j=>c(j)),C=xu(s);return a.jsx(KB,{scope:n,type:r,dir:C,scrollHideDelay:i,scrollArea:l,viewport:d,onViewportChange:h,content:f,onContentChange:m,scrollbarX:y,onScrollbarXChange:b,scrollbarXEnabled:D,onScrollbarXEnabledChange:M,scrollbarY:v,onScrollbarYChange:_,scrollbarYEnabled:T,onScrollbarYEnabledChange:I,onCornerWidthChange:x,onCornerHeightChange:R,children:a.jsx(ne.div,{dir:C,...o,ref:N,style:{position:"relative","--radix-scroll-area-corner-width":E+"px","--radix-scroll-area-corner-height":S+"px",...t.style}})})});QR.displayName=lw;var YR="ScrollAreaViewport",XR=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,children:r,nonce:s,...i}=t,o=Ln(YR,n),l=p.useRef(null),c=Ie(e,l,o.onViewportChange);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),a.jsx(ne.div,{"data-radix-scroll-area-viewport":"",...i,ref:c,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...t.style},children:a.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});XR.displayName=YR;var kr="ScrollAreaScrollbar",cw=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ln(kr,t.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=s,l=t.orientation==="horizontal";return p.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),s.type==="hover"?a.jsx(QB,{...r,ref:e,forceMount:n}):s.type==="scroll"?a.jsx(YB,{...r,ref:e,forceMount:n}):s.type==="auto"?a.jsx(JR,{...r,ref:e,forceMount:n}):s.type==="always"?a.jsx(uw,{...r,ref:e}):null});cw.displayName=kr;var QB=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ln(kr,t.__scopeScrollArea),[i,o]=p.useState(!1);return p.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const d=()=>{window.clearTimeout(c),o(!0)},h=()=>{c=window.setTimeout(()=>o(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",d),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",d),l.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),a.jsx(Mn,{present:n||i,children:a.jsx(JR,{"data-state":i?"visible":"hidden",...r,ref:e})})}),YB=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Ln(kr,t.__scopeScrollArea),i=t.orientation==="horizontal",o=rm(()=>c("SCROLL_END"),100),[l,c]=GB("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return p.useEffect(()=>{if(l==="idle"){const d=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(d)}},[l,s.scrollHideDelay,c]),p.useEffect(()=>{const d=s.viewport,h=i?"scrollLeft":"scrollTop";if(d){let f=d[h];const m=()=>{const y=d[h];f!==y&&(c("SCROLL"),o()),f=y};return d.addEventListener("scroll",m),()=>d.removeEventListener("scroll",m)}},[s.viewport,i,c,o]),a.jsx(Mn,{present:n||l!=="hidden",children:a.jsx(uw,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:e,onPointerEnter:Z(t.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:Z(t.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),JR=p.forwardRef((t,e)=>{const n=Ln(kr,t.__scopeScrollArea),{forceMount:r,...s}=t,[i,o]=p.useState(!1),l=t.orientation==="horizontal",c=rm(()=>{if(n.viewport){const d=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;o(l?d:h)}},10);return Xa(n.viewport,c),Xa(n.content,c),a.jsx(Mn,{present:r||i,children:a.jsx(uw,{"data-state":i?"visible":"hidden",...s,ref:e})})}),uw=p.forwardRef((t,e)=>{const{orientation:n="vertical",...r}=t,s=Ln(kr,t.__scopeScrollArea),i=p.useRef(null),o=p.useRef(0),[l,c]=p.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),d=rP(l.viewport,l.content),h={...r,sizes:l,onSizesChange:c,hasThumb:d>0&&d<1,onThumbChange:m=>i.current=m,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:m=>o.current=m};function f(m,y){return n8(m,o.current,l,y)}return n==="horizontal"?a.jsx(XB,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollLeft,y=nT(m,l,s.dir);i.current.style.transform=`translate3d(${y}px, 0, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollLeft=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollLeft=f(m,s.dir))}}):n==="vertical"?a.jsx(JB,{...h,ref:e,onThumbPositionChange:()=>{if(s.viewport&&i.current){const m=s.viewport.scrollTop,y=nT(m,l);i.current.style.transform=`translate3d(0, ${y}px, 0)`}},onWheelScroll:m=>{s.viewport&&(s.viewport.scrollTop=m)},onDragScroll:m=>{s.viewport&&(s.viewport.scrollTop=f(m))}}):null}),XB=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Ln(kr,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=Ie(e,c,i.onScrollbarXChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(eP,{"data-orientation":"horizontal",...s,ref:d,sizes:n,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":nm(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollLeft+h.deltaX;t.onWheelScroll(m),iP(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:Wh(o.paddingLeft),paddingEnd:Wh(o.paddingRight)}})}})}),JB=p.forwardRef((t,e)=>{const{sizes:n,onSizesChange:r,...s}=t,i=Ln(kr,t.__scopeScrollArea),[o,l]=p.useState(),c=p.useRef(null),d=Ie(e,c,i.onScrollbarYChange);return p.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),a.jsx(eP,{"data-orientation":"vertical",...s,ref:d,sizes:n,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":nm(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,f)=>{if(i.viewport){const m=i.viewport.scrollTop+h.deltaY;t.onWheelScroll(m),iP(m,f)&&h.preventDefault()}},onResize:()=>{c.current&&i.viewport&&o&&r({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:Wh(o.paddingTop),paddingEnd:Wh(o.paddingBottom)}})}})}),[ZB,ZR]=KR(kr),eP=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:d,onWheelScroll:h,onResize:f,...m}=t,y=Ln(kr,n),[b,v]=p.useState(null),_=Ie(e,N=>v(N)),E=p.useRef(null),x=p.useRef(""),S=y.viewport,R=r.content-r.viewport,D=tt(h),M=tt(c),T=rm(f,10);function I(N){if(E.current){const C=N.clientX-E.current.left,j=N.clientY-E.current.top;d({x:C,y:j})}}return p.useEffect(()=>{const N=C=>{const j=C.target;(b==null?void 0:b.contains(j))&&D(C,R)};return document.addEventListener("wheel",N,{passive:!1}),()=>document.removeEventListener("wheel",N,{passive:!1})},[S,b,R,D]),p.useEffect(M,[r,M]),Xa(b,T),Xa(y.content,T),a.jsx(ZB,{scope:n,scrollbar:b,hasThumb:s,onThumbChange:tt(i),onThumbPointerUp:tt(o),onThumbPositionChange:M,onThumbPointerDown:tt(l),children:a.jsx(ne.div,{...m,ref:_,style:{position:"absolute",...m.style},onPointerDown:Z(t.onPointerDown,N=>{N.button===0&&(N.target.setPointerCapture(N.pointerId),E.current=b.getBoundingClientRect(),x.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",y.viewport&&(y.viewport.style.scrollBehavior="auto"),I(N))}),onPointerMove:Z(t.onPointerMove,I),onPointerUp:Z(t.onPointerUp,N=>{const C=N.target;C.hasPointerCapture(N.pointerId)&&C.releasePointerCapture(N.pointerId),document.body.style.webkitUserSelect=x.current,y.viewport&&(y.viewport.style.scrollBehavior=""),E.current=null})})})}),Hh="ScrollAreaThumb",tP=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=ZR(Hh,t.__scopeScrollArea);return a.jsx(Mn,{present:n||s.hasThumb,children:a.jsx(e8,{ref:e,...r})})}),e8=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,style:r,...s}=t,i=Ln(Hh,n),o=ZR(Hh,n),{onThumbPositionChange:l}=o,c=Ie(e,f=>o.onThumbChange(f)),d=p.useRef(void 0),h=rm(()=>{d.current&&(d.current(),d.current=void 0)},100);return p.useEffect(()=>{const f=i.viewport;if(f){const m=()=>{if(h(),!d.current){const y=r8(f,l);d.current=y,l()}};return l(),f.addEventListener("scroll",m),()=>f.removeEventListener("scroll",m)}},[i.viewport,h,l]),a.jsx(ne.div,{"data-state":o.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:Z(t.onPointerDownCapture,f=>{const y=f.target.getBoundingClientRect(),b=f.clientX-y.left,v=f.clientY-y.top;o.onThumbPointerDown({x:b,y:v})}),onPointerUp:Z(t.onPointerUp,o.onThumbPointerUp)})});tP.displayName=Hh;var dw="ScrollAreaCorner",nP=p.forwardRef((t,e)=>{const n=Ln(dw,t.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?a.jsx(t8,{...t,ref:e}):null});nP.displayName=dw;var t8=p.forwardRef((t,e)=>{const{__scopeScrollArea:n,...r}=t,s=Ln(dw,n),[i,o]=p.useState(0),[l,c]=p.useState(0),d=!!(i&&l);return Xa(s.scrollbarX,()=>{var f;const h=((f=s.scrollbarX)==null?void 0:f.offsetHeight)||0;s.onCornerHeightChange(h),c(h)}),Xa(s.scrollbarY,()=>{var f;const h=((f=s.scrollbarY)==null?void 0:f.offsetWidth)||0;s.onCornerWidthChange(h),o(h)}),d?a.jsx(ne.div,{...r,ref:e,style:{width:i,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function Wh(t){return t?parseInt(t,10):0}function rP(t,e){const n=t/e;return isNaN(n)?0:n}function nm(t){const e=rP(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,r=(t.scrollbar.size-n)*e;return Math.max(r,18)}function n8(t,e,n,r="ltr"){const s=nm(n),i=s/2,o=e||i,l=s-o,c=n.scrollbar.paddingStart+o,d=n.scrollbar.size-n.scrollbar.paddingEnd-l,h=n.content-n.viewport,f=r==="ltr"?[0,h]:[h*-1,0];return sP([c,d],f)(t)}function nT(t,e,n="ltr"){const r=nm(e),s=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,i=e.scrollbar.size-s,o=e.content-e.viewport,l=i-r,c=n==="ltr"?[0,o]:[o*-1,0],d=Ay(t,c);return sP([0,o],[0,l])(d)}function sP(t,e){return n=>{if(t[0]===t[1]||e[0]===e[1])return e[0];const r=(e[1]-e[0])/(t[1]-t[0]);return e[0]+r*(n-t[0])}}function iP(t,e){return t>0&&t<e}var r8=(t,e=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},r=0;return function s(){const i={left:t.scrollLeft,top:t.scrollTop},o=n.left!==i.left,l=n.top!==i.top;(o||l)&&e(),n=i,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function rm(t,e){const n=tt(t),r=p.useRef(0);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),p.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,e)},[n,e])}function Xa(t,e){const n=tt(e);at(()=>{let r=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(r),s.unobserve(t)}}},[t,n])}var oP=QR,s8=XR,i8=nP;const aP=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(oP,{ref:r,className:se("relative overflow-hidden",t),...n,children:[a.jsx(s8,{className:"h-full w-full rounded-[inherit]",children:e}),a.jsx(lP,{}),a.jsx(i8,{})]}));aP.displayName=oP.displayName;const lP=p.forwardRef(({className:t,orientation:e="vertical",...n},r)=>a.jsx(cw,{ref:r,orientation:e,className:se("flex touch-none select-none transition-colors",e==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",e==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...n,children:a.jsx(tP,{className:"relative flex-1 rounded-full bg-border"})}));lP.displayName=cw.displayName;const o8={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function a8({size:t="md",variant:e="default",className:n,text:r}){const s="animate-spin",i=o8[t],o=()=>{switch(e){case"cyber":return"text-primary border-primary border-t-transparent";case"neon":return"text-primary border-primary border-t-transparent neon-glow-sm";case"pulse":return"text-primary animate-pulse";default:return"text-primary border-primary border-t-transparent"}};return e==="pulse"?a.jsxs("div",{className:se("flex items-center justify-center",n),children:[a.jsx("div",{className:se("rounded-full bg-primary",i,"animate-pulse")}),r&&a.jsx("span",{className:"ml-2 text-sm text-muted-foreground animate-pulse",children:r})]}):a.jsxs("div",{className:se("flex items-center justify-center",n),children:[a.jsx("div",{className:se("rounded-full border-2",i,s,o())}),r&&a.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:r})]})}function l8(t,e,n={}){var b;const r=p.useRef(null),s=p.useRef(null),i=p.useRef(null),o=p.useRef(0),l=p.useRef(!1),{reconnectInterval:c=3e3,maxReconnectAttempts:d=5,heartbeatInterval:h=3e4}=n,f=p.useCallback(()=>{var v,_;if(!(((v=r.current)==null?void 0:v.readyState)===WebSocket.OPEN||((_=r.current)==null?void 0:_.readyState)===WebSocket.CONNECTING))try{let E;E=`wss://aios-97581.web.app${t}`,console.log("Attempting WebSocket connection to:",E);const x=new WebSocket(E);r.current=x,x.onopen=()=>{console.log(" WebSocket connected successfully"),o.current=0,l.current=!1,m()},x.onmessage=S=>{try{const R=JSON.parse(S.data);if(R.type==="pong")return;e(R)}catch(R){console.error("Failed to parse WebSocket message:",R)}},x.onclose=S=>{console.log("WebSocket disconnected:",S.code,S.reason),i.current&&clearTimeout(i.current),!l.current&&o.current<d?(o.current++,console.log(`Attempting reconnection ${o.current}/${d} in ${c}ms`),s.current=setTimeout(()=>{f()},c)):o.current>=d&&console.error("Max reconnection attempts reached. WebSocket connection failed.")},x.onerror=S=>{console.error("WebSocket error:",S)}}catch(E){console.error("Failed to create WebSocket connection:",E)}},[t,e,c,d]),m=p.useCallback(()=>{const v=()=>{var _;((_=r.current)==null?void 0:_.readyState)===WebSocket.OPEN&&(r.current.send(JSON.stringify({type:"ping",timestamp:Date.now()})),i.current=setTimeout(v,h))};i.current=setTimeout(v,h)},[h]),y=p.useCallback(()=>{l.current=!0,s.current&&clearTimeout(s.current),i.current&&clearTimeout(i.current),r.current&&(r.current.close(),r.current=null)},[]);return p.useEffect(()=>(f(),()=>{y()}),[f,y]),{ws:r.current,connect:f,disconnect:y,isConnected:((b=r.current)==null?void 0:b.readyState)===WebSocket.OPEN}}function sm(){var f;const[t,e]=p.useState(!1),[n,r]=p.useState(""),[s,i]=p.useState([]),o=p.useRef(null),{isConnected:l}=l8("/ws",m=>{console.log("WebSocket message:",m),m.type==="chat_message"&&i(y=>[...y,{id:m.id,type:"ai",content:m.content,timestamp:new Date(m.timestamp)}])});ln({queryKey:["/api/chat/history"],queryFn:()=>fetch("/api/chat/history?userId=user-1&limit=10").then(m=>m.json()),enabled:t});const c=ns({mutationFn:async m=>(await Va("POST","/api/chat",{message:m,userId:"user-1"})).json(),onSuccess:m=>{i(y=>[...y,{id:Date.now().toString(),type:"ai",content:m.response,timestamp:new Date}])}}),d=()=>{if(!n.trim())return;const m={id:Date.now().toString(),type:"user",content:n,timestamp:new Date};i(y=>[...y,m]),c.mutate(n),r("")},h=m=>{m.key==="Enter"&&!m.shiftKey&&(m.preventDefault(),d())};return p.useEffect(()=>{var m;(m=o.current)==null||m.scrollIntoView({behavior:"smooth"})},[s]),p.useEffect(()=>{t&&s.length===0&&i([{id:"welcome",type:"ai",content:"Hi! I'm your AI assistant. I can help you create content, set up automations, or analyze your social media performance. What would you like to do?",timestamp:new Date}])},[t]),a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsxs("div",{className:"relative",children:[a.jsx(Y,{className:"w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 group",onClick:()=>e(!t),"data-testid":"button-toggle-chat",children:a.jsx("i",{className:`fas ${t?"fa-times":"fa-robot"} text-lg group-hover:scale-110 transition-transform`})}),t&&a.jsxs(ee,{className:"absolute bottom-16 right-0 w-80 shadow-xl","data-testid":"chat-widget",children:[a.jsx(ve,{className:"p-4 border-b",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsxs(Ws,{className:"w-8 h-8",children:[a.jsx(tm,{src:"",alt:"AI Assistant"}),a.jsx(qs,{className:"bg-gradient-to-r from-primary to-accent text-white",children:a.jsx("i",{className:"fas fa-robot text-sm"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-foreground",children:"AI Assistant"}),a.jsx(ye,{variant:"secondary",className:`text-xs ${l?"bg-green-500/10 text-green-600":"bg-red-500/10 text-red-600"}`,children:l?"Online":"Offline"})]}),a.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>e(!1),"data-testid":"button-close-chat",children:a.jsx("i",{className:"fas fa-times"})})]})}),a.jsxs(oe,{className:"p-0",children:[a.jsx(aP,{className:"h-60 p-4",children:a.jsxs("div",{className:"space-y-4",children:[s.map(m=>a.jsxs("div",{className:`flex gap-3 ${m.type==="user"?"justify-end":"justify-start"}`,"data-testid":`chat-message-${m.type}-${m.id}`,children:[m.type==="ai"&&a.jsx(Ws,{className:"w-6 h-6 flex-shrink-0",children:a.jsx(qs,{className:"bg-primary text-white",children:a.jsx("i",{className:"fas fa-robot text-xs"})})}),a.jsx("div",{className:`max-w-[70%] p-3 rounded-lg text-sm ${m.type==="user"?"bg-primary text-primary-foreground ml-auto":"bg-muted text-foreground"}`,children:m.content})]},m.id)),c.isPending&&a.jsxs("div",{className:"flex gap-3 justify-start",children:[a.jsx(Ws,{className:"w-6 h-6 flex-shrink-0",children:a.jsx(qs,{className:"bg-primary text-white",children:a.jsx("i",{className:"fas fa-robot text-xs"})})}),a.jsx("div",{className:"bg-muted text-foreground p-3 rounded-lg text-sm",children:a.jsx(a8,{size:"sm",variant:"cyber",text:"AI is thinking..."})})]}),c.isError&&a.jsxs("div",{className:"flex gap-3 justify-start",children:[a.jsx(Ws,{className:"w-6 h-6 flex-shrink-0",children:a.jsx(qs,{className:"bg-destructive text-white",children:a.jsx("i",{className:"fas fa-exclamation-triangle text-xs"})})}),a.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 text-destructive p-3 rounded-lg text-sm",children:[a.jsx("p",{className:"font-medium",children:"Error sending message"}),a.jsx("p",{className:"text-xs mt-1",children:((f=c.error)==null?void 0:f.message)||"Please try again"}),a.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>c.reset(),className:"mt-2 h-6 text-xs",children:"Try Again"})]})]}),a.jsx("div",{ref:o})]})}),a.jsx("div",{className:"p-4 border-t",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx(vi,{placeholder:"Type your message...",value:n,onChange:m=>r(m.target.value),onKeyPress:h,disabled:c.isPending,"data-testid":"input-chat-message"}),a.jsx(Y,{onClick:d,disabled:c.isPending||!n.trim(),"data-testid":"button-send-message",children:a.jsx("i",{className:"fas fa-paper-plane"})})]})})]})]})]})})}var Rp="rovingFocusGroup.onEntryFocus",c8={bubbles:!1,cancelable:!0},im="RovingFocusGroup",[Cy,cP,u8]=mf(im),[d8,uP]=bn(im,[u8]),[h8,f8]=d8(im),dP=p.forwardRef((t,e)=>a.jsx(Cy.Provider,{scope:t.__scopeRovingFocusGroup,children:a.jsx(Cy.Slot,{scope:t.__scopeRovingFocusGroup,children:a.jsx(m8,{...t,ref:e})})}));dP.displayName=im;var m8=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:d,preventScrollOnEntryFocus:h=!1,...f}=t,m=p.useRef(null),y=Ie(e,m),b=xu(i),[v=null,_]=Ir({prop:o,defaultProp:l,onChange:c}),[E,x]=p.useState(!1),S=tt(d),R=cP(n),D=p.useRef(!1),[M,T]=p.useState(0);return p.useEffect(()=>{const I=m.current;if(I)return I.addEventListener(Rp,S),()=>I.removeEventListener(Rp,S)},[S]),a.jsx(h8,{scope:n,orientation:r,dir:b,loop:s,currentTabStopId:v,onItemFocus:p.useCallback(I=>_(I),[_]),onItemShiftTab:p.useCallback(()=>x(!0),[]),onFocusableItemAdd:p.useCallback(()=>T(I=>I+1),[]),onFocusableItemRemove:p.useCallback(()=>T(I=>I-1),[]),children:a.jsx(ne.div,{tabIndex:E||M===0?-1:0,"data-orientation":r,...f,ref:y,style:{outline:"none",...t.style},onMouseDown:Z(t.onMouseDown,()=>{D.current=!0}),onFocus:Z(t.onFocus,I=>{const N=!D.current;if(I.target===I.currentTarget&&N&&!E){const C=new CustomEvent(Rp,c8);if(I.currentTarget.dispatchEvent(C),!C.defaultPrevented){const j=R().filter(X=>X.focusable),k=j.find(X=>X.active),P=j.find(X=>X.id===v),ae=[k,P,...j].filter(Boolean).map(X=>X.ref.current);mP(ae,h)}}D.current=!1}),onBlur:Z(t.onBlur,()=>x(!1))})})}),hP="RovingFocusGroupItem",fP=p.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:i,...o}=t,l=Jn(),c=i||l,d=f8(hP,n),h=d.currentTabStopId===c,f=cP(n),{onFocusableItemAdd:m,onFocusableItemRemove:y}=d;return p.useEffect(()=>{if(r)return m(),()=>y()},[r,m,y]),a.jsx(Cy.ItemSlot,{scope:n,id:c,focusable:r,active:s,children:a.jsx(ne.span,{tabIndex:h?0:-1,"data-orientation":d.orientation,...o,ref:e,onMouseDown:Z(t.onMouseDown,b=>{r?d.onItemFocus(c):b.preventDefault()}),onFocus:Z(t.onFocus,()=>d.onItemFocus(c)),onKeyDown:Z(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){d.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const v=y8(b,d.orientation,d.dir);if(v!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let E=f().filter(x=>x.focusable).map(x=>x.ref.current);if(v==="last")E.reverse();else if(v==="prev"||v==="next"){v==="prev"&&E.reverse();const x=E.indexOf(b.currentTarget);E=d.loop?v8(E,x+1):E.slice(x+1)}setTimeout(()=>mP(E))}})})})});fP.displayName=hP;var p8={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function g8(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function y8(t,e,n){const r=g8(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return p8[r]}function mP(t,e=!1){const n=document.activeElement;for(const r of t)if(r===n||(r.focus({preventScroll:e}),document.activeElement!==n))return}function v8(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var x8=dP,w8=fP,hw="Tabs",[_8,_W]=bn(hw,[uP]),pP=uP(),[E8,fw]=_8(hw),gP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:c="automatic",...d}=t,h=xu(l),[f,m]=Ir({prop:r,onChange:s,defaultProp:i});return a.jsx(E8,{scope:n,baseId:Jn(),value:f,onValueChange:m,orientation:o,dir:h,activationMode:c,children:a.jsx(ne.div,{dir:h,"data-orientation":o,...d,ref:e})})});gP.displayName=hw;var yP="TabsList",vP=p.forwardRef((t,e)=>{const{__scopeTabs:n,loop:r=!0,...s}=t,i=fw(yP,n),o=pP(n);return a.jsx(x8,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:r,children:a.jsx(ne.div,{role:"tablist","aria-orientation":i.orientation,...s,ref:e})})});vP.displayName=yP;var xP="TabsTrigger",wP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...i}=t,o=fw(xP,n),l=pP(n),c=TP(o.baseId,r),d=bP(o.baseId,r),h=r===o.value;return a.jsx(w8,{asChild:!0,...l,focusable:!s,active:h,children:a.jsx(ne.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":d,"data-state":h?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:c,...i,ref:e,onMouseDown:Z(t.onMouseDown,f=>{!s&&f.button===0&&f.ctrlKey===!1?o.onValueChange(r):f.preventDefault()}),onKeyDown:Z(t.onKeyDown,f=>{[" ","Enter"].includes(f.key)&&o.onValueChange(r)}),onFocus:Z(t.onFocus,()=>{const f=o.activationMode!=="manual";!h&&!s&&f&&o.onValueChange(r)})})})});wP.displayName=xP;var _P="TabsContent",EP=p.forwardRef((t,e)=>{const{__scopeTabs:n,value:r,forceMount:s,children:i,...o}=t,l=fw(_P,n),c=TP(l.baseId,r),d=bP(l.baseId,r),h=r===l.value,f=p.useRef(h);return p.useEffect(()=>{const m=requestAnimationFrame(()=>f.current=!1);return()=>cancelAnimationFrame(m)},[]),a.jsx(Mn,{present:s||h,children:({present:m})=>a.jsx(ne.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":c,hidden:!m,id:d,tabIndex:0,...o,ref:e,style:{...t.style,animationDuration:f.current?"0s":void 0},children:m&&i})})});EP.displayName=_P;function TP(t,e){return`${t}-trigger-${e}`}function bP(t,e){return`${t}-content-${e}`}var T8=gP,SP=vP,IP=wP,NP=EP;const om=T8,wu=p.forwardRef(({className:t,...e},n)=>a.jsx(SP,{ref:n,className:se("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...e}));wu.displayName=SP.displayName;const nn=p.forwardRef(({className:t,...e},n)=>a.jsx(IP,{ref:n,className:se("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...e}));nn.displayName=IP.displayName;const rn=p.forwardRef(({className:t,...e},n)=>a.jsx(NP,{ref:n,className:se("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...e}));rn.displayName=NP.displayName;var mw="Progress",pw=100,[b8,EW]=bn(mw),[S8,I8]=b8(mw),AP=p.forwardRef((t,e)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:i=N8,...o}=t;(s||s===0)&&!rT(s)&&console.error(A8(`${s}`,"Progress"));const l=rT(s)?s:pw;r!==null&&!sT(r,l)&&console.error(C8(`${r}`,"Progress"));const c=sT(r,l)?r:null,d=qh(c)?i(c,l):void 0;return a.jsx(S8,{scope:n,value:c,max:l,children:a.jsx(ne.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":qh(c)?c:void 0,"aria-valuetext":d,role:"progressbar","data-state":PP(c,l),"data-value":c??void 0,"data-max":l,...o,ref:e})})});AP.displayName=mw;var CP="ProgressIndicator",RP=p.forwardRef((t,e)=>{const{__scopeProgress:n,...r}=t,s=I8(CP,n);return a.jsx(ne.div,{"data-state":PP(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:e})});RP.displayName=CP;function N8(t,e){return`${Math.round(t/e*100)}%`}function PP(t,e){return t==null?"indeterminate":t===e?"complete":"loading"}function qh(t){return typeof t=="number"}function rT(t){return qh(t)&&!isNaN(t)&&t>0}function sT(t,e){return qh(t)&&!isNaN(t)&&t<=e&&t>=0}function A8(t,e){return`Invalid prop \`max\` of value \`${t}\` supplied to \`${e}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${pw}\`.`}function C8(t,e){return`Invalid prop \`value\` of value \`${t}\` supplied to \`${e}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${pw} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var jP=AP,R8=RP;const go=p.forwardRef(({className:t,value:e,...n},r)=>a.jsx(jP,{ref:r,className:se("relative h-4 w-full overflow-hidden rounded-full bg-secondary",t),...n,children:a.jsx(R8,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(e||0)}%)`}})}));go.displayName=jP.displayName;function P8({userId:t}){const[e,n]=p.useState("monthly"),[r,s]=p.useState("overview"),{analytics:i,loading:o,refresh:l}=OB(e),{sessions:c,loading:d}=DB(),{history:h,loading:f}=kB({limit:100}),m=()=>{const y={analytics:i,sessions:c,history:h,exportedAt:new Date().toISOString()},b=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),v=URL.createObjectURL(b),_=document.createElement("a");_.href=v,_.download=`user-analytics-${e}-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(_),_.click(),document.body.removeChild(_),URL.revokeObjectURL(v)};return o||d||f?a.jsxs("div",{className:"flex items-center justify-center p-8",children:[a.jsx(vh,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{className:"ml-2",children:"Loading analytics..."})]}):a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold",children:"User Analytics"}),a.jsx("p",{className:"text-muted-foreground",children:"Comprehensive insights into user behavior and engagement"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("select",{value:e,onChange:y=>n(y.target.value),className:"px-3 py-2 border rounded-md","aria-label":"Select analytics period",children:[a.jsx("option",{value:"daily",children:"Daily"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"}),a.jsx("option",{value:"yearly",children:"Yearly"})]}),a.jsxs(Y,{onClick:l,variant:"outline",size:"sm",children:[a.jsx(vh,{className:"h-4 w-4 mr-2"}),"Refresh"]}),a.jsxs(Y,{onClick:m,variant:"outline",size:"sm",children:[a.jsx(kL,{className:"h-4 w-4 mr-2"}),"Export"]})]})]}),a.jsxs(om,{value:r,onValueChange:s,children:[a.jsxs(wu,{className:"grid w-full grid-cols-4",children:[a.jsx(nn,{value:"overview",children:"Overview"}),a.jsx(nn,{value:"behavior",children:"Behavior"}),a.jsx(nn,{value:"sessions",children:"Sessions"}),a.jsx(nn,{value:"history",children:"History"})]}),a.jsx(rn,{value:"overview",className:"space-y-6",children:a.jsx(j8,{analytics:i,sessions:c,history:h})}),a.jsx(rn,{value:"behavior",className:"space-y-6",children:a.jsx(k8,{analytics:i,history:h})}),a.jsx(rn,{value:"sessions",className:"space-y-6",children:a.jsx(D8,{sessions:c})}),a.jsx(rn,{value:"history",className:"space-y-6",children:a.jsx(O8,{history:h})})]})]})}function j8({analytics:t,sessions:e,history:n}){var l,c,d,h,f,m,y,b;const r=n.length,s=e.length,i=((l=t==null?void 0:t.stats)==null?void 0:l.averageSessionDuration)||0,o=((c=t==null?void 0:t.stats)==null?void 0:c.errorRate)||0;return a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(ee,{children:[a.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Te,{className:"text-sm font-medium",children:"Total Actions"}),a.jsx(TL,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(oe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:r.toLocaleString()}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",s," sessions"]})]})]}),a.jsxs(ee,{children:[a.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Te,{className:"text-sm font-medium",children:"Sessions"}),a.jsx(kc,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(oe,{children:[a.jsx("div",{className:"text-2xl font-bold",children:s}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:["Average ",Math.round(i/1e3/60)," minutes"]})]})]}),a.jsxs(ee,{children:[a.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Te,{className:"text-sm font-medium",children:"Error Rate"}),a.jsx(ML,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(oe,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[o.toFixed(1),"%"]}),a.jsxs("p",{className:"text-xs text-muted-foreground",children:[n.filter(v=>!v.success).length," errors"]})]})]}),a.jsxs(ee,{children:[a.jsxs(ve,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[a.jsx(Te,{className:"text-sm font-medium",children:"Retention"}),a.jsx(Gv,{className:"h-4 w-4 text-muted-foreground"})]}),a.jsxs(oe,{children:[a.jsxs("div",{className:"text-2xl font-bold",children:[((h=(d=t==null?void 0:t.stats)==null?void 0:d.retentionRate)==null?void 0:h.toFixed(1))||0,"%"]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"User retention rate"})]})]}),a.jsxs(ee,{className:"col-span-1 md:col-span-2",children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Most Used Features"}),a.jsx(Yr,{children:"Top features by usage count"})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-4",children:(m=(f=t==null?void 0:t.stats)==null?void 0:f.mostUsedFeatures)==null?void 0:m.slice(0,5).map((v,_)=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium capitalize",children:v.feature}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[v.count," (",v.percentage.toFixed(1),"%)"]})]}),a.jsx(go,{value:v.percentage,className:"h-2"})]},v.feature))})})]}),a.jsxs(ee,{className:"col-span-1 md:col-span-2",children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Top Pages"}),a.jsx(Yr,{children:"Most visited pages"})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-4",children:(b=(y=t==null?void 0:t.stats)==null?void 0:y.topPages)==null?void 0:b.slice(0,5).map((v,_)=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ye,{variant:"outline",children:_+1}),a.jsx("span",{className:"text-sm",children:v.page})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"text-sm font-medium",children:[v.visits," visits"]}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[Math.round(v.averageTime/1e3),"s avg"]})]})]},v.page))})})]})]})}function k8({analytics:t,history:e}){const n=e.reduce((i,o)=>(i[o.action.type]=(i[o.action.type]||0)+1,i),{}),r=e.reduce((i,o)=>(i[o.action.category]=(i[o.action.category]||0)+1,i),{}),s=e.reduce((i,o)=>{const l=new Date(o.timestamp).getHours();return i[l]=(i[l]||0)+1,i},{});return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ee,{children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Action Types"}),a.jsx(Yr,{children:"Distribution of different action types"})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-3",children:Object.entries(n).sort(([,i],[,o])=>o-i).slice(0,10).map(([i,o])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-primary"}),a.jsx("span",{className:"text-sm capitalize",children:i.replace("_"," ")})]}),a.jsx(ye,{variant:"secondary",children:o})]},i))})})]}),a.jsxs(ee,{children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Action Categories"}),a.jsx(Yr,{children:"Distribution by category"})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-3",children:Object.entries(r).sort(([,i],[,o])=>o-i).map(([i,o])=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full bg-secondary"}),a.jsx("span",{className:"text-sm capitalize",children:i})]}),a.jsx(ye,{variant:"outline",children:o})]},i))})})]}),a.jsxs(ee,{className:"col-span-1 lg:col-span-2",children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Hourly Activity"}),a.jsx(Yr,{children:"User activity throughout the day"})]}),a.jsx(oe,{children:a.jsx("div",{className:"grid grid-cols-12 gap-2",children:Array.from({length:24},(i,o)=>{const l=s[o]||0,c=Math.max(...Object.values(s)),d=c>0?l/c*100:0;return a.jsxs("div",{className:"flex flex-col items-center space-y-1",children:[a.jsx("div",{className:"w-full bg-primary rounded-sm transition-all duration-300",style:{height:`${Math.max(d,5)}px`}}),a.jsx("span",{className:"text-xs text-muted-foreground",children:o.toString().padStart(2,"0")}),l>0&&a.jsx("span",{className:"text-xs font-medium",children:l})]},o)})})})]})]})}function D8({sessions:t}){const[e,n]=p.useState(null);return a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs(ee,{className:"lg:col-span-2",children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Sessions"}),a.jsx(Yr,{children:"Recent user sessions"})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-4",children:t.slice(0,10).map(r=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(e==null?void 0:e.id)===r.id?"bg-accent":"hover:bg-muted"}`,onClick:()=>n(r),children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[new Date(r.startTime).toLocaleDateString()," ",new Date(r.startTime).toLocaleTimeString()]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[r.actions," actions  ",r.deviceInfo.platform]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx(ye,{variant:r.isActive?"default":"secondary",children:r.isActive?"Active":"Ended"}),r.duration&&a.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:[Math.round(r.duration/1e3/60),"m"]})]})]})},r.id))})})]}),a.jsxs(ee,{children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Session Details"}),a.jsx(Yr,{children:e?"Selected session information":"Select a session to view details"})]}),a.jsx(oe,{children:e?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Start Time"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.startTime).toLocaleString()})]}),e.endTime&&a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"End Time"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:new Date(e.endTime).toLocaleString()})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Duration"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.duration?`${Math.round(e.duration/1e3/60)} minutes`:"Ongoing"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Actions"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.actions})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Device"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.deviceInfo.platform})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Language"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.deviceInfo.language})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:"Screen Resolution"}),a.jsx("div",{className:"text-sm text-muted-foreground",children:e.deviceInfo.screenResolution})]})]}):a.jsxs("div",{className:"text-center text-muted-foreground",children:[a.jsx(OL,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),a.jsx("p",{children:"Click on a session to view details"})]})})]})]})}function O8({history:t}){const[e,n]=p.useState("all"),[r,s]=p.useState(""),i=t.filter(o=>{const l=e==="all"||o.action.category===e,c=o.action.description.toLowerCase().includes(r.toLowerCase());return l&&c});return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Category:"}),a.jsxs("select",{value:e,onChange:o=>n(o.target.value),className:"px-3 py-1 border rounded-md text-sm","aria-label":"Filter action categories",children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"authentication",children:"Authentication"}),a.jsx("option",{value:"content",children:"Content"}),a.jsx("option",{value:"social",children:"Social"}),a.jsx("option",{value:"workflow",children:"Workflow"}),a.jsx("option",{value:"ai",children:"AI"}),a.jsx("option",{value:"navigation",children:"Navigation"}),a.jsx("option",{value:"system",children:"System"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("label",{className:"text-sm font-medium",children:"Search:"}),a.jsx("input",{type:"text",value:r,onChange:o=>s(o.target.value),placeholder:"Search actions...",className:"px-3 py-1 border rounded-md text-sm"})]})]}),a.jsxs(ee,{children:[a.jsxs(ve,{children:[a.jsx(Te,{children:"Action History"}),a.jsxs(Yr,{children:[i.length," of ",t.length," actions"]})]}),a.jsx(oe,{children:a.jsx("div",{className:"space-y-4",children:i.slice(0,50).map(o=>a.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${o.success?"bg-green-500":"bg-red-500"}`}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:o.action.description}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[o.action.type,"  ",o.action.category,o.action.target&&`  ${o.action.target}`]}),o.errorMessage&&a.jsxs("div",{className:"text-sm text-red-600 mt-1",children:["Error: ",o.errorMessage]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("div",{className:"text-sm font-medium",children:new Date(o.timestamp).toLocaleDateString()}),a.jsx("div",{className:"text-xs text-muted-foreground",children:new Date(o.timestamp).toLocaleTimeString()}),o.duration&&a.jsxs("div",{className:"text-xs text-muted-foreground",children:[o.duration,"ms"]})]})]},o.id))})})]})]})}function M8(){const[t,e]=p.useState(!1),{data:n,isLoading:r}=ln({queryKey:["/api/posts"]}),{data:s,isLoading:i}=ln({queryKey:["/api/agent-templates"]}),{data:o,isLoading:l}=ln({queryKey:["/api/user-agents"],queryFn:()=>fetch("/api/user-agents?userId=user-1").then(c=>c.json())});return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background carbon-texture",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Dashboard",subtitle:"Manage your AI-powered social platform"}),a.jsx("main",{className:"flex-1 overflow-auto cyber-scrollbar",children:a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:t?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold neon-text",children:"User Analytics"}),a.jsx(Y,{variant:"outline",onClick:()=>e(!1),className:"neon-glow-sm",children:"Back to Dashboard"})]}),a.jsx(P8,{})]}):a.jsxs(a.Fragment,{children:[a.jsx(HB,{}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mt-8",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold neon-text animate-neon-flicker",children:"Recent Posts"}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(Y,{variant:"neon",size:"sm","data-testid":"filter-all",children:"All"}),a.jsx(Y,{variant:"cyber",size:"sm","data-testid":"filter-ai-generated",children:"AI Generated"}),a.jsx(Y,{variant:"outline",size:"sm","data-testid":"filter-manual",children:"Manual"})]})]}),r?a.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((c,d)=>a.jsx(ee,{className:"p-6 animate-pulse",children:a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"}),a.jsx("div",{className:"h-32 bg-muted rounded"})]})},d))}):a.jsx("div",{className:"space-y-6",children:n==null?void 0:n.map(c=>a.jsx(qR,{post:c},c.id))}),a.jsxs(ee,{className:"relative overflow-hidden",children:[a.jsx(ve,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Te,{className:"gradient-cyber-primary bg-clip-text text-transparent",children:"Visual Workflow Builder"}),a.jsx(Y,{variant:"holographic",size:"sm","data-testid":"link-open-editor",children:"Open Editor"})]})}),a.jsx(oe,{children:a.jsxs("div",{className:"relative bg-gradient-to-br from-muted/30 to-muted/10 rounded-xl p-6 min-h-[300px] overflow-hidden border border-primary/20",children:[a.jsx("div",{className:"absolute inset-0 opacity-10",children:a.jsx("div",{className:"grid grid-cols-12 grid-rows-8 h-full w-full",children:Array.from({length:96}).map((c,d)=>a.jsx("div",{className:"border border-primary/20"},d))})}),a.jsxs("div",{className:"relative flex items-center justify-center space-x-8",children:[a.jsx("div",{className:"gradient-cyber-primary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-trigger",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"fas fa-play-circle text-xl"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold",children:"Trigger"}),a.jsx("div",{className:"text-xs opacity-80",children:"New Mention"})]})]})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-0.5 w-16 bg-gradient-to-r from-primary to-accent"}),a.jsx("i",{className:"fas fa-chevron-right text-primary ml-2 animate-neon-pulse"})]}),a.jsx("div",{className:"gradient-cyber-secondary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-ai",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"fas fa-robot text-xl"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold",children:"AI Analysis"}),a.jsx("div",{className:"text-xs opacity-80",children:"Sentiment Check"})]})]})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"h-0.5 w-16 bg-gradient-to-r from-accent to-primary"}),a.jsx("i",{className:"fas fa-chevron-right text-accent ml-2 animate-neon-pulse"})]}),a.jsx("div",{className:"gradient-cyber-tertiary text-white px-6 py-4 rounded-xl shadow-lg cursor-move transition-all duration-300 hover:scale-105 neon-glow-md hover:neon-glow-lg animate-hologram-flicker","data-testid":"workflow-node-action",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("i",{className:"fas fa-reply text-xl"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-bold",children:"Auto Reply"}),a.jsx("div",{className:"text-xs opacity-80",children:"Generate Response"})]})]})})]}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground","data-testid":"text-last-run",children:"Last run: 2 minutes ago"}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("span",{className:"text-primary neon-text","data-testid":"text-successful-runs",children:" 12 successful runs today"}),a.jsx("span",{className:"text-muted-foreground","data-testid":"text-errors",children:" 0 errors"})]})]})})]})})]})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ee,{className:"relative overflow-hidden",children:[a.jsx(ve,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Te,{className:"gradient-cyber-primary bg-clip-text text-transparent",children:"AI Agent Templates"}),a.jsx(Y,{variant:"neon",size:"sm","data-testid":"link-view-all-templates",children:"View All"})]})}),a.jsxs(oe,{className:"space-y-3",children:[i?a.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((c,d)=>a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},d))}):s==null?void 0:s.slice(0,3).map(c=>a.jsx(GR,{template:c},c.id)),a.jsxs(Y,{className:"w-full gradient-cyber-primary hover:gradient-cyber-secondary transition-all duration-300 neon-glow-md hover:neon-glow-lg","data-testid":"button-create-agent",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),"Create Custom Agent"]})]})]}),a.jsxs(ee,{className:"relative overflow-hidden",children:[a.jsx(ve,{children:a.jsx(Te,{className:"gradient-cyber-secondary bg-clip-text text-transparent",children:"Active Automations"})}),a.jsx(oe,{className:"space-y-4",children:l?a.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((c,d)=>a.jsx("div",{className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg animate-pulse",children:a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})},d))}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl border border-primary/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-daily-scheduler",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-primary rounded-full animate-neon-pulse neon-glow-sm"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Daily Content Scheduler"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Last run: 30 min ago"})]})]}),a.jsx(Y,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:a.jsx("i",{className:"fas fa-ellipsis-v"})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-accent/10 to-primary/10 rounded-xl border border-accent/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-engagement-tracker",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-accent rounded-full animate-neon-pulse neon-glow-sm"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Engagement Tracker"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Last run: 1 hour ago"})]})]}),a.jsx(Y,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:a.jsx("i",{className:"fas fa-ellipsis-v"})})]}),a.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-yellow-500/10 to-orange-500/10 rounded-xl border border-yellow-500/20 neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"automation-hashtag-optimizer",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-neon-pulse neon-glow-sm"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-foreground neon-text",children:"Hashtag Optimizer"}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"Paused"})]})]}),a.jsx(Y,{variant:"ghost",size:"sm","data-testid":"button-automation-options",children:a.jsx("i",{className:"fas fa-ellipsis-v"})})]})]})})]}),a.jsxs(ee,{className:"relative overflow-hidden",children:[a.jsx(ve,{children:a.jsx(Te,{className:"gradient-cyber-tertiary bg-clip-text text-transparent",children:"Quick Actions"})}),a.jsx(oe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs(Y,{variant:"ghost",className:"p-4 bg-gradient-to-br from-primary/20 to-primary/10 text-primary hover:from-primary/30 hover:to-primary/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-schedule-post",children:[a.jsx("i",{className:"fas fa-calendar-plus text-xl mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Schedule Post"})]}),a.jsxs(Y,{variant:"ghost",className:"p-4 bg-gradient-to-br from-accent/20 to-accent/10 text-accent hover:from-accent/30 hover:to-accent/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-ai-generate",children:[a.jsx("i",{className:"fas fa-sparkles text-xl mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:"AI Generate"})]}),a.jsxs(Y,{variant:"ghost",className:"p-4 bg-gradient-to-br from-blue-500/20 to-blue-500/10 text-blue-400 hover:from-blue-500/30 hover:to-blue-500/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-view-analytics",onClick:()=>e(!0),children:[a.jsx("i",{className:"fas fa-chart-bar text-xl mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:"Analytics"})]}),a.jsxs(Y,{variant:"ghost",className:"p-4 bg-gradient-to-br from-green-500/20 to-green-500/10 text-green-400 hover:from-green-500/30 hover:to-green-500/20 h-auto flex-col neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-create-workflow",children:[a.jsx("i",{className:"fas fa-plus text-xl mb-2"}),a.jsx("span",{className:"text-sm font-medium",children:"New Agent"})]})]})})]})]})]})]})})})]}),a.jsx(sm,{})]})}var Pp="focusScope.autoFocusOnMount",jp="focusScope.autoFocusOnUnmount",iT={bubbles:!1,cancelable:!0},L8="FocusScope",gw=p.forwardRef((t,e)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:i,...o}=t,[l,c]=p.useState(null),d=tt(s),h=tt(i),f=p.useRef(null),m=Ie(e,v=>c(v)),y=p.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;p.useEffect(()=>{if(r){let v=function(S){if(y.paused||!l)return;const R=S.target;l.contains(R)?f.current=R:bs(f.current,{select:!0})},_=function(S){if(y.paused||!l)return;const R=S.relatedTarget;R!==null&&(l.contains(R)||bs(f.current,{select:!0}))},E=function(S){if(document.activeElement===document.body)for(const D of S)D.removedNodes.length>0&&bs(l)};document.addEventListener("focusin",v),document.addEventListener("focusout",_);const x=new MutationObserver(E);return l&&x.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",v),document.removeEventListener("focusout",_),x.disconnect()}}},[r,l,y.paused]),p.useEffect(()=>{if(l){aT.add(y);const v=document.activeElement;if(!l.contains(v)){const E=new CustomEvent(Pp,iT);l.addEventListener(Pp,d),l.dispatchEvent(E),E.defaultPrevented||(V8(B8(kP(l)),{select:!0}),document.activeElement===v&&bs(l))}return()=>{l.removeEventListener(Pp,d),setTimeout(()=>{const E=new CustomEvent(jp,iT);l.addEventListener(jp,h),l.dispatchEvent(E),E.defaultPrevented||bs(v??document.body,{select:!0}),l.removeEventListener(jp,h),aT.remove(y)},0)}}},[l,d,h,y]);const b=p.useCallback(v=>{if(!n&&!r||y.paused)return;const _=v.key==="Tab"&&!v.altKey&&!v.ctrlKey&&!v.metaKey,E=document.activeElement;if(_&&E){const x=v.currentTarget,[S,R]=F8(x);S&&R?!v.shiftKey&&E===R?(v.preventDefault(),n&&bs(S,{select:!0})):v.shiftKey&&E===S&&(v.preventDefault(),n&&bs(R,{select:!0})):E===x&&v.preventDefault()}},[n,r,y.paused]);return a.jsx(ne.div,{tabIndex:-1,...o,ref:m,onKeyDown:b})});gw.displayName=L8;function V8(t,{select:e=!1}={}){const n=document.activeElement;for(const r of t)if(bs(r,{select:e}),document.activeElement!==n)return}function F8(t){const e=kP(t),n=oT(e,t),r=oT(e.reverse(),t);return[n,r]}function kP(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function oT(t,e){for(const n of t)if(!U8(n,{upTo:e}))return n}function U8(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function $8(t){return t instanceof HTMLInputElement&&"select"in t}function bs(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&$8(t)&&e&&t.select()}}var aT=z8();function z8(){let t=[];return{add(e){const n=t[0];e!==n&&(n==null||n.pause()),t=lT(t,e),t.unshift(e)},remove(e){var n;t=lT(t,e),(n=t[0])==null||n.resume()}}}function lT(t,e){const n=[...t],r=n.indexOf(e);return r!==-1&&n.splice(r,1),n}function B8(t){return t.filter(e=>e.tagName!=="A")}var kp=0;function DP(){p.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??cT()),document.body.insertAdjacentElement("beforeend",t[1]??cT()),kp++,()=>{kp===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),kp--}},[])}function cT(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var yr=function(){return yr=Object.assign||function(e){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},yr.apply(this,arguments)};function OP(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function H8(t,e,n){if(n||arguments.length===2)for(var r=0,s=e.length,i;r<s;r++)(i||!(r in e))&&(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||Array.prototype.slice.call(e))}var Bd="right-scroll-bar-position",Hd="width-before-scroll-bar",W8="with-scroll-bars-hidden",q8="--removed-body-scroll-bar-size";function Dp(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function G8(t,e){var n=p.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=e,n.facade}var K8=typeof window<"u"?p.useLayoutEffect:p.useEffect,uT=new WeakMap;function Q8(t,e){var n=G8(null,function(r){return t.forEach(function(s){return Dp(s,r)})});return K8(function(){var r=uT.get(n);if(r){var s=new Set(r),i=new Set(t),o=n.current;s.forEach(function(l){i.has(l)||Dp(l,null)}),i.forEach(function(l){s.has(l)||Dp(l,o)})}uT.set(n,t)},[t]),n}function Y8(t){return t}function X8(t,e){e===void 0&&(e=Y8);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(i){var o=e(i,r);return n.push(o),function(){n=n.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(r=!0;n.length;){var o=n;n=[],o.forEach(i)}n={push:function(l){return i(l)},filter:function(){return n}}},assignMedium:function(i){r=!0;var o=[];if(n.length){var l=n;n=[],l.forEach(i),o=n}var c=function(){var h=o;o=[],h.forEach(i)},d=function(){return Promise.resolve().then(c)};d(),n={push:function(h){o.push(h),d()},filter:function(h){return o=o.filter(h),n}}}};return s}function J8(t){t===void 0&&(t={});var e=X8(null);return e.options=yr({async:!0,ssr:!1},t),e}var MP=function(t){var e=t.sideCar,n=OP(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=e.read();if(!r)throw new Error("Sidecar medium not found");return p.createElement(r,yr({},n))};MP.isSideCarExport=!0;function Z8(t,e){return t.useMedium(e),MP}var LP=J8(),Op=function(){},am=p.forwardRef(function(t,e){var n=p.useRef(null),r=p.useState({onScrollCapture:Op,onWheelCapture:Op,onTouchMoveCapture:Op}),s=r[0],i=r[1],o=t.forwardProps,l=t.children,c=t.className,d=t.removeScrollBar,h=t.enabled,f=t.shards,m=t.sideCar,y=t.noIsolation,b=t.inert,v=t.allowPinchZoom,_=t.as,E=_===void 0?"div":_,x=t.gapMode,S=OP(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),R=m,D=Q8([n,e]),M=yr(yr({},S),s);return p.createElement(p.Fragment,null,h&&p.createElement(R,{sideCar:LP,removeScrollBar:d,shards:f,noIsolation:y,inert:b,setCallbacks:i,allowPinchZoom:!!v,lockRef:n,gapMode:x}),o?p.cloneElement(p.Children.only(l),yr(yr({},M),{ref:D})):p.createElement(E,yr({},M,{className:c,ref:D}),l))});am.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};am.classNames={fullWidth:Hd,zeroRight:Bd};var e7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function t7(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=e7();return e&&t.setAttribute("nonce",e),t}function n7(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function r7(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var s7=function(){var t=0,e=null;return{add:function(n){t==0&&(e=t7())&&(n7(e,n),r7(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},i7=function(){var t=s7();return function(e,n){p.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},VP=function(){var t=i7(),e=function(n){var r=n.styles,s=n.dynamic;return t(r,s),null};return e},o7={left:0,top:0,right:0,gap:0},Mp=function(t){return parseInt(t||"",10)||0},a7=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],r=e[t==="padding"?"paddingTop":"marginTop"],s=e[t==="padding"?"paddingRight":"marginRight"];return[Mp(n),Mp(r),Mp(s)]},l7=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return o7;var e=a7(t),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,r-n+e[2]-e[0])}},c7=VP(),ga="data-scroll-locked",u7=function(t,e,n,r){var s=t.left,i=t.top,o=t.right,l=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(W8,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(ga,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Bd,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Hd,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(Bd," .").concat(Bd,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(Hd," .").concat(Hd,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ga,`] {
    `).concat(q8,": ").concat(l,`px;
  }
`)},dT=function(){var t=parseInt(document.body.getAttribute(ga)||"0",10);return isFinite(t)?t:0},d7=function(){p.useEffect(function(){return document.body.setAttribute(ga,(dT()+1).toString()),function(){var t=dT()-1;t<=0?document.body.removeAttribute(ga):document.body.setAttribute(ga,t.toString())}},[])},h7=function(t){var e=t.noRelative,n=t.noImportant,r=t.gapMode,s=r===void 0?"margin":r;d7();var i=p.useMemo(function(){return l7(s)},[s]);return p.createElement(c7,{styles:u7(i,!e,s,n?"":"!important")})},Ry=!1;if(typeof window<"u")try{var hd=Object.defineProperty({},"passive",{get:function(){return Ry=!0,!0}});window.addEventListener("test",hd,hd),window.removeEventListener("test",hd,hd)}catch{Ry=!1}var Do=Ry?{passive:!1}:!1,f7=function(t){return t.tagName==="TEXTAREA"},FP=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!f7(t)&&n[e]==="visible")},m7=function(t){return FP(t,"overflowY")},p7=function(t){return FP(t,"overflowX")},hT=function(t,e){var n=e.ownerDocument,r=e;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=UP(t,r);if(s){var i=$P(t,r),o=i[1],l=i[2];if(o>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},g7=function(t){var e=t.scrollTop,n=t.scrollHeight,r=t.clientHeight;return[e,n,r]},y7=function(t){var e=t.scrollLeft,n=t.scrollWidth,r=t.clientWidth;return[e,n,r]},UP=function(t,e){return t==="v"?m7(e):p7(e)},$P=function(t,e){return t==="v"?g7(e):y7(e)},v7=function(t,e){return t==="h"&&e==="rtl"?-1:1},x7=function(t,e,n,r,s){var i=v7(t,window.getComputedStyle(e).direction),o=i*r,l=n.target,c=e.contains(l),d=!1,h=o>0,f=0,m=0;do{var y=$P(t,l),b=y[0],v=y[1],_=y[2],E=v-_-i*b;(b||E)&&UP(t,l)&&(f+=E,m+=b),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(e.contains(l)||e===l));return(h&&(Math.abs(f)<1||!s)||!h&&(Math.abs(m)<1||!s))&&(d=!0),d},fd=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},fT=function(t){return[t.deltaX,t.deltaY]},mT=function(t){return t&&"current"in t?t.current:t},w7=function(t,e){return t[0]===e[0]&&t[1]===e[1]},_7=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},E7=0,Oo=[];function T7(t){var e=p.useRef([]),n=p.useRef([0,0]),r=p.useRef(),s=p.useState(E7++)[0],i=p.useState(VP)[0],o=p.useRef(t);p.useEffect(function(){o.current=t},[t]),p.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(s));var v=H8([t.lockRef.current],(t.shards||[]).map(mT),!0).filter(Boolean);return v.forEach(function(_){return _.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),v.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(s))})}}},[t.inert,t.lockRef.current,t.shards]);var l=p.useCallback(function(v,_){if("touches"in v&&v.touches.length===2||v.type==="wheel"&&v.ctrlKey)return!o.current.allowPinchZoom;var E=fd(v),x=n.current,S="deltaX"in v?v.deltaX:x[0]-E[0],R="deltaY"in v?v.deltaY:x[1]-E[1],D,M=v.target,T=Math.abs(S)>Math.abs(R)?"h":"v";if("touches"in v&&T==="h"&&M.type==="range")return!1;var I=hT(T,M);if(!I)return!0;if(I?D=T:(D=T==="v"?"h":"v",I=hT(T,M)),!I)return!1;if(!r.current&&"changedTouches"in v&&(S||R)&&(r.current=D),!D)return!0;var N=r.current||D;return x7(N,_,v,N==="h"?S:R,!0)},[]),c=p.useCallback(function(v){var _=v;if(!(!Oo.length||Oo[Oo.length-1]!==i)){var E="deltaY"in _?fT(_):fd(_),x=e.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&w7(D.delta,E)})[0];if(x&&x.should){_.cancelable&&_.preventDefault();return}if(!x){var S=(o.current.shards||[]).map(mT).filter(Boolean).filter(function(D){return D.contains(_.target)}),R=S.length>0?l(_,S[0]):!o.current.noIsolation;R&&_.cancelable&&_.preventDefault()}}},[]),d=p.useCallback(function(v,_,E,x){var S={name:v,delta:_,target:E,should:x,shadowParent:b7(E)};e.current.push(S),setTimeout(function(){e.current=e.current.filter(function(R){return R!==S})},1)},[]),h=p.useCallback(function(v){n.current=fd(v),r.current=void 0},[]),f=p.useCallback(function(v){d(v.type,fT(v),v.target,l(v,t.lockRef.current))},[]),m=p.useCallback(function(v){d(v.type,fd(v),v.target,l(v,t.lockRef.current))},[]);p.useEffect(function(){return Oo.push(i),t.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:m}),document.addEventListener("wheel",c,Do),document.addEventListener("touchmove",c,Do),document.addEventListener("touchstart",h,Do),function(){Oo=Oo.filter(function(v){return v!==i}),document.removeEventListener("wheel",c,Do),document.removeEventListener("touchmove",c,Do),document.removeEventListener("touchstart",h,Do)}},[]);var y=t.removeScrollBar,b=t.inert;return p.createElement(p.Fragment,null,b?p.createElement(i,{styles:_7(s)}):null,y?p.createElement(h7,{gapMode:t.gapMode}):null)}function b7(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const S7=Z8(LP,T7);var yw=p.forwardRef(function(t,e){return p.createElement(am,yr({},t,{ref:e,sideCar:S7}))});yw.classNames=am.classNames;var I7=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},Mo=new WeakMap,md=new WeakMap,pd={},Lp=0,zP=function(t){return t&&(t.host||zP(t.parentNode))},N7=function(t,e){return e.map(function(n){if(t.contains(n))return n;var r=zP(n);return r&&t.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},A7=function(t,e,n,r){var s=N7(e,Array.isArray(t)?t:[t]);pd[n]||(pd[n]=new WeakMap);var i=pd[n],o=[],l=new Set,c=new Set(s),d=function(f){!f||l.has(f)||(l.add(f),d(f.parentNode))};s.forEach(d);var h=function(f){!f||c.has(f)||Array.prototype.forEach.call(f.children,function(m){if(l.has(m))h(m);else try{var y=m.getAttribute(r),b=y!==null&&y!=="false",v=(Mo.get(m)||0)+1,_=(i.get(m)||0)+1;Mo.set(m,v),i.set(m,_),o.push(m),v===1&&b&&md.set(m,!0),_===1&&m.setAttribute(n,"true"),b||m.setAttribute(r,"true")}catch(E){console.error("aria-hidden: cannot operate on ",m,E)}})};return h(e),l.clear(),Lp++,function(){o.forEach(function(f){var m=Mo.get(f)-1,y=i.get(f)-1;Mo.set(f,m),i.set(f,y),m||(md.has(f)||f.removeAttribute(r),md.delete(f)),y||f.removeAttribute(n)}),Lp--,Lp||(Mo=new WeakMap,Mo=new WeakMap,md=new WeakMap,pd={})}},BP=function(t,e,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(t)?t:[t]),s=I7(t);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),A7(r,s,n,"aria-hidden")):function(){return null}},vw="Dialog",[HP,TW]=bn(vw),[C7,or]=HP(vw),WP=t=>{const{__scopeDialog:e,children:n,open:r,defaultOpen:s,onOpenChange:i,modal:o=!0}=t,l=p.useRef(null),c=p.useRef(null),[d=!1,h]=Ir({prop:r,defaultProp:s,onChange:i});return a.jsx(C7,{scope:e,triggerRef:l,contentRef:c,contentId:Jn(),titleId:Jn(),descriptionId:Jn(),open:d,onOpenChange:h,onOpenToggle:p.useCallback(()=>h(f=>!f),[h]),modal:o,children:n})};WP.displayName=vw;var qP="DialogTrigger",GP=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=or(qP,n),i=Ie(e,s.triggerRef);return a.jsx(ne.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":_w(s.open),...r,ref:i,onClick:Z(t.onClick,s.onOpenToggle)})});GP.displayName=qP;var xw="DialogPortal",[R7,KP]=HP(xw,{forceMount:void 0}),QP=t=>{const{__scopeDialog:e,forceMount:n,children:r,container:s}=t,i=or(xw,e);return a.jsx(R7,{scope:e,forceMount:n,children:p.Children.map(r,o=>a.jsx(Mn,{present:n||i.open,children:a.jsx(pf,{asChild:!0,container:s,children:o})}))})};QP.displayName=xw;var Gh="DialogOverlay",YP=p.forwardRef((t,e)=>{const n=KP(Gh,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=or(Gh,t.__scopeDialog);return i.modal?a.jsx(Mn,{present:r||i.open,children:a.jsx(j7,{...s,ref:e})}):null});YP.displayName=Gh;var P7=Fa("DialogOverlay.RemoveScroll"),j7=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=or(Gh,n);return a.jsx(yw,{as:P7,allowPinchZoom:!0,shards:[s.contentRef],children:a.jsx(ne.div,{"data-state":_w(s.open),...r,ref:e,style:{pointerEvents:"auto",...r.style}})})}),yo="DialogContent",XP=p.forwardRef((t,e)=>{const n=KP(yo,t.__scopeDialog),{forceMount:r=n.forceMount,...s}=t,i=or(yo,t.__scopeDialog);return a.jsx(Mn,{present:r||i.open,children:i.modal?a.jsx(k7,{...s,ref:e}):a.jsx(D7,{...s,ref:e})})});XP.displayName=yo;var k7=p.forwardRef((t,e)=>{const n=or(yo,t.__scopeDialog),r=p.useRef(null),s=Ie(e,n.contentRef,r);return p.useEffect(()=>{const i=r.current;if(i)return BP(i)},[]),a.jsx(JP,{...t,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Z(t.onCloseAutoFocus,i=>{var o;i.preventDefault(),(o=n.triggerRef.current)==null||o.focus()}),onPointerDownOutside:Z(t.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:Z(t.onFocusOutside,i=>i.preventDefault())})}),D7=p.forwardRef((t,e)=>{const n=or(yo,t.__scopeDialog),r=p.useRef(!1),s=p.useRef(!1);return a.jsx(JP,{...t,ref:e,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{var o,l;(o=t.onCloseAutoFocus)==null||o.call(t,i),i.defaultPrevented||(r.current||(l=n.triggerRef.current)==null||l.focus(),i.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:i=>{var c,d;(c=t.onInteractOutside)==null||c.call(t,i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const o=i.target;((d=n.triggerRef.current)==null?void 0:d.contains(o))&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&s.current&&i.preventDefault()}})}),JP=p.forwardRef((t,e)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:i,...o}=t,l=or(yo,n),c=p.useRef(null),d=Ie(e,c);return DP(),a.jsxs(a.Fragment,{children:[a.jsx(gw,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:i,children:a.jsx(ru,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":_w(l.open),...o,ref:d,onDismiss:()=>l.onOpenChange(!1)})}),a.jsxs(a.Fragment,{children:[a.jsx(O7,{titleId:l.titleId}),a.jsx(L7,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ww="DialogTitle",ZP=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=or(ww,n);return a.jsx(ne.h2,{id:s.titleId,...r,ref:e})});ZP.displayName=ww;var ej="DialogDescription",tj=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=or(ej,n);return a.jsx(ne.p,{id:s.descriptionId,...r,ref:e})});tj.displayName=ej;var nj="DialogClose",rj=p.forwardRef((t,e)=>{const{__scopeDialog:n,...r}=t,s=or(nj,n);return a.jsx(ne.button,{type:"button",...r,ref:e,onClick:Z(t.onClick,()=>s.onOpenChange(!1))})});rj.displayName=nj;function _w(t){return t?"open":"closed"}var sj="DialogTitleWarning",[bW,ij]=PM(sj,{contentName:yo,titleName:ww,docsSlug:"dialog"}),O7=({titleId:t})=>{const e=ij(sj),n=`\`${e.contentName}\` requires a \`${e.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${e.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${e.docsSlug}`;return p.useEffect(()=>{t&&(document.getElementById(t)||console.error(n))},[n,t]),null},M7="DialogDescriptionWarning",L7=({contentRef:t,descriptionId:e})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${ij(M7).contentName}}.`;return p.useEffect(()=>{var i;const s=(i=t.current)==null?void 0:i.getAttribute("aria-describedby");e&&s&&(document.getElementById(e)||console.warn(r))},[r,t,e]),null},V7=WP,F7=GP,U7=QP,oj=YP,aj=XP,lj=ZP,cj=tj,$7=rj;const z7=V7,B7=F7,H7=U7,uj=p.forwardRef(({className:t,...e},n)=>a.jsx(oj,{ref:n,className:se("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));uj.displayName=oj.displayName;const dj=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(H7,{children:[a.jsx(uj,{}),a.jsxs(aj,{ref:r,className:se("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs($7,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[a.jsx(GI,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));dj.displayName=aj.displayName;const hj=({className:t,...e})=>a.jsx("div",{className:se("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});hj.displayName="DialogHeader";const fj=p.forwardRef(({className:t,...e},n)=>a.jsx(lj,{ref:n,className:se("text-lg font-semibold leading-none tracking-tight",t),...e}));fj.displayName=lj.displayName;const W7=p.forwardRef(({className:t,...e},n)=>a.jsx(cj,{ref:n,className:se("text-sm text-muted-foreground",t),...e}));W7.displayName=cj.displayName;const qc=p.forwardRef(({className:t,...e},n)=>a.jsx("textarea",{className:se("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:n,...e}));qc.displayName="Textarea";var q7="Label",mj=p.forwardRef((t,e)=>a.jsx(ne.label,{...t,ref:e,onMouseDown:n=>{var s;n.target.closest("button, input, select, textarea")||((s=t.onMouseDown)==null||s.call(t,n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));mj.displayName=q7;var pj=mj;const G7=iu("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ea=p.forwardRef(({className:t,...e},n)=>a.jsx(pj,{ref:n,className:se(G7(),t),...e}));ea.displayName=pj.displayName;function pT(){const[t,e]=p.useState(!1),[n,r]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(""),[c,d]=p.useState(!1),{toast:h}=zv(),f=Eo(),m=ns({mutationFn:async _=>Va("POST","/api/posts",{..._,authorId:"user-1"}),onSuccess:()=>{f.invalidateQueries({queryKey:["/api/posts"]}),e(!1),r(""),i(""),l(""),h({title:"Post created!",description:"Your post has been shared successfully."})},onError:()=>{h({title:"Error",description:"Failed to create post. Please try again.",variant:"destructive"})}}),y=ns({mutationFn:async _=>(await Va("POST","/api/ai/generate-content",{prompt:_,type:"post"})).json(),onSuccess:_=>{r(_.content),d(!1),h({title:"Content generated!",description:"AI has generated content for your post."})},onError:()=>{d(!1),h({title:"Error",description:"Failed to generate content. Please try again.",variant:"destructive"})}}),b=()=>{if(!o.trim()){h({title:"Error",description:"Please enter a prompt for AI generation.",variant:"destructive"});return}d(!0),y.mutate(o)},v=()=>{if(!n.trim()){h({title:"Error",description:"Please enter some content for your post.",variant:"destructive"});return}m.mutate({content:n,imageUrl:s||void 0,isAiGenerated:!!o})};return a.jsxs(z7,{open:t,onOpenChange:e,children:[a.jsx(B7,{asChild:!0,children:a.jsxs(Y,{"data-testid":"button-create-post",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),"Create Post"]})}),a.jsxs(dj,{className:"sm:max-w-[600px]","data-testid":"dialog-create-post",children:[a.jsx(hj,{children:a.jsx(fj,{children:"Create New Post"})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-3",children:[a.jsx(ea,{children:"AI Content Generation (Optional)"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx(vi,{placeholder:"Describe what you want to post about...",value:o,onChange:_=>l(_.target.value),"data-testid":"input-ai-prompt"}),a.jsxs(Y,{onClick:b,disabled:c,"data-testid":"button-generate-content",children:[a.jsx("i",{className:`fas ${c?"fa-spinner fa-spin":"fa-magic"} mr-2`}),c?"Generating...":"Generate"]})]})]}),a.jsx(po,{}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ea,{htmlFor:"content",children:"Post Content"}),o&&a.jsxs(ye,{variant:"secondary",className:"bg-primary/10 text-primary",children:[a.jsx("i",{className:"fas fa-robot mr-1"}),"AI Generated"]})]}),a.jsx(qc,{id:"content",placeholder:"What's on your mind?",value:n,onChange:_=>r(_.target.value),className:"min-h-[120px]","data-testid":"textarea-content"}),a.jsxs("div",{className:"text-sm text-muted-foreground text-right",children:[n.length,"/500 characters"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(ea,{htmlFor:"imageUrl",children:"Image URL (Optional)"}),a.jsx(vi,{id:"imageUrl",placeholder:"https://example.com/image.jpg",value:s,onChange:_=>i(_.target.value),"data-testid":"input-image-url"})]}),s&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(ea,{children:"Image Preview"}),a.jsx("img",{src:s,alt:"Preview",className:"w-full h-40 object-cover rounded-lg border",onError:()=>{h({title:"Invalid image URL",description:"The image URL is not valid or accessible.",variant:"destructive"})},"data-testid":"img-preview"})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx(Y,{variant:"outline",onClick:()=>e(!1),"data-testid":"button-cancel",children:"Cancel"}),a.jsxs(Y,{onClick:v,disabled:m.isPending,"data-testid":"button-post",children:[a.jsx("i",{className:`fas ${m.isPending?"fa-spinner fa-spin":"fa-share"} mr-2`}),m.isPending?"Posting...":"Post"]})]})]})]})]})}function K7(){const{data:t,isLoading:e}=ln({queryKey:["/api/posts"]});return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Social Feed",subtitle:"Engage with your community and share content",actions:a.jsx(pT,{})}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:e?a.jsx("div",{className:"space-y-6",children:Array.from({length:5}).map((n,r)=>a.jsx(ee,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),a.jsxs("div",{className:"space-y-2 flex-1",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/6"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-full"}),a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]}),a.jsx("div",{className:"h-48 bg-muted rounded"})]})},r))}):t!=null&&t.length?a.jsx("div",{className:"space-y-6",children:t.map(n=>a.jsx(qR,{post:n},n.id))}):a.jsx(ee,{className:"p-12 text-center",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("i",{className:"fas fa-comments text-4xl text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No posts yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Be the first to share something with the community!"})]}),a.jsx(pT,{})]})})})})]}),a.jsx(sm,{})]})}const Q7=[{id:"trigger-1",type:"trigger",title:"Trigger",subtitle:"New Mention",position:{x:100,y:150},color:"bg-green-500",icon:"fas fa-play-circle"},{id:"ai-1",type:"ai",title:"AI Analysis",subtitle:"Sentiment Check",position:{x:350,y:150},color:"bg-primary",icon:"fas fa-robot"},{id:"action-1",type:"action",title:"Auto Reply",subtitle:"Generate Response",position:{x:600,y:150},color:"bg-accent",icon:"fas fa-reply"}];function Y7(){const[t,e]=p.useState(Q7),[n,r]=p.useState(null),[s,i]=p.useState(null),[o,l]=p.useState({x:0,y:0}),c=p.useCallback((m,y)=>{if(!t.find(x=>x.id===y))return;const v=m.currentTarget.getBoundingClientRect(),_=m.clientX-v.left,E=m.clientY-v.top;i(y),l({x:_,y:E}),r(y)},[t]),d=p.useCallback(m=>{if(!s)return;const b=m.currentTarget.getBoundingClientRect(),v=m.clientX-b.left-o.x,_=m.clientY-b.top-o.y;e(E=>E.map(x=>x.id===s?{...x,position:{x:Math.max(0,Math.min(v,700)),y:Math.max(0,Math.min(_,350))}}:x))},[s,o]),h=p.useCallback(()=>{i(null)},[]),f=m=>{const y={id:`${m}-${Date.now()}`,type:m,title:m==="trigger"?"New Trigger":m==="ai"?"AI Process":"New Action",subtitle:"Configure me",position:{x:200,y:200},color:m==="trigger"?"bg-green-500":m==="ai"?"bg-primary":"bg-accent",icon:m==="trigger"?"fas fa-play":m==="ai"?"fas fa-brain":"fas fa-cog"};e(b=>[...b,y])};return a.jsxs(ee,{className:"h-[600px]",children:[a.jsx(ve,{children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx(Te,{children:"Workflow Builder"}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Y,{size:"sm",variant:"outline","data-testid":"button-save-workflow",children:[a.jsx("i",{className:"fas fa-save mr-2"}),"Save"]}),a.jsxs(Y,{size:"sm","data-testid":"button-run-workflow",children:[a.jsx("i",{className:"fas fa-play mr-2"}),"Run"]})]})]})}),a.jsx(oe,{children:a.jsxs("div",{className:"flex gap-6 h-full",children:[a.jsxs("div",{className:"w-48 space-y-3",children:[a.jsx("h4",{className:"font-medium text-foreground mb-3",children:"Components"}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs(Y,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>f("trigger"),"data-testid":"button-add-trigger",children:[a.jsx("i",{className:"fas fa-play-circle text-green-500 mr-2"}),"Trigger"]}),a.jsxs(Y,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>f("ai"),"data-testid":"button-add-ai",children:[a.jsx("i",{className:"fas fa-robot text-primary mr-2"}),"AI Process"]}),a.jsxs(Y,{variant:"outline",size:"sm",className:"w-full justify-start",onClick:()=>f("action"),"data-testid":"button-add-action",children:[a.jsx("i",{className:"fas fa-cog text-accent mr-2"}),"Action"]})]}),n&&a.jsxs("div",{className:"mt-6 p-3 bg-muted/50 rounded-lg",children:[a.jsx("h5",{className:"font-medium mb-2",children:"Node Properties"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure the selected node's settings here."})]})]}),a.jsxs("div",{className:"flex-1 relative",children:[a.jsxs("div",{className:"w-full h-full bg-muted/20 rounded-lg relative overflow-hidden cursor-crosshair border-2 border-dashed border-muted-foreground/20",onMouseMove:d,onMouseUp:h,onMouseLeave:h,"data-testid":"workflow-canvas",children:[a.jsx("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",children:t.map((m,y)=>{const b=t[y+1];return b?a.jsx("line",{x1:m.position.x+80,y1:m.position.y+25,x2:b.position.x,y2:b.position.y+25,stroke:"hsl(var(--muted-foreground))",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.5"},`line-${m.id}-${b.id}`):null})}),t.map(m=>a.jsx("div",{className:`absolute cursor-move select-none transition-all duration-200 hover:scale-105 ${n===m.id?"ring-2 ring-primary":""}`,style:{left:m.position.x,top:m.position.y,transform:s===m.id?"scale(1.05)":"scale(1)"},onMouseDown:y=>c(y,m.id),"data-testid":`workflow-node-${m.id}`,children:a.jsx("div",{className:`${m.color} text-white px-4 py-3 rounded-lg shadow-lg min-w-[160px]`,children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("i",{className:m.icon}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium",children:m.title}),a.jsx("div",{className:"text-xs opacity-80",children:m.subtitle})]})]})})},m.id)),a.jsx("div",{className:"absolute inset-0 opacity-10",style:{backgroundImage:`
                    radial-gradient(circle, hsl(var(--muted-foreground)) 1px, transparent 1px)
                  `,backgroundSize:"20px 20px"}})]}),a.jsx("div",{className:"absolute bottom-4 left-4 right-4",children:a.jsxs("div",{className:"flex items-center justify-between text-sm bg-card/90 backdrop-blur-sm rounded-lg px-3 py-2 border",children:[a.jsxs("span",{className:"text-muted-foreground","data-testid":"text-node-count",children:[t.length," nodes"]}),a.jsx("div",{className:"flex items-center gap-4",children:a.jsxs(ye,{variant:"secondary","data-testid":"badge-status",children:[a.jsx("i",{className:"fas fa-circle text-green-500 mr-1"}),"Ready to run"]})})]})})]})]})})]})}function X7(){const{data:t,isLoading:e}=ln({queryKey:["/api/workflows"],queryFn:()=>fetch("/api/workflows?userId=user-1").then(n=>n.json())});return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Workflows",subtitle:"Create and manage your automation workflows"}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsx(Y7,{})}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Your Workflows"})}),a.jsx(oe,{children:e?a.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((n,r)=>a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg animate-pulse",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4 mb-2"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]},r))}):t!=null&&t.length?a.jsx("div",{className:"space-y-4",children:t.map(n=>a.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg hover:bg-muted transition-colors","data-testid":`workflow-${n.id}`,children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsx("h4",{className:"font-medium text-foreground",children:n.name}),a.jsx(ye,{variant:n.isActive?"default":"secondary","data-testid":`status-${n.id}`,children:n.isActive?"Active":"Inactive"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:n.description}),a.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[a.jsxs("span",{"data-testid":`run-count-${n.id}`,children:[n.runCount," runs"]}),a.jsx("span",{"data-testid":`last-run-${n.id}`,children:n.lastRun?`Last: ${new Date(n.lastRun).toLocaleDateString()}`:"Never run"})]}),a.jsxs("div",{className:"flex gap-2 mt-3",children:[a.jsxs(Y,{size:"sm",variant:"outline","data-testid":`button-edit-${n.id}`,children:[a.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]}),a.jsxs(Y,{size:"sm",variant:"outline","data-testid":`button-toggle-${n.id}`,children:[a.jsx("i",{className:`fas ${n.isActive?"fa-pause":"fa-play"} mr-1`}),n.isActive?"Pause":"Start"]})]})]},n.id))}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("i",{className:"fas fa-project-diagram text-4xl text-muted-foreground mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No workflows created yet"})]})})]}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Quick Start Templates"})}),a.jsxs(oe,{className:"space-y-3",children:[a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-auto-responder",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"fas fa-reply text-white text-sm"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Auto Responder"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Respond to mentions automatically"})]})]})}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-content-scheduler",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-green-500 to-teal-500 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"fas fa-calendar text-white text-sm"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Content Scheduler"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Schedule posts at optimal times"})]})]})}),a.jsx("div",{className:"p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors cursor-pointer","data-testid":"template-trend-analyzer",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-orange-500 to-red-500 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:"fas fa-chart-line text-white text-sm"})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Trend Analyzer"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor and respond to trends"})]})]})})]})]})]})]})})})]}),a.jsx(sm,{})]})}function J7(){const{data:t,isLoading:e}=ln({queryKey:["/api/agent-templates"]}),{data:n,isLoading:r}=ln({queryKey:["/api/user-agents"],queryFn:()=>fetch("/api/user-agents?userId=user-1").then(s=>s.json())});return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"AI Agents",subtitle:"Create and manage your intelligent automation agents"}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsxs(om,{defaultValue:"templates",className:"space-y-6",children:[a.jsxs(wu,{children:[a.jsx(nn,{value:"templates","data-testid":"tab-templates",children:"Templates"}),a.jsx(nn,{value:"my-agents","data-testid":"tab-my-agents",children:"My Agents"})]}),a.jsxs(rn,{value:"templates",className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Agent Templates"}),a.jsx("p",{className:"text-muted-foreground",children:"Choose from pre-built templates or create your own"})]}),a.jsxs(Y,{"data-testid":"button-create-custom-agent",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),"Create Custom Agent"]})]}),e?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:6}).map((s,i)=>a.jsx(ee,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"w-8 h-8 bg-muted rounded-lg"}),a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-full"}),a.jsx("div",{className:"h-3 bg-muted rounded w-1/2"})]})},i))}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t==null?void 0:t.map(s=>a.jsx(GR,{template:s,showActions:!0},s.id))})]}),a.jsxs(rn,{value:"my-agents",className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"My AI Agents"}),a.jsx("p",{className:"text-muted-foreground",children:"Manage your active automation agents"})]})}),r?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:3}).map((s,i)=>a.jsx(ee,{className:"p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-muted rounded w-full"}),a.jsx("div",{className:"h-8 bg-muted rounded w-1/3 mt-4"})]})},i))}):n!=null&&n.length?a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(s=>a.jsx(ee,{className:"p-6","data-testid":`agent-card-${s.id}`,children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsx("h3",{className:"font-semibold text-foreground",children:s.name}),a.jsx("div",{className:`w-3 h-3 rounded-full ${s.isActive?"bg-green-500":"bg-gray-400"}`,"data-testid":`status-${s.id}`})]}),a.jsxs("div",{className:"text-sm text-muted-foreground space-y-2",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Status:"}),a.jsx("span",{className:s.isActive?"text-green-600":"text-gray-500",children:s.isActive?"Active":"Inactive"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Runs:"}),a.jsx("span",{"data-testid":`run-count-${s.id}`,children:s.runCount})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{children:"Last Run:"}),a.jsx("span",{"data-testid":`last-run-${s.id}`,children:s.lastRun?new Date(s.lastRun).toLocaleDateString():"Never"})]})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs(Y,{size:"sm",variant:s.isActive?"secondary":"default","data-testid":`button-toggle-${s.id}`,children:[a.jsx("i",{className:`fas ${s.isActive?"fa-pause":"fa-play"} mr-1`}),s.isActive?"Pause":"Start"]}),a.jsxs(Y,{size:"sm",variant:"outline","data-testid":`button-edit-${s.id}`,children:[a.jsx("i",{className:"fas fa-edit mr-1"}),"Edit"]})]})]})},s.id))}):a.jsx(ee,{className:"p-12 text-center",children:a.jsxs("div",{className:"space-y-4",children:[a.jsx("i",{className:"fas fa-robot text-4xl text-muted-foreground"}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No agents created yet"}),a.jsx("p",{className:"text-muted-foreground",children:"Create your first AI agent from a template or build a custom one"})]}),a.jsxs(Y,{"data-testid":"button-get-started",children:[a.jsx("i",{className:"fas fa-plus mr-2"}),"Get Started"]})]})})]})]})})})]}),a.jsx(sm,{})]})}function Z7(){var _,E,x,S,R;const[t,e]=p.useState(""),[n,r]=p.useState(""),[s,i]=p.useState(""),[o,l]=p.useState(""),c=Eo(),{data:d,isLoading:h,error:f}=ln({queryKey:["/api/telegram/status"],refetchInterval:3e4}),m=ns({mutationFn:async D=>{const M=await fetch("/api/telegram/send-message",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!M.ok)throw new Error("Failed to send message");return M.json()},onSuccess:()=>{e(""),c.invalidateQueries({queryKey:["/api/telegram/status"]})}}),y=ns({mutationFn:async D=>{const M=await fetch("/api/telegram/broadcast",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(D)});if(!M.ok)throw new Error("Failed to broadcast message");return M.json()},onSuccess:()=>{i(""),l(""),c.invalidateQueries({queryKey:["/api/telegram/status"]})}}),b=()=>{!t||!n||m.mutate({chatId:n,message:t})},v=()=>{if(!s||!o)return;const D=o.split(",").map(M=>M.trim()).filter(M=>M);D.length!==0&&y.mutate({message:s,chatIds:D})};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsxs(Te,{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fab fa-telegram text-blue-500"}),"Telegram Bot Status"]})}),a.jsx(oe,{children:h?a.jsxs("div",{className:"animate-pulse space-y-2",children:[a.jsx("div",{className:"h-4 bg-muted rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-muted rounded w-1/2"})]}):f?a.jsx(zr,{variant:"destructive",children:a.jsx(Br,{children:"Failed to load Telegram bot status. Please check your configuration."})}):d?a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ye,{variant:d.connected?"default":"secondary",children:d.connected?" Connected":" Disconnected"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:["@",d.botInfo.username]})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Bot ID:"})," ",d.botInfo.id]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Name:"})," ",d.botInfo.firstName]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Can Join Groups:"}),d.botInfo.canJoinGroups?" ":" "]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Read Group Messages:"}),d.botInfo.canReadAllGroupMessages?" ":" "]})]})]}):null})]}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Send Message"})}),a.jsxs(oe,{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Chat ID"}),a.jsx(vi,{placeholder:"Enter chat ID (e.g., 123456789)",value:n,onChange:D=>r(D.target.value)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Message"}),a.jsx(qc,{placeholder:"Enter your message...",value:t,onChange:D=>e(D.target.value),rows:3})]})]}),a.jsx(Y,{onClick:b,disabled:!t||!n||m.isPending,className:"w-full",children:m.isPending?"Sending...":"Send Message"}),m.isError&&a.jsx(zr,{variant:"destructive",children:a.jsxs(Br,{children:["Failed to send message: ",(_=m.error)==null?void 0:_.message]})}),m.isSuccess&&a.jsx(zr,{children:a.jsxs(Br,{children:[" Message sent successfully! Message ID: ",(E=m.data)==null?void 0:E.messageId]})})]})]}),a.jsx(po,{}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Broadcast Message"})}),a.jsxs(oe,{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Chat IDs (comma-separated)"}),a.jsx(vi,{placeholder:"123456789, 987654321, 555666777",value:o,onChange:D=>l(D.target.value)}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Enter multiple chat IDs separated by commas"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"text-sm font-medium",children:"Broadcast Message"}),a.jsx(qc,{placeholder:"Enter your broadcast message...",value:s,onChange:D=>i(D.target.value),rows:4})]}),a.jsx(Y,{onClick:v,disabled:!s||!o||y.isPending,className:"w-full",variant:"outline",children:y.isPending?"Broadcasting...":"Broadcast Message"}),y.isError&&a.jsx(zr,{variant:"destructive",children:a.jsxs(Br,{children:["Failed to broadcast message: ",(x=y.error)==null?void 0:x.message]})}),y.isSuccess&&a.jsx(zr,{children:a.jsxs(Br,{children:[" Broadcast completed! Check results: ",(R=(S=y.data)==null?void 0:S.results)==null?void 0:R.length," messages processed"]})})]})]}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Quick Actions"})}),a.jsx(oe,{children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs(Y,{variant:"outline",onClick:()=>{r("123456789"),e("/start")},children:[a.jsx("i",{className:"fas fa-play mr-2"}),"Send /start Command"]}),a.jsxs(Y,{variant:"outline",onClick:()=>{r("123456789"),e("/help")},children:[a.jsx("i",{className:"fas fa-question-circle mr-2"}),"Send /help Command"]}),a.jsxs(Y,{variant:"outline",onClick:()=>{r("123456789"),e("/status")},children:[a.jsx("i",{className:"fas fa-chart-bar mr-2"}),"Send /status Command"]}),a.jsxs(Y,{variant:"outline",onClick:()=>{r("123456789"),e("/posts")},children:[a.jsx("i",{className:"fas fa-list mr-2"}),"Send /posts Command"]})]})})]})]})}function eH(){return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Telegram Integration",subtitle:"Manage your Telegram bot and send messages",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Bot Status:"}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"})]})}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-6xl mx-auto",children:a.jsx(Z7,{})})})]})]})}const tH=(t=768)=>{const[e,n]=p.useState(window.innerWidth<=t);return p.useEffect(()=>{const r=()=>{n(window.innerWidth<=t)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[t]),e};var Ew="Collapsible",[nH,gj]=bn(Ew),[rH,Tw]=nH(Ew),yj=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:i,onOpenChange:o,...l}=t,[c=!1,d]=Ir({prop:r,defaultProp:s,onChange:o});return a.jsx(rH,{scope:n,disabled:i,contentId:Jn(),open:c,onOpenToggle:p.useCallback(()=>d(h=>!h),[d]),children:a.jsx(ne.div,{"data-state":Sw(c),"data-disabled":i?"":void 0,...l,ref:e})})});yj.displayName=Ew;var vj="CollapsibleTrigger",xj=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,...r}=t,s=Tw(vj,n);return a.jsx(ne.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":Sw(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:e,onClick:Z(t.onClick,s.onOpenToggle)})});xj.displayName=vj;var bw="CollapsibleContent",wj=p.forwardRef((t,e)=>{const{forceMount:n,...r}=t,s=Tw(bw,t.__scopeCollapsible);return a.jsx(Mn,{present:n||s.open,children:({present:i})=>a.jsx(sH,{...r,ref:e,present:i})})});wj.displayName=bw;var sH=p.forwardRef((t,e)=>{const{__scopeCollapsible:n,present:r,children:s,...i}=t,o=Tw(bw,n),[l,c]=p.useState(r),d=p.useRef(null),h=Ie(e,d),f=p.useRef(0),m=f.current,y=p.useRef(0),b=y.current,v=o.open||l,_=p.useRef(v),E=p.useRef(void 0);return p.useEffect(()=>{const x=requestAnimationFrame(()=>_.current=!1);return()=>cancelAnimationFrame(x)},[]),at(()=>{const x=d.current;if(x){E.current=E.current||{transitionDuration:x.style.transitionDuration,animationName:x.style.animationName},x.style.transitionDuration="0s",x.style.animationName="none";const S=x.getBoundingClientRect();f.current=S.height,y.current=S.width,_.current||(x.style.transitionDuration=E.current.transitionDuration,x.style.animationName=E.current.animationName),c(r)}},[o.open,r]),a.jsx(ne.div,{"data-state":Sw(o.open),"data-disabled":o.disabled?"":void 0,id:o.contentId,hidden:!v,...i,ref:h,style:{"--radix-collapsible-content-height":m?`${m}px`:void 0,"--radix-collapsible-content-width":b?`${b}px`:void 0,...t.style},children:v&&s})});function Sw(t){return t?"open":"closed"}var iH=yj,oH=xj,aH=wj,ds="Accordion",lH=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[Iw,cH,uH]=mf(ds),[lm,SW]=bn(ds,[uH,gj]),Nw=gj(),_j=ct.forwardRef((t,e)=>{const{type:n,...r}=t,s=r,i=r;return a.jsx(Iw.Provider,{scope:t.__scopeAccordion,children:n==="multiple"?a.jsx(mH,{...i,ref:e}):a.jsx(fH,{...s,ref:e})})});_j.displayName=ds;var[Ej,dH]=lm(ds),[Tj,hH]=lm(ds,{collapsible:!1}),fH=ct.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},collapsible:i=!1,...o}=t,[l,c]=Ir({prop:n,defaultProp:r,onChange:s});return a.jsx(Ej,{scope:t.__scopeAccordion,value:l?[l]:[],onItemOpen:c,onItemClose:ct.useCallback(()=>i&&c(""),[i,c]),children:a.jsx(Tj,{scope:t.__scopeAccordion,collapsible:i,children:a.jsx(bj,{...o,ref:e})})})}),mH=ct.forwardRef((t,e)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...i}=t,[o=[],l]=Ir({prop:n,defaultProp:r,onChange:s}),c=ct.useCallback(h=>l((f=[])=>[...f,h]),[l]),d=ct.useCallback(h=>l((f=[])=>f.filter(m=>m!==h)),[l]);return a.jsx(Ej,{scope:t.__scopeAccordion,value:o,onItemOpen:c,onItemClose:d,children:a.jsx(Tj,{scope:t.__scopeAccordion,collapsible:!0,children:a.jsx(bj,{...i,ref:e})})})}),[pH,cm]=lm(ds),bj=ct.forwardRef((t,e)=>{const{__scopeAccordion:n,disabled:r,dir:s,orientation:i="vertical",...o}=t,l=ct.useRef(null),c=Ie(l,e),d=cH(n),f=xu(s)==="ltr",m=Z(t.onKeyDown,y=>{var I;if(!lH.includes(y.key))return;const b=y.target,v=d().filter(N=>{var C;return!((C=N.ref.current)!=null&&C.disabled)}),_=v.findIndex(N=>N.ref.current===b),E=v.length;if(_===-1)return;y.preventDefault();let x=_;const S=0,R=E-1,D=()=>{x=_+1,x>R&&(x=S)},M=()=>{x=_-1,x<S&&(x=R)};switch(y.key){case"Home":x=S;break;case"End":x=R;break;case"ArrowRight":i==="horizontal"&&(f?D():M());break;case"ArrowDown":i==="vertical"&&D();break;case"ArrowLeft":i==="horizontal"&&(f?M():D());break;case"ArrowUp":i==="vertical"&&M();break}const T=x%E;(I=v[T].ref.current)==null||I.focus()});return a.jsx(pH,{scope:n,disabled:r,direction:s,orientation:i,children:a.jsx(Iw.Slot,{scope:n,children:a.jsx(ne.div,{...o,"data-orientation":i,ref:c,onKeyDown:r?void 0:m})})})}),Kh="AccordionItem",[gH,Aw]=lm(Kh),Sj=ct.forwardRef((t,e)=>{const{__scopeAccordion:n,value:r,...s}=t,i=cm(Kh,n),o=dH(Kh,n),l=Nw(n),c=Jn(),d=r&&o.value.includes(r)||!1,h=i.disabled||t.disabled;return a.jsx(gH,{scope:n,open:d,disabled:h,triggerId:c,children:a.jsx(iH,{"data-orientation":i.orientation,"data-state":Pj(d),...l,...s,ref:e,disabled:h,open:d,onOpenChange:f=>{f?o.onItemOpen(r):o.onItemClose(r)}})})});Sj.displayName=Kh;var Ij="AccordionHeader",Nj=ct.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(ds,n),i=Aw(Ij,n);return a.jsx(ne.h3,{"data-orientation":s.orientation,"data-state":Pj(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:e})});Nj.displayName=Ij;var Py="AccordionTrigger",Aj=ct.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(ds,n),i=Aw(Py,n),o=hH(Py,n),l=Nw(n);return a.jsx(Iw.ItemSlot,{scope:n,children:a.jsx(oH,{"aria-disabled":i.open&&!o.collapsible||void 0,"data-orientation":s.orientation,id:i.triggerId,...l,...r,ref:e})})});Aj.displayName=Py;var Cj="AccordionContent",Rj=ct.forwardRef((t,e)=>{const{__scopeAccordion:n,...r}=t,s=cm(ds,n),i=Aw(Cj,n),o=Nw(n);return a.jsx(aH,{role:"region","aria-labelledby":i.triggerId,"data-orientation":s.orientation,...o,...r,ref:e,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});Rj.displayName=Cj;function Pj(t){return t?"open":"closed"}var yH=_j,vH=Sj,xH=Nj,jj=Aj,kj=Rj;const wH=yH,jy=p.forwardRef(({className:t,...e},n)=>a.jsx(vH,{ref:n,className:se("border-b",t),...e}));jy.displayName="AccordionItem";const ky=p.forwardRef(({className:t,children:e,...n},r)=>a.jsx(xH,{className:"flex",children:a.jsxs(jj,{ref:r,className:se("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...n,children:[e,a.jsx(qv,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));ky.displayName=jj.displayName;const Dy=p.forwardRef(({className:t,children:e,...n},r)=>a.jsx(kj,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...n,children:a.jsx("div",{className:se("pb-4 pt-0",t),children:e})}));Dy.displayName=kj.displayName;const _H=()=>{const t=tH();return a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Smart Learning AI"})}),a.jsx(oe,{children:t?a.jsxs(wH,{type:"single",collapsible:!0,children:[a.jsxs(jy,{value:"item-1",children:[a.jsx(ky,{children:"Lesson 1: Introduction"}),a.jsx(Dy,{children:a.jsx("p",{children:"This is the content for lesson 1. It is optimized for mobile viewing."})})]}),a.jsxs(jy,{value:"item-2",children:[a.jsx(ky,{children:"Lesson 2: Advanced Topics"}),a.jsx(Dy,{children:a.jsx("p",{children:"This is the content for lesson 2. It is optimized for mobile viewing."})})]})]}):a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:"Lesson 1: Introduction"}),a.jsx("p",{children:"This is the content for lesson 1, designed for larger screens."}),a.jsx("h3",{className:"font-semibold mt-4",children:"Lesson 2: Advanced Topics"}),a.jsx("p",{children:"This is the content for lesson 2, designed for larger screens."})]})})]})};function EH(){return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Smart Learning AI",subtitle:"Zero-shot learning with meta-loop adaptation",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"Meta-Learning:"}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-green-500",children:"Active"})]})}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsx(_H,{})})})]})]})}function TH(t){const e=p.useRef({value:t,previous:t});return p.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}var bH=[" ","Enter","ArrowUp","ArrowDown"],SH=[" ","Enter"],_u="Select",[um,dm,IH]=mf(_u),[fl,IW]=bn(_u,[IH,Tf]),hm=Tf(),[NH,Si]=fl(_u),[AH,CH]=fl(_u),Dj=t=>{const{__scopeSelect:e,children:n,open:r,defaultOpen:s,onOpenChange:i,value:o,defaultValue:l,onValueChange:c,dir:d,name:h,autoComplete:f,disabled:m,required:y,form:b}=t,v=hm(e),[_,E]=p.useState(null),[x,S]=p.useState(null),[R,D]=p.useState(!1),M=xu(d),[T=!1,I]=Ir({prop:r,defaultProp:s,onChange:i}),[N,C]=Ir({prop:o,defaultProp:l,onChange:c}),j=p.useRef(null),k=_?b||!!_.closest("form"):!0,[P,B]=p.useState(new Set),ae=Array.from(P).map(X=>X.props.value).join(";");return a.jsx(bN,{...v,children:a.jsxs(NH,{required:y,scope:e,trigger:_,onTriggerChange:E,valueNode:x,onValueNodeChange:S,valueNodeHasChildren:R,onValueNodeHasChildrenChange:D,contentId:Jn(),value:N,onValueChange:C,open:T,onOpenChange:I,dir:M,triggerPointerDownPosRef:j,disabled:m,children:[a.jsx(um.Provider,{scope:e,children:a.jsx(AH,{scope:t.__scopeSelect,onNativeOptionAdd:p.useCallback(X=>{B(he=>new Set(he).add(X))},[]),onNativeOptionRemove:p.useCallback(X=>{B(he=>{const U=new Set(he);return U.delete(X),U})},[]),children:n})}),k?a.jsxs(ik,{"aria-hidden":!0,required:y,tabIndex:-1,name:h,autoComplete:f,value:N,onChange:X=>C(X.target.value),disabled:m,form:b,children:[N===void 0?a.jsx("option",{value:""}):null,Array.from(P)]},ae):null]})})};Dj.displayName=_u;var Oj="SelectTrigger",Mj=p.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:r=!1,...s}=t,i=hm(n),o=Si(Oj,n),l=o.disabled||r,c=Ie(e,o.onTriggerChange),d=dm(n),h=p.useRef("touch"),[f,m,y]=ok(v=>{const _=d().filter(S=>!S.disabled),E=_.find(S=>S.value===o.value),x=ak(_,v,E);x!==void 0&&o.onValueChange(x.value)}),b=v=>{l||(o.onOpenChange(!0),y()),v&&(o.triggerPointerDownPosRef.current={x:Math.round(v.pageX),y:Math.round(v.pageY)})};return a.jsx(SN,{asChild:!0,...i,children:a.jsx(ne.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":sk(o.value)?"":void 0,...s,ref:c,onClick:Z(s.onClick,v=>{v.currentTarget.focus(),h.current!=="mouse"&&b(v)}),onPointerDown:Z(s.onPointerDown,v=>{h.current=v.pointerType;const _=v.target;_.hasPointerCapture(v.pointerId)&&_.releasePointerCapture(v.pointerId),v.button===0&&v.ctrlKey===!1&&v.pointerType==="mouse"&&(b(v),v.preventDefault())}),onKeyDown:Z(s.onKeyDown,v=>{const _=f.current!=="";!(v.ctrlKey||v.altKey||v.metaKey)&&v.key.length===1&&m(v.key),!(_&&v.key===" ")&&bH.includes(v.key)&&(b(),v.preventDefault())})})})});Mj.displayName=Oj;var Lj="SelectValue",Vj=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,children:i,placeholder:o="",...l}=t,c=Si(Lj,n),{onValueNodeHasChildrenChange:d}=c,h=i!==void 0,f=Ie(e,c.onValueNodeChange);return at(()=>{d(h)},[d,h]),a.jsx(ne.span,{...l,ref:f,style:{pointerEvents:"none"},children:sk(c.value)?a.jsx(a.Fragment,{children:o}):i})});Vj.displayName=Lj;var RH="SelectIcon",Fj=p.forwardRef((t,e)=>{const{__scopeSelect:n,children:r,...s}=t;return a.jsx(ne.span,{"aria-hidden":!0,...s,ref:e,children:r||""})});Fj.displayName=RH;var PH="SelectPortal",Uj=t=>a.jsx(pf,{asChild:!0,...t});Uj.displayName=PH;var vo="SelectContent",$j=p.forwardRef((t,e)=>{const n=Si(vo,t.__scopeSelect),[r,s]=p.useState();if(at(()=>{s(new DocumentFragment)},[]),!n.open){const i=r;return i?_o.createPortal(a.jsx(zj,{scope:t.__scopeSelect,children:a.jsx(um.Slot,{scope:t.__scopeSelect,children:a.jsx("div",{children:t.children})})}),i):null}return a.jsx(Bj,{...t,ref:e})});$j.displayName=vo;var $n=10,[zj,Ii]=fl(vo),jH="SelectContentImpl",kH=Fa("SelectContent.RemoveScroll"),Bj=p.forwardRef((t,e)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:_,...E}=t,x=Si(vo,n),[S,R]=p.useState(null),[D,M]=p.useState(null),T=Ie(e,re=>R(re)),[I,N]=p.useState(null),[C,j]=p.useState(null),k=dm(n),[P,B]=p.useState(!1),ae=p.useRef(!1);p.useEffect(()=>{if(S)return BP(S)},[S]),DP();const X=p.useCallback(re=>{const[Oe,...mt]=k().map(Pe=>Pe.ref.current),[Le]=mt.slice(-1),je=document.activeElement;for(const Pe of re)if(Pe===je||(Pe==null||Pe.scrollIntoView({block:"nearest"}),Pe===Oe&&D&&(D.scrollTop=0),Pe===Le&&D&&(D.scrollTop=D.scrollHeight),Pe==null||Pe.focus(),document.activeElement!==je))return},[k,D]),he=p.useCallback(()=>X([I,S]),[X,I,S]);p.useEffect(()=>{P&&he()},[P,he]);const{onOpenChange:U,triggerPointerDownPosRef:H}=x;p.useEffect(()=>{if(S){let re={x:0,y:0};const Oe=Le=>{var je,Pe;re={x:Math.abs(Math.round(Le.pageX)-(((je=H.current)==null?void 0:je.x)??0)),y:Math.abs(Math.round(Le.pageY)-(((Pe=H.current)==null?void 0:Pe.y)??0))}},mt=Le=>{re.x<=10&&re.y<=10?Le.preventDefault():S.contains(Le.target)||U(!1),document.removeEventListener("pointermove",Oe),H.current=null};return H.current!==null&&(document.addEventListener("pointermove",Oe),document.addEventListener("pointerup",mt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Oe),document.removeEventListener("pointerup",mt,{capture:!0})}}},[S,U,H]),p.useEffect(()=>{const re=()=>U(!1);return window.addEventListener("blur",re),window.addEventListener("resize",re),()=>{window.removeEventListener("blur",re),window.removeEventListener("resize",re)}},[U]);const[J,ue]=ok(re=>{const Oe=k().filter(je=>!je.disabled),mt=Oe.find(je=>je.ref.current===document.activeElement),Le=ak(Oe,re,mt);Le&&setTimeout(()=>Le.ref.current.focus())}),Re=p.useCallback((re,Oe,mt)=>{const Le=!ae.current&&!mt;(x.value!==void 0&&x.value===Oe||Le)&&(N(re),Le&&(ae.current=!0))},[x.value]),wt=p.useCallback(()=>S==null?void 0:S.focus(),[S]),qe=p.useCallback((re,Oe,mt)=>{const Le=!ae.current&&!mt;(x.value!==void 0&&x.value===Oe||Le)&&j(re)},[x.value]),Qt=r==="popper"?Oy:Hj,ft=Qt===Oy?{side:l,sideOffset:c,align:d,alignOffset:h,arrowPadding:f,collisionBoundary:m,collisionPadding:y,sticky:b,hideWhenDetached:v,avoidCollisions:_}:{};return a.jsx(zj,{scope:n,content:S,viewport:D,onViewportChange:M,itemRefCallback:Re,selectedItem:I,onItemLeave:wt,itemTextRefCallback:qe,focusSelectedItem:he,selectedItemText:C,position:r,isPositioned:P,searchRef:J,children:a.jsx(yw,{as:kH,allowPinchZoom:!0,children:a.jsx(gw,{asChild:!0,trapped:x.open,onMountAutoFocus:re=>{re.preventDefault()},onUnmountAutoFocus:Z(s,re=>{var Oe;(Oe=x.trigger)==null||Oe.focus({preventScroll:!0}),re.preventDefault()}),children:a.jsx(ru,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:re=>re.preventDefault(),onDismiss:()=>x.onOpenChange(!1),children:a.jsx(Qt,{role:"listbox",id:x.contentId,"data-state":x.open?"open":"closed",dir:x.dir,onContextMenu:re=>re.preventDefault(),...E,...ft,onPlaced:()=>B(!0),ref:T,style:{display:"flex",flexDirection:"column",outline:"none",...E.style},onKeyDown:Z(E.onKeyDown,re=>{const Oe=re.ctrlKey||re.altKey||re.metaKey;if(re.key==="Tab"&&re.preventDefault(),!Oe&&re.key.length===1&&ue(re.key),["ArrowUp","ArrowDown","Home","End"].includes(re.key)){let Le=k().filter(je=>!je.disabled).map(je=>je.ref.current);if(["ArrowUp","End"].includes(re.key)&&(Le=Le.slice().reverse()),["ArrowUp","ArrowDown"].includes(re.key)){const je=re.target,Pe=Le.indexOf(je);Le=Le.slice(Pe+1)}setTimeout(()=>X(Le)),re.preventDefault()}})})})})})})});Bj.displayName=jH;var DH="SelectItemAlignedPosition",Hj=p.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:r,...s}=t,i=Si(vo,n),o=Ii(vo,n),[l,c]=p.useState(null),[d,h]=p.useState(null),f=Ie(e,T=>h(T)),m=dm(n),y=p.useRef(!1),b=p.useRef(!0),{viewport:v,selectedItem:_,selectedItemText:E,focusSelectedItem:x}=o,S=p.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&d&&v&&_&&E){const T=i.trigger.getBoundingClientRect(),I=d.getBoundingClientRect(),N=i.valueNode.getBoundingClientRect(),C=E.getBoundingClientRect();if(i.dir!=="rtl"){const je=C.left-I.left,Pe=N.left-je,St=T.left-Pe,un=T.width+St,Ni=Math.max(un,I.width),Dr=window.innerWidth-$n,Or=Ay(Pe,[$n,Math.max($n,Dr-Ni)]);l.style.minWidth=un+"px",l.style.left=Or+"px"}else{const je=I.right-C.right,Pe=window.innerWidth-N.right-je,St=window.innerWidth-T.right-Pe,un=T.width+St,Ni=Math.max(un,I.width),Dr=window.innerWidth-$n,Or=Ay(Pe,[$n,Math.max($n,Dr-Ni)]);l.style.minWidth=un+"px",l.style.right=Or+"px"}const j=m(),k=window.innerHeight-$n*2,P=v.scrollHeight,B=window.getComputedStyle(d),ae=parseInt(B.borderTopWidth,10),X=parseInt(B.paddingTop,10),he=parseInt(B.borderBottomWidth,10),U=parseInt(B.paddingBottom,10),H=ae+X+P+U+he,J=Math.min(_.offsetHeight*5,H),ue=window.getComputedStyle(v),Re=parseInt(ue.paddingTop,10),wt=parseInt(ue.paddingBottom,10),qe=T.top+T.height/2-$n,Qt=k-qe,ft=_.offsetHeight/2,re=_.offsetTop+ft,Oe=ae+X+re,mt=H-Oe;if(Oe<=qe){const je=j.length>0&&_===j[j.length-1].ref.current;l.style.bottom="0px";const Pe=d.clientHeight-v.offsetTop-v.offsetHeight,St=Math.max(Qt,ft+(je?wt:0)+Pe+he),un=Oe+St;l.style.height=un+"px"}else{const je=j.length>0&&_===j[0].ref.current;l.style.top="0px";const St=Math.max(qe,ae+v.offsetTop+(je?Re:0)+ft)+mt;l.style.height=St+"px",v.scrollTop=Oe-qe+v.offsetTop}l.style.margin=`${$n}px 0`,l.style.minHeight=J+"px",l.style.maxHeight=k+"px",r==null||r(),requestAnimationFrame(()=>y.current=!0)}},[m,i.trigger,i.valueNode,l,d,v,_,E,i.dir,r]);at(()=>S(),[S]);const[R,D]=p.useState();at(()=>{d&&D(window.getComputedStyle(d).zIndex)},[d]);const M=p.useCallback(T=>{T&&b.current===!0&&(S(),x==null||x(),b.current=!1)},[S,x]);return a.jsx(MH,{scope:n,contentWrapper:l,shouldExpandOnScrollRef:y,onScrollButtonChange:M,children:a.jsx("div",{ref:c,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:R},children:a.jsx(ne.div,{...s,ref:f,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});Hj.displayName=DH;var OH="SelectPopperPosition",Oy=p.forwardRef((t,e)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=$n,...i}=t,o=hm(n);return a.jsx(IN,{...o,...i,ref:e,align:r,collisionPadding:s,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Oy.displayName=OH;var[MH,Cw]=fl(vo,{}),My="SelectViewport",Wj=p.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:r,...s}=t,i=Ii(My,n),o=Cw(My,n),l=Ie(e,i.onViewportChange),c=p.useRef(0);return a.jsxs(a.Fragment,{children:[a.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),a.jsx(um.Slot,{scope:n,children:a.jsx(ne.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:Z(s.onScroll,d=>{const h=d.currentTarget,{contentWrapper:f,shouldExpandOnScrollRef:m}=o;if(m!=null&&m.current&&f){const y=Math.abs(c.current-h.scrollTop);if(y>0){const b=window.innerHeight-$n*2,v=parseFloat(f.style.minHeight),_=parseFloat(f.style.height),E=Math.max(v,_);if(E<b){const x=E+y,S=Math.min(b,x),R=x-S;f.style.height=S+"px",f.style.bottom==="0px"&&(h.scrollTop=R>0?R:0,f.style.justifyContent="flex-end")}}}c.current=h.scrollTop})})})]})});Wj.displayName=My;var qj="SelectGroup",[LH,VH]=fl(qj),FH=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=Jn();return a.jsx(LH,{scope:n,id:s,children:a.jsx(ne.div,{role:"group","aria-labelledby":s,...r,ref:e})})});FH.displayName=qj;var Gj="SelectLabel",Kj=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=VH(Gj,n);return a.jsx(ne.div,{id:s.id,...r,ref:e})});Kj.displayName=Gj;var Qh="SelectItem",[UH,Qj]=fl(Qh),Yj=p.forwardRef((t,e)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:i,...o}=t,l=Si(Qh,n),c=Ii(Qh,n),d=l.value===r,[h,f]=p.useState(i??""),[m,y]=p.useState(!1),b=Ie(e,x=>{var S;return(S=c.itemRefCallback)==null?void 0:S.call(c,x,r,s)}),v=Jn(),_=p.useRef("touch"),E=()=>{s||(l.onValueChange(r),l.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return a.jsx(UH,{scope:n,value:r,disabled:s,textId:v,isSelected:d,onItemTextChange:p.useCallback(x=>{f(S=>S||((x==null?void 0:x.textContent)??"").trim())},[]),children:a.jsx(um.ItemSlot,{scope:n,value:r,disabled:s,textValue:h,children:a.jsx(ne.div,{role:"option","aria-labelledby":v,"data-highlighted":m?"":void 0,"aria-selected":d&&m,"data-state":d?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...o,ref:b,onFocus:Z(o.onFocus,()=>y(!0)),onBlur:Z(o.onBlur,()=>y(!1)),onClick:Z(o.onClick,()=>{_.current!=="mouse"&&E()}),onPointerUp:Z(o.onPointerUp,()=>{_.current==="mouse"&&E()}),onPointerDown:Z(o.onPointerDown,x=>{_.current=x.pointerType}),onPointerMove:Z(o.onPointerMove,x=>{var S;_.current=x.pointerType,s?(S=c.onItemLeave)==null||S.call(c):_.current==="mouse"&&x.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Z(o.onPointerLeave,x=>{var S;x.currentTarget===document.activeElement&&((S=c.onItemLeave)==null||S.call(c))}),onKeyDown:Z(o.onKeyDown,x=>{var R;((R=c.searchRef)==null?void 0:R.current)!==""&&x.key===" "||(SH.includes(x.key)&&E(),x.key===" "&&x.preventDefault())})})})})});Yj.displayName=Qh;var Xl="SelectItemText",Xj=p.forwardRef((t,e)=>{const{__scopeSelect:n,className:r,style:s,...i}=t,o=Si(Xl,n),l=Ii(Xl,n),c=Qj(Xl,n),d=CH(Xl,n),[h,f]=p.useState(null),m=Ie(e,E=>f(E),c.onItemTextChange,E=>{var x;return(x=l.itemTextRefCallback)==null?void 0:x.call(l,E,c.value,c.disabled)}),y=h==null?void 0:h.textContent,b=p.useMemo(()=>a.jsx("option",{value:c.value,disabled:c.disabled,children:y},c.value),[c.disabled,c.value,y]),{onNativeOptionAdd:v,onNativeOptionRemove:_}=d;return at(()=>(v(b),()=>_(b)),[v,_,b]),a.jsxs(a.Fragment,{children:[a.jsx(ne.span,{id:c.textId,...i,ref:m}),c.isSelected&&o.valueNode&&!o.valueNodeHasChildren?_o.createPortal(i.children,o.valueNode):null]})});Xj.displayName=Xl;var Jj="SelectItemIndicator",Zj=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return Qj(Jj,n).isSelected?a.jsx(ne.span,{"aria-hidden":!0,...r,ref:e}):null});Zj.displayName=Jj;var Ly="SelectScrollUpButton",ek=p.forwardRef((t,e)=>{const n=Ii(Ly,t.__scopeSelect),r=Cw(Ly,t.__scopeSelect),[s,i]=p.useState(!1),o=Ie(e,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollTop>0;i(d)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(nk,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop-c.offsetHeight)}}):null});ek.displayName=Ly;var Vy="SelectScrollDownButton",tk=p.forwardRef((t,e)=>{const n=Ii(Vy,t.__scopeSelect),r=Cw(Vy,t.__scopeSelect),[s,i]=p.useState(!1),o=Ie(e,r.onScrollButtonChange);return at(()=>{if(n.viewport&&n.isPositioned){let l=function(){const d=c.scrollHeight-c.clientHeight,h=Math.ceil(c.scrollTop)<d;i(h)};const c=n.viewport;return l(),c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)}},[n.viewport,n.isPositioned]),s?a.jsx(nk,{...t,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:c}=n;l&&c&&(l.scrollTop=l.scrollTop+c.offsetHeight)}}):null});tk.displayName=Vy;var nk=p.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=t,i=Ii("SelectScrollButton",n),o=p.useRef(null),l=dm(n),c=p.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return p.useEffect(()=>()=>c(),[c]),at(()=>{var h;const d=l().find(f=>f.ref.current===document.activeElement);(h=d==null?void 0:d.ref.current)==null||h.scrollIntoView({block:"nearest"})},[l]),a.jsx(ne.div,{"aria-hidden":!0,...s,ref:e,style:{flexShrink:0,...s.style},onPointerDown:Z(s.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(r,50))}),onPointerMove:Z(s.onPointerMove,()=>{var d;(d=i.onItemLeave)==null||d.call(i),o.current===null&&(o.current=window.setInterval(r,50))}),onPointerLeave:Z(s.onPointerLeave,()=>{c()})})}),$H="SelectSeparator",rk=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t;return a.jsx(ne.div,{"aria-hidden":!0,...r,ref:e})});rk.displayName=$H;var Fy="SelectArrow",zH=p.forwardRef((t,e)=>{const{__scopeSelect:n,...r}=t,s=hm(n),i=Si(Fy,n),o=Ii(Fy,n);return i.open&&o.position==="popper"?a.jsx(NN,{...s,...r,ref:e}):null});zH.displayName=Fy;function sk(t){return t===""||t===void 0}var ik=p.forwardRef((t,e)=>{const{value:n,...r}=t,s=p.useRef(null),i=Ie(e,s),o=TH(n);return p.useEffect(()=>{const l=s.current,c=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(c,"value").set;if(o!==n&&h){const f=new Event("change",{bubbles:!0});h.call(l,n),l.dispatchEvent(f)}},[o,n]),a.jsx(su,{asChild:!0,children:a.jsx("select",{...r,ref:i,defaultValue:n})})});ik.displayName="BubbleSelect";function ok(t){const e=tt(t),n=p.useRef(""),r=p.useRef(0),s=p.useCallback(o=>{const l=n.current+o;e(l),function c(d){n.current=d,window.clearTimeout(r.current),d!==""&&(r.current=window.setTimeout(()=>c(""),1e3))}(l)},[e]),i=p.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return p.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,i]}function ak(t,e,n){const s=e.length>1&&Array.from(e).every(d=>d===e[0])?e[0]:e,i=n?t.indexOf(n):-1;let o=BH(t,Math.max(i,0));s.length===1&&(o=o.filter(d=>d!==n));const c=o.find(d=>d.textValue.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function BH(t,e){return t.map((n,r)=>t[(e+r)%t.length])}var HH=Dj,lk=Mj,WH=Vj,qH=Fj,GH=Uj,ck=$j,KH=Wj,uk=Kj,dk=Yj,QH=Xj,YH=Zj,hk=ek,fk=tk,mk=rk;const gT=HH,yT=WH,Uy=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(lk,{ref:r,className:se("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...n,children:[e,a.jsx(qH,{asChild:!0,children:a.jsx(qv,{className:"h-4 w-4 opacity-50"})})]}));Uy.displayName=lk.displayName;const pk=p.forwardRef(({className:t,...e},n)=>a.jsx(hk,{ref:n,className:se("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(CL,{className:"h-4 w-4"})}));pk.displayName=hk.displayName;const gk=p.forwardRef(({className:t,...e},n)=>a.jsx(fk,{ref:n,className:se("flex cursor-default items-center justify-center py-1",t),...e,children:a.jsx(qv,{className:"h-4 w-4"})}));gk.displayName=fk.displayName;const $y=p.forwardRef(({className:t,children:e,position:n="popper",...r},s)=>a.jsx(GH,{children:a.jsxs(ck,{ref:s,className:se("relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...r,children:[a.jsx(pk,{}),a.jsx(KH,{className:se("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:e}),a.jsx(gk,{})]})}));$y.displayName=ck.displayName;const XH=p.forwardRef(({className:t,...e},n)=>a.jsx(uk,{ref:n,className:se("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...e}));XH.displayName=uk.displayName;const Wd=p.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(dk,{ref:r,className:se("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...n,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(YH,{children:a.jsx(AL,{className:"h-4 w-4"})})}),a.jsx(QH,{children:e})]}));Wd.displayName=dk.displayName;const JH=p.forwardRef(({className:t,...e},n)=>a.jsx(mk,{ref:n,className:se("-mx-1 my-1 h-px bg-muted",t),...e}));JH.displayName=mk.displayName;function ZH(){var x,S,R,D,M;const{user:t}=bi();Eo();const[e,n]=p.useState(null),[r,s]=p.useState({}),[i,o]=p.useState("tools"),{data:l,isLoading:c}=ln({queryKey:["/api/ai-tools"],refetchInterval:3e4}),{data:d}=ln({queryKey:["/api/ai-tools/categories"],refetchInterval:3e4}),{data:h}=ln({queryKey:["/api/ai-tools/analytics"],refetchInterval:3e4}),f=ns({mutationFn:async({toolId:T,params:I})=>{const N=await fetch(`/api/ai-tools/${T}/execute`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({params:I,context:{userId:t==null?void 0:t.uid,sessionId:`session_${Date.now()}`,metadata:{source:"ui"}}})});if(!N.ok)throw new Error("Failed to execute tool");return N.json()}}),m=ns({mutationFn:async({query:T,category:I})=>{const N=await fetch("/api/ai-tools/discover",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:T,category:I})});if(!N.ok)throw new Error("Failed to discover tools");return N.json()}}),y=T=>{n(T),s({})},b=(T,I)=>{s(N=>({...N,[T]:I}))},v=()=>{e&&f.mutate({toolId:e.id,params:r})},_=T=>({content:"fas fa-edit",analysis:"fas fa-chart-line",data_extraction:"fas fa-download",media:"fas fa-image",integration:"fas fa-plug",automation:"fas fa-cogs",monitoring:"fas fa-eye",nlp:"fas fa-language"})[T]||"fas fa-tool",E=T=>({content:"bg-blue-500",analysis:"bg-green-500",data_extraction:"bg-purple-500",media:"bg-pink-500",integration:"bg-orange-500",automation:"bg-red-500",monitoring:"bg-yellow-500",nlp:"bg-indigo-500"})[T]||"bg-gray-500";return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Advanced AI Tools"}),a.jsx("p",{className:"text-muted-foreground",children:"Powerful AI tools with MCP integration"})]}),a.jsxs(ye,{variant:"outline",className:"text-sm",children:[a.jsx("i",{className:"fas fa-brain mr-2"}),"MCP Enabled"]})]}),h&&a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsxs(Te,{className:"flex items-center gap-2",children:[a.jsx("i",{className:"fas fa-chart-bar text-primary"}),"Tools Analytics"]})}),a.jsx(oe,{children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:h.totalTools||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Tools"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-accent",children:((x=h.categories)==null?void 0:x.length)||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Categories"})]}),a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-2xl font-bold text-green-500",children:h.totalExecutions||0}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Executions"})]}),a.jsxs("div",{className:"text-center",children:[a.jsxs("div",{className:"text-2xl font-bold text-blue-500",children:[Math.round(((S=h.toolStats)==null?void 0:S.reduce((T,I)=>T+I.usage.successRate,0))/(((R=h.toolStats)==null?void 0:R.length)||1)*100),"%"]}),a.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Success Rate"})]})]})})]}),a.jsxs(om,{value:i,onValueChange:o,children:[a.jsxs(wu,{className:"grid w-full grid-cols-3",children:[a.jsx(nn,{value:"tools",children:"AI Tools"}),a.jsx(nn,{value:"discover",children:"Discover"}),a.jsx(nn,{value:"analytics",children:"Analytics"})]}),a.jsx(rn,{value:"tools",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Available Tools"})}),a.jsx(oe,{className:"space-y-4",children:c?a.jsx("div",{className:"animate-pulse space-y-4",children:[...Array(5)].map((T,I)=>a.jsx("div",{className:"h-16 bg-muted rounded"},I))}):l?l.map(T=>a.jsx("div",{className:`p-4 border rounded-lg cursor-pointer transition-colors ${(e==null?void 0:e.id)===T.id?"border-primary bg-primary/5":"border-border hover:border-primary/50"}`,onClick:()=>y(T),children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-10 h-10 rounded-lg ${E(T.category)} flex items-center justify-center`,children:a.jsx("i",{className:`${_(T.category)} text-white`})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("h3",{className:"font-semibold text-sm",children:T.name}),a.jsxs(ye,{variant:"secondary",className:"text-xs",children:["v",T.version]}),T.isActive?a.jsx(ye,{variant:"default",className:"text-xs",children:"Active"}):a.jsx(ye,{variant:"outline",className:"text-xs",children:"Inactive"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:T.description}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[a.jsxs("span",{children:[T.usage.totalCalls," calls"]}),a.jsxs("span",{children:[Math.round(T.usage.successRate*100),"% success"]}),a.jsxs("span",{children:[T.usage.averageExecutionTime,"ms avg"]})]})]})]})},T.id)):a.jsx(zr,{children:a.jsx(Br,{children:"No AI tools available"})})})]}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:e?`Execute: ${e.name}`:"Select a Tool"})}),a.jsx(oe,{className:"space-y-4",children:e?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"space-y-4",children:e.parameters.map(T=>{var I;return a.jsxs("div",{children:[a.jsxs(ea,{htmlFor:T.name,className:"text-sm font-medium",children:[T.name,T.required&&a.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),a.jsx("div",{className:"mt-1",children:T.type==="string"&&T.name.includes("text")?a.jsx(qc,{id:T.name,placeholder:T.description,value:r[T.name]||"",onChange:N=>b(T.name,N.target.value),rows:3}):T.type==="boolean"?a.jsxs(gT,{value:((I=r[T.name])==null?void 0:I.toString())||"",onValueChange:N=>b(T.name,N==="true"),children:[a.jsx(Uy,{children:a.jsx(yT,{placeholder:T.description})}),a.jsxs($y,{children:[a.jsx(Wd,{value:"true",children:"True"}),a.jsx(Wd,{value:"false",children:"False"})]})]}):a.jsx(vi,{id:T.name,type:T.type==="number"?"number":"text",placeholder:T.description,value:r[T.name]||"",onChange:N=>b(T.name,T.type==="number"?Number(N.target.value):N.target.value)})}),a.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:T.description})]},T.name)})}),a.jsx(Y,{onClick:v,disabled:f.isPending,className:"w-full",children:f.isPending?"Executing...":"Execute Tool"}),f.isError&&a.jsx(zr,{variant:"destructive",children:a.jsx(Br,{children:(D=f.error)==null?void 0:D.message})}),f.isSuccess&&f.data&&a.jsxs("div",{className:"space-y-4",children:[a.jsx(po,{}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium mb-2",children:"Execution Result:"}),a.jsx("div",{className:"p-4 bg-muted rounded-lg",children:a.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:JSON.stringify(f.data.data,null,2)})})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Success:"})," ",f.data.success?"Yes":"No"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Execution Time:"})," ",f.data.executionTime,"ms"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Confidence:"})," ",Math.round(f.data.confidence*100),"%"]}),a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Tool Used:"})," ",f.data.toolUsed]})]}),f.data.suggestions&&f.data.suggestions.length>0&&a.jsxs("div",{children:[a.jsx("span",{className:"font-medium",children:"Suggestions:"}),a.jsx("ul",{className:"text-sm text-muted-foreground mt-1",children:f.data.suggestions.map((T,I)=>a.jsxs("li",{children:[" ",T]},I))})]})]})]}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("i",{className:"fas fa-tools text-4xl mb-4"}),a.jsx("p",{children:"Select a tool from the list to execute it"})]})})]})]})}),a.jsx(rn,{value:"discover",children:a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Discover AI Tools"})}),a.jsxs(oe,{className:"space-y-4",children:[a.jsxs("div",{className:"flex gap-4",children:[a.jsx(vi,{placeholder:"Search for tools...",value:((M=m.variables)==null?void 0:M.query)||"",onChange:T=>{}}),a.jsxs(gT,{children:[a.jsx(Uy,{className:"w-48",children:a.jsx(yT,{placeholder:"Category"})}),a.jsx($y,{children:d==null?void 0:d.map(T=>a.jsx(Wd,{value:T,children:T},T))})]}),a.jsx(Y,{onClick:()=>{m.mutate({query:"content generation",category:"content"})},children:"Search"})]}),m.isSuccess&&m.data&&a.jsxs("div",{className:"space-y-4",children:[a.jsx("h4",{className:"font-medium",children:"Search Results:"}),m.data.map(T=>a.jsx("div",{className:"p-4 border rounded-lg",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:`w-8 h-8 rounded ${E(T.category)} flex items-center justify-center`,children:a.jsx("i",{className:`${_(T.category)} text-white text-sm`})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h5",{className:"font-semibold",children:T.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:T.description}),a.jsx("div",{className:"flex gap-2 mt-2",children:T.capabilities.map(I=>a.jsx(ye,{variant:"outline",className:"text-xs",children:I},I))})]})]})},T.id))]})]})]})}),a.jsx(rn,{value:"analytics",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Tool Performance"})}),a.jsx(oe,{children:h!=null&&h.toolStats?a.jsx("div",{className:"space-y-4",children:h.toolStats.map(T=>a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{children:T.name}),a.jsxs("span",{children:[Math.round(T.usage.successRate*100),"%"]})]}),a.jsx(go,{value:T.usage.successRate*100})]},T.id))}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("i",{className:"fas fa-chart-line text-4xl mb-4"}),a.jsx("p",{children:"No analytics data available"})]})})]}),a.jsxs(ee,{children:[a.jsx(ve,{children:a.jsx(Te,{children:"Category Distribution"})}),a.jsx(oe,{children:d?a.jsx("div",{className:"space-y-4",children:d.map(T=>{const I=(l==null?void 0:l.filter(C=>C.category===T))||[],N=l?I.length/l.length*100:0;return a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"capitalize",children:T}),a.jsxs("span",{children:[I.length," tools"]})]}),a.jsx(go,{value:N})]},T)})}):a.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[a.jsx("i",{className:"fas fa-chart-pie text-4xl mb-4"}),a.jsx("p",{children:"No category data available"})]})})]})]})})]})]})}function eW(){return a.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[a.jsx(Ao,{}),a.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[a.jsx(Co,{title:"Advanced AI Tools",subtitle:"Powerful AI tools with MCP integration",actions:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-sm text-muted-foreground",children:"MCP:"}),a.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),a.jsx("span",{className:"text-sm text-green-500",children:"Connected"})]})}),a.jsx("main",{className:"flex-1 overflow-auto",children:a.jsx("div",{className:"p-6 max-w-7xl mx-auto",children:a.jsx(ZH,{})})})]})]})}function tW({progress:t,onViewDetails:e,compact:n=!1}){const r=()=>{const o=(t.level-1)**2*100,l=t.level**2*100,c=(t.experience-o)/(l-o)*100;return Math.max(0,Math.min(100,c))},s=o=>{switch(o){case"common":return"bg-gray-500";case"rare":return"bg-blue-500";case"epic":return"bg-purple-500";case"legendary":return"bg-yellow-500";default:return"bg-gray-500"}},i=o=>o>=50?a.jsx(qI,{className:"h-4 w-4 text-yellow-500"}):o>=20?a.jsx(ai,{className:"h-4 w-4 text-purple-500"}):o>=10?a.jsx(xf,{className:"h-4 w-4 text-blue-500"}):a.jsx(jc,{className:"h-4 w-4 text-green-500"});return n?a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[i(t.level),a.jsxs("div",{children:[a.jsxs("div",{className:"font-semibold text-foreground",children:["Level ",t.level]}),a.jsxs("div",{className:"text-sm text-muted-foreground",children:[t.totalPoints," points"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(sE,{className:"h-4 w-4 text-orange-500"}),a.jsx("span",{className:"text-sm font-medium",children:t.learningStreak})]})]})})}):a.jsxs(ee,{className:"glass-card neon-glow-md",children:[a.jsx(ve,{className:"pb-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs(Te,{className:"flex items-center space-x-2",children:[i(t.level),a.jsx("span",{className:"cyber-text",children:"Progress Dashboard"})]}),e&&a.jsx(Y,{variant:"ghost",size:"sm",onClick:e,children:"View Details"})]})}),a.jsxs(oe,{className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("span",{className:"text-sm font-medium",children:["Level ",t.level]}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[t.experience," XP"]})]}),a.jsx(go,{value:r(),className:"h-2"}),a.jsxs("div",{className:"text-xs text-muted-foreground",children:[t.level**2*100-t.experience," XP to next level"]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"text-center p-3 rounded-lg bg-secondary/50",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[a.jsx(Ua,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-semibold",children:t.totalPoints})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Total Points"})]}),a.jsxs("div",{className:"text-center p-3 rounded-lg bg-secondary/50",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-1 mb-1",children:[a.jsx(sE,{className:"h-4 w-4 text-orange-500"}),a.jsx("span",{className:"font-semibold",children:t.learningStreak})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(vf,{className:"h-4 w-4 text-primary"}),a.jsxs("span",{className:"text-sm font-medium",children:["Badges (",t.badges.length,")"]})]}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[t.badges.slice(0,6).map((o,l)=>a.jsxs(ye,{variant:"secondary",className:"neon-glow-sm text-xs",children:[" ",l+1]},o)),t.badges.length>6&&a.jsxs(ye,{variant:"outline",className:"text-xs",children:["+",t.badges.length-6," more"]})]})]}),t.achievements.length>0&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(ai,{className:"h-4 w-4 text-yellow-500"}),a.jsx("span",{className:"text-sm font-medium",children:"Recent Achievements"})]}),a.jsx("div",{className:"space-y-2",children:t.achievements.slice(-3).map(o=>a.jsxs("div",{className:"flex items-center space-x-3 p-2 rounded-lg bg-secondary/30",children:[a.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${s(o.rarity)}`,children:a.jsx("span",{className:"text-sm",children:o.icon})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"text-sm font-medium truncate",children:o.name}),a.jsx("div",{className:"text-xs text-muted-foreground truncate",children:o.description})]}),a.jsxs(ye,{variant:"outline",className:"text-xs",children:["+",o.points]})]},o.id))})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium",children:"Weekly Goal"}),a.jsxs("span",{className:"text-sm text-muted-foreground",children:[Math.min(t.totalPoints%t.weeklyGoal,t.weeklyGoal)," / ",t.weeklyGoal]})]}),a.jsx(go,{value:t.totalPoints%t.weeklyGoal/t.weeklyGoal*100,className:"h-2"})]})]})]})}function vT({entries:t,currentUserId:e,onUserClick:n}){const r=l=>{switch(l){case 0:return a.jsx(qI,{className:"h-5 w-5 text-yellow-500"});case 1:return a.jsx(iE,{className:"h-5 w-5 text-gray-400"});case 2:return a.jsx(iE,{className:"h-5 w-5 text-amber-600"});default:return a.jsxs("span",{className:"text-sm font-bold text-muted-foreground",children:["#",l+1]})}},s=l=>{switch(l){case 0:return a.jsx(ye,{className:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30",children:"#1"});case 1:return a.jsx(ye,{className:"bg-gray-500/20 text-gray-500 border-gray-500/30",children:"#2"});case 2:return a.jsx(ye,{className:"bg-amber-600/20 text-amber-600 border-amber-600/30",children:"#3"});default:return a.jsxs(ye,{variant:"outline",children:["#",l+1]})}},i=l=>`User ${l.split("-")[1]||l}`,o=l=>{const c=["bg-blue-500","bg-green-500","bg-purple-500","bg-pink-500","bg-orange-500"],d=l.charCodeAt(0)%c.length;return c[d]};return a.jsxs(ee,{className:"glass-card neon-glow-md",children:[a.jsx(ve,{children:a.jsxs(Te,{className:"flex items-center space-x-2",children:[a.jsx(ai,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{className:"cyber-text",children:"Leaderboard"}),a.jsxs(ye,{variant:"secondary",className:"ml-auto",children:[a.jsx(kc,{className:"h-3 w-3 mr-1"}),t.length]})]})}),a.jsxs(oe,{children:[a.jsxs("div",{className:"space-y-3",children:[t.map((l,c)=>a.jsxs("div",{className:`flex items-center space-x-3 p-3 rounded-lg transition-all duration-200 ${l.userId===e?"bg-primary/10 border border-primary/30 neon-glow-sm":"bg-secondary/30 hover:bg-secondary/50"} ${c<3?"border-l-4 border-l-primary":""}`,onClick:()=>n==null?void 0:n(l.userId),children:[a.jsx("div",{className:"flex items-center justify-center w-8",children:r(c)}),a.jsx(Ws,{className:"h-10 w-10",children:a.jsx(qs,{className:o(l.userId),children:i(l.userId).charAt(0)})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-medium text-foreground truncate",children:i(l.userId)}),l.userId===e&&a.jsx(ye,{variant:"secondary",className:"text-xs",children:"You"})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-sm text-muted-foreground",children:[a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(xf,{className:"h-3 w-3"}),a.jsxs("span",{children:["Level ",l.level]})]}),a.jsxs("span",{className:"flex items-center space-x-1",children:[a.jsx(vf,{className:"h-3 w-3"}),a.jsxs("span",{children:[l.badges," badges"]})]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx(Ua,{className:"h-4 w-4 text-primary"}),a.jsx("span",{className:"font-bold text-primary",children:l.points.toLocaleString()})]}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"points"})]}),a.jsx("div",{children:s(c)})]},l.userId)),t.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(ai,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No leaderboard data available"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Start learning to appear on the leaderboard!"})]})]}),t.length>0&&a.jsx("div",{className:"mt-6 pt-4 border-t border-border/50",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:Math.round(t.reduce((l,c)=>l+c.points,0)/t.length)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Points"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:Math.round(t.reduce((l,c)=>l+c.level,0)/t.length)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Level"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold text-primary",children:Math.round(t.reduce((l,c)=>l+c.badges,0)/t.length)}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Avg Badges"})]})]})})]})]})}function nW({challenges:t,userProgress:e=[],onJoinChallenge:n,onViewDetails:r}){const s=d=>{switch(d){case"daily":return a.jsx(NL,{className:"h-4 w-4 text-blue-500"});case"weekly":return a.jsx(jc,{className:"h-4 w-4 text-green-500"});case"monthly":return a.jsx(ai,{className:"h-4 w-4 text-purple-500"});case"special":return a.jsx(xf,{className:"h-4 w-4 text-yellow-500"});default:return a.jsx(PL,{className:"h-4 w-4 text-muted-foreground"})}},i=d=>{switch(d){case"daily":return"bg-blue-500/20 text-blue-500 border-blue-500/30";case"weekly":return"bg-green-500/20 text-green-500 border-green-500/30";case"monthly":return"bg-purple-500/20 text-purple-500 border-purple-500/30";case"special":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/30";default:return"bg-gray-500/20 text-gray-500 border-gray-500/30"}},o=d=>{const h=new Date,f=d.getTime()-h.getTime();if(f<=0)return"Expired";const m=Math.floor(f/(1e3*60*60*24)),y=Math.floor(f%(1e3*60*60*24)/(1e3*60*60));return m>0?`${m}d ${y}h`:y>0?`${y}h`:`${Math.floor(f%(1e3*60*60)/(1e3*60))}m`},l=d=>e.find(h=>h.challengeId===d),c=(d,h)=>{if(!h)return 0;const f=d.requirements[0];return Math.min(100,h.progress/f.threshold*100)};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold cyber-text",children:"Learning Challenges"}),a.jsxs(ye,{variant:"secondary",className:"neon-glow-sm",children:[a.jsx(kc,{className:"h-3 w-3 mr-1"}),t.filter(d=>d.isActive).length," Active"]})]}),a.jsxs("div",{className:"grid gap-4",children:[t.map(d=>{const h=l(d.id),f=(h==null?void 0:h.completed)||!1,m=c(d,h);return a.jsxs(ee,{className:`glass-card transition-all duration-200 ${f?"neon-glow-md border-green-500/30":"neon-glow-sm hover:neon-glow-md"}`,children:[a.jsx(ve,{className:"pb-3",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[s(d.type),a.jsxs("div",{className:"flex-1",children:[a.jsxs(Te,{className:"text-base flex items-center space-x-2",children:[a.jsx("span",{children:d.title}),f&&a.jsx(rE,{className:"h-4 w-4 text-green-500"})]}),a.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:d.description})]})]}),a.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[a.jsx(ye,{className:i(d.type),children:d.type}),a.jsxs("div",{className:"flex items-center space-x-1 text-xs text-muted-foreground",children:[a.jsx(WI,{className:"h-3 w-3"}),a.jsx("span",{children:o(d.endDate)})]})]})]})}),a.jsxs(oe,{className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Requirements:"}),a.jsx("div",{className:"space-y-1",children:d.requirements.map((y,b)=>a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-muted-foreground",children:y.type.replace("_"," ").replace(/\b\w/g,v=>v.toUpperCase())}),a.jsxs("span",{className:"font-medium",children:[(h==null?void 0:h.progress)||0," / ",y.threshold]})]},b))})]}),!f&&a.jsxs("div",{className:"space-y-2",children:[a.jsx(go,{value:m,className:"h-2"}),a.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:[m.toFixed(1),"% Complete"]})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsx("div",{className:"text-sm font-medium",children:"Rewards:"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[d.rewards.points>0&&a.jsxs(ye,{variant:"secondary",className:"neon-glow-sm",children:[a.jsx(Ua,{className:"h-3 w-3 mr-1"}),d.rewards.points," points"]}),d.rewards.badges.map((y,b)=>a.jsxs(ye,{variant:"outline",className:"neon-glow-sm",children:[a.jsx(vf,{className:"h-3 w-3 mr-1"}),"Badge ",b+1]},y)),d.rewards.achievements.map((y,b)=>a.jsxs(ye,{variant:"outline",className:"neon-glow-sm",children:[a.jsx(ai,{className:"h-3 w-3 mr-1"}),"Achievement ",b+1]},y))]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[a.jsx(kc,{className:"h-4 w-4"}),a.jsxs("span",{children:[d.participants.length," participants"]})]}),a.jsxs("div",{className:"flex space-x-2",children:[r&&a.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>r(d.id),children:"Details"}),!f&&n&&!d.participants.includes("current-user")&&a.jsx(Y,{size:"sm",onClick:()=>n(d.id),className:"neon-button",children:"Join Challenge"})]})]}),f&&(h==null?void 0:h.completedAt)&&a.jsx("div",{className:"p-3 rounded-lg bg-green-500/10 border border-green-500/30",children:a.jsxs("div",{className:"flex items-center space-x-2 text-green-500",children:[a.jsx(rE,{className:"h-4 w-4"}),a.jsxs("span",{className:"text-sm font-medium",children:["Completed on ",h.completedAt.toLocaleDateString()]})]})})]})]},d.id)}),t.length===0&&a.jsx(ee,{className:"glass-card",children:a.jsx(oe,{className:"py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx(jc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No challenges available"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"New challenges will appear here regularly"})]})})})]})]})}function rW({recommendations:t,onStartRecommendation:e,onDismissRecommendation:n}){const r=c=>{switch(c){case"feature_tutorial":return a.jsx(SL,{className:"h-4 w-4 text-blue-500"});case"ai_prompt":return a.jsx(IL,{className:"h-4 w-4 text-purple-500"});case"automation_template":return a.jsx(jL,{className:"h-4 w-4 text-green-500"});case"workflow_suggestion":return a.jsx(VL,{className:"h-4 w-4 text-orange-500"});default:return a.jsx(Pd,{className:"h-4 w-4 text-yellow-500"})}},s=c=>{switch(c){case"beginner":return"bg-green-500/20 text-green-500 border-green-500/30";case"intermediate":return"bg-yellow-500/20 text-yellow-500 border-yellow-500/30";case"advanced":return"bg-red-500/20 text-red-500 border-red-500/30";default:return"bg-gray-500/20 text-gray-500 border-gray-500/30"}},i=c=>c>=8?a.jsx(xf,{className:"h-3 w-3 text-yellow-500"}):c>=5?a.jsx(Gv,{className:"h-3 w-3 text-blue-500"}):a.jsx(jc,{className:"h-3 w-3 text-gray-500"}),o=c=>{if(c<60)return`${c}m`;const d=Math.floor(c/60),h=c%60;return h>0?`${d}h ${h}m`:`${d}h`},l=c=>c.split("_").map(d=>d.charAt(0).toUpperCase()+d.slice(1)).join(" ");return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold cyber-text",children:"Learning Recommendations"}),a.jsxs(ye,{variant:"secondary",className:"neon-glow-sm",children:[a.jsx(Pd,{className:"h-3 w-3 mr-1"}),t.length," Suggestions"]})]}),a.jsxs("div",{className:"space-y-3",children:[t.map(c=>a.jsx(ee,{className:"glass-card neon-glow-sm hover:neon-glow-md transition-all duration-200",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:r(c.type)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-start justify-between mb-2",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h4",{className:"font-medium text-foreground mb-1",children:c.title}),a.jsx("p",{className:"text-sm text-muted-foreground",children:c.description})]}),a.jsx("div",{className:"flex items-center space-x-1 ml-2",children:i(c.priority)})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-2 mb-3",children:[a.jsx(ye,{className:s(c.difficulty),children:c.difficulty}),a.jsxs(ye,{variant:"outline",className:"text-xs",children:[a.jsx(WI,{className:"h-3 w-3 mr-1"}),o(c.estimatedTime)]}),a.jsxs(ye,{variant:"secondary",className:"text-xs",children:[a.jsx(Ua,{className:"h-3 w-3 mr-1"}),c.points," points"]}),a.jsx(ye,{variant:"outline",className:"text-xs",children:l(c.category)})]}),c.prerequisites.length>0&&a.jsxs("div",{className:"mb-3",children:[a.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Prerequisites:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:c.prerequisites.map((d,h)=>a.jsx(ye,{variant:"outline",className:"text-xs",children:d},h))})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"text-xs text-muted-foreground",children:["Priority: ",c.priority,"/10"]}),a.jsxs("div",{className:"flex space-x-2",children:[n&&a.jsx(Y,{variant:"ghost",size:"sm",onClick:()=>n(c.id),children:"Dismiss"}),e&&a.jsxs(Y,{size:"sm",onClick:()=>e(c),className:"neon-button",children:["Start Learning",a.jsx(bL,{className:"h-3 w-3 ml-1"})]})]})]})]})]})})},c.id)),t.length===0&&a.jsx(ee,{className:"glass-card",children:a.jsx(oe,{className:"py-8",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Pd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"No recommendations available"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Keep using AuraOS to get personalized learning suggestions"})]})})})]}),t.length>0&&a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-foreground",children:"Quick Actions"}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Jump into learning with these popular recommendations"})]}),a.jsx("div",{className:"flex space-x-2",children:t.slice(0,2).map(c=>a.jsx(Y,{size:"sm",variant:"outline",onClick:()=>e==null?void 0:e(c),className:"neon-glow-sm",children:c.title.split(" ").slice(0,2).join(" ")},c.id))})]})})})]})}function sW(){const[t,e]=p.useState("overview"),[n,r]=p.useState(null),[s,i]=p.useState([]),[o,l]=p.useState([]),[c,d]=p.useState([]),[h,f]=p.useState(!0);p.useEffect(()=>{m()},[]);const m=async()=>{try{f(!0);const _={userId:"user-1",totalPoints:2450,level:8,experience:1900,badges:["first_ai_interaction","automation_master"],achievements:[{id:"level_10",name:"Rising Star",description:"Reached level 8",icon:"",category:"progression",points:500,rarity:"rare",unlockedAt:new Date,metadata:{}}],learningStreak:12,lastActivityDate:new Date,skillPoints:{ai_interaction:450,automation_creation:380,social_media:280,workflow_design:320},weeklyGoal:500,monthlyGoal:2e3},E=[{userId:"user-1",points:2450,level:8,badges:2},{userId:"user-2",points:3200,level:10,badges:4},{userId:"user-3",points:1800,level:6,badges:1},{userId:"user-4",points:5600,level:15,badges:8},{userId:"user-5",points:1200,level:4,badges:1}],x=[{id:"weekly_automation",title:"Weekly Automation Challenge",description:"Create 3 new automations this week",type:"weekly",category:"automation",requirements:[{type:"automation_created",threshold:3,timeframe:"7_days"}],rewards:{points:500,badges:[],achievements:[]},startDate:new Date,endDate:new Date(Date.now()+7*24*60*60*1e3),participants:["user-1","user-2","user-3"],isActive:!0},{id:"ai_explorer",title:"AI Explorer Quest",description:"Use 5 different AI features",type:"daily",category:"ai",requirements:[{type:"ai_interaction",threshold:5,timeframe:"1_day"}],rewards:{points:200,badges:["ai_explorer"],achievements:[]},startDate:new Date,endDate:new Date(Date.now()+24*60*60*1e3),participants:["user-1","user-4"],isActive:!0}],S=[{id:"rec-1",userId:"user-1",type:"feature_tutorial",title:"Advanced AI Prompting",description:"Learn to create more sophisticated AI prompts",difficulty:"intermediate",estimatedTime:25,points:150,prerequisites:[],category:"ai_interaction",priority:8,createdAt:new Date},{id:"rec-2",userId:"user-1",type:"automation_template",title:"Social Media Automation",description:"Build an automation for social media posting",difficulty:"beginner",estimatedTime:30,points:200,prerequisites:["basic_automation"],category:"automation_creation",priority:7,createdAt:new Date}];r(_),i(E),l(x),d(S)}catch(_){console.error("Failed to load dashboard data:",_)}finally{f(!1)}},y=_=>{console.log("Joining challenge:",_)},b=_=>{console.log("Starting recommendation:",_)},v=_=>{d(E=>E.filter(x=>x.id!==_))};return h?a.jsx("div",{className:"container mx-auto p-6",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx(nE,{className:"h-12 w-12 text-primary animate-pulse mx-auto mb-4"}),a.jsx("p",{className:"text-muted-foreground",children:"Loading learning dashboard..."})]})})}):a.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold cyber-text",children:"Learning Dashboard"}),a.jsx("p",{className:"text-muted-foreground mt-1",children:"Track your progress, earn rewards, and discover new learning opportunities"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs(ye,{variant:"secondary",className:"neon-glow-sm",children:[a.jsx(Ua,{className:"h-3 w-3 mr-1"}),(n==null?void 0:n.totalPoints)||0," Points"]}),a.jsxs(ye,{variant:"outline",className:"neon-glow-sm",children:[a.jsx(kc,{className:"h-3 w-3 mr-1"}),"#",s.findIndex(_=>_.userId==="user-1")+1," Rank"]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ai,{className:"h-5 w-5 text-yellow-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.level)||1}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Level"})]})]})})}),a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ua,{className:"h-5 w-5 text-primary"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.totalPoints)||0}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Points"})]})]})})}),a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(vf,{className:"h-5 w-5 text-purple-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.badges.length)||0}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Badges"})]})]})})}),a.jsx(ee,{className:"glass-card neon-glow-sm",children:a.jsx(oe,{className:"p-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gv,{className:"h-5 w-5 text-green-500"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold",children:(n==null?void 0:n.learningStreak)||0}),a.jsx("div",{className:"text-xs text-muted-foreground",children:"Day Streak"})]})]})})})]}),a.jsxs(om,{value:t,onValueChange:e,children:[a.jsxs(wu,{className:"grid w-full grid-cols-4",children:[a.jsxs(nn,{value:"overview",className:"flex items-center space-x-2",children:[a.jsx(nE,{className:"h-4 w-4"}),a.jsx("span",{children:"Overview"})]}),a.jsxs(nn,{value:"challenges",className:"flex items-center space-x-2",children:[a.jsx(jc,{className:"h-4 w-4"}),a.jsx("span",{children:"Challenges"})]}),a.jsxs(nn,{value:"leaderboard",className:"flex items-center space-x-2",children:[a.jsx(ai,{className:"h-4 w-4"}),a.jsx("span",{children:"Leaderboard"})]}),a.jsxs(nn,{value:"recommendations",className:"flex items-center space-x-2",children:[a.jsx(Pd,{className:"h-4 w-4"}),a.jsx("span",{children:"Learn"})]})]}),a.jsx(rn,{value:"overview",className:"space-y-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[n&&a.jsx(tW,{progress:n}),a.jsx(vT,{entries:s,currentUserId:"user-1"})]})}),a.jsx(rn,{value:"challenges",className:"space-y-6",children:a.jsx(nW,{challenges:o,onJoinChallenge:y})}),a.jsx(rn,{value:"leaderboard",className:"space-y-6",children:a.jsx(vT,{entries:s,currentUserId:"user-1"})}),a.jsx(rn,{value:"recommendations",className:"space-y-6",children:a.jsx(rW,{recommendations:c,onStartRecommendation:b,onDismissRecommendation:v})})]})]})}function iW(){return a.jsx("div",{className:"min-h-screen w-full flex items-center justify-center bg-gray-50",children:a.jsx(ee,{className:"w-full max-w-md mx-4",children:a.jsxs(oe,{className:"pt-6",children:[a.jsxs("div",{className:"flex mb-4 gap-2",children:[a.jsx(RL,{className:"h-8 w-8 text-red-500"}),a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"404 Page Not Found"})]}),a.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Did you forget to add the page to the router?"})]})})})}const oW=()=>{const[t,e]=p.useState([]),[n,r]=p.useState(!1);p.useEffect(()=>{let i;return n&&(i=new EventSource("/api/events"),i.onmessage=o=>{e(l=>[JSON.parse(o.data),...l])}),()=>{i&&i.close()}},[n]);const s=()=>{r(i=>!i)};return a.jsxs("div",{className:"p-4",children:[a.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Debug View"}),a.jsx("button",{className:"btn btn-primary mb-4",onClick:s,children:n?"Stop Streaming":"Start Streaming"}),a.jsxs("div",{className:"border rounded-lg p-4 bg-gray-100",children:[a.jsx("h2",{className:"text-lg font-semibold mb-2",children:"Event Stream"}),a.jsx("div",{className:"max-h-96 overflow-y-auto",children:t.map((i,o)=>a.jsx("pre",{className:"bg-white p-2 rounded-md mb-2",children:JSON.stringify(i,null,2)},o))})]})]})},aW=()=>{const t=[{name:"Workflow Automator",icon:"fas fa-cogs",description:"Create and manage automated workflows."},{name:"API Integrator",icon:"fas fa-plug",description:"Connect to and integrate with various APIs."},{name:"Real-time Monitor",icon:"fas fa-chart-line",description:"Monitor real-time data streams and events."},{name:"Content Generator",icon:"fas fa-file-alt",description:"Generate high-quality content for your social media."}],e=[{name:"Workflow Automation Master",description:"Specializes in creating and managing automated workflows"},{name:"Project Coordinator",description:"Coordinates multiple agents and manages complex projects"},{name:"Self-Improving AI",description:"Continuously learns and improves from interactions"}];return a.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:a.jsxs("div",{className:"max-w-7xl mx-auto",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold tracking-tight text-foreground sm:text-4xl",children:"AI Workspace"}),a.jsx("p",{className:"mt-2 text-lg text-muted-foreground",children:"Your central hub for leveraging powerful AI tools and agents. Here you can manage workflows, interact with MCP tools, and deploy intelligent agents to automate your tasks."})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[a.jsx("div",{className:"lg:col-span-2",children:a.jsxs("div",{className:"glass-card p-6 backdrop-blur-xl",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"MCP Tools"}),a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:t.map((n,r)=>a.jsxs("div",{className:"border border-border/50 rounded-lg p-4 flex items-start gap-4 hover:bg-primary/10 transition-colors",children:[a.jsx("div",{className:"w-10 h-10 bg-primary/20 rounded-lg flex items-center justify-center",children:a.jsx("i",{className:`${n.icon} text-primary text-xl`})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold",children:n.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n.description})]})]},r))})]})}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"glass-card p-6 backdrop-blur-xl",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Improvement Agents"}),a.jsx("div",{className:"space-y-4",children:e.map((n,r)=>a.jsxs("div",{className:"border border-border/50 rounded-lg p-4 hover:bg-primary/10 transition-colors",children:[a.jsx("h3",{className:"font-semibold",children:n.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:n.description}),a.jsx(Y,{variant:"link",size:"sm",className:"p-0 h-auto mt-2",children:"Interact"})]},r))})]})})]}),a.jsxs("div",{className:"mt-8 glass-card p-6 backdrop-blur-xl",children:[a.jsx("h2",{className:"text-2xl font-semibold mb-4",children:"Next Steps"}),a.jsx("div",{className:"prose prose-invert max-w-none",children:a.jsxs("ul",{children:[a.jsx("li",{children:a.jsx("a",{href:"#",children:"Customize your Firebase Studio workspace"})}),a.jsx("li",{children:a.jsx("a",{href:"#",children:"Develop, publish, and monitor a full-stack web app with the App Prototyping agent"})})]})})]})]})})};function lW(){return LB(),a.jsx(NB,{children:a.jsxs(qO,{children:[a.jsx(Fn,{path:"/",component:Un(M8,"Dashboard")}),a.jsx(Fn,{path:"/social-feed",component:Un(K7,"Social Feed")}),a.jsx(Fn,{path:"/workflows",component:Un(X7,"Workflows")}),a.jsx(Fn,{path:"/ai-agents",component:Un(J7,"AI Agents")}),a.jsx(Fn,{path:"/telegram",component:Un(eH,"Telegram")}),a.jsx(Fn,{path:"/smart-learning",component:Un(EH,"Smart Learning")}),a.jsx(Fn,{path:"/advanced-ai-tools",component:Un(eW,"Advanced AI Tools")}),a.jsx(Fn,{path:"/learning",component:Un(sW,"Learning Dashboard")}),a.jsx(Fn,{path:"/debug",component:Un(oW,"Debug View")}),a.jsx(Fn,{path:"/workspace",component:Un(aW,"Workspace")}),a.jsx(Fn,{component:Un(iW,"Not Found")})]})})}function cW(){return a.jsx(AB,{children:a.jsx(gB,{children:a.jsx(hM,{client:SM,children:a.jsx(QV,{children:a.jsx(MN,{children:a.jsxs(CB,{shortcuts:RB,children:[a.jsx(w4,{}),a.jsx(lW,{})]})})})})})})}BS(document.getElementById("root")).render(a.jsx(cW,{}));
