import{r as l,p as k,j as t,n as me,P as I,s as X,q as N,z as P,E as fe,x as A,F as J,B as z,C as pe,h as be,a as ge,d as Se}from"./index-BV_oXJj9.js";import{u as ve}from"./header-KFQOFhpR.js";import{u as xe}from"./useMutation-CQub-guN.js";import{I as we}from"./input-BlCgWzo0.js";import{B as ye}from"./badge-T7TlEvDT.js";import{u as Ce}from"./index-Cw2EPXxj.js";import{c as je}from"./index-BdQq_4o_.js";import{A as L,a as Ee,b as _}from"./avatar-CL8PSgrs.js";function Re(e,n){return l.useReducer((r,s)=>n[r][s]??r,e)}var U="ScrollArea",[Q]=me(U),[Pe,C]=Q(U),Z=l.forwardRef((e,n)=>{const{__scopeScrollArea:r,type:s="hover",dir:o,scrollHideDelay:a=600,...c}=e,[i,d]=l.useState(null),[m,u]=l.useState(null),[p,f]=l.useState(null),[b,h]=l.useState(null),[g,w]=l.useState(null),[x,y]=l.useState(0),[v,R]=l.useState(0),[O,W]=l.useState(!1),[M,H]=l.useState(!1),S=k(n,T=>d(T)),j=Ce(o);return t.jsx(Pe,{scope:r,type:s,dir:j,scrollHideDelay:a,scrollArea:i,viewport:m,onViewportChange:u,content:p,onContentChange:f,scrollbarX:b,onScrollbarXChange:h,scrollbarXEnabled:O,onScrollbarXEnabledChange:W,scrollbarY:g,onScrollbarYChange:w,scrollbarYEnabled:M,onScrollbarYEnabledChange:H,onCornerWidthChange:y,onCornerHeightChange:R,children:t.jsx(I.div,{dir:j,...c,ref:S,style:{position:"relative","--radix-scroll-area-corner-width":x+"px","--radix-scroll-area-corner-height":v+"px",...e.style}})})});Z.displayName=U;var ee="ScrollAreaViewport",te=l.forwardRef((e,n)=>{const{__scopeScrollArea:r,children:s,nonce:o,...a}=e,c=C(ee,r),i=l.useRef(null),d=k(n,i,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),t.jsx(I.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});te.displayName=ee;var E="ScrollAreaScrollbar",V=l.forwardRef((e,n)=>{const{forceMount:r,...s}=e,o=C(E,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:c}=o,i=e.orientation==="horizontal";return l.useEffect(()=>(i?a(!0):c(!0),()=>{i?a(!1):c(!1)}),[i,a,c]),o.type==="hover"?t.jsx(Ne,{...s,ref:n,forceMount:r}):o.type==="scroll"?t.jsx(Te,{...s,ref:n,forceMount:r}):o.type==="auto"?t.jsx(re,{...s,ref:n,forceMount:r}):o.type==="always"?t.jsx(q,{...s,ref:n}):null});V.displayName=E;var Ne=l.forwardRef((e,n)=>{const{forceMount:r,...s}=e,o=C(E,e.__scopeScrollArea),[a,c]=l.useState(!1);return l.useEffect(()=>{const i=o.scrollArea;let d=0;if(i){const m=()=>{window.clearTimeout(d),c(!0)},u=()=>{d=window.setTimeout(()=>c(!1),o.scrollHideDelay)};return i.addEventListener("pointerenter",m),i.addEventListener("pointerleave",u),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",m),i.removeEventListener("pointerleave",u)}}},[o.scrollArea,o.scrollHideDelay]),t.jsx(X,{present:r||a,children:t.jsx(re,{"data-state":a?"visible":"hidden",...s,ref:n})})}),Te=l.forwardRef((e,n)=>{const{forceMount:r,...s}=e,o=C(E,e.__scopeScrollArea),a=e.orientation==="horizontal",c=B(()=>d("SCROLL_END"),100),[i,d]=Re("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return l.useEffect(()=>{if(i==="idle"){const m=window.setTimeout(()=>d("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(m)}},[i,o.scrollHideDelay,d]),l.useEffect(()=>{const m=o.viewport,u=a?"scrollLeft":"scrollTop";if(m){let p=m[u];const f=()=>{const b=m[u];p!==b&&(d("SCROLL"),c()),p=b};return m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)}},[o.viewport,a,d,c]),t.jsx(X,{present:r||i!=="hidden",children:t.jsx(q,{"data-state":i==="hidden"?"hidden":"visible",...s,ref:n,onPointerEnter:N(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:N(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),re=l.forwardRef((e,n)=>{const r=C(E,e.__scopeScrollArea),{forceMount:s,...o}=e,[a,c]=l.useState(!1),i=e.orientation==="horizontal",d=B(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,u=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?m:u)}},10);return D(r.viewport,d),D(r.content,d),t.jsx(X,{present:s||a,children:t.jsx(q,{"data-state":a?"visible":"hidden",...o,ref:n})})}),q=l.forwardRef((e,n)=>{const{orientation:r="vertical",...s}=e,o=C(E,e.__scopeScrollArea),a=l.useRef(null),c=l.useRef(0),[i,d]=l.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=le(i.viewport,i.content),u={...s,sizes:i,onSizesChange:d,hasThumb:m>0&&m<1,onThumbChange:f=>a.current=f,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:f=>c.current=f};function p(f,b){return _e(f,c.current,i,b)}return r==="horizontal"?t.jsx(Ae,{...u,ref:n,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollLeft,b=G(f,i,o.dir);a.current.style.transform=`translate3d(${b}px, 0, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollLeft=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollLeft=p(f,o.dir))}}):r==="vertical"?t.jsx(De,{...u,ref:n,onThumbPositionChange:()=>{if(o.viewport&&a.current){const f=o.viewport.scrollTop,b=G(f,i);a.current.style.transform=`translate3d(0, ${b}px, 0)`}},onWheelScroll:f=>{o.viewport&&(o.viewport.scrollTop=f)},onDragScroll:f=>{o.viewport&&(o.viewport.scrollTop=p(f))}}):null}),Ae=l.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...o}=e,a=C(E,e.__scopeScrollArea),[c,i]=l.useState(),d=l.useRef(null),m=k(n,d,a.onScrollbarXChange);return l.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(ne,{"data-orientation":"horizontal",...o,ref:m,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Y(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.x),onDragScroll:u=>e.onDragScroll(u.x),onWheelScroll:(u,p)=>{if(a.viewport){const f=a.viewport.scrollLeft+u.deltaX;e.onWheelScroll(f),ie(f,p)&&u.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&s({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:F(c.paddingLeft),paddingEnd:F(c.paddingRight)}})}})}),De=l.forwardRef((e,n)=>{const{sizes:r,onSizesChange:s,...o}=e,a=C(E,e.__scopeScrollArea),[c,i]=l.useState(),d=l.useRef(null),m=k(n,d,a.onScrollbarYChange);return l.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(ne,{"data-orientation":"vertical",...o,ref:m,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Y(r)+"px",...e.style},onThumbPointerDown:u=>e.onThumbPointerDown(u.y),onDragScroll:u=>e.onDragScroll(u.y),onWheelScroll:(u,p)=>{if(a.viewport){const f=a.viewport.scrollTop+u.deltaY;e.onWheelScroll(f),ie(f,p)&&u.preventDefault()}},onResize:()=>{d.current&&a.viewport&&c&&s({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:F(c.paddingTop),paddingEnd:F(c.paddingBottom)}})}})}),[ke,oe]=Q(E),ne=l.forwardRef((e,n)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:o,onThumbChange:a,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:u,onResize:p,...f}=e,b=C(E,r),[h,g]=l.useState(null),w=k(n,S=>g(S)),x=l.useRef(null),y=l.useRef(""),v=b.viewport,R=s.content-s.viewport,O=P(u),W=P(d),M=B(p,10);function H(S){if(x.current){const j=S.clientX-x.current.left,T=S.clientY-x.current.top;m({x:j,y:T})}}return l.useEffect(()=>{const S=j=>{const T=j.target;h?.contains(T)&&O(j,R)};return document.addEventListener("wheel",S,{passive:!1}),()=>document.removeEventListener("wheel",S,{passive:!1})},[v,h,R,O]),l.useEffect(W,[s,W]),D(h,M),D(b.content,M),t.jsx(ke,{scope:r,scrollbar:h,hasThumb:o,onThumbChange:P(a),onThumbPointerUp:P(c),onThumbPositionChange:W,onThumbPointerDown:P(i),children:t.jsx(I.div,{...f,ref:w,style:{position:"absolute",...f.style},onPointerDown:N(e.onPointerDown,S=>{S.button===0&&(S.target.setPointerCapture(S.pointerId),x.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",b.viewport&&(b.viewport.style.scrollBehavior="auto"),H(S))}),onPointerMove:N(e.onPointerMove,H),onPointerUp:N(e.onPointerUp,S=>{const j=S.target;j.hasPointerCapture(S.pointerId)&&j.releasePointerCapture(S.pointerId),document.body.style.webkitUserSelect=y.current,b.viewport&&(b.viewport.style.scrollBehavior=""),x.current=null})})})}),$="ScrollAreaThumb",se=l.forwardRef((e,n)=>{const{forceMount:r,...s}=e,o=oe($,e.__scopeScrollArea);return t.jsx(X,{present:r||o.hasThumb,children:t.jsx(We,{ref:n,...s})})}),We=l.forwardRef((e,n)=>{const{__scopeScrollArea:r,style:s,...o}=e,a=C($,r),c=oe($,r),{onThumbPositionChange:i}=c,d=k(n,p=>c.onThumbChange(p)),m=l.useRef(void 0),u=B(()=>{m.current&&(m.current(),m.current=void 0)},100);return l.useEffect(()=>{const p=a.viewport;if(p){const f=()=>{if(u(),!m.current){const b=Ie(p,i);m.current=b,i()}};return i(),p.addEventListener("scroll",f),()=>p.removeEventListener("scroll",f)}},[a.viewport,u,i]),t.jsx(I.div,{"data-state":c.hasThumb?"visible":"hidden",...o,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:N(e.onPointerDownCapture,p=>{const b=p.target.getBoundingClientRect(),h=p.clientX-b.left,g=p.clientY-b.top;c.onThumbPointerDown({x:h,y:g})}),onPointerUp:N(e.onPointerUp,c.onThumbPointerUp)})});se.displayName=$;var K="ScrollAreaCorner",ae=l.forwardRef((e,n)=>{const r=C(K,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?t.jsx(Le,{...e,ref:n}):null});ae.displayName=K;var Le=l.forwardRef((e,n)=>{const{__scopeScrollArea:r,...s}=e,o=C(K,r),[a,c]=l.useState(0),[i,d]=l.useState(0),m=!!(a&&i);return D(o.scrollbarX,()=>{const u=o.scrollbarX?.offsetHeight||0;o.onCornerHeightChange(u),d(u)}),D(o.scrollbarY,()=>{const u=o.scrollbarY?.offsetWidth||0;o.onCornerWidthChange(u),c(u)}),m?t.jsx(I.div,{...s,ref:n,style:{width:a,height:i,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function F(e){return e?parseInt(e,10):0}function le(e,n){const r=e/n;return isNaN(r)?0:r}function Y(e){const n=le(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*n;return Math.max(s,18)}function _e(e,n,r,s="ltr"){const o=Y(r),a=o/2,c=n||a,i=o-c,d=r.scrollbar.paddingStart+c,m=r.scrollbar.size-r.scrollbar.paddingEnd-i,u=r.content-r.viewport,p=s==="ltr"?[0,u]:[u*-1,0];return ce([d,m],p)(e)}function G(e,n,r="ltr"){const s=Y(n),o=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,a=n.scrollbar.size-o,c=n.content-n.viewport,i=a-s,d=r==="ltr"?[0,c]:[c*-1,0],m=je(e,d);return ce([0,c],[0,i])(m)}function ce(e,n){return r=>{if(e[0]===e[1]||n[0]===n[1])return n[0];const s=(n[1]-n[0])/(e[1]-e[0]);return n[0]+s*(r-e[0])}}function ie(e,n){return e>0&&e<n}var Ie=(e,n=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return(function o(){const a={left:e.scrollLeft,top:e.scrollTop},c=r.left!==a.left,i=r.top!==a.top;(c||i)&&n(),r=a,s=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(s)};function B(e,n){const r=P(e),s=l.useRef(0);return l.useEffect(()=>()=>window.clearTimeout(s.current),[]),l.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,n)},[r,n])}function D(e,n){const r=P(n);fe(()=>{let s=0;if(e){const o=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return o.observe(e),()=>{window.cancelAnimationFrame(s),o.unobserve(e)}}},[e,r])}var de=Z,Oe=te,Me=ae;const ue=l.forwardRef(({className:e,children:n,...r},s)=>t.jsxs(de,{ref:s,className:A("relative overflow-hidden",e),...r,children:[t.jsx(Oe,{className:"h-full w-full rounded-[inherit]",children:n}),t.jsx(he,{}),t.jsx(Me,{})]}));ue.displayName=de.displayName;const he=l.forwardRef(({className:e,orientation:n="vertical",...r},s)=>t.jsx(V,{ref:s,orientation:n,className:A("flex touch-none select-none transition-colors",n==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",n==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(se,{className:"relative flex-1 rounded-full bg-border"})}));he.displayName=V.displayName;const He={sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"};function ze({size:e="md",variant:n="default",className:r,text:s}){const o="animate-spin",a=He[e],c=()=>{switch(n){case"cyber":return"text-primary border-primary border-t-transparent";case"neon":return"text-primary border-primary border-t-transparent neon-glow-sm";case"pulse":return"text-primary animate-pulse";default:return"text-primary border-primary border-t-transparent"}};return n==="pulse"?t.jsxs("div",{className:A("flex items-center justify-center",r),children:[t.jsx("div",{className:A("rounded-full bg-primary",a,"animate-pulse")}),s&&t.jsx("span",{className:"ml-2 text-sm text-muted-foreground animate-pulse",children:s})]}):t.jsxs("div",{className:A("flex items-center justify-center",r),children:[t.jsx("div",{className:A("rounded-full border-2",a,o,c())}),s&&t.jsx("span",{className:"ml-2 text-sm text-muted-foreground",children:s})]})}function $e(e,n,r={}){const s=l.useRef(null),o=l.useRef(null),a=l.useRef(null),c=l.useRef(0),i=l.useRef(!1),[d,m]=l.useState(null),{reconnectInterval:u=3e3,maxReconnectAttempts:p=5,heartbeatInterval:f=3e4}=r,b=l.useCallback(()=>{if(!(s.current?.readyState===WebSocket.OPEN||s.current?.readyState===WebSocket.CONNECTING))try{let w;if(window.location.hostname!=="localhost")w=`wss://aios-97581.web.app${e}`;else{const y=window.location.protocol==="https:"?"wss:":"ws:",v=window.location.hostname==="localhost"?"localhost:8080":window.location.host;w=`${y}//${v}${e}`}console.log("Attempting WebSocket connection to:",w);const x=new WebSocket(w);s.current=x,x.onopen=()=>{console.log("âœ… WebSocket connected successfully"),c.current=0,i.current=!1,h()},x.onmessage=y=>{try{const v=JSON.parse(y.data);if(v.type==="pong")return;n(v)}catch(v){const R=`ERR-WS-${Date.now()}-${Math.floor(Math.random()*1e4)}`;m({message:"Failed to parse WebSocket message",errorId:R,stack:v.stack}),console.error(`[${R}] Failed to parse WebSocket message:`,v)}},x.onclose=y=>{if(console.log("WebSocket disconnected:",y.code,y.reason),a.current&&clearTimeout(a.current),!i.current&&c.current<p)c.current++,console.log(`Attempting reconnection ${c.current}/${p} in ${u}ms`),o.current=setTimeout(()=>{b()},u);else if(c.current>=p){const v=`ERR-WS-${Date.now()}-${Math.floor(Math.random()*1e4)}`;m({message:"Max reconnection attempts reached. WebSocket connection failed.",errorId:v}),console.error(`[${v}] Max reconnection attempts reached. WebSocket connection failed.`)}},x.onerror=y=>{const v=`ERR-WS-${Date.now()}-${Math.floor(Math.random()*1e4)}`;m({message:"WebSocket error",errorId:v,stack:y.stack}),console.error(`[${v}] WebSocket error:`,y)}}catch(w){const x=`ERR-WS-${Date.now()}-${Math.floor(Math.random()*1e4)}`;m({message:"Failed to create WebSocket connection",errorId:x,stack:w.stack}),console.error(`[${x}] Failed to create WebSocket connection:`,w)}},[e,n,u,p]),h=l.useCallback(()=>{const w=()=>{s.current?.readyState===WebSocket.OPEN&&(s.current.send(JSON.stringify({type:"ping",timestamp:Date.now()})),a.current=setTimeout(w,f))};a.current=setTimeout(w,f)},[f]),g=l.useCallback(()=>{i.current=!0,o.current&&clearTimeout(o.current),a.current&&clearTimeout(a.current),s.current&&(s.current.close(),s.current=null)},[]);return l.useEffect(()=>(b(),()=>{g()}),[b,g]),{connect:b,errorDetails:d}}function Ge(){const[e,n]=l.useState(!1),[r,s]=l.useState(""),[o,a]=l.useState([]),c=l.useRef(null),{isConnected:i}=$e("/ws",h=>{h?.type==="chat_message"&&a(g=>[...g,{id:h.id,type:"ai",content:h.content,timestamp:new Date(h.timestamp)}])}),{data:d,isError:m,error:u}=ve({queryKey:["/api/chat/history"],queryFn:()=>fetch("/api/chat/history?userId=user-1&limit=10").then(h=>{if(!h.ok)throw new Error("Failed to fetch chat history");return h.json()}),enabled:e});l.useEffect(()=>{m&&J.getInstance().handleError(u,{logToConsole:!0,reportToService:!0})},[m,u]);const p=xe({mutationFn:async h=>(await Se("POST","/api/chat",{message:h,userId:"user-1"})).json(),onSuccess:h=>{a(g=>[...g,{id:Date.now().toString(),type:"ai",content:h.response,timestamp:new Date}])},onError:h=>{J.getInstance().handleError(h,{logToConsole:!0,reportToService:!0})}}),f=()=>{if(!r.trim())return;const h={id:Date.now().toString(),type:"user",content:r,timestamp:new Date};a(g=>[...g,h]),p.mutate(r),s("")},b=h=>{h.key==="Enter"&&!h.shiftKey&&(h.preventDefault(),f())};return l.useEffect(()=>{c.current?.scrollIntoView({behavior:"smooth"})},[o]),l.useEffect(()=>{if(e&&(o.length===0&&a([{id:"welcome",type:"ai",content:"Hi! I'm your AI assistant. I can help you create content, set up automations, or analyze your social media performance. What would you like to do?",timestamp:new Date}]),d&&o.length<=1)){const h=d.map(g=>({id:g.id,type:g.role,content:g.message,timestamp:new Date(g.timestamp)}));a(g=>[g[0],...h])}},[e,d]),t.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:t.jsxs("div",{className:"relative",children:[t.jsx(z,{className:"w-14 h-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 group",onClick:()=>n(h=>!h),"aria-expanded":e,"aria-controls":"chat-widget","aria-label":e?"Close chat":"Open chat","data-testid":"button-toggle-chat",children:t.jsx("i",{className:`fas ${e?"fa-times":"fa-robot"} text-lg group-hover:scale-110 transition-transform`})}),e&&t.jsxs(pe,{id:"chat-widget",className:"absolute bottom-16 right-0 w-80 shadow-xl glass-card neon-glow-md chat-card","data-testid":"chat-widget",role:"dialog","aria-label":"AI chat widget",children:[t.jsx(be,{className:"p-4 border-b chat-header",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs(L,{className:"w-8 h-8 chat-avatar",children:[t.jsx(Ee,{src:"",alt:"AI Assistant"}),t.jsx(_,{className:"bg-gradient-to-r from-primary to-accent text-primary-foreground",children:t.jsx("i",{className:"fas fa-robot text-sm"})})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("h4",{className:"font-medium text-foreground",children:"AI Assistant"}),t.jsx(ye,{variant:i?"default":"destructive",className:"text-xs",children:i?"Online":"Offline"})]}),t.jsx(z,{variant:"ghost",size:"sm",onClick:()=>n(!1),"data-testid":"button-close-chat","aria-label":"Close chat",children:t.jsx("i",{className:"fas fa-times"})})]})}),t.jsxs(ge,{className:"p-0 chat-content",children:[t.jsx(ue,{className:"h-60 p-4 cyber-scrollbar",children:t.jsxs("div",{className:"space-y-3","aria-live":"polite","aria-relevant":"additions",children:[o.map(h=>t.jsxs("div",{className:`flex items-end gap-3 ${h.type==="user"?"justify-end":"justify-start"}`,children:[h.type==="ai"&&t.jsx(L,{className:"w-7 h-7 flex-shrink-0 chat-message-avatar",children:t.jsx(_,{className:"bg-primary text-primary-foreground",children:t.jsx("i",{className:"fas fa-robot text-xs"})})}),t.jsxs("div",{className:`chat-bubble ${h.type==="user"?"user":"ai"}`,children:[t.jsx("div",{className:"chat-bubble-content",children:h.content}),t.jsx("div",{className:"chat-bubble-meta",children:t.jsx("time",{className:"chat-timestamp",dateTime:h.timestamp.toISOString(),children:h.timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})})]}),h.type==="user"&&t.jsx(L,{className:"w-7 h-7 flex-shrink-0 chat-message-avatar user-avatar",children:t.jsx(_,{className:"bg-accent text-accent-foreground",children:"U"})})]},h.id)),p.isPending&&t.jsxs("div",{className:"flex gap-3 justify-start items-center",children:[t.jsx(L,{className:"w-7 h-7 flex-shrink-0 chat-message-avatar",children:t.jsx(_,{className:"bg-primary text-primary-foreground",children:t.jsx("i",{className:"fas fa-robot text-xs"})})}),t.jsx("div",{className:"chat-bubble ai",children:t.jsx("div",{className:"chat-bubble-content",children:t.jsx(ze,{size:"sm",variant:"cyber",text:"AI is thinking..."})})})]}),p.isError&&t.jsxs("div",{className:"flex gap-3 justify-start items-center",children:[t.jsx(L,{className:"w-7 h-7 flex-shrink-0 chat-message-avatar",children:t.jsx(_,{className:"bg-destructive text-destructive-foreground",children:t.jsx("i",{className:"fas fa-exclamation-triangle text-xs"})})}),t.jsx("div",{className:"chat-bubble error",children:t.jsxs("div",{className:"chat-bubble-content",children:[t.jsx("p",{className:"font-medium",children:"Error sending message"}),t.jsx("p",{className:"text-xs mt-1",children:p.error?.message||"Please try again"}),t.jsx(z,{variant:"ghost",size:"sm",onClick:()=>p.reset(),className:"mt-2 h-6 text-xs",children:"Try Again"})]})})]}),t.jsx("div",{ref:c})]})}),t.jsxs("div",{className:"p-4 border-t chat-input-area",children:[t.jsx("label",{htmlFor:"chat-input",className:"sr-only",children:"Type a message"}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(we,{id:"chat-input",placeholder:"Type a message...",value:r,onChange:h=>s(h.target.value),onKeyDown:b,disabled:p.isPending,className:"neon-input chat-input","aria-label":"Message input"}),t.jsx(z,{onClick:f,disabled:p.isPending||!r.trim(),className:"neon-button chat-send-button","aria-label":"Send message",children:t.jsx("i",{className:"fas fa-paper-plane"})})]})]})]})]})]})})}export{Ge as C};
