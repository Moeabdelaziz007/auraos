import{T as $,a0 as F,a1 as d,U as C,a2 as y,_ as E,a3 as I,a4 as D,a5 as K,a6 as w,a7 as Z,a8 as q,a9 as L,Z as z,r as m,$ as G,b as J,aa as X,l as Y,j as a,ab as ee,x as te,S as se,B as W}from"./index-BV_oXJj9.js";import{A as ae,a as re,b as ie}from"./avatar-CL8PSgrs.js";var ne=class extends ${constructor(e,t){super(),this.options=t,this.#s=e,this.#r=null,this.#a=F(),this.bindMethods(),this.setOptions(t)}#s;#e=void 0;#p=void 0;#t=void 0;#n;#h;#a;#r;#m;#u;#d;#o;#l;#i;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),A(this.#e,this.options)?this.#c():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return T(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return T(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#y(),this.#R(),this.#e.removeObserver(this)}setOptions(e){const t=this.options,s=this.#e;if(this.options=this.#s.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof d(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#e.setOptions(this.options),t._defaulted&&!C(this.options,t)&&this.#s.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&B(this.#e,s,this.options,t)&&this.#c(),this.updateResult(),r&&(this.#e!==s||d(this.options.enabled,this.#e)!==d(t.enabled,this.#e)||y(this.options.staleTime,this.#e)!==y(t.staleTime,this.#e))&&this.#g();const i=this.#b();r&&(this.#e!==s||d(this.options.enabled,this.#e)!==d(t.enabled,this.#e)||i!==this.#i)&&this.#x(i)}getOptimisticResult(e){const t=this.#s.getQueryCache().build(this.#s,e),s=this.createResult(t,e);return le(this,s)&&(this.#t=s,this.#h=this.options,this.#n=this.#e.state),s}getCurrentResult(){return this.#t}trackResult(e,t){return new Proxy(e,{get:(s,r)=>(this.trackProp(r),t?.(r),r==="promise"&&!this.options.experimental_prefetchInRender&&this.#a.status==="pending"&&this.#a.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),Reflect.get(s,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#s.defaultQueryOptions(e),s=this.#s.getQueryCache().build(this.#s,t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){return this.#c({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#t))}#c(e){this.#S();let t=this.#e.fetch(this.options,e);return e?.throwOnError||(t=t.catch(E)),t}#g(){this.#y();const e=y(this.options.staleTime,this.#e);if(I||this.#t.isStale||!D(e))return;const s=K(this.#t.dataUpdatedAt,e)+1;this.#o=w.setTimeout(()=>{this.#t.isStale||this.updateResult()},s)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#x(e){this.#R(),this.#i=e,!(I||d(this.options.enabled,this.#e)===!1||!D(this.#i)||this.#i===0)&&(this.#l=w.setInterval(()=>{(this.options.refetchIntervalInBackground||Z.isFocused())&&this.#c()},this.#i))}#v(){this.#g(),this.#x(this.#b())}#y(){this.#o&&(w.clearTimeout(this.#o),this.#o=void 0)}#R(){this.#l&&(w.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const s=this.#e,r=this.options,i=this.#t,o=this.#n,n=this.#h,c=e!==s?e.state:this.#p,{state:f}=e;let l={...f},v=!1,h;if(t._optimisticResults){const u=this.hasListeners(),R=!u&&A(e,t),x=u&&B(e,s,t,r);(R||x)&&(l={...l,...q(f.data,e.options)}),t._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:M,errorUpdatedAt:U,status:g}=l;h=l.data;let _=!1;if(t.placeholderData!==void 0&&h===void 0&&g==="pending"){let u;i?.isPlaceholderData&&t.placeholderData===n?.placeholderData?(u=i.data,_=!0):u=typeof t.placeholderData=="function"?t.placeholderData(this.#d?.state.data,this.#d):t.placeholderData,u!==void 0&&(g="success",h=L(i?.data,u,t),v=!0)}if(t.select&&h!==void 0&&!_)if(i&&h===o?.data&&t.select===this.#m)h=this.#u;else try{this.#m=t.select,h=t.select(h),h=L(i?.data,h,t),this.#u=h,this.#r=null}catch(u){this.#r=u}this.#r&&(M=this.#r,h=this.#u,U=Date.now(),g="error");const N=l.fetchStatus==="fetching",j=g==="pending",O=g==="error",P=j&&N,k=h!==void 0,p={status:g,fetchStatus:l.fetchStatus,isPending:j,isSuccess:g==="success",isError:O,isInitialLoading:P,isLoading:P,data:h,dataUpdatedAt:l.dataUpdatedAt,error:M,errorUpdatedAt:U,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>c.dataUpdateCount||l.errorUpdateCount>c.errorUpdateCount,isFetching:N,isRefetching:N&&!j,isLoadingError:O&&!k,isPaused:l.fetchStatus==="paused",isPlaceholderData:v,isRefetchError:O&&k,isStale:Q(e,t),refetch:this.refetch,promise:this.#a,isEnabled:d(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const u=S=>{p.status==="error"?S.reject(p.error):p.data!==void 0&&S.resolve(p.data)},R=()=>{const S=this.#a=p.promise=F();u(S)},x=this.#a;switch(x.status){case"pending":e.queryHash===s.queryHash&&u(x);break;case"fulfilled":(p.status==="error"||p.data!==x.value)&&R();break;case"rejected":(p.status!=="error"||p.error!==x.reason)&&R();break}}return p}updateResult(){const e=this.#t,t=this.createResult(this.#e,this.options);if(this.#n=this.#e.state,this.#h=this.options,this.#n.data!==void 0&&(this.#d=this.#e),C(t,e))return;this.#t=t;const s=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,i=typeof r=="function"?r():r;if(i==="all"||!i&&!this.#f.size)return!0;const o=new Set(i??this.#f);return this.options.throwOnError&&o.add("error"),Object.keys(this.#t).some(n=>{const b=n;return this.#t[b]!==e[b]&&o.has(b)})};this.#w({listeners:s()})}#S(){const e=this.#s.getQueryCache().build(this.#s,this.options);if(e===this.#e)return;const t=this.#e;this.#e=e,this.#p=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#w(e){z.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#t)}),this.#s.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function oe(e,t){return d(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function A(e,t){return oe(e,t)||e.state.data!==void 0&&T(e,t,t.refetchOnMount)}function T(e,t,s){if(d(t.enabled,e)!==!1&&y(t.staleTime,e)!=="static"){const r=typeof s=="function"?s(e):s;return r==="always"||r!==!1&&Q(e,t)}return!1}function B(e,t,s,r){return(e!==t||d(r.enabled,e)===!1)&&(!s.suspense||e.state.status!=="error")&&Q(e,s)}function Q(e,t){return d(t.enabled,e)!==!1&&e.isStaleByTime(y(t.staleTime,e))}function le(e,t){return!C(e.getCurrentResult(),t)}var V=m.createContext(!1),ce=()=>m.useContext(V);V.Provider;function he(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var ue=m.createContext(he()),de=()=>m.useContext(ue),fe=(e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))},pe=e=>{m.useEffect(()=>{e.clearReset()},[e])},me=({result:e,errorResetBoundary:t,throwOnError:s,query:r,suspense:i})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&(i&&e.data===void 0||G(s,[e.error,r])),ge=e=>{if(e.suspense){const s=i=>i==="static"?i:Math.max(i??1e3,1e3),r=e.staleTime;e.staleTime=typeof r=="function"?(...i)=>s(r(...i)):s(r),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},be=(e,t)=>e.isLoading&&e.isFetching&&!t,xe=(e,t)=>e?.suspense&&t.isPending,H=(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()});function ve(e,t,s){const r=ce(),i=de(),o=J(),n=o.defaultQueryOptions(e);o.getDefaultOptions().queries?._experimental_beforeQuery?.(n),n._optimisticResults=r?"isRestoring":"optimistic",ge(n),fe(n,i),pe(i);const b=!o.getQueryCache().get(n.queryHash),[c]=m.useState(()=>new t(o,n)),f=c.getOptimisticResult(n),l=!r&&e.subscribed!==!1;if(m.useSyncExternalStore(m.useCallback(v=>{const h=l?c.subscribe(z.batchCalls(v)):E;return c.updateResult(),h},[c,l]),()=>c.getCurrentResult(),()=>c.getCurrentResult()),m.useEffect(()=>{c.setOptions(n)},[n,c]),xe(n,f))throw H(n,c,i);if(me({result:f,errorResetBoundary:i,throwOnError:n.throwOnError,query:o.getQueryCache().get(n.queryHash),suspense:n.suspense}))throw f.error;return o.getDefaultOptions().queries?._experimental_afterQuery?.(n,f),n.experimental_prefetchInRender&&!I&&be(f,r)&&(b?H(n,c,i):o.getQueryCache().get(n.queryHash)?.promise)?.catch(E).finally(()=>{c.updateResult()}),n.notifyOnChangeProps?f:c.trackResult(f)}function ye(e,t){return ve(e,ne)}const Re=[{name:"Dashboard",href:"/",icon:"fas fa-home"},{name:"Social Feed",href:"/social-feed",icon:"fas fa-users",hasNotification:!0},{name:"Workflows",href:"/workflows",icon:"fas fa-project-diagram"},{name:"AI Agents",href:"/ai-agents",icon:"fas fa-robot"},{name:"MCP Tools",href:"/mcp-tools",icon:"fas fa-puzzle-piece",hasNotification:!0},{name:"Prompt Library",href:"/prompt-library",icon:"fas fa-book",hasNotification:!0},{name:"Learning",href:"/learning",icon:"fas fa-graduation-cap",hasNotification:!0},{name:"Smart Learning",href:"/smart-learning",icon:"fas fa-brain"},{name:"AI Tools",href:"/advanced-ai-tools",icon:"fas fa-tools"},{name:"Telegram",href:"/telegram",icon:"fab fa-telegram"},{name:"Analytics",href:"/analytics",icon:"fas fa-chart-bar"},{name:"Settings",href:"/settings",icon:"fas fa-cog"},{name:"Debug",href:"/debug",icon:"fas fa-bug"},{name:"Workspace",href:"/workspace",icon:"fas fa-star"}];function je(){const[e]=X(),{user:t,signOut:s}=Y(),{data:r}=ye({queryKey:["userData",t?.uid],queryFn:()=>t?.uid?Promise.resolve({displayName:t.displayName,email:t.email}):null,enabled:!!t?.uid}),i=async()=>{try{await s()}catch(o){console.error("Sign out error:",o)}};return a.jsxs("div",{className:"sidebar w-64 glass-card border-r border-border/50 flex flex-col backdrop-blur-xl cyber-scrollbar",children:[a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"w-10 h-10 gradient-cyber-primary rounded-xl flex items-center justify-center neon-glow-lg animate-neon-pulse",children:a.jsx("i",{className:"fas fa-robot text-white text-lg"})}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"font-bold text-xl neon-text animate-neon-flicker",children:"AuraOS"}),a.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:"v2.0"})]})]})}),a.jsx("nav",{className:"flex-1 px-4 pb-4",children:a.jsx("ul",{className:"space-y-2",children:Re.map(o=>{const n=e===o.href;return a.jsx("li",{children:a.jsx(ee,{href:o.href,children:a.jsxs("a",{className:te("flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 group relative overflow-hidden",n?"gradient-cyber-primary text-white neon-glow-lg animate-neon-pulse":"text-muted-foreground hover:text-foreground hover:bg-primary/10 hover:neon-glow-sm hover:border-primary/30 border border-transparent"),"data-testid":`nav-${o.name.toLowerCase().replace(" ","-")}`,children:[a.jsx("i",{className:`${o.icon} w-5 transition-transform duration-300 group-hover:scale-110`}),a.jsx("span",{className:"font-medium",children:o.name}),o.hasNotification&&a.jsx("div",{className:"ml-auto w-2 h-2 bg-accent rounded-full animate-neon-pulse neon-glow-sm"}),n&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-cyber-scan"})]})})},o.name)})})}),a.jsx(se,{className:"bg-border/30"}),a.jsx("div",{className:"p-4",children:a.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-xl hover:bg-primary/10 transition-all duration-300 group",children:[a.jsxs(ae,{className:"w-10 h-10 border border-primary/30 neon-glow-sm group-hover:neon-glow-md transition-all duration-300",children:[a.jsx(re,{src:t?.photoURL||void 0,alt:t?.displayName||"User"}),a.jsx(ie,{className:"bg-gradient-to-r from-primary/20 to-accent/20 text-primary font-bold",children:t?.displayName?.split(" ").map(o=>o[0]).join("")||t?.email?.[0]?.toUpperCase()||"U"})]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-medium text-foreground truncate neon-text","data-testid":"text-user-name",children:t?.displayName||t?.email||"User"}),a.jsx("p",{className:"text-xs text-muted-foreground truncate","data-testid":"text-user-email",children:t?.email||"user@example.com"})]}),a.jsx(W,{variant:"ghost",size:"sm",onClick:i,"data-testid":"button-sign-out",title:"Sign Out",className:"hover:bg-primary/20 hover:text-primary transition-all duration-300 neon-glow-sm hover:neon-glow-md",children:a.jsx("i",{className:"fas fa-sign-out-alt"})})]})})]})}function Oe({title:e,subtitle:t,actions:s}){return a.jsx("header",{className:"glass-card border-b border-border/50 px-6 py-4 backdrop-blur-xl",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold neon-text animate-neon-flicker","data-testid":"text-page-title",children:e}),t&&a.jsx("p",{className:"text-sm text-muted-foreground mt-1","data-testid":"text-page-subtitle",children:t})]}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsxs(W,{variant:"ghost",size:"sm",className:"relative neon-glow-sm hover:neon-glow-md transition-all duration-300","data-testid":"button-notifications",children:[a.jsx("i",{className:"fas fa-bell text-lg"}),a.jsx("span",{className:"absolute -top-1 -right-1 w-3 h-3 bg-accent rounded-full animate-neon-pulse neon-glow-sm"})]}),s]})]})})}export{Oe as H,je as S,ye as u};
