import{r as i,m as ee,j as e,n as te,o as N,p as j,P as p,q as m,s as y,t as oe,v as ae,D as se,w as ne,x,X as re,B as _,y as ie,C as P}from"./index-BdF0wB4m.js";import{u as le,S as ce,H as de}from"./header-DfVXD6a-.js";import{P as ue}from"./post-card-3TzRbFr_.js";import{h as fe,R as ge,u as me,F as pe}from"./index-C91KYPOD.js";import{T as xe}from"./textarea-DKqlMEEa.js";import{C as he}from"./chat-widget-D1sWfHwD.js";import"./avatar-BW0cCfpN.js";import"./separator-CsgOszTx.js";import"./useMutation-dZ9J-NgO.js";import"./badge-2Nww2oRF.js";import"./input-Bzq6Zs0b.js";import"./index-DrzI-Bpy.js";import"./index-BdQq_4o_.js";var v="Dialog",[E]=te(v),[ve,d]=E(v),O=t=>{const{__scopeDialog:o,children:a,open:n,defaultOpen:r,onOpenChange:s,modal:l=!0}=t,c=i.useRef(null),u=i.useRef(null),[g,D]=ee({prop:n,defaultProp:r??!1,onChange:s,caller:v});return e.jsx(ve,{scope:o,triggerRef:c,contentRef:u,contentId:N(),titleId:N(),descriptionId:N(),open:g,onOpenChange:D,onOpenToggle:i.useCallback(()=>D(J=>!J),[D]),modal:l,children:a})};O.displayName=v;var I="DialogTrigger",T=i.forwardRef((t,o)=>{const{__scopeDialog:a,...n}=t,r=d(I,a),s=j(o,r.triggerRef);return e.jsx(p.button,{type:"button","aria-haspopup":"dialog","aria-expanded":r.open,"aria-controls":r.contentId,"data-state":b(r.open),...n,ref:s,onClick:m(t.onClick,r.onOpenToggle)})});T.displayName=I;var C="DialogPortal",[De,A]=E(C,{forceMount:void 0}),S=t=>{const{__scopeDialog:o,forceMount:a,children:n,container:r}=t,s=d(C,o);return e.jsx(De,{scope:o,forceMount:a,children:i.Children.map(n,l=>e.jsx(y,{present:a||s.open,children:e.jsx(oe,{asChild:!0,container:r,children:l})}))})};S.displayName=C;var h="DialogOverlay",M=i.forwardRef((t,o)=>{const a=A(h,t.__scopeDialog),{forceMount:n=a.forceMount,...r}=t,s=d(h,t.__scopeDialog);return s.modal?e.jsx(y,{present:n||s.open,children:e.jsx(je,{...r,ref:o})}):null});M.displayName=h;var Ne=ae("DialogOverlay.RemoveScroll"),je=i.forwardRef((t,o)=>{const{__scopeDialog:a,...n}=t,r=d(h,a);return e.jsx(ge,{as:Ne,allowPinchZoom:!0,shards:[r.contentRef],children:e.jsx(p.div,{"data-state":b(r.open),...n,ref:o,style:{pointerEvents:"auto",...n.style}})})}),f="DialogContent",F=i.forwardRef((t,o)=>{const a=A(f,t.__scopeDialog),{forceMount:n=a.forceMount,...r}=t,s=d(f,t.__scopeDialog);return e.jsx(y,{present:n||s.open,children:s.modal?e.jsx(ye,{...r,ref:o}):e.jsx(Ce,{...r,ref:o})})});F.displayName=f;var ye=i.forwardRef((t,o)=>{const a=d(f,t.__scopeDialog),n=i.useRef(null),r=j(o,a.contentRef,n);return i.useEffect(()=>{const s=n.current;if(s)return fe(s)},[]),e.jsx(k,{...t,ref:r,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:m(t.onCloseAutoFocus,s=>{var l;s.preventDefault(),(l=a.triggerRef.current)==null||l.focus()}),onPointerDownOutside:m(t.onPointerDownOutside,s=>{const l=s.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0;(l.button===2||c)&&s.preventDefault()}),onFocusOutside:m(t.onFocusOutside,s=>s.preventDefault())})}),Ce=i.forwardRef((t,o)=>{const a=d(f,t.__scopeDialog),n=i.useRef(!1),r=i.useRef(!1);return e.jsx(k,{...t,ref:o,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:s=>{var l,c;(l=t.onCloseAutoFocus)==null||l.call(t,s),s.defaultPrevented||(n.current||(c=a.triggerRef.current)==null||c.focus(),s.preventDefault()),n.current=!1,r.current=!1},onInteractOutside:s=>{var u,g;(u=t.onInteractOutside)==null||u.call(t,s),s.defaultPrevented||(n.current=!0,s.detail.originalEvent.type==="pointerdown"&&(r.current=!0));const l=s.target;((g=a.triggerRef.current)==null?void 0:g.contains(l))&&s.preventDefault(),s.detail.originalEvent.type==="focusin"&&r.current&&s.preventDefault()}})}),k=i.forwardRef((t,o)=>{const{__scopeDialog:a,trapFocus:n,onOpenAutoFocus:r,onCloseAutoFocus:s,...l}=t,c=d(f,a),u=i.useRef(null),g=j(o,u);return me(),e.jsxs(e.Fragment,{children:[e.jsx(pe,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:r,onUnmountAutoFocus:s,children:e.jsx(se,{role:"dialog",id:c.contentId,"aria-describedby":c.descriptionId,"aria-labelledby":c.titleId,"data-state":b(c.open),...l,ref:g,onDismiss:()=>c.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(Re,{titleId:c.titleId}),e.jsx(_e,{contentRef:u,descriptionId:c.descriptionId})]})]})}),R="DialogTitle",W=i.forwardRef((t,o)=>{const{__scopeDialog:a,...n}=t,r=d(R,a);return e.jsx(p.h2,{id:r.titleId,...n,ref:o})});W.displayName=R;var $="DialogDescription",L=i.forwardRef((t,o)=>{const{__scopeDialog:a,...n}=t,r=d($,a);return e.jsx(p.p,{id:r.descriptionId,...n,ref:o})});L.displayName=$;var G="DialogClose",B=i.forwardRef((t,o)=>{const{__scopeDialog:a,...n}=t,r=d(G,a);return e.jsx(p.button,{type:"button",...n,ref:o,onClick:m(t.onClick,()=>r.onOpenChange(!1))})});B.displayName=G;function b(t){return t?"open":"closed"}var H="DialogTitleWarning",[Qe,z]=ne(H,{contentName:f,titleName:R,docsSlug:"dialog"}),Re=({titleId:t})=>{const o=z(H),a=`\`${o.contentName}\` requires a \`${o.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${o.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${o.docsSlug}`;return i.useEffect(()=>{t&&(document.getElementById(t)||console.error(a))},[a,t]),null},be="DialogDescriptionWarning",_e=({contentRef:t,descriptionId:o})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${z(be).contentName}}.`;return i.useEffect(()=>{var s;const r=(s=t.current)==null?void 0:s.getAttribute("aria-describedby");o&&r&&(document.getElementById(o)||console.warn(n))},[n,t,o]),null},Pe=O,we=T,Ee=S,q=M,K=F,V=W,Q=L,Oe=B;const Ie=Pe,Te=we,Ae=Ee,U=i.forwardRef(({className:t,...o},a)=>e.jsx(q,{ref:a,className:x("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...o}));U.displayName=q.displayName;const X=i.forwardRef(({className:t,children:o,...a},n)=>e.jsxs(Ae,{children:[e.jsx(U,{}),e.jsxs(K,{ref:n,className:x("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...a,children:[o,e.jsxs(Oe,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(re,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));X.displayName=K.displayName;const Y=({className:t,...o})=>e.jsx("div",{className:x("flex flex-col space-y-1.5 text-center sm:text-left",t),...o});Y.displayName="DialogHeader";const Z=i.forwardRef(({className:t,...o},a)=>e.jsx(V,{ref:a,className:x("text-lg font-semibold leading-none tracking-tight",t),...o}));Z.displayName=V.displayName;const Se=i.forwardRef(({className:t,...o},a)=>e.jsx(Q,{ref:a,className:x("text-sm text-muted-foreground",t),...o}));Se.displayName=Q.displayName;const w=()=>{const[t,o]=i.useState(!1),[a,n]=i.useState(""),r=()=>{ie("create_post",{post_length:a.length}),o(!1)};return e.jsxs(Ie,{open:t,onOpenChange:o,children:[e.jsx(Te,{asChild:!0,children:e.jsx(_,{children:"Create Post"})}),e.jsxs(X,{children:[e.jsx(Y,{children:e.jsx(Z,{children:"Create a new post"})}),e.jsx(xe,{placeholder:"What's on your mind?",value:a,onChange:s=>n(s.target.value)}),e.jsx(_,{onClick:r,children:"Post"})]})]})};function Ue(){const{data:t,isLoading:o}=le({queryKey:["/api/posts"]});return e.jsxs("div",{className:"flex h-screen overflow-hidden bg-background",children:[e.jsx(ce,{}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx(de,{title:"Social Feed",subtitle:"Engage with your community and share content",actions:e.jsx(w,{})}),e.jsx("main",{className:"flex-1 overflow-auto",children:e.jsx("div",{className:"p-6 max-w-4xl mx-auto",children:o?e.jsx("div",{className:"space-y-6",children:Array.from({length:5}).map((a,n)=>e.jsx(P,{className:"p-6",children:e.jsxs("div",{className:"animate-pulse space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded-full"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-1/4"}),e.jsx("div",{className:"h-3 bg-muted rounded w-1/6"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-4 bg-muted rounded w-full"}),e.jsx("div",{className:"h-4 bg-muted rounded w-3/4"})]}),e.jsx("div",{className:"h-48 bg-muted rounded"})]})},n))}):t!=null&&t.length?e.jsx("div",{className:"space-y-6",children:t.map(a=>e.jsx(ue,{post:a},a.id))}):e.jsx(P,{className:"p-12 text-center",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("i",{className:"fas fa-comments text-4xl text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:"No posts yet"}),e.jsx("p",{className:"text-muted-foreground",children:"Be the first to share something with the community!"})]}),e.jsx(w,{})]})})})})]}),e.jsx(he,{})]})}export{Ue as default};
